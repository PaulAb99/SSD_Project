function Ky(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var zC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function om(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function FC(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var Yy={exports:{}},gu={},Jy={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ha=Symbol.for("react.element"),VC=Symbol.for("react.portal"),qC=Symbol.for("react.fragment"),HC=Symbol.for("react.strict_mode"),WC=Symbol.for("react.profiler"),ZC=Symbol.for("react.provider"),GC=Symbol.for("react.context"),KC=Symbol.for("react.forward_ref"),YC=Symbol.for("react.suspense"),JC=Symbol.for("react.memo"),QC=Symbol.for("react.lazy"),c0=Symbol.iterator;function XC(t){return t===null||typeof t!="object"?null:(t=c0&&t[c0]||t["@@iterator"],typeof t=="function"?t:null)}var Qy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Xy=Object.assign,ex={};function uo(t,e,n){this.props=t,this.context=e,this.refs=ex,this.updater=n||Qy}uo.prototype.isReactComponent={};uo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};uo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function tx(){}tx.prototype=uo.prototype;function am(t,e,n){this.props=t,this.context=e,this.refs=ex,this.updater=n||Qy}var lm=am.prototype=new tx;lm.constructor=am;Xy(lm,uo.prototype);lm.isPureReactComponent=!0;var u0=Array.isArray,nx=Object.prototype.hasOwnProperty,cm={current:null},rx={key:!0,ref:!0,__self:!0,__source:!0};function ix(t,e,n){var r,i={},o=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)nx.call(e,r)&&!rx.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){for(var d=Array(u),f=0;f<u;f++)d[f]=arguments[f+2];i.children=d}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)i[r]===void 0&&(i[r]=u[r]);return{$$typeof:Ha,type:t,key:o,ref:a,props:i,_owner:cm.current}}function eP(t,e){return{$$typeof:Ha,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function um(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ha}function tP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var d0=/\/+/g;function Ed(t,e){return typeof t=="object"&&t!==null&&t.key!=null?tP(""+t.key):e.toString(36)}function oc(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Ha:case VC:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+Ed(a,0):r,u0(i)?(n="",t!=null&&(n=t.replace(d0,"$&/")+"/"),oc(i,e,n,"",function(f){return f})):i!=null&&(um(i)&&(i=eP(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(d0,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",u0(t))for(var u=0;u<t.length;u++){o=t[u];var d=r+Ed(o,u);a+=oc(o,e,n,d,i)}else if(d=XC(t),typeof d=="function")for(t=d.call(t),u=0;!(o=t.next()).done;)o=o.value,d=r+Ed(o,u++),a+=oc(o,e,n,d,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function El(t,e,n){if(t==null)return t;var r=[],i=0;return oc(t,r,"","",function(o){return e.call(n,o,i++)}),r}function nP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var qt={current:null},ac={transition:null},rP={ReactCurrentDispatcher:qt,ReactCurrentBatchConfig:ac,ReactCurrentOwner:cm};function sx(){throw Error("act(...) is not supported in production builds of React.")}Pe.Children={map:El,forEach:function(t,e,n){El(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return El(t,function(){e++}),e},toArray:function(t){return El(t,function(e){return e})||[]},only:function(t){if(!um(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Pe.Component=uo;Pe.Fragment=qC;Pe.Profiler=WC;Pe.PureComponent=am;Pe.StrictMode=HC;Pe.Suspense=YC;Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rP;Pe.act=sx;Pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Xy({},t.props),i=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=cm.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(d in e)nx.call(e,d)&&!rx.hasOwnProperty(d)&&(r[d]=e[d]===void 0&&u!==void 0?u[d]:e[d])}var d=arguments.length-2;if(d===1)r.children=n;else if(1<d){u=Array(d);for(var f=0;f<d;f++)u[f]=arguments[f+2];r.children=u}return{$$typeof:Ha,type:t.type,key:i,ref:o,props:r,_owner:a}};Pe.createContext=function(t){return t={$$typeof:GC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ZC,_context:t},t.Consumer=t};Pe.createElement=ix;Pe.createFactory=function(t){var e=ix.bind(null,t);return e.type=t,e};Pe.createRef=function(){return{current:null}};Pe.forwardRef=function(t){return{$$typeof:KC,render:t}};Pe.isValidElement=um;Pe.lazy=function(t){return{$$typeof:QC,_payload:{_status:-1,_result:t},_init:nP}};Pe.memo=function(t,e){return{$$typeof:JC,type:t,compare:e===void 0?null:e}};Pe.startTransition=function(t){var e=ac.transition;ac.transition={};try{t()}finally{ac.transition=e}};Pe.unstable_act=sx;Pe.useCallback=function(t,e){return qt.current.useCallback(t,e)};Pe.useContext=function(t){return qt.current.useContext(t)};Pe.useDebugValue=function(){};Pe.useDeferredValue=function(t){return qt.current.useDeferredValue(t)};Pe.useEffect=function(t,e){return qt.current.useEffect(t,e)};Pe.useId=function(){return qt.current.useId()};Pe.useImperativeHandle=function(t,e,n){return qt.current.useImperativeHandle(t,e,n)};Pe.useInsertionEffect=function(t,e){return qt.current.useInsertionEffect(t,e)};Pe.useLayoutEffect=function(t,e){return qt.current.useLayoutEffect(t,e)};Pe.useMemo=function(t,e){return qt.current.useMemo(t,e)};Pe.useReducer=function(t,e,n){return qt.current.useReducer(t,e,n)};Pe.useRef=function(t){return qt.current.useRef(t)};Pe.useState=function(t){return qt.current.useState(t)};Pe.useSyncExternalStore=function(t,e,n){return qt.current.useSyncExternalStore(t,e,n)};Pe.useTransition=function(){return qt.current.useTransition()};Pe.version="18.3.1";Jy.exports=Pe;var E=Jy.exports;const nr=om(E),iP=Ky({__proto__:null,default:nr},[E]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sP=E,oP=Symbol.for("react.element"),aP=Symbol.for("react.fragment"),lP=Object.prototype.hasOwnProperty,cP=sP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,uP={key:!0,ref:!0,__self:!0,__source:!0};function ox(t,e,n){var r,i={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)lP.call(e,r)&&!uP.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:oP,type:t,key:o,ref:a,props:i,_owner:cP.current}}gu.Fragment=aP;gu.jsx=ox;gu.jsxs=ox;Yy.exports=gu;var c=Yy.exports,Th={},ax={exports:{}},hn={},lx={exports:{}},cx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,H){var U=D.length;D.push(H);e:for(;0<U;){var O=U-1>>>1,Y=D[O];if(0<i(Y,H))D[O]=H,D[U]=Y,U=O;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var H=D[0],U=D.pop();if(U!==H){D[0]=U;e:for(var O=0,Y=D.length,ce=Y>>>1;O<ce;){var ge=2*(O+1)-1,we=D[ge],te=ge+1,Se=D[te];if(0>i(we,U))te<Y&&0>i(Se,we)?(D[O]=Se,D[te]=U,O=te):(D[O]=we,D[ge]=U,O=ge);else if(te<Y&&0>i(Se,U))D[O]=Se,D[te]=U,O=te;else break e}}return H}function i(D,H){var U=D.sortIndex-H.sortIndex;return U!==0?U:D.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var d=[],f=[],m=1,g=null,v=3,w=!1,_=!1,k=!1,j=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(D){for(var H=n(f);H!==null;){if(H.callback===null)r(f);else if(H.startTime<=D)r(f),H.sortIndex=H.expirationTime,e(d,H);else break;H=n(f)}}function N(D){if(k=!1,b(D),!_)if(n(d)!==null)_=!0,M(R);else{var H=n(f);H!==null&&ee(N,H.startTime-D)}}function R(D,H){_=!1,k&&(k=!1,S(F),F=-1),w=!0;var U=v;try{for(b(H),g=n(d);g!==null&&(!(g.expirationTime>H)||D&&!ne());){var O=g.callback;if(typeof O=="function"){g.callback=null,v=g.priorityLevel;var Y=O(g.expirationTime<=H);H=t.unstable_now(),typeof Y=="function"?g.callback=Y:g===n(d)&&r(d),b(H)}else r(d);g=n(d)}if(g!==null)var ce=!0;else{var ge=n(f);ge!==null&&ee(N,ge.startTime-H),ce=!1}return ce}finally{g=null,v=U,w=!1}}var B=!1,I=null,F=-1,$=5,X=-1;function ne(){return!(t.unstable_now()-X<$)}function Q(){if(I!==null){var D=t.unstable_now();X=D;var H=!0;try{H=I(!0,D)}finally{H?W():(B=!1,I=null)}}else B=!1}var W;if(typeof x=="function")W=function(){x(Q)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,ue=q.port2;q.port1.onmessage=Q,W=function(){ue.postMessage(null)}}else W=function(){j(Q,0)};function M(D){I=D,B||(B=!0,W())}function ee(D,H){F=j(function(){D(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){_||w||(_=!0,M(R))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(D){switch(v){case 1:case 2:case 3:var H=3;break;default:H=v}var U=v;v=H;try{return D()}finally{v=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,H){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var U=v;v=D;try{return H()}finally{v=U}},t.unstable_scheduleCallback=function(D,H,U){var O=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?O+U:O):U=O,D){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=U+Y,D={id:m++,callback:H,priorityLevel:D,startTime:U,expirationTime:Y,sortIndex:-1},U>O?(D.sortIndex=U,e(f,D),n(d)===null&&D===n(f)&&(k?(S(F),F=-1):k=!0,ee(N,U-O))):(D.sortIndex=Y,e(d,D),_||w||(_=!0,M(R))),D},t.unstable_shouldYield=ne,t.unstable_wrapCallback=function(D){var H=v;return function(){var U=v;v=H;try{return D.apply(this,arguments)}finally{v=U}}}})(cx);lx.exports=cx;var dP=lx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hP=E,ln=dP;function J(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ux=new Set,wa={};function Qi(t,e){Ys(t,e),Ys(t+"Capture",e)}function Ys(t,e){for(wa[t]=e,t=0;t<e.length;t++)ux.add(e[t])}var _r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lh=Object.prototype.hasOwnProperty,fP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h0={},f0={};function mP(t){return Lh.call(f0,t)?!0:Lh.call(h0,t)?!1:fP.test(t)?f0[t]=!0:(h0[t]=!0,!1)}function pP(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function gP(t,e,n,r){if(e===null||typeof e>"u"||pP(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ht(t,e,n,r,i,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var jt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){jt[t]=new Ht(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];jt[e]=new Ht(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){jt[t]=new Ht(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){jt[t]=new Ht(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){jt[t]=new Ht(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){jt[t]=new Ht(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){jt[t]=new Ht(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){jt[t]=new Ht(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){jt[t]=new Ht(t,5,!1,t.toLowerCase(),null,!1,!1)});var dm=/[\-:]([a-z])/g;function hm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(dm,hm);jt[e]=new Ht(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(dm,hm);jt[e]=new Ht(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(dm,hm);jt[e]=new Ht(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){jt[t]=new Ht(t,1,!1,t.toLowerCase(),null,!1,!1)});jt.xlinkHref=new Ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){jt[t]=new Ht(t,1,!1,t.toLowerCase(),null,!0,!0)});function fm(t,e,n,r){var i=jt.hasOwnProperty(e)?jt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(gP(e,n,i,r)&&(n=null),r||i===null?mP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Pr=hP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jl=Symbol.for("react.element"),Ss=Symbol.for("react.portal"),Cs=Symbol.for("react.fragment"),mm=Symbol.for("react.strict_mode"),Rh=Symbol.for("react.profiler"),dx=Symbol.for("react.provider"),hx=Symbol.for("react.context"),pm=Symbol.for("react.forward_ref"),Ah=Symbol.for("react.suspense"),Oh=Symbol.for("react.suspense_list"),gm=Symbol.for("react.memo"),Rr=Symbol.for("react.lazy"),fx=Symbol.for("react.offscreen"),m0=Symbol.iterator;function Bo(t){return t===null||typeof t!="object"?null:(t=m0&&t[m0]||t["@@iterator"],typeof t=="function"?t:null)}var et=Object.assign,jd;function Ko(t){if(jd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);jd=e&&e[1]||""}return`
`+jd+t}var Nd=!1;function Td(t,e){if(!t||Nd)return"";Nd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var r=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){r=f}t.call(e.prototype)}else{try{throw Error()}catch(f){r=f}t()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,u=o.length-1;1<=a&&0<=u&&i[a]!==o[u];)u--;for(;1<=a&&0<=u;a--,u--)if(i[a]!==o[u]){if(a!==1||u!==1)do if(a--,u--,0>u||i[a]!==o[u]){var d=`
`+i[a].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=a&&0<=u);break}}}finally{Nd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ko(t):""}function vP(t){switch(t.tag){case 5:return Ko(t.type);case 16:return Ko("Lazy");case 13:return Ko("Suspense");case 19:return Ko("SuspenseList");case 0:case 2:case 15:return t=Td(t.type,!1),t;case 11:return t=Td(t.type.render,!1),t;case 1:return t=Td(t.type,!0),t;default:return""}}function Ih(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Cs:return"Fragment";case Ss:return"Portal";case Rh:return"Profiler";case mm:return"StrictMode";case Ah:return"Suspense";case Oh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case hx:return(t.displayName||"Context")+".Consumer";case dx:return(t._context.displayName||"Context")+".Provider";case pm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case gm:return e=t.displayName||null,e!==null?e:Ih(t.type)||"Memo";case Rr:e=t._payload,t=t._init;try{return Ih(t(e))}catch{}}return null}function wP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ih(e);case 8:return e===mm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ii(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function mx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function yP(t){var e=mx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Nl(t){t._valueTracker||(t._valueTracker=yP(t))}function px(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=mx(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function _c(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Mh(t,e){var n=e.checked;return et({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function p0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ii(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gx(t,e){e=e.checked,e!=null&&fm(t,"checked",e,!1)}function Dh(t,e){gx(t,e);var n=ii(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Bh(t,e.type,n):e.hasOwnProperty("defaultValue")&&Bh(t,e.type,ii(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function g0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Bh(t,e,n){(e!=="number"||_c(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Yo=Array.isArray;function Us(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ii(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function $h(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(J(91));return et({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function v0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(J(92));if(Yo(n)){if(1<n.length)throw Error(J(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ii(n)}}function vx(t,e){var n=ii(e.value),r=ii(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function w0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function wx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Uh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?wx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Tl,yx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Tl=Tl||document.createElement("div"),Tl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Tl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ya(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ta={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xP=["Webkit","ms","Moz","O"];Object.keys(ta).forEach(function(t){xP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ta[e]=ta[t]})});function xx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ta.hasOwnProperty(t)&&ta[t]?(""+e).trim():e+"px"}function _x(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=xx(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var _P=et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zh(t,e){if(e){if(_P[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(J(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(J(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(J(61))}if(e.style!=null&&typeof e.style!="object")throw Error(J(62))}}function Fh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vh=null;function vm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qh=null,zs=null,Fs=null;function y0(t){if(t=Ga(t)){if(typeof qh!="function")throw Error(J(280));var e=t.stateNode;e&&(e=_u(e),qh(t.stateNode,t.type,e))}}function bx(t){zs?Fs?Fs.push(t):Fs=[t]:zs=t}function kx(){if(zs){var t=zs,e=Fs;if(Fs=zs=null,y0(t),e)for(t=0;t<e.length;t++)y0(e[t])}}function Sx(t,e){return t(e)}function Cx(){}var Ld=!1;function Px(t,e,n){if(Ld)return t(e,n);Ld=!0;try{return Sx(t,e,n)}finally{Ld=!1,(zs!==null||Fs!==null)&&(Cx(),kx())}}function xa(t,e){var n=t.stateNode;if(n===null)return null;var r=_u(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(J(231,e,typeof n));return n}var Hh=!1;if(_r)try{var $o={};Object.defineProperty($o,"passive",{get:function(){Hh=!0}}),window.addEventListener("test",$o,$o),window.removeEventListener("test",$o,$o)}catch{Hh=!1}function bP(t,e,n,r,i,o,a,u,d){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(m){this.onError(m)}}var na=!1,bc=null,kc=!1,Wh=null,kP={onError:function(t){na=!0,bc=t}};function SP(t,e,n,r,i,o,a,u,d){na=!1,bc=null,bP.apply(kP,arguments)}function CP(t,e,n,r,i,o,a,u,d){if(SP.apply(this,arguments),na){if(na){var f=bc;na=!1,bc=null}else throw Error(J(198));kc||(kc=!0,Wh=f)}}function Xi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ex(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function x0(t){if(Xi(t)!==t)throw Error(J(188))}function PP(t){var e=t.alternate;if(!e){if(e=Xi(t),e===null)throw Error(J(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return x0(i),t;if(o===r)return x0(i),e;o=o.sibling}throw Error(J(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,u=i.child;u;){if(u===n){a=!0,n=i,r=o;break}if(u===r){a=!0,r=i,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,r=i;break}if(u===r){a=!0,r=o,n=i;break}u=u.sibling}if(!a)throw Error(J(189))}}if(n.alternate!==r)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?t:e}function jx(t){return t=PP(t),t!==null?Nx(t):null}function Nx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Nx(t);if(e!==null)return e;t=t.sibling}return null}var Tx=ln.unstable_scheduleCallback,_0=ln.unstable_cancelCallback,EP=ln.unstable_shouldYield,jP=ln.unstable_requestPaint,st=ln.unstable_now,NP=ln.unstable_getCurrentPriorityLevel,wm=ln.unstable_ImmediatePriority,Lx=ln.unstable_UserBlockingPriority,Sc=ln.unstable_NormalPriority,TP=ln.unstable_LowPriority,Rx=ln.unstable_IdlePriority,vu=null,Xn=null;function LP(t){if(Xn&&typeof Xn.onCommitFiberRoot=="function")try{Xn.onCommitFiberRoot(vu,t,void 0,(t.current.flags&128)===128)}catch{}}var zn=Math.clz32?Math.clz32:OP,RP=Math.log,AP=Math.LN2;function OP(t){return t>>>=0,t===0?32:31-(RP(t)/AP|0)|0}var Ll=64,Rl=4194304;function Jo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Cc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~i;u!==0?r=Jo(u):(o&=a,o!==0&&(r=Jo(o)))}else a=n&~i,a!==0?r=Jo(a):o!==0&&(r=Jo(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-zn(e),i=1<<n,r|=t[n],e&=~i;return r}function IP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function MP(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-zn(o),u=1<<a,d=i[a];d===-1?(!(u&n)||u&r)&&(i[a]=IP(u,e)):d<=e&&(t.expiredLanes|=u),o&=~u}}function Zh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ax(){var t=Ll;return Ll<<=1,!(Ll&4194240)&&(Ll=64),t}function Rd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Wa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zn(e),t[e]=n}function DP(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-zn(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function ym(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-zn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ie=0;function Ox(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ix,xm,Mx,Dx,Bx,Gh=!1,Al=[],Hr=null,Wr=null,Zr=null,_a=new Map,ba=new Map,Dr=[],BP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function b0(t,e){switch(t){case"focusin":case"focusout":Hr=null;break;case"dragenter":case"dragleave":Wr=null;break;case"mouseover":case"mouseout":Zr=null;break;case"pointerover":case"pointerout":_a.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ba.delete(e.pointerId)}}function Uo(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Ga(e),e!==null&&xm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function $P(t,e,n,r,i){switch(e){case"focusin":return Hr=Uo(Hr,t,e,n,r,i),!0;case"dragenter":return Wr=Uo(Wr,t,e,n,r,i),!0;case"mouseover":return Zr=Uo(Zr,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return _a.set(o,Uo(_a.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,ba.set(o,Uo(ba.get(o)||null,t,e,n,r,i)),!0}return!1}function $x(t){var e=Ii(t.target);if(e!==null){var n=Xi(e);if(n!==null){if(e=n.tag,e===13){if(e=Ex(n),e!==null){t.blockedOn=e,Bx(t.priority,function(){Mx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function lc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Kh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Vh=r,n.target.dispatchEvent(r),Vh=null}else return e=Ga(n),e!==null&&xm(e),t.blockedOn=n,!1;e.shift()}return!0}function k0(t,e,n){lc(t)&&n.delete(e)}function UP(){Gh=!1,Hr!==null&&lc(Hr)&&(Hr=null),Wr!==null&&lc(Wr)&&(Wr=null),Zr!==null&&lc(Zr)&&(Zr=null),_a.forEach(k0),ba.forEach(k0)}function zo(t,e){t.blockedOn===e&&(t.blockedOn=null,Gh||(Gh=!0,ln.unstable_scheduleCallback(ln.unstable_NormalPriority,UP)))}function ka(t){function e(i){return zo(i,t)}if(0<Al.length){zo(Al[0],t);for(var n=1;n<Al.length;n++){var r=Al[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Hr!==null&&zo(Hr,t),Wr!==null&&zo(Wr,t),Zr!==null&&zo(Zr,t),_a.forEach(e),ba.forEach(e),n=0;n<Dr.length;n++)r=Dr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Dr.length&&(n=Dr[0],n.blockedOn===null);)$x(n),n.blockedOn===null&&Dr.shift()}var Vs=Pr.ReactCurrentBatchConfig,Pc=!0;function zP(t,e,n,r){var i=Ie,o=Vs.transition;Vs.transition=null;try{Ie=1,_m(t,e,n,r)}finally{Ie=i,Vs.transition=o}}function FP(t,e,n,r){var i=Ie,o=Vs.transition;Vs.transition=null;try{Ie=4,_m(t,e,n,r)}finally{Ie=i,Vs.transition=o}}function _m(t,e,n,r){if(Pc){var i=Kh(t,e,n,r);if(i===null)Fd(t,e,r,Ec,n),b0(t,r);else if($P(i,t,e,n,r))r.stopPropagation();else if(b0(t,r),e&4&&-1<BP.indexOf(t)){for(;i!==null;){var o=Ga(i);if(o!==null&&Ix(o),o=Kh(t,e,n,r),o===null&&Fd(t,e,r,Ec,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Fd(t,e,r,null,n)}}var Ec=null;function Kh(t,e,n,r){if(Ec=null,t=vm(r),t=Ii(t),t!==null)if(e=Xi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ex(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ec=t,null}function Ux(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(NP()){case wm:return 1;case Lx:return 4;case Sc:case TP:return 16;case Rx:return 536870912;default:return 16}default:return 16}}var Ur=null,bm=null,cc=null;function zx(){if(cc)return cc;var t,e=bm,n=e.length,r,i="value"in Ur?Ur.value:Ur.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[o-r];r++);return cc=i.slice(t,1<r?1-r:void 0)}function uc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ol(){return!0}function S0(){return!1}function fn(t){function e(n,r,i,o,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ol:S0,this.isPropagationStopped=S0,this}return et(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ol)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ol)},persist:function(){},isPersistent:Ol}),e}var ho={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},km=fn(ho),Za=et({},ho,{view:0,detail:0}),VP=fn(Za),Ad,Od,Fo,wu=et({},Za,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Fo&&(Fo&&t.type==="mousemove"?(Ad=t.screenX-Fo.screenX,Od=t.screenY-Fo.screenY):Od=Ad=0,Fo=t),Ad)},movementY:function(t){return"movementY"in t?t.movementY:Od}}),C0=fn(wu),qP=et({},wu,{dataTransfer:0}),HP=fn(qP),WP=et({},Za,{relatedTarget:0}),Id=fn(WP),ZP=et({},ho,{animationName:0,elapsedTime:0,pseudoElement:0}),GP=fn(ZP),KP=et({},ho,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),YP=fn(KP),JP=et({},ho,{data:0}),P0=fn(JP),QP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=eE[t])?!!e[t]:!1}function Sm(){return tE}var nE=et({},Za,{key:function(t){if(t.key){var e=QP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=uc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?XP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sm,charCode:function(t){return t.type==="keypress"?uc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?uc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rE=fn(nE),iE=et({},wu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E0=fn(iE),sE=et({},Za,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sm}),oE=fn(sE),aE=et({},ho,{propertyName:0,elapsedTime:0,pseudoElement:0}),lE=fn(aE),cE=et({},wu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),uE=fn(cE),dE=[9,13,27,32],Cm=_r&&"CompositionEvent"in window,ra=null;_r&&"documentMode"in document&&(ra=document.documentMode);var hE=_r&&"TextEvent"in window&&!ra,Fx=_r&&(!Cm||ra&&8<ra&&11>=ra),j0=String.fromCharCode(32),N0=!1;function Vx(t,e){switch(t){case"keyup":return dE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ps=!1;function fE(t,e){switch(t){case"compositionend":return qx(e);case"keypress":return e.which!==32?null:(N0=!0,j0);case"textInput":return t=e.data,t===j0&&N0?null:t;default:return null}}function mE(t,e){if(Ps)return t==="compositionend"||!Cm&&Vx(t,e)?(t=zx(),cc=bm=Ur=null,Ps=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Fx&&e.locale!=="ko"?null:e.data;default:return null}}var pE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function T0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!pE[t.type]:e==="textarea"}function Hx(t,e,n,r){bx(r),e=jc(e,"onChange"),0<e.length&&(n=new km("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ia=null,Sa=null;function gE(t){n_(t,0)}function yu(t){var e=Ns(t);if(px(e))return t}function vE(t,e){if(t==="change")return e}var Wx=!1;if(_r){var Md;if(_r){var Dd="oninput"in document;if(!Dd){var L0=document.createElement("div");L0.setAttribute("oninput","return;"),Dd=typeof L0.oninput=="function"}Md=Dd}else Md=!1;Wx=Md&&(!document.documentMode||9<document.documentMode)}function R0(){ia&&(ia.detachEvent("onpropertychange",Zx),Sa=ia=null)}function Zx(t){if(t.propertyName==="value"&&yu(Sa)){var e=[];Hx(e,Sa,t,vm(t)),Px(gE,e)}}function wE(t,e,n){t==="focusin"?(R0(),ia=e,Sa=n,ia.attachEvent("onpropertychange",Zx)):t==="focusout"&&R0()}function yE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return yu(Sa)}function xE(t,e){if(t==="click")return yu(e)}function _E(t,e){if(t==="input"||t==="change")return yu(e)}function bE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Vn=typeof Object.is=="function"?Object.is:bE;function Ca(t,e){if(Vn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Lh.call(e,i)||!Vn(t[i],e[i]))return!1}return!0}function A0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function O0(t,e){var n=A0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=A0(n)}}function Gx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Gx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Kx(){for(var t=window,e=_c();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=_c(t.document)}return e}function Pm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function kE(t){var e=Kx(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Gx(n.ownerDocument.documentElement,n)){if(r!==null&&Pm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=O0(n,o);var a=O0(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var SE=_r&&"documentMode"in document&&11>=document.documentMode,Es=null,Yh=null,sa=null,Jh=!1;function I0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Jh||Es==null||Es!==_c(r)||(r=Es,"selectionStart"in r&&Pm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),sa&&Ca(sa,r)||(sa=r,r=jc(Yh,"onSelect"),0<r.length&&(e=new km("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Es)))}function Il(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var js={animationend:Il("Animation","AnimationEnd"),animationiteration:Il("Animation","AnimationIteration"),animationstart:Il("Animation","AnimationStart"),transitionend:Il("Transition","TransitionEnd")},Bd={},Yx={};_r&&(Yx=document.createElement("div").style,"AnimationEvent"in window||(delete js.animationend.animation,delete js.animationiteration.animation,delete js.animationstart.animation),"TransitionEvent"in window||delete js.transitionend.transition);function xu(t){if(Bd[t])return Bd[t];if(!js[t])return t;var e=js[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Yx)return Bd[t]=e[n];return t}var Jx=xu("animationend"),Qx=xu("animationiteration"),Xx=xu("animationstart"),e_=xu("transitionend"),t_=new Map,M0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function li(t,e){t_.set(t,e),Qi(e,[t])}for(var $d=0;$d<M0.length;$d++){var Ud=M0[$d],CE=Ud.toLowerCase(),PE=Ud[0].toUpperCase()+Ud.slice(1);li(CE,"on"+PE)}li(Jx,"onAnimationEnd");li(Qx,"onAnimationIteration");li(Xx,"onAnimationStart");li("dblclick","onDoubleClick");li("focusin","onFocus");li("focusout","onBlur");li(e_,"onTransitionEnd");Ys("onMouseEnter",["mouseout","mouseover"]);Ys("onMouseLeave",["mouseout","mouseover"]);Ys("onPointerEnter",["pointerout","pointerover"]);Ys("onPointerLeave",["pointerout","pointerover"]);Qi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),EE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qo));function D0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,CP(r,e,void 0,t),t.currentTarget=null}function n_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var u=r[a],d=u.instance,f=u.currentTarget;if(u=u.listener,d!==o&&i.isPropagationStopped())break e;D0(i,u,f),o=d}else for(a=0;a<r.length;a++){if(u=r[a],d=u.instance,f=u.currentTarget,u=u.listener,d!==o&&i.isPropagationStopped())break e;D0(i,u,f),o=d}}}if(kc)throw t=Wh,kc=!1,Wh=null,t}function Ve(t,e){var n=e[nf];n===void 0&&(n=e[nf]=new Set);var r=t+"__bubble";n.has(r)||(r_(e,t,2,!1),n.add(r))}function zd(t,e,n){var r=0;e&&(r|=4),r_(n,t,r,e)}var Ml="_reactListening"+Math.random().toString(36).slice(2);function Pa(t){if(!t[Ml]){t[Ml]=!0,ux.forEach(function(n){n!=="selectionchange"&&(EE.has(n)||zd(n,!1,t),zd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ml]||(e[Ml]=!0,zd("selectionchange",!1,e))}}function r_(t,e,n,r){switch(Ux(e)){case 1:var i=zP;break;case 4:i=FP;break;default:i=_m}n=i.bind(null,e,n,t),i=void 0,!Hh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Fd(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var u=r.stateNode.containerInfo;if(u===i||u.nodeType===8&&u.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var d=a.tag;if((d===3||d===4)&&(d=a.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;a=a.return}for(;u!==null;){if(a=Ii(u),a===null)return;if(d=a.tag,d===5||d===6){r=o=a;continue e}u=u.parentNode}}r=r.return}Px(function(){var f=o,m=vm(n),g=[];e:{var v=t_.get(t);if(v!==void 0){var w=km,_=t;switch(t){case"keypress":if(uc(n)===0)break e;case"keydown":case"keyup":w=rE;break;case"focusin":_="focus",w=Id;break;case"focusout":_="blur",w=Id;break;case"beforeblur":case"afterblur":w=Id;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=C0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=HP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=oE;break;case Jx:case Qx:case Xx:w=GP;break;case e_:w=lE;break;case"scroll":w=VP;break;case"wheel":w=uE;break;case"copy":case"cut":case"paste":w=YP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=E0}var k=(e&4)!==0,j=!k&&t==="scroll",S=k?v!==null?v+"Capture":null:v;k=[];for(var x=f,b;x!==null;){b=x;var N=b.stateNode;if(b.tag===5&&N!==null&&(b=N,S!==null&&(N=xa(x,S),N!=null&&k.push(Ea(x,N,b)))),j)break;x=x.return}0<k.length&&(v=new w(v,_,null,n,m),g.push({event:v,listeners:k}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",v&&n!==Vh&&(_=n.relatedTarget||n.fromElement)&&(Ii(_)||_[br]))break e;if((w||v)&&(v=m.window===m?m:(v=m.ownerDocument)?v.defaultView||v.parentWindow:window,w?(_=n.relatedTarget||n.toElement,w=f,_=_?Ii(_):null,_!==null&&(j=Xi(_),_!==j||_.tag!==5&&_.tag!==6)&&(_=null)):(w=null,_=f),w!==_)){if(k=C0,N="onMouseLeave",S="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(k=E0,N="onPointerLeave",S="onPointerEnter",x="pointer"),j=w==null?v:Ns(w),b=_==null?v:Ns(_),v=new k(N,x+"leave",w,n,m),v.target=j,v.relatedTarget=b,N=null,Ii(m)===f&&(k=new k(S,x+"enter",_,n,m),k.target=b,k.relatedTarget=j,N=k),j=N,w&&_)t:{for(k=w,S=_,x=0,b=k;b;b=ms(b))x++;for(b=0,N=S;N;N=ms(N))b++;for(;0<x-b;)k=ms(k),x--;for(;0<b-x;)S=ms(S),b--;for(;x--;){if(k===S||S!==null&&k===S.alternate)break t;k=ms(k),S=ms(S)}k=null}else k=null;w!==null&&B0(g,v,w,k,!1),_!==null&&j!==null&&B0(g,j,_,k,!0)}}e:{if(v=f?Ns(f):window,w=v.nodeName&&v.nodeName.toLowerCase(),w==="select"||w==="input"&&v.type==="file")var R=vE;else if(T0(v))if(Wx)R=_E;else{R=yE;var B=wE}else(w=v.nodeName)&&w.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(R=xE);if(R&&(R=R(t,f))){Hx(g,R,n,m);break e}B&&B(t,v,f),t==="focusout"&&(B=v._wrapperState)&&B.controlled&&v.type==="number"&&Bh(v,"number",v.value)}switch(B=f?Ns(f):window,t){case"focusin":(T0(B)||B.contentEditable==="true")&&(Es=B,Yh=f,sa=null);break;case"focusout":sa=Yh=Es=null;break;case"mousedown":Jh=!0;break;case"contextmenu":case"mouseup":case"dragend":Jh=!1,I0(g,n,m);break;case"selectionchange":if(SE)break;case"keydown":case"keyup":I0(g,n,m)}var I;if(Cm)e:{switch(t){case"compositionstart":var F="onCompositionStart";break e;case"compositionend":F="onCompositionEnd";break e;case"compositionupdate":F="onCompositionUpdate";break e}F=void 0}else Ps?Vx(t,n)&&(F="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(F="onCompositionStart");F&&(Fx&&n.locale!=="ko"&&(Ps||F!=="onCompositionStart"?F==="onCompositionEnd"&&Ps&&(I=zx()):(Ur=m,bm="value"in Ur?Ur.value:Ur.textContent,Ps=!0)),B=jc(f,F),0<B.length&&(F=new P0(F,t,null,n,m),g.push({event:F,listeners:B}),I?F.data=I:(I=qx(n),I!==null&&(F.data=I)))),(I=hE?fE(t,n):mE(t,n))&&(f=jc(f,"onBeforeInput"),0<f.length&&(m=new P0("onBeforeInput","beforeinput",null,n,m),g.push({event:m,listeners:f}),m.data=I))}n_(g,e)})}function Ea(t,e,n){return{instance:t,listener:e,currentTarget:n}}function jc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=xa(t,n),o!=null&&r.unshift(Ea(t,o,i)),o=xa(t,e),o!=null&&r.push(Ea(t,o,i))),t=t.return}return r}function ms(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function B0(t,e,n,r,i){for(var o=e._reactName,a=[];n!==null&&n!==r;){var u=n,d=u.alternate,f=u.stateNode;if(d!==null&&d===r)break;u.tag===5&&f!==null&&(u=f,i?(d=xa(n,o),d!=null&&a.unshift(Ea(n,d,u))):i||(d=xa(n,o),d!=null&&a.push(Ea(n,d,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var jE=/\r\n?/g,NE=/\u0000|\uFFFD/g;function $0(t){return(typeof t=="string"?t:""+t).replace(jE,`
`).replace(NE,"")}function Dl(t,e,n){if(e=$0(e),$0(t)!==e&&n)throw Error(J(425))}function Nc(){}var Qh=null,Xh=null;function ef(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var tf=typeof setTimeout=="function"?setTimeout:void 0,TE=typeof clearTimeout=="function"?clearTimeout:void 0,U0=typeof Promise=="function"?Promise:void 0,LE=typeof queueMicrotask=="function"?queueMicrotask:typeof U0<"u"?function(t){return U0.resolve(null).then(t).catch(RE)}:tf;function RE(t){setTimeout(function(){throw t})}function Vd(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ka(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ka(e)}function Gr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function z0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var fo=Math.random().toString(36).slice(2),Qn="__reactFiber$"+fo,ja="__reactProps$"+fo,br="__reactContainer$"+fo,nf="__reactEvents$"+fo,AE="__reactListeners$"+fo,OE="__reactHandles$"+fo;function Ii(t){var e=t[Qn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[br]||n[Qn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=z0(t);t!==null;){if(n=t[Qn])return n;t=z0(t)}return e}t=n,n=t.parentNode}return null}function Ga(t){return t=t[Qn]||t[br],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ns(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(J(33))}function _u(t){return t[ja]||null}var rf=[],Ts=-1;function ci(t){return{current:t}}function qe(t){0>Ts||(t.current=rf[Ts],rf[Ts]=null,Ts--)}function Ue(t,e){Ts++,rf[Ts]=t.current,t.current=e}var si={},Mt=ci(si),Yt=ci(!1),Hi=si;function Js(t,e){var n=t.type.contextTypes;if(!n)return si;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Jt(t){return t=t.childContextTypes,t!=null}function Tc(){qe(Yt),qe(Mt)}function F0(t,e,n){if(Mt.current!==si)throw Error(J(168));Ue(Mt,e),Ue(Yt,n)}function i_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(J(108,wP(t)||"Unknown",i));return et({},n,r)}function Lc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||si,Hi=Mt.current,Ue(Mt,t),Ue(Yt,Yt.current),!0}function V0(t,e,n){var r=t.stateNode;if(!r)throw Error(J(169));n?(t=i_(t,e,Hi),r.__reactInternalMemoizedMergedChildContext=t,qe(Yt),qe(Mt),Ue(Mt,t)):qe(Yt),Ue(Yt,n)}var hr=null,bu=!1,qd=!1;function s_(t){hr===null?hr=[t]:hr.push(t)}function IE(t){bu=!0,s_(t)}function ui(){if(!qd&&hr!==null){qd=!0;var t=0,e=Ie;try{var n=hr;for(Ie=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}hr=null,bu=!1}catch(i){throw hr!==null&&(hr=hr.slice(t+1)),Tx(wm,ui),i}finally{Ie=e,qd=!1}}return null}var Ls=[],Rs=0,Rc=null,Ac=0,Sn=[],Cn=0,Wi=null,fr=1,mr="";function Pi(t,e){Ls[Rs++]=Ac,Ls[Rs++]=Rc,Rc=t,Ac=e}function o_(t,e,n){Sn[Cn++]=fr,Sn[Cn++]=mr,Sn[Cn++]=Wi,Wi=t;var r=fr;t=mr;var i=32-zn(r)-1;r&=~(1<<i),n+=1;var o=32-zn(e)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,fr=1<<32-zn(e)+i|n<<i|r,mr=o+t}else fr=1<<o|n<<i|r,mr=t}function Em(t){t.return!==null&&(Pi(t,1),o_(t,1,0))}function jm(t){for(;t===Rc;)Rc=Ls[--Rs],Ls[Rs]=null,Ac=Ls[--Rs],Ls[Rs]=null;for(;t===Wi;)Wi=Sn[--Cn],Sn[Cn]=null,mr=Sn[--Cn],Sn[Cn]=null,fr=Sn[--Cn],Sn[Cn]=null}var an=null,on=null,Ge=!1,Un=null;function a_(t,e){var n=Pn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function q0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,an=t,on=Gr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,an=t,on=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Wi!==null?{id:fr,overflow:mr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,an=t,on=null,!0):!1;default:return!1}}function sf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function of(t){if(Ge){var e=on;if(e){var n=e;if(!q0(t,e)){if(sf(t))throw Error(J(418));e=Gr(n.nextSibling);var r=an;e&&q0(t,e)?a_(r,n):(t.flags=t.flags&-4097|2,Ge=!1,an=t)}}else{if(sf(t))throw Error(J(418));t.flags=t.flags&-4097|2,Ge=!1,an=t}}}function H0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;an=t}function Bl(t){if(t!==an)return!1;if(!Ge)return H0(t),Ge=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ef(t.type,t.memoizedProps)),e&&(e=on)){if(sf(t))throw l_(),Error(J(418));for(;e;)a_(t,e),e=Gr(e.nextSibling)}if(H0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){on=Gr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}on=null}}else on=an?Gr(t.stateNode.nextSibling):null;return!0}function l_(){for(var t=on;t;)t=Gr(t.nextSibling)}function Qs(){on=an=null,Ge=!1}function Nm(t){Un===null?Un=[t]:Un.push(t)}var ME=Pr.ReactCurrentBatchConfig;function Vo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var r=n.stateNode}if(!r)throw Error(J(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var u=i.refs;a===null?delete u[o]:u[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,t))}return t}function $l(t,e){throw t=Object.prototype.toString.call(e),Error(J(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function W0(t){var e=t._init;return e(t._payload)}function c_(t){function e(S,x){if(t){var b=S.deletions;b===null?(S.deletions=[x],S.flags|=16):b.push(x)}}function n(S,x){if(!t)return null;for(;x!==null;)e(S,x),x=x.sibling;return null}function r(S,x){for(S=new Map;x!==null;)x.key!==null?S.set(x.key,x):S.set(x.index,x),x=x.sibling;return S}function i(S,x){return S=Qr(S,x),S.index=0,S.sibling=null,S}function o(S,x,b){return S.index=b,t?(b=S.alternate,b!==null?(b=b.index,b<x?(S.flags|=2,x):b):(S.flags|=2,x)):(S.flags|=1048576,x)}function a(S){return t&&S.alternate===null&&(S.flags|=2),S}function u(S,x,b,N){return x===null||x.tag!==6?(x=Jd(b,S.mode,N),x.return=S,x):(x=i(x,b),x.return=S,x)}function d(S,x,b,N){var R=b.type;return R===Cs?m(S,x,b.props.children,N,b.key):x!==null&&(x.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Rr&&W0(R)===x.type)?(N=i(x,b.props),N.ref=Vo(S,x,b),N.return=S,N):(N=vc(b.type,b.key,b.props,null,S.mode,N),N.ref=Vo(S,x,b),N.return=S,N)}function f(S,x,b,N){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=Qd(b,S.mode,N),x.return=S,x):(x=i(x,b.children||[]),x.return=S,x)}function m(S,x,b,N,R){return x===null||x.tag!==7?(x=zi(b,S.mode,N,R),x.return=S,x):(x=i(x,b),x.return=S,x)}function g(S,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Jd(""+x,S.mode,b),x.return=S,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case jl:return b=vc(x.type,x.key,x.props,null,S.mode,b),b.ref=Vo(S,null,x),b.return=S,b;case Ss:return x=Qd(x,S.mode,b),x.return=S,x;case Rr:var N=x._init;return g(S,N(x._payload),b)}if(Yo(x)||Bo(x))return x=zi(x,S.mode,b,null),x.return=S,x;$l(S,x)}return null}function v(S,x,b,N){var R=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return R!==null?null:u(S,x,""+b,N);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case jl:return b.key===R?d(S,x,b,N):null;case Ss:return b.key===R?f(S,x,b,N):null;case Rr:return R=b._init,v(S,x,R(b._payload),N)}if(Yo(b)||Bo(b))return R!==null?null:m(S,x,b,N,null);$l(S,b)}return null}function w(S,x,b,N,R){if(typeof N=="string"&&N!==""||typeof N=="number")return S=S.get(b)||null,u(x,S,""+N,R);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case jl:return S=S.get(N.key===null?b:N.key)||null,d(x,S,N,R);case Ss:return S=S.get(N.key===null?b:N.key)||null,f(x,S,N,R);case Rr:var B=N._init;return w(S,x,b,B(N._payload),R)}if(Yo(N)||Bo(N))return S=S.get(b)||null,m(x,S,N,R,null);$l(x,N)}return null}function _(S,x,b,N){for(var R=null,B=null,I=x,F=x=0,$=null;I!==null&&F<b.length;F++){I.index>F?($=I,I=null):$=I.sibling;var X=v(S,I,b[F],N);if(X===null){I===null&&(I=$);break}t&&I&&X.alternate===null&&e(S,I),x=o(X,x,F),B===null?R=X:B.sibling=X,B=X,I=$}if(F===b.length)return n(S,I),Ge&&Pi(S,F),R;if(I===null){for(;F<b.length;F++)I=g(S,b[F],N),I!==null&&(x=o(I,x,F),B===null?R=I:B.sibling=I,B=I);return Ge&&Pi(S,F),R}for(I=r(S,I);F<b.length;F++)$=w(I,S,F,b[F],N),$!==null&&(t&&$.alternate!==null&&I.delete($.key===null?F:$.key),x=o($,x,F),B===null?R=$:B.sibling=$,B=$);return t&&I.forEach(function(ne){return e(S,ne)}),Ge&&Pi(S,F),R}function k(S,x,b,N){var R=Bo(b);if(typeof R!="function")throw Error(J(150));if(b=R.call(b),b==null)throw Error(J(151));for(var B=R=null,I=x,F=x=0,$=null,X=b.next();I!==null&&!X.done;F++,X=b.next()){I.index>F?($=I,I=null):$=I.sibling;var ne=v(S,I,X.value,N);if(ne===null){I===null&&(I=$);break}t&&I&&ne.alternate===null&&e(S,I),x=o(ne,x,F),B===null?R=ne:B.sibling=ne,B=ne,I=$}if(X.done)return n(S,I),Ge&&Pi(S,F),R;if(I===null){for(;!X.done;F++,X=b.next())X=g(S,X.value,N),X!==null&&(x=o(X,x,F),B===null?R=X:B.sibling=X,B=X);return Ge&&Pi(S,F),R}for(I=r(S,I);!X.done;F++,X=b.next())X=w(I,S,F,X.value,N),X!==null&&(t&&X.alternate!==null&&I.delete(X.key===null?F:X.key),x=o(X,x,F),B===null?R=X:B.sibling=X,B=X);return t&&I.forEach(function(Q){return e(S,Q)}),Ge&&Pi(S,F),R}function j(S,x,b,N){if(typeof b=="object"&&b!==null&&b.type===Cs&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case jl:e:{for(var R=b.key,B=x;B!==null;){if(B.key===R){if(R=b.type,R===Cs){if(B.tag===7){n(S,B.sibling),x=i(B,b.props.children),x.return=S,S=x;break e}}else if(B.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Rr&&W0(R)===B.type){n(S,B.sibling),x=i(B,b.props),x.ref=Vo(S,B,b),x.return=S,S=x;break e}n(S,B);break}else e(S,B);B=B.sibling}b.type===Cs?(x=zi(b.props.children,S.mode,N,b.key),x.return=S,S=x):(N=vc(b.type,b.key,b.props,null,S.mode,N),N.ref=Vo(S,x,b),N.return=S,S=N)}return a(S);case Ss:e:{for(B=b.key;x!==null;){if(x.key===B)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){n(S,x.sibling),x=i(x,b.children||[]),x.return=S,S=x;break e}else{n(S,x);break}else e(S,x);x=x.sibling}x=Qd(b,S.mode,N),x.return=S,S=x}return a(S);case Rr:return B=b._init,j(S,x,B(b._payload),N)}if(Yo(b))return _(S,x,b,N);if(Bo(b))return k(S,x,b,N);$l(S,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(n(S,x.sibling),x=i(x,b),x.return=S,S=x):(n(S,x),x=Jd(b,S.mode,N),x.return=S,S=x),a(S)):n(S,x)}return j}var Xs=c_(!0),u_=c_(!1),Oc=ci(null),Ic=null,As=null,Tm=null;function Lm(){Tm=As=Ic=null}function Rm(t){var e=Oc.current;qe(Oc),t._currentValue=e}function af(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function qs(t,e){Ic=t,Tm=As=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Kt=!0),t.firstContext=null)}function jn(t){var e=t._currentValue;if(Tm!==t)if(t={context:t,memoizedValue:e,next:null},As===null){if(Ic===null)throw Error(J(308));As=t,Ic.dependencies={lanes:0,firstContext:t}}else As=As.next=t;return e}var Mi=null;function Am(t){Mi===null?Mi=[t]:Mi.push(t)}function d_(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Am(e)):(n.next=i.next,i.next=n),e.interleaved=n,kr(t,r)}function kr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ar=!1;function Om(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function h_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function gr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Kr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Te&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,kr(t,n)}return i=r.interleaved,i===null?(e.next=e,Am(r)):(e.next=i.next,i.next=e),r.interleaved=e,kr(t,n)}function dc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ym(t,n)}}function Z0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Mc(t,e,n,r){var i=t.updateQueue;Ar=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,u=i.shared.pending;if(u!==null){i.shared.pending=null;var d=u,f=d.next;d.next=null,a===null?o=f:a.next=f,a=d;var m=t.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==a&&(u===null?m.firstBaseUpdate=f:u.next=f,m.lastBaseUpdate=d))}if(o!==null){var g=i.baseState;a=0,m=f=d=null,u=o;do{var v=u.lane,w=u.eventTime;if((r&v)===v){m!==null&&(m=m.next={eventTime:w,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var _=t,k=u;switch(v=e,w=n,k.tag){case 1:if(_=k.payload,typeof _=="function"){g=_.call(w,g,v);break e}g=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=k.payload,v=typeof _=="function"?_.call(w,g,v):_,v==null)break e;g=et({},g,v);break e;case 2:Ar=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,v=i.effects,v===null?i.effects=[u]:v.push(u))}else w={eventTime:w,lane:v,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(f=m=w,d=g):m=m.next=w,a|=v;if(u=u.next,u===null){if(u=i.shared.pending,u===null)break;v=u,u=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(1);if(m===null&&(d=g),i.baseState=d,i.firstBaseUpdate=f,i.lastBaseUpdate=m,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Gi|=a,t.lanes=a,t.memoizedState=g}}function G0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(J(191,i));i.call(r)}}}var Ka={},er=ci(Ka),Na=ci(Ka),Ta=ci(Ka);function Di(t){if(t===Ka)throw Error(J(174));return t}function Im(t,e){switch(Ue(Ta,e),Ue(Na,t),Ue(er,Ka),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Uh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Uh(e,t)}qe(er),Ue(er,e)}function eo(){qe(er),qe(Na),qe(Ta)}function f_(t){Di(Ta.current);var e=Di(er.current),n=Uh(e,t.type);e!==n&&(Ue(Na,t),Ue(er,n))}function Mm(t){Na.current===t&&(qe(er),qe(Na))}var Je=ci(0);function Dc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Hd=[];function Dm(){for(var t=0;t<Hd.length;t++)Hd[t]._workInProgressVersionPrimary=null;Hd.length=0}var hc=Pr.ReactCurrentDispatcher,Wd=Pr.ReactCurrentBatchConfig,Zi=0,Xe=null,pt=null,wt=null,Bc=!1,oa=!1,La=0,DE=0;function Tt(){throw Error(J(321))}function Bm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Vn(t[n],e[n]))return!1;return!0}function $m(t,e,n,r,i,o){if(Zi=o,Xe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,hc.current=t===null||t.memoizedState===null?zE:FE,t=n(r,i),oa){o=0;do{if(oa=!1,La=0,25<=o)throw Error(J(301));o+=1,wt=pt=null,e.updateQueue=null,hc.current=VE,t=n(r,i)}while(oa)}if(hc.current=$c,e=pt!==null&&pt.next!==null,Zi=0,wt=pt=Xe=null,Bc=!1,e)throw Error(J(300));return t}function Um(){var t=La!==0;return La=0,t}function Yn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?Xe.memoizedState=wt=t:wt=wt.next=t,wt}function Nn(){if(pt===null){var t=Xe.alternate;t=t!==null?t.memoizedState:null}else t=pt.next;var e=wt===null?Xe.memoizedState:wt.next;if(e!==null)wt=e,pt=t;else{if(t===null)throw Error(J(310));pt=t,t={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},wt===null?Xe.memoizedState=wt=t:wt=wt.next=t}return wt}function Ra(t,e){return typeof e=="function"?e(t):e}function Zd(t){var e=Nn(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=pt,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var u=a=null,d=null,f=o;do{var m=f.lane;if((Zi&m)===m)d!==null&&(d=d.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:t(r,f.action);else{var g={lane:m,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};d===null?(u=d=g,a=r):d=d.next=g,Xe.lanes|=m,Gi|=m}f=f.next}while(f!==null&&f!==o);d===null?a=r:d.next=u,Vn(r,e.memoizedState)||(Kt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=d,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,Xe.lanes|=o,Gi|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Gd(t){var e=Nn(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=t(o,a.action),a=a.next;while(a!==i);Vn(o,e.memoizedState)||(Kt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function m_(){}function p_(t,e){var n=Xe,r=Nn(),i=e(),o=!Vn(r.memoizedState,i);if(o&&(r.memoizedState=i,Kt=!0),r=r.queue,zm(w_.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||wt!==null&&wt.memoizedState.tag&1){if(n.flags|=2048,Aa(9,v_.bind(null,n,r,i,e),void 0,null),xt===null)throw Error(J(349));Zi&30||g_(n,e,i)}return i}function g_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Xe.updateQueue,e===null?(e={lastEffect:null,stores:null},Xe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function v_(t,e,n,r){e.value=n,e.getSnapshot=r,y_(e)&&x_(t)}function w_(t,e,n){return n(function(){y_(e)&&x_(t)})}function y_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Vn(t,n)}catch{return!0}}function x_(t){var e=kr(t,1);e!==null&&Fn(e,t,1,-1)}function K0(t){var e=Yn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ra,lastRenderedState:t},e.queue=t,t=t.dispatch=UE.bind(null,Xe,t),[e.memoizedState,t]}function Aa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Xe.updateQueue,e===null?(e={lastEffect:null,stores:null},Xe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function __(){return Nn().memoizedState}function fc(t,e,n,r){var i=Yn();Xe.flags|=t,i.memoizedState=Aa(1|e,n,void 0,r===void 0?null:r)}function ku(t,e,n,r){var i=Nn();r=r===void 0?null:r;var o=void 0;if(pt!==null){var a=pt.memoizedState;if(o=a.destroy,r!==null&&Bm(r,a.deps)){i.memoizedState=Aa(e,n,o,r);return}}Xe.flags|=t,i.memoizedState=Aa(1|e,n,o,r)}function Y0(t,e){return fc(8390656,8,t,e)}function zm(t,e){return ku(2048,8,t,e)}function b_(t,e){return ku(4,2,t,e)}function k_(t,e){return ku(4,4,t,e)}function S_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function C_(t,e,n){return n=n!=null?n.concat([t]):null,ku(4,4,S_.bind(null,e,t),n)}function Fm(){}function P_(t,e){var n=Nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Bm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function E_(t,e){var n=Nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Bm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function j_(t,e,n){return Zi&21?(Vn(n,e)||(n=Ax(),Xe.lanes|=n,Gi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Kt=!0),t.memoizedState=n)}function BE(t,e){var n=Ie;Ie=n!==0&&4>n?n:4,t(!0);var r=Wd.transition;Wd.transition={};try{t(!1),e()}finally{Ie=n,Wd.transition=r}}function N_(){return Nn().memoizedState}function $E(t,e,n){var r=Jr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},T_(t))L_(e,n);else if(n=d_(t,e,n,r),n!==null){var i=Ft();Fn(n,t,r,i),R_(n,e,r)}}function UE(t,e,n){var r=Jr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(T_(t))L_(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,u=o(a,n);if(i.hasEagerState=!0,i.eagerState=u,Vn(u,a)){var d=e.interleaved;d===null?(i.next=i,Am(e)):(i.next=d.next,d.next=i),e.interleaved=i;return}}catch{}finally{}n=d_(t,e,i,r),n!==null&&(i=Ft(),Fn(n,t,r,i),R_(n,e,r))}}function T_(t){var e=t.alternate;return t===Xe||e!==null&&e===Xe}function L_(t,e){oa=Bc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function R_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ym(t,n)}}var $c={readContext:jn,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useInsertionEffect:Tt,useLayoutEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useMutableSource:Tt,useSyncExternalStore:Tt,useId:Tt,unstable_isNewReconciler:!1},zE={readContext:jn,useCallback:function(t,e){return Yn().memoizedState=[t,e===void 0?null:e],t},useContext:jn,useEffect:Y0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,fc(4194308,4,S_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return fc(4194308,4,t,e)},useInsertionEffect:function(t,e){return fc(4,2,t,e)},useMemo:function(t,e){var n=Yn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Yn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=$E.bind(null,Xe,t),[r.memoizedState,t]},useRef:function(t){var e=Yn();return t={current:t},e.memoizedState=t},useState:K0,useDebugValue:Fm,useDeferredValue:function(t){return Yn().memoizedState=t},useTransition:function(){var t=K0(!1),e=t[0];return t=BE.bind(null,t[1]),Yn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Xe,i=Yn();if(Ge){if(n===void 0)throw Error(J(407));n=n()}else{if(n=e(),xt===null)throw Error(J(349));Zi&30||g_(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,Y0(w_.bind(null,r,o,t),[t]),r.flags|=2048,Aa(9,v_.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Yn(),e=xt.identifierPrefix;if(Ge){var n=mr,r=fr;n=(r&~(1<<32-zn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=La++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=DE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},FE={readContext:jn,useCallback:P_,useContext:jn,useEffect:zm,useImperativeHandle:C_,useInsertionEffect:b_,useLayoutEffect:k_,useMemo:E_,useReducer:Zd,useRef:__,useState:function(){return Zd(Ra)},useDebugValue:Fm,useDeferredValue:function(t){var e=Nn();return j_(e,pt.memoizedState,t)},useTransition:function(){var t=Zd(Ra)[0],e=Nn().memoizedState;return[t,e]},useMutableSource:m_,useSyncExternalStore:p_,useId:N_,unstable_isNewReconciler:!1},VE={readContext:jn,useCallback:P_,useContext:jn,useEffect:zm,useImperativeHandle:C_,useInsertionEffect:b_,useLayoutEffect:k_,useMemo:E_,useReducer:Gd,useRef:__,useState:function(){return Gd(Ra)},useDebugValue:Fm,useDeferredValue:function(t){var e=Nn();return pt===null?e.memoizedState=t:j_(e,pt.memoizedState,t)},useTransition:function(){var t=Gd(Ra)[0],e=Nn().memoizedState;return[t,e]},useMutableSource:m_,useSyncExternalStore:p_,useId:N_,unstable_isNewReconciler:!1};function Dn(t,e){if(t&&t.defaultProps){e=et({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function lf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:et({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Su={isMounted:function(t){return(t=t._reactInternals)?Xi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ft(),i=Jr(t),o=gr(r,i);o.payload=e,n!=null&&(o.callback=n),e=Kr(t,o,i),e!==null&&(Fn(e,t,i,r),dc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ft(),i=Jr(t),o=gr(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Kr(t,o,i),e!==null&&(Fn(e,t,i,r),dc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ft(),r=Jr(t),i=gr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Kr(t,i,r),e!==null&&(Fn(e,t,r,n),dc(e,t,r))}};function J0(t,e,n,r,i,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,a):e.prototype&&e.prototype.isPureReactComponent?!Ca(n,r)||!Ca(i,o):!0}function A_(t,e,n){var r=!1,i=si,o=e.contextType;return typeof o=="object"&&o!==null?o=jn(o):(i=Jt(e)?Hi:Mt.current,r=e.contextTypes,o=(r=r!=null)?Js(t,i):si),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Su,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Q0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Su.enqueueReplaceState(e,e.state,null)}function cf(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Om(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=jn(o):(o=Jt(e)?Hi:Mt.current,i.context=Js(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(lf(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Su.enqueueReplaceState(i,i.state,null),Mc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function to(t,e){try{var n="",r=e;do n+=vP(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Kd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function uf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var qE=typeof WeakMap=="function"?WeakMap:Map;function O_(t,e,n){n=gr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){zc||(zc=!0,xf=r),uf(t,e)},n}function I_(t,e,n){n=gr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){uf(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){uf(t,e),typeof r!="function"&&(Yr===null?Yr=new Set([this]):Yr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function X0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new qE;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=ij.bind(null,t,e,n),e.then(t,t))}function ev(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function tv(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=gr(-1,1),e.tag=2,Kr(n,e,1))),n.lanes|=1),t)}var HE=Pr.ReactCurrentOwner,Kt=!1;function Ut(t,e,n,r){e.child=t===null?u_(e,null,n,r):Xs(e,t.child,n,r)}function nv(t,e,n,r,i){n=n.render;var o=e.ref;return qs(e,i),r=$m(t,e,n,r,o,i),n=Um(),t!==null&&!Kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Sr(t,e,i)):(Ge&&n&&Em(e),e.flags|=1,Ut(t,e,r,i),e.child)}function rv(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Ym(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,M_(t,e,o,r,i)):(t=vc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ca,n(a,r)&&t.ref===e.ref)return Sr(t,e,i)}return e.flags|=1,t=Qr(o,r),t.ref=e.ref,t.return=e,e.child=t}function M_(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Ca(o,r)&&t.ref===e.ref)if(Kt=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Kt=!0);else return e.lanes=t.lanes,Sr(t,e,i)}return df(t,e,n,r,i)}function D_(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ue(Is,nn),nn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ue(Is,nn),nn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Ue(Is,nn),nn|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Ue(Is,nn),nn|=r;return Ut(t,e,i,n),e.child}function B_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function df(t,e,n,r,i){var o=Jt(n)?Hi:Mt.current;return o=Js(e,o),qs(e,i),n=$m(t,e,n,r,o,i),r=Um(),t!==null&&!Kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Sr(t,e,i)):(Ge&&r&&Em(e),e.flags|=1,Ut(t,e,n,i),e.child)}function iv(t,e,n,r,i){if(Jt(n)){var o=!0;Lc(e)}else o=!1;if(qs(e,i),e.stateNode===null)mc(t,e),A_(e,n,r),cf(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var d=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=jn(f):(f=Jt(n)?Hi:Mt.current,f=Js(e,f));var m=n.getDerivedStateFromProps,g=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==r||d!==f)&&Q0(e,a,r,f),Ar=!1;var v=e.memoizedState;a.state=v,Mc(e,r,a,i),d=e.memoizedState,u!==r||v!==d||Yt.current||Ar?(typeof m=="function"&&(lf(e,n,m,r),d=e.memoizedState),(u=Ar||J0(e,n,u,r,v,d,f))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=d),a.props=r,a.state=d,a.context=f,r=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,h_(t,e),u=e.memoizedProps,f=e.type===e.elementType?u:Dn(e.type,u),a.props=f,g=e.pendingProps,v=a.context,d=n.contextType,typeof d=="object"&&d!==null?d=jn(d):(d=Jt(n)?Hi:Mt.current,d=Js(e,d));var w=n.getDerivedStateFromProps;(m=typeof w=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==g||v!==d)&&Q0(e,a,r,d),Ar=!1,v=e.memoizedState,a.state=v,Mc(e,r,a,i);var _=e.memoizedState;u!==g||v!==_||Yt.current||Ar?(typeof w=="function"&&(lf(e,n,w,r),_=e.memoizedState),(f=Ar||J0(e,n,f,r,v,_,d)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,_,d),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,_,d)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),a.props=r,a.state=_,a.context=d,r=f):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return hf(t,e,n,r,o,i)}function hf(t,e,n,r,i,o){B_(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&V0(e,n,!1),Sr(t,e,o);r=e.stateNode,HE.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Xs(e,t.child,null,o),e.child=Xs(e,null,u,o)):Ut(t,e,u,o),e.memoizedState=r.state,i&&V0(e,n,!0),e.child}function $_(t){var e=t.stateNode;e.pendingContext?F0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&F0(t,e.context,!1),Im(t,e.containerInfo)}function sv(t,e,n,r,i){return Qs(),Nm(i),e.flags|=256,Ut(t,e,n,r),e.child}var ff={dehydrated:null,treeContext:null,retryLane:0};function mf(t){return{baseLanes:t,cachePool:null,transitions:null}}function U_(t,e,n){var r=e.pendingProps,i=Je.current,o=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(i&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ue(Je,i&1),t===null)return of(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,o?(r=e.mode,o=e.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Eu(a,r,0,null),t=zi(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=mf(n),e.memoizedState=ff,t):Vm(e,a));if(i=t.memoizedState,i!==null&&(u=i.dehydrated,u!==null))return WE(t,e,a,r,u,i,n);if(o){o=r.fallback,a=e.mode,i=t.child,u=i.sibling;var d={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=d,e.deletions=null):(r=Qr(i,d),r.subtreeFlags=i.subtreeFlags&14680064),u!==null?o=Qr(u,o):(o=zi(o,a,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,a=t.child.memoizedState,a=a===null?mf(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=ff,r}return o=t.child,t=o.sibling,r=Qr(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Vm(t,e){return e=Eu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ul(t,e,n,r){return r!==null&&Nm(r),Xs(e,t.child,null,n),t=Vm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function WE(t,e,n,r,i,o,a){if(n)return e.flags&256?(e.flags&=-257,r=Kd(Error(J(422))),Ul(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Eu({mode:"visible",children:r.children},i,0,null),o=zi(o,i,a,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Xs(e,t.child,null,a),e.child.memoizedState=mf(a),e.memoizedState=ff,o);if(!(e.mode&1))return Ul(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var u=r.dgst;return r=u,o=Error(J(419)),r=Kd(o,r,void 0),Ul(t,e,a,r)}if(u=(a&t.childLanes)!==0,Kt||u){if(r=xt,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,kr(t,i),Fn(r,t,i,-1))}return Km(),r=Kd(Error(J(421))),Ul(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=sj.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,on=Gr(i.nextSibling),an=e,Ge=!0,Un=null,t!==null&&(Sn[Cn++]=fr,Sn[Cn++]=mr,Sn[Cn++]=Wi,fr=t.id,mr=t.overflow,Wi=e),e=Vm(e,r.children),e.flags|=4096,e)}function ov(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),af(t.return,e,n)}function Yd(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function z_(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Ut(t,e,r.children,n),r=Je.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ov(t,n,e);else if(t.tag===19)ov(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ue(Je,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Dc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Yd(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Dc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Yd(e,!0,n,null,o);break;case"together":Yd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function mc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Sr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Gi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(J(153));if(e.child!==null){for(t=e.child,n=Qr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Qr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ZE(t,e,n){switch(e.tag){case 3:$_(e),Qs();break;case 5:f_(e);break;case 1:Jt(e.type)&&Lc(e);break;case 4:Im(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ue(Oc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ue(Je,Je.current&1),e.flags|=128,null):n&e.child.childLanes?U_(t,e,n):(Ue(Je,Je.current&1),t=Sr(t,e,n),t!==null?t.sibling:null);Ue(Je,Je.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return z_(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ue(Je,Je.current),r)break;return null;case 22:case 23:return e.lanes=0,D_(t,e,n)}return Sr(t,e,n)}var F_,pf,V_,q_;F_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};pf=function(){};V_=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Di(er.current);var o=null;switch(n){case"input":i=Mh(t,i),r=Mh(t,r),o=[];break;case"select":i=et({},i,{value:void 0}),r=et({},r,{value:void 0}),o=[];break;case"textarea":i=$h(t,i),r=$h(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Nc)}zh(n,r);var a;n=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var u=i[f];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(wa.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in r){var d=r[f];if(u=i!=null?i[f]:void 0,r.hasOwnProperty(f)&&d!==u&&(d!=null||u!=null))if(f==="style")if(u){for(a in u)!u.hasOwnProperty(a)||d&&d.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in d)d.hasOwnProperty(a)&&u[a]!==d[a]&&(n||(n={}),n[a]=d[a])}else n||(o||(o=[]),o.push(f,n)),n=d;else f==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,u=u?u.__html:void 0,d!=null&&u!==d&&(o=o||[]).push(f,d)):f==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(f,""+d):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(wa.hasOwnProperty(f)?(d!=null&&f==="onScroll"&&Ve("scroll",t),o||u===d||(o=[])):(o=o||[]).push(f,d))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};q_=function(t,e,n,r){n!==r&&(e.flags|=4)};function qo(t,e){if(!Ge)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Lt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function GE(t,e,n){var r=e.pendingProps;switch(jm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(e),null;case 1:return Jt(e.type)&&Tc(),Lt(e),null;case 3:return r=e.stateNode,eo(),qe(Yt),qe(Mt),Dm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Bl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Un!==null&&(kf(Un),Un=null))),pf(t,e),Lt(e),null;case 5:Mm(e);var i=Di(Ta.current);if(n=e.type,t!==null&&e.stateNode!=null)V_(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(J(166));return Lt(e),null}if(t=Di(er.current),Bl(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Qn]=e,r[ja]=o,t=(e.mode&1)!==0,n){case"dialog":Ve("cancel",r),Ve("close",r);break;case"iframe":case"object":case"embed":Ve("load",r);break;case"video":case"audio":for(i=0;i<Qo.length;i++)Ve(Qo[i],r);break;case"source":Ve("error",r);break;case"img":case"image":case"link":Ve("error",r),Ve("load",r);break;case"details":Ve("toggle",r);break;case"input":p0(r,o),Ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ve("invalid",r);break;case"textarea":v0(r,o),Ve("invalid",r)}zh(n,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="children"?typeof u=="string"?r.textContent!==u&&(o.suppressHydrationWarning!==!0&&Dl(r.textContent,u,t),i=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&Dl(r.textContent,u,t),i=["children",""+u]):wa.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&Ve("scroll",r)}switch(n){case"input":Nl(r),g0(r,o,!0);break;case"textarea":Nl(r),w0(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Nc)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=wx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Qn]=e,t[ja]=r,F_(t,e,!1,!1),e.stateNode=t;e:{switch(a=Fh(n,r),n){case"dialog":Ve("cancel",t),Ve("close",t),i=r;break;case"iframe":case"object":case"embed":Ve("load",t),i=r;break;case"video":case"audio":for(i=0;i<Qo.length;i++)Ve(Qo[i],t);i=r;break;case"source":Ve("error",t),i=r;break;case"img":case"image":case"link":Ve("error",t),Ve("load",t),i=r;break;case"details":Ve("toggle",t),i=r;break;case"input":p0(t,r),i=Mh(t,r),Ve("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=et({},r,{value:void 0}),Ve("invalid",t);break;case"textarea":v0(t,r),i=$h(t,r),Ve("invalid",t);break;default:i=r}zh(n,i),u=i;for(o in u)if(u.hasOwnProperty(o)){var d=u[o];o==="style"?_x(t,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&yx(t,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&ya(t,d):typeof d=="number"&&ya(t,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(wa.hasOwnProperty(o)?d!=null&&o==="onScroll"&&Ve("scroll",t):d!=null&&fm(t,o,d,a))}switch(n){case"input":Nl(t),g0(t,r,!1);break;case"textarea":Nl(t),w0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ii(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Us(t,!!r.multiple,o,!1):r.defaultValue!=null&&Us(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Nc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Lt(e),null;case 6:if(t&&e.stateNode!=null)q_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(J(166));if(n=Di(Ta.current),Di(er.current),Bl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Qn]=e,(o=r.nodeValue!==n)&&(t=an,t!==null))switch(t.tag){case 3:Dl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Dl(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Qn]=e,e.stateNode=r}return Lt(e),null;case 13:if(qe(Je),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ge&&on!==null&&e.mode&1&&!(e.flags&128))l_(),Qs(),e.flags|=98560,o=!1;else if(o=Bl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(J(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(J(317));o[Qn]=e}else Qs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Lt(e),o=!1}else Un!==null&&(kf(Un),Un=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Je.current&1?gt===0&&(gt=3):Km())),e.updateQueue!==null&&(e.flags|=4),Lt(e),null);case 4:return eo(),pf(t,e),t===null&&Pa(e.stateNode.containerInfo),Lt(e),null;case 10:return Rm(e.type._context),Lt(e),null;case 17:return Jt(e.type)&&Tc(),Lt(e),null;case 19:if(qe(Je),o=e.memoizedState,o===null)return Lt(e),null;if(r=(e.flags&128)!==0,a=o.rendering,a===null)if(r)qo(o,!1);else{if(gt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Dc(t),a!==null){for(e.flags|=128,qo(o,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ue(Je,Je.current&1|2),e.child}t=t.sibling}o.tail!==null&&st()>no&&(e.flags|=128,r=!0,qo(o,!1),e.lanes=4194304)}else{if(!r)if(t=Dc(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),qo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Ge)return Lt(e),null}else 2*st()-o.renderingStartTime>no&&n!==1073741824&&(e.flags|=128,r=!0,qo(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=st(),e.sibling=null,n=Je.current,Ue(Je,r?n&1|2:n&1),e):(Lt(e),null);case 22:case 23:return Gm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?nn&1073741824&&(Lt(e),e.subtreeFlags&6&&(e.flags|=8192)):Lt(e),null;case 24:return null;case 25:return null}throw Error(J(156,e.tag))}function KE(t,e){switch(jm(e),e.tag){case 1:return Jt(e.type)&&Tc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return eo(),qe(Yt),qe(Mt),Dm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Mm(e),null;case 13:if(qe(Je),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(J(340));Qs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return qe(Je),null;case 4:return eo(),null;case 10:return Rm(e.type._context),null;case 22:case 23:return Gm(),null;case 24:return null;default:return null}}var zl=!1,At=!1,YE=typeof WeakSet=="function"?WeakSet:Set,se=null;function Os(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){tt(t,e,r)}else n.current=null}function gf(t,e,n){try{n()}catch(r){tt(t,e,r)}}var av=!1;function JE(t,e){if(Qh=Pc,t=Kx(),Pm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,u=-1,d=-1,f=0,m=0,g=t,v=null;t:for(;;){for(var w;g!==n||i!==0&&g.nodeType!==3||(u=a+i),g!==o||r!==0&&g.nodeType!==3||(d=a+r),g.nodeType===3&&(a+=g.nodeValue.length),(w=g.firstChild)!==null;)v=g,g=w;for(;;){if(g===t)break t;if(v===n&&++f===i&&(u=a),v===o&&++m===r&&(d=a),(w=g.nextSibling)!==null)break;g=v,v=g.parentNode}g=w}n=u===-1||d===-1?null:{start:u,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xh={focusedElem:t,selectionRange:n},Pc=!1,se=e;se!==null;)if(e=se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,se=t;else for(;se!==null;){e=se;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var k=_.memoizedProps,j=_.memoizedState,S=e.stateNode,x=S.getSnapshotBeforeUpdate(e.elementType===e.type?k:Dn(e.type,k),j);S.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(N){tt(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,se=t;break}se=e.return}return _=av,av=!1,_}function aa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&gf(e,n,o)}i=i.next}while(i!==r)}}function Cu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function vf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function H_(t){var e=t.alternate;e!==null&&(t.alternate=null,H_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qn],delete e[ja],delete e[nf],delete e[AE],delete e[OE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function W_(t){return t.tag===5||t.tag===3||t.tag===4}function lv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||W_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function wf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Nc));else if(r!==4&&(t=t.child,t!==null))for(wf(t,e,n),t=t.sibling;t!==null;)wf(t,e,n),t=t.sibling}function yf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(yf(t,e,n),t=t.sibling;t!==null;)yf(t,e,n),t=t.sibling}var Ct=null,$n=!1;function Nr(t,e,n){for(n=n.child;n!==null;)Z_(t,e,n),n=n.sibling}function Z_(t,e,n){if(Xn&&typeof Xn.onCommitFiberUnmount=="function")try{Xn.onCommitFiberUnmount(vu,n)}catch{}switch(n.tag){case 5:At||Os(n,e);case 6:var r=Ct,i=$n;Ct=null,Nr(t,e,n),Ct=r,$n=i,Ct!==null&&($n?(t=Ct,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ct.removeChild(n.stateNode));break;case 18:Ct!==null&&($n?(t=Ct,n=n.stateNode,t.nodeType===8?Vd(t.parentNode,n):t.nodeType===1&&Vd(t,n),ka(t)):Vd(Ct,n.stateNode));break;case 4:r=Ct,i=$n,Ct=n.stateNode.containerInfo,$n=!0,Nr(t,e,n),Ct=r,$n=i;break;case 0:case 11:case 14:case 15:if(!At&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&gf(n,e,a),i=i.next}while(i!==r)}Nr(t,e,n);break;case 1:if(!At&&(Os(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){tt(n,e,u)}Nr(t,e,n);break;case 21:Nr(t,e,n);break;case 22:n.mode&1?(At=(r=At)||n.memoizedState!==null,Nr(t,e,n),At=r):Nr(t,e,n);break;default:Nr(t,e,n)}}function cv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new YE),e.forEach(function(r){var i=oj.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function An(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:Ct=u.stateNode,$n=!1;break e;case 3:Ct=u.stateNode.containerInfo,$n=!0;break e;case 4:Ct=u.stateNode.containerInfo,$n=!0;break e}u=u.return}if(Ct===null)throw Error(J(160));Z_(o,a,i),Ct=null,$n=!1;var d=i.alternate;d!==null&&(d.return=null),i.return=null}catch(f){tt(i,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)G_(e,t),e=e.sibling}function G_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(An(e,t),Kn(t),r&4){try{aa(3,t,t.return),Cu(3,t)}catch(k){tt(t,t.return,k)}try{aa(5,t,t.return)}catch(k){tt(t,t.return,k)}}break;case 1:An(e,t),Kn(t),r&512&&n!==null&&Os(n,n.return);break;case 5:if(An(e,t),Kn(t),r&512&&n!==null&&Os(n,n.return),t.flags&32){var i=t.stateNode;try{ya(i,"")}catch(k){tt(t,t.return,k)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,u=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&gx(i,o),Fh(u,a);var f=Fh(u,o);for(a=0;a<d.length;a+=2){var m=d[a],g=d[a+1];m==="style"?_x(i,g):m==="dangerouslySetInnerHTML"?yx(i,g):m==="children"?ya(i,g):fm(i,m,g,f)}switch(u){case"input":Dh(i,o);break;case"textarea":vx(i,o);break;case"select":var v=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var w=o.value;w!=null?Us(i,!!o.multiple,w,!1):v!==!!o.multiple&&(o.defaultValue!=null?Us(i,!!o.multiple,o.defaultValue,!0):Us(i,!!o.multiple,o.multiple?[]:"",!1))}i[ja]=o}catch(k){tt(t,t.return,k)}}break;case 6:if(An(e,t),Kn(t),r&4){if(t.stateNode===null)throw Error(J(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(k){tt(t,t.return,k)}}break;case 3:if(An(e,t),Kn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ka(e.containerInfo)}catch(k){tt(t,t.return,k)}break;case 4:An(e,t),Kn(t);break;case 13:An(e,t),Kn(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Wm=st())),r&4&&cv(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(At=(f=At)||m,An(e,t),At=f):An(e,t),Kn(t),r&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!m&&t.mode&1)for(se=t,m=t.child;m!==null;){for(g=se=m;se!==null;){switch(v=se,w=v.child,v.tag){case 0:case 11:case 14:case 15:aa(4,v,v.return);break;case 1:Os(v,v.return);var _=v.stateNode;if(typeof _.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(k){tt(r,n,k)}}break;case 5:Os(v,v.return);break;case 22:if(v.memoizedState!==null){dv(g);continue}}w!==null?(w.return=v,se=w):dv(g)}m=m.sibling}e:for(m=null,g=t;;){if(g.tag===5){if(m===null){m=g;try{i=g.stateNode,f?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=g.stateNode,d=g.memoizedProps.style,a=d!=null&&d.hasOwnProperty("display")?d.display:null,u.style.display=xx("display",a))}catch(k){tt(t,t.return,k)}}}else if(g.tag===6){if(m===null)try{g.stateNode.nodeValue=f?"":g.memoizedProps}catch(k){tt(t,t.return,k)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;m===g&&(m=null),g=g.return}m===g&&(m=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:An(e,t),Kn(t),r&4&&cv(t);break;case 21:break;default:An(e,t),Kn(t)}}function Kn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(W_(n)){var r=n;break e}n=n.return}throw Error(J(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ya(i,""),r.flags&=-33);var o=lv(t);yf(t,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,u=lv(t);wf(t,u,a);break;default:throw Error(J(161))}}catch(d){tt(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function QE(t,e,n){se=t,K_(t)}function K_(t,e,n){for(var r=(t.mode&1)!==0;se!==null;){var i=se,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||zl;if(!a){var u=i.alternate,d=u!==null&&u.memoizedState!==null||At;u=zl;var f=At;if(zl=a,(At=d)&&!f)for(se=i;se!==null;)a=se,d=a.child,a.tag===22&&a.memoizedState!==null?hv(i):d!==null?(d.return=a,se=d):hv(i);for(;o!==null;)se=o,K_(o),o=o.sibling;se=i,zl=u,At=f}uv(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,se=o):uv(t)}}function uv(t){for(;se!==null;){var e=se;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:At||Cu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!At)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Dn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&G0(e,o,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}G0(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var m=f.memoizedState;if(m!==null){var g=m.dehydrated;g!==null&&ka(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}At||e.flags&512&&vf(e)}catch(v){tt(e,e.return,v)}}if(e===t){se=null;break}if(n=e.sibling,n!==null){n.return=e.return,se=n;break}se=e.return}}function dv(t){for(;se!==null;){var e=se;if(e===t){se=null;break}var n=e.sibling;if(n!==null){n.return=e.return,se=n;break}se=e.return}}function hv(t){for(;se!==null;){var e=se;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Cu(4,e)}catch(d){tt(e,n,d)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(d){tt(e,i,d)}}var o=e.return;try{vf(e)}catch(d){tt(e,o,d)}break;case 5:var a=e.return;try{vf(e)}catch(d){tt(e,a,d)}}}catch(d){tt(e,e.return,d)}if(e===t){se=null;break}var u=e.sibling;if(u!==null){u.return=e.return,se=u;break}se=e.return}}var XE=Math.ceil,Uc=Pr.ReactCurrentDispatcher,qm=Pr.ReactCurrentOwner,En=Pr.ReactCurrentBatchConfig,Te=0,xt=null,ft=null,Et=0,nn=0,Is=ci(0),gt=0,Oa=null,Gi=0,Pu=0,Hm=0,la=null,Gt=null,Wm=0,no=1/0,ur=null,zc=!1,xf=null,Yr=null,Fl=!1,zr=null,Fc=0,ca=0,_f=null,pc=-1,gc=0;function Ft(){return Te&6?st():pc!==-1?pc:pc=st()}function Jr(t){return t.mode&1?Te&2&&Et!==0?Et&-Et:ME.transition!==null?(gc===0&&(gc=Ax()),gc):(t=Ie,t!==0||(t=window.event,t=t===void 0?16:Ux(t.type)),t):1}function Fn(t,e,n,r){if(50<ca)throw ca=0,_f=null,Error(J(185));Wa(t,n,r),(!(Te&2)||t!==xt)&&(t===xt&&(!(Te&2)&&(Pu|=n),gt===4&&Br(t,Et)),Qt(t,r),n===1&&Te===0&&!(e.mode&1)&&(no=st()+500,bu&&ui()))}function Qt(t,e){var n=t.callbackNode;MP(t,e);var r=Cc(t,t===xt?Et:0);if(r===0)n!==null&&_0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&_0(n),e===1)t.tag===0?IE(fv.bind(null,t)):s_(fv.bind(null,t)),LE(function(){!(Te&6)&&ui()}),n=null;else{switch(Ox(r)){case 1:n=wm;break;case 4:n=Lx;break;case 16:n=Sc;break;case 536870912:n=Rx;break;default:n=Sc}n=rb(n,Y_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Y_(t,e){if(pc=-1,gc=0,Te&6)throw Error(J(327));var n=t.callbackNode;if(Hs()&&t.callbackNode!==n)return null;var r=Cc(t,t===xt?Et:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Vc(t,r);else{e=r;var i=Te;Te|=2;var o=Q_();(xt!==t||Et!==e)&&(ur=null,no=st()+500,Ui(t,e));do try{nj();break}catch(u){J_(t,u)}while(1);Lm(),Uc.current=o,Te=i,ft!==null?e=0:(xt=null,Et=0,e=gt)}if(e!==0){if(e===2&&(i=Zh(t),i!==0&&(r=i,e=bf(t,i))),e===1)throw n=Oa,Ui(t,0),Br(t,r),Qt(t,st()),n;if(e===6)Br(t,r);else{if(i=t.current.alternate,!(r&30)&&!ej(i)&&(e=Vc(t,r),e===2&&(o=Zh(t),o!==0&&(r=o,e=bf(t,o))),e===1))throw n=Oa,Ui(t,0),Br(t,r),Qt(t,st()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(J(345));case 2:Ei(t,Gt,ur);break;case 3:if(Br(t,r),(r&130023424)===r&&(e=Wm+500-st(),10<e)){if(Cc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ft(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=tf(Ei.bind(null,t,Gt,ur),e);break}Ei(t,Gt,ur);break;case 4:if(Br(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-zn(r);o=1<<a,a=e[a],a>i&&(i=a),r&=~o}if(r=i,r=st()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*XE(r/1960))-r,10<r){t.timeoutHandle=tf(Ei.bind(null,t,Gt,ur),r);break}Ei(t,Gt,ur);break;case 5:Ei(t,Gt,ur);break;default:throw Error(J(329))}}}return Qt(t,st()),t.callbackNode===n?Y_.bind(null,t):null}function bf(t,e){var n=la;return t.current.memoizedState.isDehydrated&&(Ui(t,e).flags|=256),t=Vc(t,e),t!==2&&(e=Gt,Gt=n,e!==null&&kf(e)),t}function kf(t){Gt===null?Gt=t:Gt.push.apply(Gt,t)}function ej(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Vn(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Br(t,e){for(e&=~Hm,e&=~Pu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-zn(e),r=1<<n;t[n]=-1,e&=~r}}function fv(t){if(Te&6)throw Error(J(327));Hs();var e=Cc(t,0);if(!(e&1))return Qt(t,st()),null;var n=Vc(t,e);if(t.tag!==0&&n===2){var r=Zh(t);r!==0&&(e=r,n=bf(t,r))}if(n===1)throw n=Oa,Ui(t,0),Br(t,e),Qt(t,st()),n;if(n===6)throw Error(J(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ei(t,Gt,ur),Qt(t,st()),null}function Zm(t,e){var n=Te;Te|=1;try{return t(e)}finally{Te=n,Te===0&&(no=st()+500,bu&&ui())}}function Ki(t){zr!==null&&zr.tag===0&&!(Te&6)&&Hs();var e=Te;Te|=1;var n=En.transition,r=Ie;try{if(En.transition=null,Ie=1,t)return t()}finally{Ie=r,En.transition=n,Te=e,!(Te&6)&&ui()}}function Gm(){nn=Is.current,qe(Is)}function Ui(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,TE(n)),ft!==null)for(n=ft.return;n!==null;){var r=n;switch(jm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Tc();break;case 3:eo(),qe(Yt),qe(Mt),Dm();break;case 5:Mm(r);break;case 4:eo();break;case 13:qe(Je);break;case 19:qe(Je);break;case 10:Rm(r.type._context);break;case 22:case 23:Gm()}n=n.return}if(xt=t,ft=t=Qr(t.current,null),Et=nn=e,gt=0,Oa=null,Hm=Pu=Gi=0,Gt=la=null,Mi!==null){for(e=0;e<Mi.length;e++)if(n=Mi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}n.pending=r}Mi=null}return t}function J_(t,e){do{var n=ft;try{if(Lm(),hc.current=$c,Bc){for(var r=Xe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Bc=!1}if(Zi=0,wt=pt=Xe=null,oa=!1,La=0,qm.current=null,n===null||n.return===null){gt=1,Oa=e,ft=null;break}e:{var o=t,a=n.return,u=n,d=e;if(e=Et,u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var f=d,m=u,g=m.tag;if(!(m.mode&1)&&(g===0||g===11||g===15)){var v=m.alternate;v?(m.updateQueue=v.updateQueue,m.memoizedState=v.memoizedState,m.lanes=v.lanes):(m.updateQueue=null,m.memoizedState=null)}var w=ev(a);if(w!==null){w.flags&=-257,tv(w,a,u,o,e),w.mode&1&&X0(o,f,e),e=w,d=f;var _=e.updateQueue;if(_===null){var k=new Set;k.add(d),e.updateQueue=k}else _.add(d);break e}else{if(!(e&1)){X0(o,f,e),Km();break e}d=Error(J(426))}}else if(Ge&&u.mode&1){var j=ev(a);if(j!==null){!(j.flags&65536)&&(j.flags|=256),tv(j,a,u,o,e),Nm(to(d,u));break e}}o=d=to(d,u),gt!==4&&(gt=2),la===null?la=[o]:la.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var S=O_(o,d,e);Z0(o,S);break e;case 1:u=d;var x=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Yr===null||!Yr.has(b)))){o.flags|=65536,e&=-e,o.lanes|=e;var N=I_(o,u,e);Z0(o,N);break e}}o=o.return}while(o!==null)}eb(n)}catch(R){e=R,ft===n&&n!==null&&(ft=n=n.return);continue}break}while(1)}function Q_(){var t=Uc.current;return Uc.current=$c,t===null?$c:t}function Km(){(gt===0||gt===3||gt===2)&&(gt=4),xt===null||!(Gi&268435455)&&!(Pu&268435455)||Br(xt,Et)}function Vc(t,e){var n=Te;Te|=2;var r=Q_();(xt!==t||Et!==e)&&(ur=null,Ui(t,e));do try{tj();break}catch(i){J_(t,i)}while(1);if(Lm(),Te=n,Uc.current=r,ft!==null)throw Error(J(261));return xt=null,Et=0,gt}function tj(){for(;ft!==null;)X_(ft)}function nj(){for(;ft!==null&&!EP();)X_(ft)}function X_(t){var e=nb(t.alternate,t,nn);t.memoizedProps=t.pendingProps,e===null?eb(t):ft=e,qm.current=null}function eb(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=KE(n,e),n!==null){n.flags&=32767,ft=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{gt=6,ft=null;return}}else if(n=GE(n,e,nn),n!==null){ft=n;return}if(e=e.sibling,e!==null){ft=e;return}ft=e=t}while(e!==null);gt===0&&(gt=5)}function Ei(t,e,n){var r=Ie,i=En.transition;try{En.transition=null,Ie=1,rj(t,e,n,r)}finally{En.transition=i,Ie=r}return null}function rj(t,e,n,r){do Hs();while(zr!==null);if(Te&6)throw Error(J(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(J(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(DP(t,o),t===xt&&(ft=xt=null,Et=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Fl||(Fl=!0,rb(Sc,function(){return Hs(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=En.transition,En.transition=null;var a=Ie;Ie=1;var u=Te;Te|=4,qm.current=null,JE(t,n),G_(n,t),kE(Xh),Pc=!!Qh,Xh=Qh=null,t.current=n,QE(n),jP(),Te=u,Ie=a,En.transition=o}else t.current=n;if(Fl&&(Fl=!1,zr=t,Fc=i),o=t.pendingLanes,o===0&&(Yr=null),LP(n.stateNode),Qt(t,st()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(zc)throw zc=!1,t=xf,xf=null,t;return Fc&1&&t.tag!==0&&Hs(),o=t.pendingLanes,o&1?t===_f?ca++:(ca=0,_f=t):ca=0,ui(),null}function Hs(){if(zr!==null){var t=Ox(Fc),e=En.transition,n=Ie;try{if(En.transition=null,Ie=16>t?16:t,zr===null)var r=!1;else{if(t=zr,zr=null,Fc=0,Te&6)throw Error(J(331));var i=Te;for(Te|=4,se=t.current;se!==null;){var o=se,a=o.child;if(se.flags&16){var u=o.deletions;if(u!==null){for(var d=0;d<u.length;d++){var f=u[d];for(se=f;se!==null;){var m=se;switch(m.tag){case 0:case 11:case 15:aa(8,m,o)}var g=m.child;if(g!==null)g.return=m,se=g;else for(;se!==null;){m=se;var v=m.sibling,w=m.return;if(H_(m),m===f){se=null;break}if(v!==null){v.return=w,se=v;break}se=w}}}var _=o.alternate;if(_!==null){var k=_.child;if(k!==null){_.child=null;do{var j=k.sibling;k.sibling=null,k=j}while(k!==null)}}se=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,se=a;else e:for(;se!==null;){if(o=se,o.flags&2048)switch(o.tag){case 0:case 11:case 15:aa(9,o,o.return)}var S=o.sibling;if(S!==null){S.return=o.return,se=S;break e}se=o.return}}var x=t.current;for(se=x;se!==null;){a=se;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,se=b;else e:for(a=x;se!==null;){if(u=se,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Cu(9,u)}}catch(R){tt(u,u.return,R)}if(u===a){se=null;break e}var N=u.sibling;if(N!==null){N.return=u.return,se=N;break e}se=u.return}}if(Te=i,ui(),Xn&&typeof Xn.onPostCommitFiberRoot=="function")try{Xn.onPostCommitFiberRoot(vu,t)}catch{}r=!0}return r}finally{Ie=n,En.transition=e}}return!1}function mv(t,e,n){e=to(n,e),e=O_(t,e,1),t=Kr(t,e,1),e=Ft(),t!==null&&(Wa(t,1,e),Qt(t,e))}function tt(t,e,n){if(t.tag===3)mv(t,t,n);else for(;e!==null;){if(e.tag===3){mv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Yr===null||!Yr.has(r))){t=to(n,t),t=I_(e,t,1),e=Kr(e,t,1),t=Ft(),e!==null&&(Wa(e,1,t),Qt(e,t));break}}e=e.return}}function ij(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ft(),t.pingedLanes|=t.suspendedLanes&n,xt===t&&(Et&n)===n&&(gt===4||gt===3&&(Et&130023424)===Et&&500>st()-Wm?Ui(t,0):Hm|=n),Qt(t,e)}function tb(t,e){e===0&&(t.mode&1?(e=Rl,Rl<<=1,!(Rl&130023424)&&(Rl=4194304)):e=1);var n=Ft();t=kr(t,e),t!==null&&(Wa(t,e,n),Qt(t,n))}function sj(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),tb(t,n)}function oj(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(J(314))}r!==null&&r.delete(e),tb(t,n)}var nb;nb=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Yt.current)Kt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Kt=!1,ZE(t,e,n);Kt=!!(t.flags&131072)}else Kt=!1,Ge&&e.flags&1048576&&o_(e,Ac,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;mc(t,e),t=e.pendingProps;var i=Js(e,Mt.current);qs(e,n),i=$m(null,e,r,t,i,n);var o=Um();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Jt(r)?(o=!0,Lc(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Om(e),i.updater=Su,e.stateNode=i,i._reactInternals=e,cf(e,r,t,n),e=hf(null,e,r,!0,o,n)):(e.tag=0,Ge&&o&&Em(e),Ut(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(mc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=lj(r),t=Dn(r,t),i){case 0:e=df(null,e,r,t,n);break e;case 1:e=iv(null,e,r,t,n);break e;case 11:e=nv(null,e,r,t,n);break e;case 14:e=rv(null,e,r,Dn(r.type,t),n);break e}throw Error(J(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Dn(r,i),df(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Dn(r,i),iv(t,e,r,i,n);case 3:e:{if($_(e),t===null)throw Error(J(387));r=e.pendingProps,o=e.memoizedState,i=o.element,h_(t,e),Mc(e,r,null,n);var a=e.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=to(Error(J(423)),e),e=sv(t,e,r,n,i);break e}else if(r!==i){i=to(Error(J(424)),e),e=sv(t,e,r,n,i);break e}else for(on=Gr(e.stateNode.containerInfo.firstChild),an=e,Ge=!0,Un=null,n=u_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qs(),r===i){e=Sr(t,e,n);break e}Ut(t,e,r,n)}e=e.child}return e;case 5:return f_(e),t===null&&of(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,a=i.children,ef(r,i)?a=null:o!==null&&ef(r,o)&&(e.flags|=32),B_(t,e),Ut(t,e,a,n),e.child;case 6:return t===null&&of(e),null;case 13:return U_(t,e,n);case 4:return Im(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Xs(e,null,r,n):Ut(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Dn(r,i),nv(t,e,r,i,n);case 7:return Ut(t,e,e.pendingProps,n),e.child;case 8:return Ut(t,e,e.pendingProps.children,n),e.child;case 12:return Ut(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,a=i.value,Ue(Oc,r._currentValue),r._currentValue=a,o!==null)if(Vn(o.value,a)){if(o.children===i.children&&!Yt.current){e=Sr(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){a=o.child;for(var d=u.firstContext;d!==null;){if(d.context===r){if(o.tag===1){d=gr(-1,n&-n),d.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var m=f.pending;m===null?d.next=d:(d.next=m.next,m.next=d),f.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),af(o.return,n,e),u.lanes|=n;break}d=d.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(J(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),af(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Ut(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,qs(e,n),i=jn(i),r=r(i),e.flags|=1,Ut(t,e,r,n),e.child;case 14:return r=e.type,i=Dn(r,e.pendingProps),i=Dn(r.type,i),rv(t,e,r,i,n);case 15:return M_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Dn(r,i),mc(t,e),e.tag=1,Jt(r)?(t=!0,Lc(e)):t=!1,qs(e,n),A_(e,r,i),cf(e,r,i,n),hf(null,e,r,!0,t,n);case 19:return z_(t,e,n);case 22:return D_(t,e,n)}throw Error(J(156,e.tag))};function rb(t,e){return Tx(t,e)}function aj(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(t,e,n,r){return new aj(t,e,n,r)}function Ym(t){return t=t.prototype,!(!t||!t.isReactComponent)}function lj(t){if(typeof t=="function")return Ym(t)?1:0;if(t!=null){if(t=t.$$typeof,t===pm)return 11;if(t===gm)return 14}return 2}function Qr(t,e){var n=t.alternate;return n===null?(n=Pn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function vc(t,e,n,r,i,o){var a=2;if(r=t,typeof t=="function")Ym(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Cs:return zi(n.children,i,o,e);case mm:a=8,i|=8;break;case Rh:return t=Pn(12,n,e,i|2),t.elementType=Rh,t.lanes=o,t;case Ah:return t=Pn(13,n,e,i),t.elementType=Ah,t.lanes=o,t;case Oh:return t=Pn(19,n,e,i),t.elementType=Oh,t.lanes=o,t;case fx:return Eu(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case dx:a=10;break e;case hx:a=9;break e;case pm:a=11;break e;case gm:a=14;break e;case Rr:a=16,r=null;break e}throw Error(J(130,t==null?t:typeof t,""))}return e=Pn(a,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function zi(t,e,n,r){return t=Pn(7,t,r,e),t.lanes=n,t}function Eu(t,e,n,r){return t=Pn(22,t,r,e),t.elementType=fx,t.lanes=n,t.stateNode={isHidden:!1},t}function Jd(t,e,n){return t=Pn(6,t,null,e),t.lanes=n,t}function Qd(t,e,n){return e=Pn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function cj(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rd(0),this.expirationTimes=Rd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Jm(t,e,n,r,i,o,a,u,d){return t=new cj(t,e,n,u,d),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Pn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Om(o),t}function uj(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ss,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ib(t){if(!t)return si;t=t._reactInternals;e:{if(Xi(t)!==t||t.tag!==1)throw Error(J(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(J(171))}if(t.tag===1){var n=t.type;if(Jt(n))return i_(t,n,e)}return e}function sb(t,e,n,r,i,o,a,u,d){return t=Jm(n,r,!0,t,i,o,a,u,d),t.context=ib(null),n=t.current,r=Ft(),i=Jr(n),o=gr(r,i),o.callback=e??null,Kr(n,o,i),t.current.lanes=i,Wa(t,i,r),Qt(t,r),t}function ju(t,e,n,r){var i=e.current,o=Ft(),a=Jr(i);return n=ib(n),e.context===null?e.context=n:e.pendingContext=n,e=gr(o,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Kr(i,e,a),t!==null&&(Fn(t,i,a,o),dc(t,i,a)),a}function qc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function pv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Qm(t,e){pv(t,e),(t=t.alternate)&&pv(t,e)}function dj(){return null}var ob=typeof reportError=="function"?reportError:function(t){console.error(t)};function Xm(t){this._internalRoot=t}Nu.prototype.render=Xm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(J(409));ju(t,e,null,null)};Nu.prototype.unmount=Xm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ki(function(){ju(null,t,null,null)}),e[br]=null}};function Nu(t){this._internalRoot=t}Nu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Dx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Dr.length&&e!==0&&e<Dr[n].priority;n++);Dr.splice(n,0,t),n===0&&$x(t)}};function ep(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Tu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function gv(){}function hj(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var f=qc(a);o.call(f)}}var a=sb(e,r,t,0,null,!1,!1,"",gv);return t._reactRootContainer=a,t[br]=a.current,Pa(t.nodeType===8?t.parentNode:t),Ki(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var u=r;r=function(){var f=qc(d);u.call(f)}}var d=Jm(t,0,!1,null,null,!1,!1,"",gv);return t._reactRootContainer=d,t[br]=d.current,Pa(t.nodeType===8?t.parentNode:t),Ki(function(){ju(e,d,n,r)}),d}function Lu(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var u=i;i=function(){var d=qc(a);u.call(d)}}ju(e,a,t,i)}else a=hj(n,e,t,i,r);return qc(a)}Ix=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Jo(e.pendingLanes);n!==0&&(ym(e,n|1),Qt(e,st()),!(Te&6)&&(no=st()+500,ui()))}break;case 13:Ki(function(){var r=kr(t,1);if(r!==null){var i=Ft();Fn(r,t,1,i)}}),Qm(t,1)}};xm=function(t){if(t.tag===13){var e=kr(t,134217728);if(e!==null){var n=Ft();Fn(e,t,134217728,n)}Qm(t,134217728)}};Mx=function(t){if(t.tag===13){var e=Jr(t),n=kr(t,e);if(n!==null){var r=Ft();Fn(n,t,e,r)}Qm(t,e)}};Dx=function(){return Ie};Bx=function(t,e){var n=Ie;try{return Ie=t,e()}finally{Ie=n}};qh=function(t,e,n){switch(e){case"input":if(Dh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=_u(r);if(!i)throw Error(J(90));px(r),Dh(r,i)}}}break;case"textarea":vx(t,n);break;case"select":e=n.value,e!=null&&Us(t,!!n.multiple,e,!1)}};Sx=Zm;Cx=Ki;var fj={usingClientEntryPoint:!1,Events:[Ga,Ns,_u,bx,kx,Zm]},Ho={findFiberByHostInstance:Ii,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},mj={bundleType:Ho.bundleType,version:Ho.version,rendererPackageName:Ho.rendererPackageName,rendererConfig:Ho.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=jx(t),t===null?null:t.stateNode},findFiberByHostInstance:Ho.findFiberByHostInstance||dj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vl.isDisabled&&Vl.supportsFiber)try{vu=Vl.inject(mj),Xn=Vl}catch{}}hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fj;hn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ep(e))throw Error(J(200));return uj(t,e,null,n)};hn.createRoot=function(t,e){if(!ep(t))throw Error(J(299));var n=!1,r="",i=ob;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Jm(t,1,!1,null,null,n,!1,r,i),t[br]=e.current,Pa(t.nodeType===8?t.parentNode:t),new Xm(e)};hn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(J(188)):(t=Object.keys(t).join(","),Error(J(268,t)));return t=jx(e),t=t===null?null:t.stateNode,t};hn.flushSync=function(t){return Ki(t)};hn.hydrate=function(t,e,n){if(!Tu(e))throw Error(J(200));return Lu(null,t,e,!0,n)};hn.hydrateRoot=function(t,e,n){if(!ep(t))throw Error(J(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",a=ob;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=sb(e,null,t,1,n??null,i,!1,o,a),t[br]=e.current,Pa(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Nu(e)};hn.render=function(t,e,n){if(!Tu(e))throw Error(J(200));return Lu(null,t,e,!1,n)};hn.unmountComponentAtNode=function(t){if(!Tu(t))throw Error(J(40));return t._reactRootContainer?(Ki(function(){Lu(null,null,t,!1,function(){t._reactRootContainer=null,t[br]=null})}),!0):!1};hn.unstable_batchedUpdates=Zm;hn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Tu(n))throw Error(J(200));if(t==null||t._reactInternals===void 0)throw Error(J(38));return Lu(t,e,n,!1,r)};hn.version="18.3.1-next-f1338f8080-20240426";function ab(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ab)}catch(t){console.error(t)}}ab(),ax.exports=hn;var pj=ax.exports,vv=pj;Th.createRoot=vv.createRoot,Th.hydrateRoot=vv.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ia(){return Ia=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ia.apply(this,arguments)}var Fr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Fr||(Fr={}));const wv="popstate";function gj(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:a,hash:u}=r.location;return Sf("",{pathname:o,search:a,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Hc(i)}return wj(e,n,null,t)}function at(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function tp(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function vj(){return Math.random().toString(36).substr(2,8)}function yv(t,e){return{usr:t.state,key:t.key,idx:e}}function Sf(t,e,n,r){return n===void 0&&(n=null),Ia({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?mo(e):e,{state:n,key:e&&e.key||r||vj()})}function Hc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function mo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function wj(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,u=Fr.Pop,d=null,f=m();f==null&&(f=0,a.replaceState(Ia({},a.state,{idx:f}),""));function m(){return(a.state||{idx:null}).idx}function g(){u=Fr.Pop;let j=m(),S=j==null?null:j-f;f=j,d&&d({action:u,location:k.location,delta:S})}function v(j,S){u=Fr.Push;let x=Sf(k.location,j,S);n&&n(x,j),f=m()+1;let b=yv(x,f),N=k.createHref(x);try{a.pushState(b,"",N)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;i.location.assign(N)}o&&d&&d({action:u,location:k.location,delta:1})}function w(j,S){u=Fr.Replace;let x=Sf(k.location,j,S);n&&n(x,j),f=m();let b=yv(x,f),N=k.createHref(x);a.replaceState(b,"",N),o&&d&&d({action:u,location:k.location,delta:0})}function _(j){let S=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof j=="string"?j:Hc(j);return x=x.replace(/ $/,"%20"),at(S,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,S)}let k={get action(){return u},get location(){return t(i,a)},listen(j){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(wv,g),d=j,()=>{i.removeEventListener(wv,g),d=null}},createHref(j){return e(i,j)},createURL:_,encodeLocation(j){let S=_(j);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:v,replace:w,go(j){return a.go(j)}};return k}var xv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(xv||(xv={}));function yj(t,e,n){return n===void 0&&(n="/"),xj(t,e,n,!1)}function xj(t,e,n,r){let i=typeof e=="string"?mo(e):e,o=np(i.pathname||"/",n);if(o==null)return null;let a=lb(t);_j(a);let u=null;for(let d=0;u==null&&d<a.length;++d){let f=Rj(o);u=Tj(a[d],f,r)}return u}function lb(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,a,u)=>{let d={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};d.relativePath.startsWith("/")&&(at(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let f=Xr([r,d.relativePath]),m=n.concat(d);o.children&&o.children.length>0&&(at(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),lb(o.children,e,m,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:jj(f,o.index),routesMeta:m})};return t.forEach((o,a)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,a);else for(let d of cb(o.path))i(o,a,d)}),e}function cb(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let a=cb(r.join("/")),u=[];return u.push(...a.map(d=>d===""?o:[o,d].join("/"))),i&&u.push(...a),u.map(d=>t.startsWith("/")&&d===""?"/":d)}function _j(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Nj(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const bj=/^:[\w-]+$/,kj=3,Sj=2,Cj=1,Pj=10,Ej=-2,_v=t=>t==="*";function jj(t,e){let n=t.split("/"),r=n.length;return n.some(_v)&&(r+=Ej),e&&(r+=Sj),n.filter(i=>!_v(i)).reduce((i,o)=>i+(bj.test(o)?kj:o===""?Cj:Pj),r)}function Nj(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function Tj(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},o="/",a=[];for(let u=0;u<r.length;++u){let d=r[u],f=u===r.length-1,m=o==="/"?e:e.slice(o.length)||"/",g=bv({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},m),v=d.route;if(!g&&f&&n&&!r[r.length-1].route.index&&(g=bv({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},m)),!g)return null;Object.assign(i,g.params),a.push({params:i,pathname:Xr([o,g.pathname]),pathnameBase:Dj(Xr([o,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(o=Xr([o,g.pathnameBase]))}return a}function bv(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Lj(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((f,m,g)=>{let{paramName:v,isOptional:w}=m;if(v==="*"){let k=u[g]||"";a=o.slice(0,o.length-k.length).replace(/(.)\/+$/,"$1")}const _=u[g];return w&&!_?f[v]=void 0:f[v]=(_||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:a,pattern:t}}function Lj(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),tp(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,d)=>(r.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Rj(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return tp(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function np(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const Aj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Oj=t=>Aj.test(t);function Ij(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?mo(t):t,o;if(n)if(Oj(n))o=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),tp(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?o=kv(n.substring(1),"/"):o=kv(n,e)}else o=e;return{pathname:o,search:Bj(r),hash:$j(i)}}function kv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Xd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Mj(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function rp(t,e){let n=Mj(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function ip(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=mo(t):(i=Ia({},t),at(!i.pathname||!i.pathname.includes("?"),Xd("?","pathname","search",i)),at(!i.pathname||!i.pathname.includes("#"),Xd("#","pathname","hash",i)),at(!i.search||!i.search.includes("#"),Xd("#","search","hash",i)));let o=t===""||i.pathname==="",a=o?"/":i.pathname,u;if(a==null)u=n;else{let g=e.length-1;if(!r&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),g-=1;i.pathname=v.join("/")}u=g>=0?e[g]:"/"}let d=Ij(i,u),f=a&&a!=="/"&&a.endsWith("/"),m=(o||a===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(f||m)&&(d.pathname+="/"),d}const Xr=t=>t.join("/").replace(/\/\/+/g,"/"),Dj=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Bj=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,$j=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Uj(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ub=["post","put","patch","delete"];new Set(ub);const zj=["get",...ub];new Set(zj);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ma(){return Ma=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ma.apply(this,arguments)}const sp=E.createContext(null),Fj=E.createContext(null),di=E.createContext(null),Ru=E.createContext(null),hi=E.createContext({outlet:null,matches:[],isDataRoute:!1}),db=E.createContext(null);function Vj(t,e){let{relative:n}=e===void 0?{}:e;po()||at(!1);let{basename:r,navigator:i}=E.useContext(di),{hash:o,pathname:a,search:u}=fb(t,{relative:n}),d=a;return r!=="/"&&(d=a==="/"?r:Xr([r,a])),i.createHref({pathname:d,search:u,hash:o})}function po(){return E.useContext(Ru)!=null}function go(){return po()||at(!1),E.useContext(Ru).location}function hb(t){E.useContext(di).static||E.useLayoutEffect(t)}function mn(){let{isDataRoute:t}=E.useContext(hi);return t?nN():qj()}function qj(){po()||at(!1);let t=E.useContext(sp),{basename:e,future:n,navigator:r}=E.useContext(di),{matches:i}=E.useContext(hi),{pathname:o}=go(),a=JSON.stringify(rp(i,n.v7_relativeSplatPath)),u=E.useRef(!1);return hb(()=>{u.current=!0}),E.useCallback(function(f,m){if(m===void 0&&(m={}),!u.current)return;if(typeof f=="number"){r.go(f);return}let g=ip(f,JSON.parse(a),o,m.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Xr([e,g.pathname])),(m.replace?r.replace:r.push)(g,m.state,m)},[e,r,a,o,t])}function fb(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=E.useContext(di),{matches:i}=E.useContext(hi),{pathname:o}=go(),a=JSON.stringify(rp(i,r.v7_relativeSplatPath));return E.useMemo(()=>ip(t,JSON.parse(a),o,n==="path"),[t,a,o,n])}function Hj(t,e){return Wj(t,e)}function Wj(t,e,n,r){po()||at(!1);let{navigator:i}=E.useContext(di),{matches:o}=E.useContext(hi),a=o[o.length-1],u=a?a.params:{};a&&a.pathname;let d=a?a.pathnameBase:"/";a&&a.route;let f=go(),m;if(e){var g;let j=typeof e=="string"?mo(e):e;d==="/"||(g=j.pathname)!=null&&g.startsWith(d)||at(!1),m=j}else m=f;let v=m.pathname||"/",w=v;if(d!=="/"){let j=d.replace(/^\//,"").split("/");w="/"+v.replace(/^\//,"").split("/").slice(j.length).join("/")}let _=yj(t,{pathname:w}),k=Jj(_&&_.map(j=>Object.assign({},j,{params:Object.assign({},u,j.params),pathname:Xr([d,i.encodeLocation?i.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?d:Xr([d,i.encodeLocation?i.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),o,n,r);return e&&k?E.createElement(Ru.Provider,{value:{location:Ma({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Fr.Pop}},k):k}function Zj(){let t=tN(),e=Uj(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),n?E.createElement("pre",{style:i},n):null,o)}const Gj=E.createElement(Zj,null);class Kj extends E.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?E.createElement(hi.Provider,{value:this.props.routeContext},E.createElement(db.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Yj(t){let{routeContext:e,match:n,children:r}=t,i=E.useContext(sp);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),E.createElement(hi.Provider,{value:e},r)}function Jj(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,u=(i=n)==null?void 0:i.errors;if(u!=null){let m=a.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);m>=0||at(!1),a=a.slice(0,Math.min(a.length,m+1))}let d=!1,f=-1;if(n&&r&&r.v7_partialHydration)for(let m=0;m<a.length;m++){let g=a[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=m),g.route.id){let{loaderData:v,errors:w}=n,_=g.route.loader&&v[g.route.id]===void 0&&(!w||w[g.route.id]===void 0);if(g.route.lazy||_){d=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((m,g,v)=>{let w,_=!1,k=null,j=null;n&&(w=u&&g.route.id?u[g.route.id]:void 0,k=g.route.errorElement||Gj,d&&(f<0&&v===0?(rN("route-fallback",!1),_=!0,j=null):f===v&&(_=!0,j=g.route.hydrateFallbackElement||null)));let S=e.concat(a.slice(0,v+1)),x=()=>{let b;return w?b=k:_?b=j:g.route.Component?b=E.createElement(g.route.Component,null):g.route.element?b=g.route.element:b=m,E.createElement(Yj,{match:g,routeContext:{outlet:m,matches:S,isDataRoute:n!=null},children:b})};return n&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?E.createElement(Kj,{location:n.location,revalidation:n.revalidation,component:k,error:w,children:x(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):x()},null)}var mb=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(mb||{}),Wc=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Wc||{});function Qj(t){let e=E.useContext(sp);return e||at(!1),e}function Xj(t){let e=E.useContext(Fj);return e||at(!1),e}function eN(t){let e=E.useContext(hi);return e||at(!1),e}function pb(t){let e=eN(),n=e.matches[e.matches.length-1];return n.route.id||at(!1),n.route.id}function tN(){var t;let e=E.useContext(db),n=Xj(Wc.UseRouteError),r=pb(Wc.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function nN(){let{router:t}=Qj(mb.UseNavigateStable),e=pb(Wc.UseNavigateStable),n=E.useRef(!1);return hb(()=>{n.current=!0}),E.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Ma({fromRouteId:e},o)))},[t,e])}const Sv={};function rN(t,e,n){!e&&!Sv[t]&&(Sv[t]=!0)}function iN(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function sN(t){let{to:e,replace:n,state:r,relative:i}=t;po()||at(!1);let{future:o,static:a}=E.useContext(di),{matches:u}=E.useContext(hi),{pathname:d}=go(),f=mn(),m=ip(e,rp(u,o.v7_relativeSplatPath),d,i==="path"),g=JSON.stringify(m);return E.useEffect(()=>f(JSON.parse(g),{replace:n,state:r,relative:i}),[f,g,i,n,r]),null}function On(t){at(!1)}function oN(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Fr.Pop,navigator:o,static:a=!1,future:u}=t;po()&&at(!1);let d=e.replace(/^\/*/,"/"),f=E.useMemo(()=>({basename:d,navigator:o,static:a,future:Ma({v7_relativeSplatPath:!1},u)}),[d,u,o,a]);typeof r=="string"&&(r=mo(r));let{pathname:m="/",search:g="",hash:v="",state:w=null,key:_="default"}=r,k=E.useMemo(()=>{let j=np(m,d);return j==null?null:{location:{pathname:j,search:g,hash:v,state:w,key:_},navigationType:i}},[d,m,g,v,w,_,i]);return k==null?null:E.createElement(di.Provider,{value:f},E.createElement(Ru.Provider,{children:n,value:k}))}function aN(t){let{children:e,location:n}=t;return Hj(Cf(e),n)}new Promise(()=>{});function Cf(t,e){e===void 0&&(e=[]);let n=[];return E.Children.forEach(t,(r,i)=>{if(!E.isValidElement(r))return;let o=[...e,i];if(r.type===E.Fragment){n.push.apply(n,Cf(r.props.children,o));return}r.type!==On&&at(!1),!r.props.index||!r.props.children||at(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Cf(r.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pf(){return Pf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pf.apply(this,arguments)}function lN(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function cN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function uN(t,e){return t.button===0&&(!e||e==="_self")&&!cN(t)}const dN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],hN="6";try{window.__reactRouterVersion=hN}catch{}const fN="startTransition",Cv=iP[fN];function mN(t){let{basename:e,children:n,future:r,window:i}=t,o=E.useRef();o.current==null&&(o.current=gj({window:i,v5Compat:!0}));let a=o.current,[u,d]=E.useState({action:a.action,location:a.location}),{v7_startTransition:f}=r||{},m=E.useCallback(g=>{f&&Cv?Cv(()=>d(g)):d(g)},[d,f]);return E.useLayoutEffect(()=>a.listen(m),[a,m]),E.useEffect(()=>iN(r),[r]),E.createElement(oN,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:a,future:r})}const pN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cr=E.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:o,replace:a,state:u,target:d,to:f,preventScrollReset:m,viewTransition:g}=e,v=lN(e,dN),{basename:w}=E.useContext(di),_,k=!1;if(typeof f=="string"&&gN.test(f)&&(_=f,pN))try{let b=new URL(window.location.href),N=f.startsWith("//")?new URL(b.protocol+f):new URL(f),R=np(N.pathname,w);N.origin===b.origin&&R!=null?f=R+N.search+N.hash:k=!0}catch{}let j=Vj(f,{relative:i}),S=vN(f,{replace:a,state:u,target:d,preventScrollReset:m,relative:i,viewTransition:g});function x(b){r&&r(b),b.defaultPrevented||S(b)}return E.createElement("a",Pf({},v,{href:_||j,onClick:k||o?r:x,ref:n,target:d}))});var Pv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Pv||(Pv={}));var Ev;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ev||(Ev={}));function vN(t,e){let{target:n,replace:r,state:i,preventScrollReset:o,relative:a,viewTransition:u}=e===void 0?{}:e,d=mn(),f=go(),m=fb(t,{relative:a});return E.useCallback(g=>{if(uN(g,n)){g.preventDefault();let v=r!==void 0?r:Hc(f)===Hc(m);d(t,{replace:v,state:i,preventScrollReset:o,relative:a,viewTransition:u})}},[f,d,m,r,i,n,t,o,a,u])}var Ef=function(t,e){return Ef=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Ef(t,e)};function gb(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Ef(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Zc=function(){return Zc=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Zc.apply(this,arguments)};function vo(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function vb(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var u=t.length-1;u>=0;u--)(a=t[u])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o}function wb(t,e){return function(n,r){e(n,r,t)}}function yb(t,e,n,r,i,o){function a(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var u=r.kind,d=u==="getter"?"get":u==="setter"?"set":"value",f=!e&&t?r.static?t:t.prototype:null,m=e||(f?Object.getOwnPropertyDescriptor(f,r.name):{}),g,v=!1,w=n.length-1;w>=0;w--){var _={};for(var k in r)_[k]=k==="access"?{}:r[k];for(var k in r.access)_.access[k]=r.access[k];_.addInitializer=function(S){if(v)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(S||null))};var j=(0,n[w])(u==="accessor"?{get:m.get,set:m.set}:m[d],_);if(u==="accessor"){if(j===void 0)continue;if(j===null||typeof j!="object")throw new TypeError("Object expected");(g=a(j.get))&&(m.get=g),(g=a(j.set))&&(m.set=g),(g=a(j.init))&&i.unshift(g)}else(g=a(j))&&(u==="field"?i.unshift(g):m[d]=g)}f&&Object.defineProperty(f,r.name,m),v=!0}function xb(t,e,n){for(var r=arguments.length>2,i=0;i<e.length;i++)n=r?e[i].call(t,n):e[i].call(t);return r?n:void 0}function _b(t){return typeof t=="symbol"?t:"".concat(t)}function bb(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function kb(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function oe(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function u(m){try{f(r.next(m))}catch(g){a(g)}}function d(m){try{f(r.throw(m))}catch(g){a(g)}}function f(m){m.done?o(m.value):i(m.value).then(u,d)}f((r=r.apply(t,e||[])).next())})}function Sb(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(f){return function(m){return d([f,m])}}function d(f){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,f[0]&&(n=0)),n;)try{if(r=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,i=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){n.label=f[1];break}if(f[0]===6&&n.label<o[1]){n.label=o[1],o=f;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(f);break}o[2]&&n.ops.pop(),n.trys.pop();continue}f=e.call(t,n)}catch(m){f=[6,m],i=0}finally{r=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}var Au=Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]};function Cb(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Au(e,t,n)}function Gc(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function op(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o}function Pb(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(op(arguments[e]));return t}function Eb(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r}function jb(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}function ro(t){return this instanceof ro?(this.v=t,this):new ro(t)}function Nb(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(w){return function(_){return Promise.resolve(_).then(w,g)}}function u(w,_){r[w]&&(i[w]=function(k){return new Promise(function(j,S){o.push([w,k,j,S])>1||d(w,k)})},_&&(i[w]=_(i[w])))}function d(w,_){try{f(r[w](_))}catch(k){v(o[0][3],k)}}function f(w){w.value instanceof ro?Promise.resolve(w.value.v).then(m,g):v(o[0][2],w)}function m(w){d("next",w)}function g(w){d("throw",w)}function v(w,_){w(_),o.shift(),o.length&&d(o[0][0],o[0][1])}}function Tb(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,o){e[i]=t[i]?function(a){return(n=!n)?{value:ro(t[i](a)),done:!1}:o?o(a):a}:o}}function Lb(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Gc=="function"?Gc(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(a){return new Promise(function(u,d){a=t[o](a),i(u,d,a.done,a.value)})}}function i(o,a,u,d){Promise.resolve(d).then(function(f){o({value:f,done:u})},a)}}function Rb(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var wN=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},jf=function(t){return jf=Object.getOwnPropertyNames||function(e){var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[n.length]=r);return n},jf(t)};function Ab(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=jf(t),r=0;r<n.length;r++)n[r]!=="default"&&Au(e,t,n[r]);return wN(e,t),e}function Ob(t){return t&&t.__esModule?t:{default:t}}function Ib(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function Mb(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n}function Db(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Bb(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var yN=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function $b(t){function e(o){t.error=t.hasError?new yN(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var n,r=0;function i(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(i);if(n.dispose){var o=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(o).then(i,function(a){return e(a),i()})}else r|=1}catch(a){e(a)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function Ub(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,i,o,a){return r?e?".jsx":".js":i&&(!o||!a)?n:i+o+"."+a.toLowerCase()+"js"}):t}const xN={__extends:gb,__assign:Zc,__rest:vo,__decorate:vb,__param:wb,__esDecorate:yb,__runInitializers:xb,__propKey:_b,__setFunctionName:bb,__metadata:kb,__awaiter:oe,__generator:Sb,__createBinding:Au,__exportStar:Cb,__values:Gc,__read:op,__spread:Pb,__spreadArrays:Eb,__spreadArray:jb,__await:ro,__asyncGenerator:Nb,__asyncDelegator:Tb,__asyncValues:Lb,__makeTemplateObject:Rb,__importStar:Ab,__importDefault:Ob,__classPrivateFieldGet:Ib,__classPrivateFieldSet:Mb,__classPrivateFieldIn:Db,__addDisposableResource:Bb,__disposeResources:$b,__rewriteRelativeImportExtension:Ub},_N=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Bb,get __assign(){return Zc},__asyncDelegator:Tb,__asyncGenerator:Nb,__asyncValues:Lb,__await:ro,__awaiter:oe,__classPrivateFieldGet:Ib,__classPrivateFieldIn:Db,__classPrivateFieldSet:Mb,__createBinding:Au,__decorate:vb,__disposeResources:$b,__esDecorate:yb,__exportStar:Cb,__extends:gb,__generator:Sb,__importDefault:Ob,__importStar:Ab,__makeTemplateObject:Rb,__metadata:kb,__param:wb,__propKey:_b,__read:op,__rest:vo,__rewriteRelativeImportExtension:Ub,__runInitializers:xb,__setFunctionName:bb,__spread:Pb,__spreadArray:jb,__spreadArrays:Eb,__values:Gc,default:xN},Symbol.toStringTag,{value:"Module"})),bN=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class ap extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class kN extends ap{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class jv extends ap{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Nv extends ap{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Nf;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Nf||(Nf={}));class SN{constructor(e,{headers:n={},customFetch:r,region:i=Nf.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=bN(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return oe(this,arguments,void 0,function*(n,r={}){var i;let o,a;try{const{headers:u,method:d,body:f,signal:m,timeout:g}=r;let v={},{region:w}=r;w||(w=this.region);const _=new URL(`${this.url}/${n}`);w&&w!=="any"&&(v["x-region"]=w,_.searchParams.set("forceFunctionRegion",w));let k;f&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)?typeof Blob<"u"&&f instanceof Blob||f instanceof ArrayBuffer?(v["Content-Type"]="application/octet-stream",k=f):typeof f=="string"?(v["Content-Type"]="text/plain",k=f):typeof FormData<"u"&&f instanceof FormData?k=f:(v["Content-Type"]="application/json",k=JSON.stringify(f)):k=f;let j=m;g&&(a=new AbortController,o=setTimeout(()=>a.abort(),g),m?(j=a.signal,m.addEventListener("abort",()=>a.abort())):j=a.signal);const S=yield this.fetch(_.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},v),this.headers),u),body:k,signal:j}).catch(R=>{throw new kN(R)}),x=S.headers.get("x-relay-error");if(x&&x==="true")throw new jv(S);if(!S.ok)throw new Nv(S);let b=((i=S.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),N;return b==="application/json"?N=yield S.json():b==="application/octet-stream"||b==="application/pdf"?N=yield S.blob():b==="text/event-stream"?N=S:b==="multipart/form-data"?N=yield S.formData():N=yield S.text(),{data:N,error:null,response:S}}catch(u){return{data:null,error:u,response:u instanceof Nv||u instanceof jv?u.context:void 0}}finally{o&&clearTimeout(o)}})}}var zt={};const wo=FC(_N);var ql={},Hl={},Wl={},Zl={},Gl={},Kl={},Tv;function zb(){if(Tv)return Kl;Tv=1,Object.defineProperty(Kl,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Kl.default=t,Kl}var Lv;function Fb(){if(Lv)return Gl;Lv=1,Object.defineProperty(Gl,"__esModule",{value:!0});const e=wo.__importDefault(zb());class n{constructor(i){var o,a;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(o=i.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=i.signal,this.isMaybeSingle=(a=i.isMaybeSingle)!==null&&a!==void 0?a:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=new Headers(this.headers),this.headers.set(i,o),this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let u=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var f,m,g,v;let w=null,_=null,k=null,j=d.status,S=d.statusText;if(d.ok){if(this.method!=="HEAD"){const R=await d.text();R===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((f=this.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?_=R:_=JSON.parse(R))}const b=(m=this.headers.get("Prefer"))===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),N=(g=d.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");b&&N&&N.length>1&&(k=parseInt(N[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(w={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,k=null,j=406,S="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const b=await d.text();try{w=JSON.parse(b),Array.isArray(w)&&d.status===404&&(_=[],w=null,j=200,S="OK")}catch{d.status===404&&b===""?(j=204,S="No Content"):w={message:b}}if(w&&this.isMaybeSingle&&(!((v=w==null?void 0:w.details)===null||v===void 0)&&v.includes("0 rows"))&&(w=null,j=200,S="OK"),w&&this.shouldThrowOnError)throw new e.default(w)}return{error:w,data:_,count:k,status:j,statusText:S}});return this.shouldThrowOnError||(u=u.catch(d=>{var f,m,g;return{error:{message:`${(f=d==null?void 0:d.name)!==null&&f!==void 0?f:"FetchError"}: ${d==null?void 0:d.message}`,details:`${(m=d==null?void 0:d.stack)!==null&&m!==void 0?m:""}`,hint:"",code:`${(g=d==null?void 0:d.code)!==null&&g!==void 0?g:""}`},data:null,count:null,status:0,statusText:""}})),u.then(i,o)}returns(){return this}overrideTypes(){return this}}return Gl.default=n,Gl}var Rv;function Vb(){if(Rv)return Zl;Rv=1,Object.defineProperty(Zl,"__esModule",{value:!0});const e=wo.__importDefault(Fb());class n extends e.default{select(i){let o=!1;const a=(i??"*").split("").map(u=>/\s/.test(u)&&!o?"":(u==='"'&&(o=!o),u)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:o=!0,nullsFirst:a,foreignTable:u,referencedTable:d=u}={}){const f=d?`${d}.order`:"order",m=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${m?`${m},`:""}${i}.${o?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:o,referencedTable:a=o}={}){const u=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(u,`${i}`),this}range(i,o,{foreignTable:a,referencedTable:u=a}={}){const d=typeof u>"u"?"offset":`${u}.offset`,f=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${i}`),this.url.searchParams.set(f,`${o-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:o=!1,settings:a=!1,buffers:u=!1,wal:d=!1,format:f="text"}={}){var m;const g=[i?"analyze":null,o?"verbose":null,a?"settings":null,u?"buffers":null,d?"wal":null].filter(Boolean).join("|"),v=(m=this.headers.get("Accept"))!==null&&m!==void 0?m:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${v}"; options=${g};`),f==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return Zl.default=n,Zl}var Av;function lp(){if(Av)return Wl;Av=1,Object.defineProperty(Wl,"__esModule",{value:!0});const e=wo.__importDefault(Vb()),n=new RegExp("[,()]");class r extends e.default{eq(o,a){return this.url.searchParams.append(o,`eq.${a}`),this}neq(o,a){return this.url.searchParams.append(o,`neq.${a}`),this}gt(o,a){return this.url.searchParams.append(o,`gt.${a}`),this}gte(o,a){return this.url.searchParams.append(o,`gte.${a}`),this}lt(o,a){return this.url.searchParams.append(o,`lt.${a}`),this}lte(o,a){return this.url.searchParams.append(o,`lte.${a}`),this}like(o,a){return this.url.searchParams.append(o,`like.${a}`),this}likeAllOf(o,a){return this.url.searchParams.append(o,`like(all).{${a.join(",")}}`),this}likeAnyOf(o,a){return this.url.searchParams.append(o,`like(any).{${a.join(",")}}`),this}ilike(o,a){return this.url.searchParams.append(o,`ilike.${a}`),this}ilikeAllOf(o,a){return this.url.searchParams.append(o,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(o,a){return this.url.searchParams.append(o,`ilike(any).{${a.join(",")}}`),this}is(o,a){return this.url.searchParams.append(o,`is.${a}`),this}in(o,a){const u=Array.from(new Set(a)).map(d=>typeof d=="string"&&n.test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(o,`in.(${u})`),this}contains(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cs.{${a.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(a)}`),this}containedBy(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cd.{${a.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(a)}`),this}rangeGt(o,a){return this.url.searchParams.append(o,`sr.${a}`),this}rangeGte(o,a){return this.url.searchParams.append(o,`nxl.${a}`),this}rangeLt(o,a){return this.url.searchParams.append(o,`sl.${a}`),this}rangeLte(o,a){return this.url.searchParams.append(o,`nxr.${a}`),this}rangeAdjacent(o,a){return this.url.searchParams.append(o,`adj.${a}`),this}overlaps(o,a){return typeof a=="string"?this.url.searchParams.append(o,`ov.${a}`):this.url.searchParams.append(o,`ov.{${a.join(",")}}`),this}textSearch(o,a,{config:u,type:d}={}){let f="";d==="plain"?f="pl":d==="phrase"?f="ph":d==="websearch"&&(f="w");const m=u===void 0?"":`(${u})`;return this.url.searchParams.append(o,`${f}fts${m}.${a}`),this}match(o){return Object.entries(o).forEach(([a,u])=>{this.url.searchParams.append(a,`eq.${u}`)}),this}not(o,a,u){return this.url.searchParams.append(o,`not.${a}.${u}`),this}or(o,{foreignTable:a,referencedTable:u=a}={}){const d=u?`${u}.or`:"or";return this.url.searchParams.append(d,`(${o})`),this}filter(o,a,u){return this.url.searchParams.append(o,`${a}.${u}`),this}}return Wl.default=r,Wl}var Ov;function qb(){if(Ov)return Hl;Ov=1,Object.defineProperty(Hl,"__esModule",{value:!0});const e=wo.__importDefault(lp());class n{constructor(i,{headers:o={},schema:a,fetch:u}){this.url=i,this.headers=new Headers(o),this.schema=a,this.fetch=u}select(i,o){const{head:a=!1,count:u}=o??{},d=a?"HEAD":"GET";let f=!1;const m=(i??"*").split("").map(g=>/\s/.test(g)&&!f?"":(g==='"'&&(f=!f),g)).join("");return this.url.searchParams.set("select",m),u&&this.headers.append("Prefer",`count=${u}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:o,defaultToNull:a=!0}={}){var u;const d="POST";if(o&&this.headers.append("Prefer",`count=${o}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const f=i.reduce((m,g)=>m.concat(Object.keys(g)),[]);if(f.length>0){const m=[...new Set(f)].map(g=>`"${g}"`);this.url.searchParams.set("columns",m.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}upsert(i,{onConflict:o,ignoreDuplicates:a=!1,count:u,defaultToNull:d=!0}={}){var f;const m="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),u&&this.headers.append("Prefer",`count=${u}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const g=i.reduce((v,w)=>v.concat(Object.keys(w)),[]);if(g.length>0){const v=[...new Set(g)].map(w=>`"${w}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}update(i,{count:o}={}){var a;const u="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:i}={}){var o;const a="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}}return Hl.default=n,Hl}var Iv;function CN(){if(Iv)return ql;Iv=1,Object.defineProperty(ql,"__esModule",{value:!0});const t=wo,e=t.__importDefault(qb()),n=t.__importDefault(lp());class r{constructor(o,{headers:a={},schema:u,fetch:d}={}){this.url=o,this.headers=new Headers(a),this.schemaName=u,this.fetch=d}from(o){const a=new URL(`${this.url}/${o}`);return new e.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new r(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:u=!1,get:d=!1,count:f}={}){var m;let g;const v=new URL(`${this.url}/rpc/${o}`);let w;u||d?(g=u?"HEAD":"GET",Object.entries(a).filter(([k,j])=>j!==void 0).map(([k,j])=>[k,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([k,j])=>{v.searchParams.append(k,j)})):(g="POST",w=a);const _=new Headers(this.headers);return f&&_.set("Prefer",`count=${f}`),new n.default({method:g,url:v,headers:_,schema:this.schemaName,body:w,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}}return ql.default=r,ql}Object.defineProperty(zt,"__esModule",{value:!0});var Hb=zt.PostgrestError=t1=zt.PostgrestBuilder=Xb=zt.PostgrestTransformBuilder=Jb=zt.PostgrestFilterBuilder=Kb=zt.PostgrestQueryBuilder=Zb=zt.PostgrestClient=void 0;const yo=wo,Wb=yo.__importDefault(CN());var Zb=zt.PostgrestClient=Wb.default;const Gb=yo.__importDefault(qb());var Kb=zt.PostgrestQueryBuilder=Gb.default;const Yb=yo.__importDefault(lp());var Jb=zt.PostgrestFilterBuilder=Yb.default;const Qb=yo.__importDefault(Vb());var Xb=zt.PostgrestTransformBuilder=Qb.default;const e1=yo.__importDefault(Fb());var t1=zt.PostgrestBuilder=e1.default;const n1=yo.__importDefault(zb());Hb=zt.PostgrestError=n1.default;var r1=zt.default={PostgrestClient:Wb.default,PostgrestQueryBuilder:Gb.default,PostgrestFilterBuilder:Yb.default,PostgrestTransformBuilder:Qb.default,PostgrestBuilder:e1.default,PostgrestError:n1.default};const PN=Ky({__proto__:null,get PostgrestBuilder(){return t1},get PostgrestClient(){return Zb},get PostgrestError(){return Hb},get PostgrestFilterBuilder(){return Jb},get PostgrestQueryBuilder(){return Kb},get PostgrestTransformBuilder(){return Xb},default:r1},[zt]),{PostgrestClient:EN,PostgrestQueryBuilder:kB,PostgrestFilterBuilder:SB,PostgrestTransformBuilder:CB,PostgrestBuilder:PB,PostgrestError:EB}=r1||PN;class jN{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const NN="2.81.1",TN=`realtime-js/${NN}`,i1="1.0.0",LN="2.0.0",Mv=i1,Tf=1e4,RN=1e3,AN=100;var Ri;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ri||(Ri={}));var mt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(mt||(mt={}));var kn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(kn||(kn={}));var Lf;(function(t){t.websocket="websocket"})(Lf||(Lf={}));var Ai;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ai||(Ai={}));class ON{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(e,n){if(this._isArrayBuffer(e.payload))return n(this._binaryEncodePush(e));if(e.event===this.BROADCAST&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodePush(e){const{join_ref:n,ref:r,event:i,topic:o,payload:a}=e,u=this.META_LENGTH+n.length+r.length+o.length+i.length,d=new ArrayBuffer(this.HEADER_LENGTH+u);let f=new DataView(d),m=0;f.setUint8(m++,this.KINDS.push),f.setUint8(m++,n.length),f.setUint8(m++,r.length),f.setUint8(m++,o.length),f.setUint8(m++,i.length),Array.from(n,v=>f.setUint8(m++,v.charCodeAt(0))),Array.from(r,v=>f.setUint8(m++,v.charCodeAt(0))),Array.from(o,v=>f.setUint8(m++,v.charCodeAt(0))),Array.from(i,v=>f.setUint8(m++,v.charCodeAt(0)));var g=new Uint8Array(d.byteLength+a.byteLength);return g.set(new Uint8Array(d),0),g.set(new Uint8Array(a),d.byteLength),g.buffer}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const{join_ref:i,ref:o,topic:a}=e,u=e.payload.event,d=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0),f=this.USER_BROADCAST_PUSH_META_LENGTH+i.length+o.length+a.length+u.length,m=new ArrayBuffer(this.HEADER_LENGTH+f);let g=new DataView(m),v=0;g.setUint8(v++,this.KINDS.userBroadcastPush),g.setUint8(v++,i.length),g.setUint8(v++,o.length),g.setUint8(v++,a.length),g.setUint8(v++,u.length),g.setUint8(v++,this.BINARY_ENCODING),Array.from(i,_=>g.setUint8(v++,_.charCodeAt(0))),Array.from(o,_=>g.setUint8(v++,_.charCodeAt(0))),Array.from(a,_=>g.setUint8(v++,_.charCodeAt(0))),Array.from(u,_=>g.setUint8(v++,_.charCodeAt(0)));var w=new Uint8Array(m.byteLength+d.byteLength);return w.set(new Uint8Array(m),0),w.set(new Uint8Array(d),m.byteLength),w.buffer}_encodeJsonUserBroadcastPush(e){var n,r;const{join_ref:i,ref:o,topic:a}=e,u=e.payload.event,d=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},m=new TextEncoder().encode(JSON.stringify(d)).buffer,g=this.USER_BROADCAST_PUSH_META_LENGTH+i.length+o.length+a.length+u.length,v=new ArrayBuffer(this.HEADER_LENGTH+g);let w=new DataView(v),_=0;w.setUint8(_++,this.KINDS.userBroadcastPush),w.setUint8(_++,i.length),w.setUint8(_++,o.length),w.setUint8(_++,a.length),w.setUint8(_++,u.length),w.setUint8(_++,this.JSON_ENCODING),Array.from(i,j=>w.setUint8(_++,j.charCodeAt(0))),Array.from(o,j=>w.setUint8(_++,j.charCodeAt(0))),Array.from(a,j=>w.setUint8(_++,j.charCodeAt(0))),Array.from(u,j=>w.setUint8(_++,j.charCodeAt(0)));var k=new Uint8Array(v.byteLength+m.byteLength);return k.set(new Uint8Array(v),0),k.set(new Uint8Array(m),v.byteLength),k.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,o,a,u,d]=r;return n({join_ref:i,ref:o,topic:a,event:u,payload:d})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.push:return this._decodePush(e,n,i);case this.KINDS.reply:return this._decodeReply(e,n,i);case this.KINDS.broadcast:return this._decodeBroadcast(e,n,i);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,i)}}_decodePush(e,n,r){const i=n.getUint8(1),o=n.getUint8(2),a=n.getUint8(3);let u=this.HEADER_LENGTH+this.META_LENGTH-1;const d=r.decode(e.slice(u,u+i));u=u+i;const f=r.decode(e.slice(u,u+o));u=u+o;const m=r.decode(e.slice(u,u+a));u=u+a;const g=JSON.parse(r.decode(e.slice(u,e.byteLength)));return{join_ref:d,ref:null,topic:f,event:m,payload:g}}_decodeReply(e,n,r){const i=n.getUint8(1),o=n.getUint8(2),a=n.getUint8(3),u=n.getUint8(4);let d=this.HEADER_LENGTH+this.META_LENGTH;const f=r.decode(e.slice(d,d+i));d=d+i;const m=r.decode(e.slice(d,d+o));d=d+o;const g=r.decode(e.slice(d,d+a));d=d+a;const v=r.decode(e.slice(d,d+u));d=d+u;const w=JSON.parse(r.decode(e.slice(d,e.byteLength))),_={status:v,response:w};return{join_ref:f,ref:m,topic:g,event:kn.reply,payload:_}}_decodeBroadcast(e,n,r){const i=n.getUint8(1),o=n.getUint8(2);let a=this.HEADER_LENGTH+2;const u=r.decode(e.slice(a,a+i));a=a+i;const d=r.decode(e.slice(a,a+o));a=a+o;const f=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{join_ref:null,ref:null,topic:u,event:d,payload:f}}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),o=n.getUint8(2),a=n.getUint8(3),u=n.getUint8(4);let d=this.HEADER_LENGTH+4;const f=r.decode(e.slice(d,d+i));d=d+i;const m=r.decode(e.slice(d,d+o));d=d+o;const g=r.decode(e.slice(d,d+a));d=d+a;const v=e.slice(d,e.byteLength),w=u===this.JSON_ENCODING?JSON.parse(r.decode(v)):v,_={type:this.BROADCAST,event:m,payload:w};return a>0&&(_.meta=JSON.parse(g)),{join_ref:null,ref:null,topic:f,event:this.BROADCAST,payload:_}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}}let s1=class{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var $e;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})($e||($e={}));const Dv=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((o,a)=>(o[a]=IN(a,t,e,i),o),{}):{}},IN=(t,e,n,r)=>{const i=e.find(u=>u.name===t),o=i==null?void 0:i.type,a=n[t];return o&&!r.includes(o)?o1(o,a):Rf(a)},o1=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return $N(e,n)}switch(t){case $e.bool:return MN(e);case $e.float4:case $e.float8:case $e.int2:case $e.int4:case $e.int8:case $e.numeric:case $e.oid:return DN(e);case $e.json:case $e.jsonb:return BN(e);case $e.timestamp:return UN(e);case $e.abstime:case $e.date:case $e.daterange:case $e.int4range:case $e.int8range:case $e.money:case $e.reltime:case $e.text:case $e.time:case $e.timestamptz:case $e.timetz:case $e.tsrange:case $e.tstzrange:return Rf(e);default:return Rf(e)}},Rf=t=>t,MN=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},DN=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},BN=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},$N=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let o;const a=t.slice(1,n);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(u=>o1(e,u))}return t},UN=t=>typeof t=="string"?t.replace(" ","T"):t,a1=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class eh{constructor(e,n,r={},i=Tf){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Bv;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Bv||(Bv={}));class ua{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:a,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ua.syncState(this.state,i,o,a),this.pendingDiffs.forEach(d=>{this.state=ua.syncDiff(this.state,d,o,a)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:a,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=ua.syncDiff(this.state,i,o,a),u())}),this.onJoin((i,o,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:a})}),this.onLeave((i,o,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const o=this.cloneDeep(e),a=this.transformState(n),u={},d={};return this.map(o,(f,m)=>{a[f]||(d[f]=m)}),this.map(a,(f,m)=>{const g=o[f];if(g){const v=m.map(j=>j.presence_ref),w=g.map(j=>j.presence_ref),_=m.filter(j=>w.indexOf(j.presence_ref)<0),k=g.filter(j=>v.indexOf(j.presence_ref)<0);_.length>0&&(u[f]=_),k.length>0&&(d[f]=k)}else u[f]=m}),this.syncDiff(o,{joins:u,leaves:d},r,i)}static syncDiff(e,n,r,i){const{joins:o,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(u,d)=>{var f;const m=(f=e[u])!==null&&f!==void 0?f:[];if(e[u]=this.cloneDeep(d),m.length>0){const g=e[u].map(w=>w.presence_ref),v=m.filter(w=>g.indexOf(w.presence_ref)<0);e[u].unshift(...v)}r(u,m,d)}),this.map(a,(u,d)=>{let f=e[u];if(!f)return;const m=d.map(g=>g.presence_ref);f=f.filter(g=>m.indexOf(g.presence_ref)<0),e[u]=f,i(u,f,d),f.length===0&&delete e[u]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var $v;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})($v||($v={}));var da;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(da||(da={}));var dr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(dr||(dr={}));class cp{constructor(e,n={config:{}},r){var i,o;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=mt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new eh(this,kn.join,this.params,this.timeout),this.rejoinTimer=new s1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=mt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=mt.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=mt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=mt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=mt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(kn.reply,{},(a,u)=>{this._trigger(this._replyEventName(u),a)}),this.presence=new ua(this),this.broadcastEndpointURL=a1(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==mt.closed){const{config:{broadcast:a,presence:u,private:d}}=this.params,f=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(w=>w.filter))!==null&&i!==void 0?i:[],m=!!this.bindings[da.PRESENCE]&&this.bindings[da.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,g={},v={broadcast:a,presence:Object.assign(Object.assign({},u),{enabled:m}),postgres_changes:f,private:d};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(w=>e==null?void 0:e(dr.CHANNEL_ERROR,w)),this._onClose(()=>e==null?void 0:e(dr.CLOSED)),this.updateJoinPayload(Object.assign({config:v},g)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:w})=>{var _;if(this.socket.setAuth(),w===void 0){e==null||e(dr.SUBSCRIBED);return}else{const k=this.bindings.postgres_changes,j=(_=k==null?void 0:k.length)!==null&&_!==void 0?_:0,S=[];for(let x=0;x<j;x++){const b=k[x],{filter:{event:N,schema:R,table:B,filter:I}}=b,F=w&&w[x];if(F&&F.event===N&&F.schema===R&&F.table===B&&F.filter===I)S.push(Object.assign(Object.assign({},b),{id:F.id}));else{this.unsubscribe(),this.state=mt.errored,e==null||e(dr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,e&&e(dr.SUBSCRIBED);return}}).receive("error",w=>{this.state=mt.errored,e==null||e(dr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(dr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===mt.joined&&e===da.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;const o=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const a={method:"POST",headers:{Authorization:o,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},u=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(u.status===202)return{success:!0};let d=u.statusText;try{const f=await u.json();d=f.error||f.message||d}catch{}return Promise.reject(new Error(d))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:a}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=f.body)===null||i===void 0?void 0:i.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,u,d;const f=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(u=(a=this.params)===null||a===void 0?void 0:a.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&o("ok"),f.receive("ok",()=>o("ok")),f.receive("error",()=>o("error")),f.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=mt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(kn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new eh(this,kn.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=mt.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,o=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(o),a}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new eh(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>AN){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,o;const a=e.toLocaleLowerCase(),{close:u,error:d,leave:f,join:m}=kn;if(r&&[u,d,f,m].indexOf(a)>=0&&r!==this._joinRef())return;let v=this._onMessage(a,n,r);if(n&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(w=>{var _,k,j;return((_=w.filter)===null||_===void 0?void 0:_.event)==="*"||((j=(k=w.filter)===null||k===void 0?void 0:k.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===a}).map(w=>w.callback(v,r)):(o=this.bindings[a])===null||o===void 0||o.filter(w=>{var _,k,j,S,x,b;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in w){const N=w.id,R=(_=w.filter)===null||_===void 0?void 0:_.event;return N&&((k=n.ids)===null||k===void 0?void 0:k.includes(N))&&(R==="*"||(R==null?void 0:R.toLocaleLowerCase())===((j=n.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const N=(x=(S=w==null?void 0:w.filter)===null||S===void 0?void 0:S.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return N==="*"||N===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===a}).map(w=>{if(typeof v=="object"&&"ids"in v){const _=v.data,{schema:k,table:j,commit_timestamp:S,type:x,errors:b}=_;v=Object.assign(Object.assign({},{schema:k,table:j,commit_timestamp:S,eventType:x,new:{},old:{},errors:b}),this._getPayloadRecords(_))}w.callback(v,r)})}_isClosed(){return this.state===mt.closed}_isJoined(){return this.state===mt.joined}_isJoining(){return this.state===mt.joining}_isLeaving(){return this.state===mt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),o={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&cp.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(kn.close,{},e)}_onError(e){this._on(kn.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=mt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Dv(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Dv(e.columns,e.old_record)),n}}const th=()=>{},Yl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},zN=[1e3,2e3,5e3,1e4],FN=1e4,VN=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class qN{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Tf,this.transport=null,this.heartbeatIntervalMs=Yl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=th,this.ref=0,this.reconnectTimer=null,this.vsn=Mv,this.logger=th,this.conn=null,this.sendBuffer=[],this.serializer=new ON,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Lf.websocket}`,this.httpEndpoint=a1(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=jN.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ri.connecting:return Ai.Connecting;case Ri.open:return Ai.Open;case Ri.closing:return Ai.Closing;default:return Ai.Closed}}isConnected(){return this.connectionState()===Ai.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{const o=new cp(`realtime:${e}`,n,this);return this.channels.push(o),o}}push(e){const{topic:n,event:r,payload:i,ref:o}=e,a=()=>{this.encode(e,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${n} ${r} (${o})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(RN,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Yl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:o,ref:a}=n,u=a?`(${a})`:"",d=o.status||"";this.log("receive",`${d} ${r} ${i} ${u}`.trim(),o),this.channels.filter(f=>f._isMember(r)).forEach(f=>f._trigger(i,o,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ri.open||this.conn.readyState===Ri.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(kn.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([VN],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:TN};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(kn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new s1(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Yl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,o,a,u,d,f,m,g,v,w;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Tf,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Yl.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(u=e==null?void 0:e.heartbeatCallback)!==null&&u!==void 0?u:th,this.vsn=(d=e==null?void 0:e.vsn)!==null&&d!==void 0?d:Mv,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=e==null?void 0:e.reconnectAfterMs)!==null&&f!==void 0?f:_=>zN[_-1]||FN,this.vsn){case i1:this.encode=(m=e==null?void 0:e.encode)!==null&&m!==void 0?m:(_,k)=>k(JSON.stringify(_)),this.decode=(g=e==null?void 0:e.decode)!==null&&g!==void 0?g:(_,k)=>k(JSON.parse(_));break;case LN:this.encode=(v=e==null?void 0:e.encode)!==null&&v!==void 0?v:this.serializer.encode.bind(this.serializer),this.decode=(w=e==null?void 0:e.decode)!==null&&w!==void 0?w:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class up extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ye(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class HN extends up{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Af extends up{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const dp=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),WN=()=>Response,Of=t=>{if(Array.isArray(t))return t.map(n=>Of(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=Of(r)}),e},ZN=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},nh=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},GN=(t,e,n)=>oe(void 0,void 0,void 0,function*(){const r=yield WN();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{const o=t.status||500,a=(i==null?void 0:i.statusCode)||o+"";e(new HN(nh(i),o,a))}).catch(i=>{e(new Af(nh(i),i))}):e(new Af(nh(t),t))}),KN=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?i:(ZN(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),n))};function Ya(t,e,n,r,i,o){return oe(this,void 0,void 0,function*(){return new Promise((a,u)=>{t(n,KN(e,r,i,o)).then(d=>{if(!d.ok)throw d;return r!=null&&r.noResolveJson?d:d.json()}).then(d=>a(d)).catch(d=>GN(d,u,r))})})}function Da(t,e,n,r){return oe(this,void 0,void 0,function*(){return Ya(t,"GET",e,n,r)})}function Bn(t,e,n,r,i){return oe(this,void 0,void 0,function*(){return Ya(t,"POST",e,r,i,n)})}function If(t,e,n,r,i){return oe(this,void 0,void 0,function*(){return Ya(t,"PUT",e,r,i,n)})}function YN(t,e,n,r){return oe(this,void 0,void 0,function*(){return Ya(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function hp(t,e,n,r,i){return oe(this,void 0,void 0,function*(){return Ya(t,"DELETE",e,r,i,n)})}class JN{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return oe(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ye(e))return{data:null,error:e};throw e}})}}var l1;class QN{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[l1]="BlobDownloadBuilder",this.promise=null}asStream(){return new JN(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return oe(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ye(e))return{data:null,error:e};throw e}})}}l1=Symbol.toStringTag;const XN=QN,eT={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Uv={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class tT{constructor(e,n={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=dp(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,i){return oe(this,void 0,void 0,function*(){try{let o;const a=Object.assign(Object.assign({},Uv),i);let u=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const d=a.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),d&&o.append("metadata",this.encodeMetadata(d)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.has("cacheControl")||o.append("cacheControl",a.cacheControl),d&&!o.has("metadata")&&o.append("metadata",this.encodeMetadata(d))):(o=r,u["cache-control"]=`max-age=${a.cacheControl}`,u["content-type"]=a.contentType,d&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(d))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!a.duplex&&(a.duplex="half")),i!=null&&i.headers&&(u=Object.assign(Object.assign({},u),i.headers));const f=this._removeEmptyFolders(n),m=this._getFinalPath(f),g=yield(e=="PUT"?If:Bn)(this.fetch,`${this.url}/object/${m}`,o,Object.assign({headers:u},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:f,id:g.Id,fullPath:g.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ye(o))return{data:null,error:o};throw o}})}upload(e,n,r){return oe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return oe(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),a=this._getFinalPath(o),u=new URL(this.url+`/object/upload/sign/${a}`);u.searchParams.set("token",n);try{let d;const f=Object.assign({upsert:Uv.upsert},i),m=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&r instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),d.append("",r)):typeof FormData<"u"&&r instanceof FormData?(d=r,d.append("cacheControl",f.cacheControl)):(d=r,m["cache-control"]=`max-age=${f.cacheControl}`,m["content-type"]=f.contentType);const g=yield If(this.fetch,u.toString(),d,{headers:m});return{data:{path:o,fullPath:g.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Ye(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,n){return oe(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const o=yield Bn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(this.url+o.url),u=a.searchParams.get("token");if(!u)throw new up("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:u},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ye(r))return{data:null,error:r};throw r}})}update(e,n,r){return oe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return oe(this,void 0,void 0,function*(){try{return{data:yield Bn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ye(i))return{data:null,error:i};throw i}})}copy(e,n,r){return oe(this,void 0,void 0,function*(){try{return{data:{path:(yield Bn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ye(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return oe(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),o=yield Bn(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${a}`)},{data:o,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ye(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return oe(this,void 0,void 0,function*(){try{const i=yield Bn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${o}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ye(i))return{data:null,error:i};throw i}})}download(e,n){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=o?`?${o}`:"",u=this._getFinalPath(e),d=()=>Da(this.fetch,`${this.url}/${i}/${u}${a}`,{headers:this.headers,noResolveJson:!0});return new XN(d,this.shouldThrowOnError)}info(e){return oe(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Da(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Of(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ye(r))return{data:null,error:r};throw r}})}exists(e){return oe(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield YN(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ye(r)&&r instanceof Af){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&i.push(o);const u=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});d!==""&&i.push(d);let f=i.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${r}${f}`)}}}remove(e){return oe(this,void 0,void 0,function*(){try{return{data:yield hp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ye(n))return{data:null,error:n};throw n}})}list(e,n,r){return oe(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},eT),n),{prefix:e||""});return{data:yield Bn(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ye(i))return{data:null,error:i};throw i}})}listV2(e,n){return oe(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Bn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ye(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const c1="2.81.1",u1={"X-Client-Info":`storage-js/${c1}`};class nT{constructor(e,n={},r,i){this.shouldThrowOnError=!1;const o=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},u1),n),this.fetch=dp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return oe(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield Da(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ye(n))return{data:null,error:n};throw n}})}getBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:yield Da(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ye(n))return{data:null,error:n};throw n}})}createBucket(e){return oe(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield Bn(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ye(i))return{data:null,error:i};throw i}})}updateBucket(e,n){return oe(this,void 0,void 0,function*(){try{return{data:yield If(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ye(r))return{data:null,error:r};throw r}})}emptyBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:yield Bn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ye(n))return{data:null,error:n};throw n}})}deleteBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:yield hp(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ye(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class rT{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},u1),n),this.fetch=dp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:yield Bn(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ye(n))return{data:null,error:n};throw n}})}listBuckets(e){return oe(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Da(this.fetch,i,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ye(n))return{data:null,error:n};throw n}})}deleteBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:yield hp(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ye(n))return{data:null,error:n};throw n}})}}const fp={"X-Client-Info":`storage-js/${c1}`,"Content-Type":"application/json"};class d1 extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function rn(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class rh extends d1{constructor(e,n,r){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class iT extends d1{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var zv;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(zv||(zv={}));const mp=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),sT=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Fv=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),oT=(t,e,n)=>oe(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const i=t.status||500,o=t;if(typeof o.json=="function")o.json().then(a=>{const u=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||i+"";e(new rh(Fv(a),i,u))}).catch(()=>{const a=i+"",u=o.statusText||`HTTP ${i} error`;e(new rh(u,i,a))});else{const a=i+"",u=o.statusText||`HTTP ${i} error`;e(new rh(u,i,a))}}else e(new iT(Fv(t),t))}),aT=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?i:(sT(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),n))};function lT(t,e,n,r,i,o){return oe(this,void 0,void 0,function*(){return new Promise((a,u)=>{t(n,aT(e,r,i,o)).then(d=>{if(!d.ok)throw d;if(r!=null&&r.noResolveJson)return d;const f=d.headers.get("content-type");return!f||!f.includes("application/json")?{}:d.json()}).then(d=>a(d)).catch(d=>oT(d,u,r))})})}function sn(t,e,n,r,i){return oe(this,void 0,void 0,function*(){return lT(t,"POST",e,r,i,n)})}class cT{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},fp),n),this.fetch=mp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return oe(this,void 0,void 0,function*(){try{return{data:(yield sn(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(rn(n))return{data:null,error:n};throw n}})}getIndex(e,n){return oe(this,void 0,void 0,function*(){try{return{data:yield sn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(rn(r))return{data:null,error:r};throw r}})}listIndexes(e){return oe(this,void 0,void 0,function*(){try{return{data:yield sn(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(rn(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return oe(this,void 0,void 0,function*(){try{return{data:(yield sn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(rn(r))return{data:null,error:r};throw r}})}}class uT{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},fp),n),this.fetch=mp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return oe(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield sn(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(rn(n))return{data:null,error:n};throw n}})}getVectors(e){return oe(this,void 0,void 0,function*(){try{return{data:yield sn(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(rn(n))return{data:null,error:n};throw n}})}listVectors(e){return oe(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield sn(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(rn(n))return{data:null,error:n};throw n}})}queryVectors(e){return oe(this,void 0,void 0,function*(){try{return{data:yield sn(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(rn(n))return{data:null,error:n};throw n}})}deleteVectors(e){return oe(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield sn(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(rn(n))return{data:null,error:n};throw n}})}}class dT{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},fp),n),this.fetch=mp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:(yield sn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(rn(n))return{data:null,error:n};throw n}})}getBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:yield sn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(rn(n))return{data:null,error:n};throw n}})}listBuckets(){return oe(this,arguments,void 0,function*(e={}){try{return{data:yield sn(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(rn(n))return{data:null,error:n};throw n}})}deleteBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:(yield sn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(rn(n))return{data:null,error:n};throw n}})}}class hT extends dT{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new fT(this.url,this.headers,e,this.fetch)}}class fT extends cT{constructor(e,n,r,i){super(e,n,i),this.vectorBucketName=r}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return oe(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return oe(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return oe(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return oe(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new mT(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class mT extends uT{constructor(e,n,r,i,o){super(e,n,o),this.vectorBucketName=r,this.indexName=i}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return oe(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return oe(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return oe(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return oe(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return oe(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class pT extends nT{constructor(e,n={},r,i){super(e,n,r,i)}from(e){return new tT(this.url,this.headers,e,this.fetch)}get vectors(){return new hT(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new rT(this.url+"/iceberg",this.headers,this.fetch)}}const gT="2.81.1";let Xo="";typeof Deno<"u"?Xo="deno":typeof document<"u"?Xo="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Xo="react-native":Xo="node";const vT={"X-Client-Info":`supabase-js-${Xo}/${gT}`},wT={headers:vT},yT={schema:"public"},xT={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},_T={},bT=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),kT=()=>Headers,ST=(t,e,n)=>{const r=bT(n),i=kT();return async(o,a)=>{var u;const d=(u=await e())!==null&&u!==void 0?u:t;let f=new i(a==null?void 0:a.headers);return f.has("apikey")||f.set("apikey",t),f.has("Authorization")||f.set("Authorization",`Bearer ${d}`),r(o,Object.assign(Object.assign({},a),{headers:f}))}};function CT(t){return t.endsWith("/")?t:t+"/"}function PT(t,e){var n,r;const{db:i,auth:o,realtime:a,global:u}=t,{db:d,auth:f,realtime:m,global:g}=e,v={db:Object.assign(Object.assign({},d),i),auth:Object.assign(Object.assign({},f),o),realtime:Object.assign(Object.assign({},m),a),storage:{},global:Object.assign(Object.assign(Object.assign({},g),u),{headers:Object.assign(Object.assign({},(n=g==null?void 0:g.headers)!==null&&n!==void 0?n:{}),(r=u==null?void 0:u.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?v.accessToken=t.accessToken:delete v.accessToken,v}function ET(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(CT(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const h1="2.81.1",_s=30*1e3,Mf=3,ih=Mf*_s,jT="http://localhost:9999",NT="supabase.auth.token",TT={"X-Client-Info":`gotrue-js/${h1}`},Df="X-Supabase-Api-Version",f1={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},LT=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,RT=10*60*1e3;class Ba extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function le(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class AT extends Ba{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function OT(t){return le(t)&&t.name==="AuthApiError"}class Oi extends Ba{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class fi extends Ba{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class In extends fi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function IT(t){return le(t)&&t.name==="AuthSessionMissingError"}class ps extends fi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Jl extends fi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ql extends fi{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function MT(t){return le(t)&&t.name==="AuthImplicitGrantRedirectError"}class Vv extends fi{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Bf extends fi{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function sh(t){return le(t)&&t.name==="AuthRetryableFetchError"}class qv extends fi{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class $f extends fi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Kc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Hv=` 	
\r=`.split(""),DT=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Hv.length;e+=1)t[Hv[e].charCodeAt(0)]=-2;for(let e=0;e<Kc.length;e+=1)t[Kc[e].charCodeAt(0)]=e;return t})();function Wv(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Kc[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Kc[r]),e.queuedBits-=6}}function m1(t,e,n){const r=DT[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Zv(t){const e=[],n=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=a=>{UT(a,r,n)};for(let a=0;a<t.length;a+=1)m1(t.charCodeAt(a),i,o);return e.join("")}function BT(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function $T(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}BT(r,e)}}function UT(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Ws(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)m1(t.charCodeAt(i),n,r);return new Uint8Array(e)}function zT(t){const e=[];return $T(t,n=>e.push(n)),new Uint8Array(e)}function Bi(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>Wv(i,n,r)),Wv(null,n,r),e.join("")}function FT(t){return Math.round(Date.now()/1e3)+t}function VT(){return Symbol("auth-callback")}const St=()=>typeof window<"u"&&typeof document<"u",bi={tested:!1,writable:!1},p1=()=>{if(!St())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(bi.tested)return bi.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),bi.tested=!0,bi.writable=!0}catch{bi.tested=!0,bi.writable=!1}return bi.writable};function qT(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const g1=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),HT=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",bs=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},ki=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Tr=async(t,e)=>{await t.removeItem(e)};class Ou{constructor(){this.promise=new Ou.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Ou.promiseConstructor=Promise;function oh(t){const e=t.split(".");if(e.length!==3)throw new $f("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!LT.test(e[r]))throw new $f("JWT not in base64url format");return{header:JSON.parse(Zv(e[0])),payload:JSON.parse(Zv(e[1])),signature:Ws(e[2]),raw:{header:e[0],payload:e[1]}}}async function WT(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function ZT(t,e){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const a=await t(o);if(!e(o,null,a)){r(a);return}}catch(a){if(!e(o,a)){i(a);return}}})()})}function GT(t){return("0"+t.toString(16)).substr(-2)}function KT(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let o=0;o<56;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,GT).join("")}async function YT(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function JT(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await YT(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function gs(t,e,n=!1){const r=KT();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await bs(t,`${e}-code-verifier`,i);const o=await JT(r);return[o,r===o?"plain":"s256"]}const QT=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function XT(t){const e=t.headers.get(Df);if(!e||!e.match(QT))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function eL(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function tL(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const nL=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function vs(t){if(!nL.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ah(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function rL(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function Gv(t){return JSON.parse(JSON.stringify(t))}const ji=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),iL=[502,503,504];async function Kv(t){var e;if(!HT(t))throw new Bf(ji(t),0);if(iL.includes(t.status))throw new Bf(ji(t),t.status);let n;try{n=await t.json()}catch(o){throw new Oi(ji(o),o)}let r;const i=XT(t);if(i&&i.getTime()>=f1["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new qv(ji(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new In}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new qv(ji(n),t.status,n.weak_password.reasons);throw new AT(ji(n),t.status||500,r)}const sL=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function pe(t,e,n,r){var i;const o=Object.assign({},r==null?void 0:r.headers);o[Df]||(o[Df]=f1["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const u=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",d=await oL(t,e,n+u,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(d):{data:Object.assign({},d),error:null}}async function oL(t,e,n,r,i,o){const a=sL(e,r,i,o);let u;try{u=await t(n,Object.assign({},a))}catch(d){throw console.error(d),new Bf(ji(d),0)}if(u.ok||await Kv(u),r!=null&&r.noResolveJson)return u;try{return await u.json()}catch(d){await Kv(d)}}function Mn(t){var e;let n=null;cL(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=FT(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Yv(t){const e=Mn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function $r(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function aL(t){return{data:t,error:null}}function lL(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=t,a=vo(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},d=Object.assign({},a);return{data:{properties:u,user:d},error:null}}function Jv(t){return t}function cL(t){return t.access_token&&t.refresh_token&&t.expires_in}const lh=["global","local","others"];class uL{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=g1(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=lh[0]){if(lh.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${lh.join(", ")}`);try{return await pe(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(le(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await pe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:$r})}catch(r){if(le(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=vo(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await pe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:lL,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(le(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await pe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:$r})}catch(n){if(le(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,o,a,u,d;try{const f={nextPage:null,lastPage:0,total:0},m=await pe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Jv});if(m.error)throw m.error;const g=await m.json(),v=(a=m.headers.get("x-total-count"))!==null&&a!==void 0?a:0,w=(d=(u=m.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return w.length>0&&(w.forEach(_=>{const k=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(_.split(";")[1].split("=")[1]);f[`${j}Page`]=k}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},g),f),error:null}}catch(f){if(le(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){vs(e);try{return await pe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:$r})}catch(n){if(le(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){vs(e);try{return await pe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:$r})}catch(r){if(le(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){vs(e);try{return await pe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:$r})}catch(r){if(le(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){vs(e.userId);try{const{data:n,error:r}=await pe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(le(n))return{data:null,error:n};throw n}}async _deleteFactor(e){vs(e.userId),vs(e.id);try{return{data:await pe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(le(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,o,a,u,d;try{const f={nextPage:null,lastPage:0,total:0},m=await pe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Jv});if(m.error)throw m.error;const g=await m.json(),v=(a=m.headers.get("x-total-count"))!==null&&a!==void 0?a:0,w=(d=(u=m.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return w.length>0&&(w.forEach(_=>{const k=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(_.split(";")[1].split("=")[1]);f[`${j}Page`]=k}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},g),f),error:null}}catch(f){if(le(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(e){try{return await pe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(le(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await pe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(le(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await pe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(le(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await pe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(le(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await pe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(le(n))return{data:null,error:n};throw n}}}function Qv(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const ws={debug:!!(globalThis&&p1()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class v1 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class dL extends v1{}async function hL(t,e,n){ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),ws.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw ws.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new dL(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ws.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function fL(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function w1(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function mL(t){return parseInt(t,16)}function pL(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function gL(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:a,notBefore:u,requestId:d,resources:f,scheme:m,uri:g,version:v}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!g)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const w=w1(t.address),_=m?`${m}://${r}`:r,k=t.statement?`${t.statement}
`:"",j=`${_} wants you to sign in with your Ethereum account:
${w}

${k}`;let S=`URI: ${g}
Version: ${v}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${o.toISOString()}`;if(i&&(S+=`
Expiration Time: ${i.toISOString()}`),u&&(S+=`
Not Before: ${u.toISOString()}`),d&&(S+=`
Request ID: ${d}`),f){let x=`
Resources:`;for(const b of f){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);x+=`
- ${b}`}S+=x}return`${j}
${S}`}class ht extends Error{constructor({message:e,code:n,cause:r,name:i}){var o;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class Yc extends ht{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function vL({error:t,options:e}){var n,r,i;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ht({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new ht({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new ht({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new ht({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new ht({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new ht({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new ht({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new ht({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(y1(a)){if(o.rp.id!==a)return new ht({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ht({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new ht({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new ht({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ht({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function wL({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ht({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new ht({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(y1(r)){if(n.rpId!==r)return new ht({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ht({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new ht({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ht({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class yL{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const xL=new yL;function _L(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=vo(t,["challenge","user","excludeCredentials"]),o=Ws(e).buffer,a=Object.assign(Object.assign({},n),{id:Ws(n.id).buffer}),u=Object.assign(Object.assign({},i),{challenge:o,user:a});if(r&&r.length>0){u.excludeCredentials=new Array(r.length);for(let d=0;d<r.length;d++){const f=r[d];u.excludeCredentials[d]=Object.assign(Object.assign({},f),{id:Ws(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return u}function bL(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=vo(t,["challenge","allowCredentials"]),i=Ws(e).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const u=n[a];o.allowCredentials[a]=Object.assign(Object.assign({},u),{id:Ws(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function kL(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Bi(new Uint8Array(t.response.attestationObject)),clientDataJSON:Bi(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function SL(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Bi(new Uint8Array(i.authenticatorData)),clientDataJSON:Bi(new Uint8Array(i.clientDataJSON)),signature:Bi(new Uint8Array(i.signature)),userHandle:i.userHandle?Bi(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function y1(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Xv(){var t,e;return!!(St()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function CL(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Yc("Browser returned unexpected credential type",e)}:{data:null,error:new Yc("Empty credential response",e)}}catch(e){return{data:null,error:vL({error:e,options:t})}}}async function PL(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Yc("Browser returned unexpected credential type",e)}:{data:null,error:new Yc("Empty credential response",e)}}catch(e){return{data:null,error:wL({error:e,options:t})}}}const EL={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},jL={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Jc(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const o in i){const a=i[o];if(a!==void 0)if(Array.isArray(a))r[o]=a;else if(n(a))r[o]=a;else if(e(a)){const u=r[o];e(u)?r[o]=Jc(u,a):r[o]=Jc(a)}else r[o]=a}return r}function NL(t,e){return Jc(EL,t,e||{})}function TL(t,e){return Jc(jL,t,e||{})}class LL{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},o){try{const{data:a,error:u}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!a)return{data:null,error:u};const d=i??xL.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:f}=a.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${r}`),f.displayName||(f.displayName=f.name)}switch(a.webauthn.type){case"create":{const f=NL(a.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:m,error:g}=await CL({publicKey:f,signal:d});return m?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:m}},error:null}:{data:null,error:g}}case"request":{const f=TL(a.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:m,error:g}=await PL(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:f,signal:d}));return m?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:m}},error:null}:{data:null,error:g}}}}catch(a){return le(a)?{data:null,error:a}:{data:null,error:new Oi("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new Ba("rpId is required for WebAuthn authentication")};try{if(!Xv())return{data:null,error:new Oi("Browser does not support WebAuthn",null)};const{data:a,error:u}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:o});if(!a)return{data:null,error:u};const{webauthn:d}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:d.type,rpId:n,rpOrigins:r,credential_response:d.credential_response}})}catch(a){return le(a)?{data:null,error:a}:{data:null,error:new Oi("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new Ba("rpId is required for WebAuthn registration")};try{if(!Xv())return{data:null,error:new Oi("Browser does not support WebAuthn",null)};const{data:a,error:u}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(m=>{var g;return(g=m.data)===null||g===void 0?void 0:g.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===e&&v.status!=="unverified")}).then(m=>m?this.client.mfa.unenroll({factorId:m==null?void 0:m.id}):void 0),{data:null,error:u};const{data:d,error:f}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:o});return d?this._verify({factorId:a.id,challengeId:d.challengeId,webauthn:{rpId:n,rpOrigins:r,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:f}}catch(a){return le(a)?{data:null,error:a}:{data:null,error:new Oi("Unexpected error in register",a)}}}}fL();const RL={url:jT,storageKey:NT,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:TT,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function ew(t,e,n){return await n()}const ys={};class $a{get jwks(){var e,n;return(n=(e=ys[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){ys[this.storageKey]=Object.assign(Object.assign({},ys[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=ys[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ys[this.storageKey]=Object.assign(Object.assign({},ys[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},RL),e);if(this.storageKey=o.storageKey,this.instanceID=(n=$a.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,$a.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&St()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new uL({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=g1(o.fetch),this.lock=o.lock||ew,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,o.lock?this.lock=o.lock:St()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=hL:this.lock=ew,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new LL(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:p1()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Qv(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Qv(this.memoryStorage)),St()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${h1}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(St()&&(n=qT(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),St()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),MT(o)){const d=(e=o.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:a,redirectType:u}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",u),await this._saveSession(a),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return le(n)?this._returnResult({error:n}):this._returnResult({error:new Oi("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const o=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Mn}),{data:a,error:u}=o;if(u||!a)return this._returnResult({data:{user:null,session:null},error:u});const d=a.session,f=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:f,session:d},error:null})}catch(o){if(le(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var n,r,i;try{let o;if("email"in e){const{email:m,password:g,options:v}=e;let w=null,_=null;this.flowType==="pkce"&&([w,_]=await gs(this.storage,this.storageKey)),o=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:m,password:g,data:(n=v==null?void 0:v.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:w,code_challenge_method:_},xform:Mn})}else if("phone"in e){const{phone:m,password:g,options:v}=e;o=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:g,data:(r=v==null?void 0:v.data)!==null&&r!==void 0?r:{},channel:(i=v==null?void 0:v.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:Mn})}else throw new Jl("You must provide either an email or phone number and a password");const{data:a,error:u}=o;if(u||!a)return this._returnResult({data:{user:null,session:null},error:u});const d=a.session,f=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:f,session:d},error:null})}catch(o){if(le(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:a,options:u}=e;n=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Yv})}else if("phone"in e){const{phone:o,password:a,options:u}=e;n=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Yv})}else throw new Jl("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const o=new ps;return this._returnResult({data:{user:null,session:null},error:o})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(le(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,o,a,u,d,f,m,g,v;let w,_;if("message"in e)w=e.message,_=e.signature;else{const{chain:k,wallet:j,statement:S,options:x}=e;let b;if(St())if(typeof j=="object")b=j;else{const $=window;if("ethereum"in $&&typeof $.ethereum=="object"&&"request"in $.ethereum&&typeof $.ethereum.request=="function")b=$.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=j}const N=new URL((n=x==null?void 0:x.url)!==null&&n!==void 0?n:window.location.href),R=await b.request({method:"eth_requestAccounts"}).then($=>$).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!R||R.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const B=w1(R[0]);let I=(r=x==null?void 0:x.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!I){const $=await b.request({method:"eth_chainId"});I=mL($)}const F={domain:N.host,address:B,statement:S,uri:N.href,version:"1",chainId:I,nonce:(i=x==null?void 0:x.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(o=x==null?void 0:x.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(u=x==null?void 0:x.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(d=x==null?void 0:x.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(f=x==null?void 0:x.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(m=x==null?void 0:x.signInWithEthereum)===null||m===void 0?void 0:m.resources};w=gL(F),_=await b.request({method:"personal_sign",params:[pL(w),B]})}try{const{data:k,error:j}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:w,signature:_},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Mn});if(j)throw j;if(!k||!k.session||!k.user){const S=new ps;return this._returnResult({data:{user:null,session:null},error:S})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:j})}catch(k){if(le(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async signInWithSolana(e){var n,r,i,o,a,u,d,f,m,g,v,w;let _,k;if("message"in e)_=e.message,k=e.signature;else{const{chain:j,wallet:S,statement:x,options:b}=e;let N;if(St())if(typeof S=="object")N=S;else{const B=window;if("solana"in B&&typeof B.solana=="object"&&("signIn"in B.solana&&typeof B.solana.signIn=="function"||"signMessage"in B.solana&&typeof B.solana.signMessage=="function"))N=B.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=S}const R=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in N&&N.signIn){const B=await N.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:R.host,uri:R.href}),x?{statement:x}:null));let I;if(Array.isArray(B)&&B[0]&&typeof B[0]=="object")I=B[0];else if(B&&typeof B=="object"&&"signedMessage"in B&&"signature"in B)I=B;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)_=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),k=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in N)||typeof N.signMessage!="function"||!("publicKey"in N)||typeof N!="object"||!N.publicKey||!("toBase58"in N.publicKey)||typeof N.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${R.host} wants you to sign in with your Solana account:`,N.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${R.href}`,`Issued At: ${(i=(r=b==null?void 0:b.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((d=b==null?void 0:b.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((f=b==null?void 0:b.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((g=(m=b==null?void 0:b.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||g===void 0)&&g.length?["Resources",...b.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const B=await N.signMessage(new TextEncoder().encode(_),"utf8");if(!B||!(B instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");k=B}}try{const{data:j,error:S}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:Bi(k)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:Mn});if(S)throw S;if(!j||!j.session||!j.user){const x=new ps;return this._returnResult({data:{user:null,session:null},error:x})}return j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),this._returnResult({data:Object.assign({},j),error:S})}catch(j){if(le(j))return this._returnResult({data:{user:null,session:null},error:j});throw j}}async _exchangeCodeForSession(e){const n=await ki(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:o,error:a}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Mn});if(await Tr(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!o||!o.session||!o.user){const u=new ps;return this._returnResult({data:{user:null,session:null,redirectType:null},error:u})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:a})}catch(o){if(le(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:o,nonce:a}=e,u=await pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Mn}),{data:d,error:f}=u;if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!d||!d.session||!d.user){const m=new ps;return this._returnResult({data:{user:null,session:null},error:m})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:d,error:f})}catch(n){if(le(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,o,a;try{if("email"in e){const{email:u,options:d}=e;let f=null,m=null;this.flowType==="pkce"&&([f,m]=await gs(this.storage,this.storageKey));const{error:g}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},create_user:(r=d==null?void 0:d.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:m},redirectTo:d==null?void 0:d.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:g})}if("phone"in e){const{phone:u,options:d}=e,{data:f,error:m}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(i=d==null?void 0:d.data)!==null&&i!==void 0?i:{},create_user:(o=d==null?void 0:d.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(a=d==null?void 0:d.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:m})}throw new Jl("You must provide either an email or phone number.")}catch(u){if(le(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async verifyOtp(e){var n,r;try{let i,o;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:u}=await pe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:Mn});if(u)throw u;if(!a)throw new Error("An error occurred on token verification.");const d=a.session,f=a.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),this._returnResult({data:{user:f,session:d},error:null})}catch(i){if(le(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i,o,a;try{let u=null,d=null;this.flowType==="pkce"&&([u,d]=await gs(this.storage,this.storageKey));const f=await pe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:d}),headers:this.headers,xform:aL});return!((o=f.data)===null||o===void 0)&&o.url&&St()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(f.data.url),this._returnResult(f)}catch(u){if(le(u))return this._returnResult({data:null,error:u});throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new In;const{error:i}=await pe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(le(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:o}=e,{error:a}=await pe(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){const{phone:r,type:i,options:o}=e,{data:a,error:u}=await pe(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:u})}throw new Jl("You must provide either an email or phone number and a type")}catch(n){if(le(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await ki(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<ih:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await ki(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=ah()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=rL(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:$r}):await this._useSession(async n=>{var r,i,o;const{data:a,error:u}=n;if(u)throw u;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new In}:await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:$r})})}catch(n){if(le(n))return IT(n)&&(await this._removeSession(),await Tr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new In;const a=i.session;let u=null,d=null;this.flowType==="pkce"&&e.email!=null&&([u,d]=await gs(this.storage,this.storageKey));const{data:f,error:m}=await pe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:d}),jwt:a.access_token,xform:$r});if(m)throw m;return a.user=f.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(r){if(le(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new In;const n=Date.now()/1e3;let r=n,i=!0,o=null;const{payload:a}=oh(e.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{data:u,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!u)return{data:{user:null,session:null},error:null};o=u}else{const{data:u,error:d}=await this._getUser(e.access_token);if(d)throw d;o={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(n){if(le(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:a,error:u}=n;if(u)throw u;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new In;const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(le(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!St())throw new Ql("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ql(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Vv("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ql("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Vv("No code detected.");const{data:x,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:a,expires_in:u,expires_at:d,token_type:f}=e;if(!o||!u||!a||!f)throw new Ql("No session defined in URL");const m=Math.round(Date.now()/1e3),g=parseInt(u);let v=m+g;d&&(v=parseInt(d));const w=v-m;w*1e3<=_s&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${g}s`);const _=v-g;m-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,v,m):m-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,v,m);const{data:k,error:j}=await this._getUser(o);if(j)throw j;const S={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:g,expires_at:v,refresh_token:a,token_type:f,user:k.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:S,redirectType:e.type},error:null})}catch(r){if(le(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await ki(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({error:o});const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:u}=await this.admin.signOut(a,e);if(u&&!(OT(u)&&(u.status===404||u.status===401||u.status===403)))return this._returnResult({error:u})}return e!=="others"&&(await this._removeSession(),await Tr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=VT(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:o},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await gs(this.storage,this.storageKey,!0));try{return await pe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(le(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async o=>{var a,u,d,f,m;const{data:g,error:v}=o;if(v)throw v;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await pe(this.fetch,"GET",w,{headers:this.headers,jwt:(m=(f=g.session)===null||f===void 0?void 0:f.access_token)!==null&&m!==void 0?m:void 0})});if(i)throw i;return St()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(le(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:o}}=n;if(i)throw i;const{options:a,provider:u,token:d,access_token:f,nonce:m}=e,g=await pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o==null?void 0:o.access_token)!==null&&r!==void 0?r:void 0,body:{provider:u,id_token:d,access_token:f,nonce:m,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Mn}),{data:v,error:w}=g;return w?this._returnResult({data:{user:null,session:null},error:w}):!v||!v.session||!v.user?this._returnResult({data:{user:null,session:null},error:new ps}):(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),this._returnResult({data:v,error:w}))}catch(i){if(le(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:a}=n;if(a)throw a;return await pe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await ZT(async i=>(i>0&&await WT(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await pe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Mn})),(i,o)=>{const a=200*Math.pow(2,i);return o&&sh(o)&&Date.now()+a-r<_s})}catch(r){if(this._debug(n,"error",r),le(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),St()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await ki(this.storage,this.storageKey);if(i&&this.userStorage){let a=await ki(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await bs(this.userStorage,this.storageKey+"-user",a)),i.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:ah()}else if(i&&!i.user&&!i.user){const a=await ki(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(i.user=a.user,await Tr(this.storage,this.storageKey+"-user"),await bs(this.storage,this.storageKey,i)):i.user=ah()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const o=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<ih;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${ih}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),sh(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:u}=await this._getUser(i.access_token);!u&&(a!=null&&a.user)?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new In;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Ou;const{data:o,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!o.session)throw new In;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const u={data:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(i,"error",o),le(o)){const a={data:null,error:o};return sh(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],a=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,n)}catch(d){o.push(d)}});if(await Promise.all(a),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await bs(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const o=Gv(i);await bs(this.storage,this.storageKey,o)}else{const i=Gv(n);await bs(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Tr(this.storage,this.storageKey),await Tr(this.storage,this.storageKey+"-code-verifier"),await Tr(this.storage,this.storageKey+"-user"),this.userStorage&&await Tr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&St()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),_s);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/_s);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${_s}ms, refresh threshold is ${Mf} ticks`),i<=Mf&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof v1)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!St()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,a]=await gs(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(u.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);i.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;return o?this._returnResult({data:null,error:o}):await pe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:a}=n;if(a)return this._returnResult({data:null,error:a});const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:d,error:f}=await pe(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return f?this._returnResult({data:null,error:f}):(e.factorType==="totp"&&d.type==="totp"&&(!((i=d==null?void 0:d.totp)===null||i===void 0)&&i.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),this._returnResult({data:d,error:null}))})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?kL(e.webauthn.credential_response):SL(e.webauthn.credential_response)})}:{code:e.code}),{data:u,error:d}=await pe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return d?this._returnResult({data:null,error:d}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),this._returnResult({data:u,error:d}))})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=await pe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:u}=a;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:_L(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:bL(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=oh(r.access_token);let a=null;o.aal&&(a=o.aal);let u=a;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(m=>m.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(u="aal2");const f=o.amr||[];return{data:{currentLevel:a,nextLevel:u,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await pe(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new In})})}catch(n){if(le(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new In});const a=await pe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:u=>({data:u,error:null})});return a.data&&a.data.redirect_url&&St()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(le(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new In});const a=await pe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:u=>({data:u,error:null})});return a.data&&a.data.redirect_url&&St()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(le(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(u=>u.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(u=>u.kid===e),r&&this.jwks_cached_at+RT>i)return r;const{data:o,error:a}=await pe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,r=o.keys.find(u=>u.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:w,error:_}=await this.getSession();if(_||!w.session)return this._returnResult({data:null,error:_});r=w.session.access_token}const{header:i,payload:o,signature:a,raw:{header:u,payload:d}}=oh(r);n!=null&&n.allowExpired||eL(o.exp);const f=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!f){const{error:w}=await this.getUser(r);if(w)throw w;return{data:{claims:o,header:i,signature:a},error:null}}const m=tL(i.alg),g=await crypto.subtle.importKey("jwk",f,m,!0,["verify"]);if(!await crypto.subtle.verify(m,g,a,zT(`${u}.${d}`)))throw new $f("Invalid JWT signature");return{data:{claims:o,header:i,signature:a},error:null}}catch(r){if(le(r))return this._returnResult({data:null,error:r});throw r}}}$a.nextInstanceID={};const AL=$a;class OL extends AL{constructor(e){super(e)}}class IL{constructor(e,n,r){var i,o,a;this.supabaseUrl=e,this.supabaseKey=n;const u=ET(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const d=`sb-${u.hostname.split(".")[0]}-auth-token`,f={db:yT,realtime:_T,auth:Object.assign(Object.assign({},xT),{storageKey:d}),global:wT},m=PT(r??{},f);this.storageKey=(i=m.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=m.global.headers)!==null&&o!==void 0?o:{},m.accessToken?(this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(g,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=m.auth)!==null&&a!==void 0?a:{},this.headers,m.global.fetch),this.fetch=ST(n,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.accessToken&&this.accessToken().then(g=>this.realtime.setAuth(g)).catch(g=>console.warn("Failed to set initial Realtime auth token:",g)),this.rest=new EN(new URL("rest/v1",u).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this.storage=new pT(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new SN(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:o,storageKey:a,flowType:u,lock:d,debug:f,throwOnError:m},g,v){const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new OL({url:this.authUrl.href,headers:Object.assign(Object.assign({},w),g),storageKey:a,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:o,flowType:u,lock:d,debug:f,throwOnError:m,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(_=>_.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new qN(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const x1=(t,e,n)=>new IL(t,e,n);function ML(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}ML()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const DL="https://trzcwccadrfgdzjljgmc.supabase.co",BL="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRyemN3Y2NhZHJmZ2R6amxqZ21jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQxNDcwOTQsImV4cCI6MjA3OTcyMzA5NH0.Hf6wj81fdLnCYzDfU89VRGL7EOOFqW4hxNWs1v1wRQE",ke=x1(DL,BL),tw=t=>{let e;const n=new Set,r=(m,g)=>{const v=typeof m=="function"?m(e):m;if(!Object.is(v,e)){const w=e;e=g??(typeof v!="object"||v===null)?v:Object.assign({},e,v),n.forEach(_=>_(e,w))}},i=()=>e,d={setState:r,getState:i,getInitialState:()=>f,subscribe:m=>(n.add(m),()=>n.delete(m)),destroy:()=>{n.clear()}},f=e=t(r,i,d);return d},$L=t=>t?tw(t):tw;var _1={exports:{}},b1={},k1={exports:{}},S1={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var io=E;function UL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zL=typeof Object.is=="function"?Object.is:UL,FL=io.useState,VL=io.useEffect,qL=io.useLayoutEffect,HL=io.useDebugValue;function WL(t,e){var n=e(),r=FL({inst:{value:n,getSnapshot:e}}),i=r[0].inst,o=r[1];return qL(function(){i.value=n,i.getSnapshot=e,ch(i)&&o({inst:i})},[t,n,e]),VL(function(){return ch(i)&&o({inst:i}),t(function(){ch(i)&&o({inst:i})})},[t]),HL(n),n}function ch(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!zL(t,n)}catch{return!0}}function ZL(t,e){return e()}var GL=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ZL:WL;S1.useSyncExternalStore=io.useSyncExternalStore!==void 0?io.useSyncExternalStore:GL;k1.exports=S1;var KL=k1.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iu=E,YL=KL;function JL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var QL=typeof Object.is=="function"?Object.is:JL,XL=YL.useSyncExternalStore,eR=Iu.useRef,tR=Iu.useEffect,nR=Iu.useMemo,rR=Iu.useDebugValue;b1.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var o=eR(null);if(o.current===null){var a={hasValue:!1,value:null};o.current=a}else a=o.current;o=nR(function(){function d(w){if(!f){if(f=!0,m=w,w=r(w),i!==void 0&&a.hasValue){var _=a.value;if(i(_,w))return g=_}return g=w}if(_=g,QL(m,w))return _;var k=r(w);return i!==void 0&&i(_,k)?(m=w,_):(m=w,g=k)}var f=!1,m,g,v=n===void 0?null:n;return[function(){return d(e())},v===null?void 0:function(){return d(v())}]},[e,n,r,i]);var u=XL(t,o[0],o[1]);return tR(function(){a.hasValue=!0,a.value=u},[u]),rR(u),u};_1.exports=b1;var iR=_1.exports;const sR=om(iR),{useDebugValue:oR}=nr,{useSyncExternalStoreWithSelector:aR}=sR;const lR=t=>t;function cR(t,e=lR,n){const r=aR(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return oR(r),r}const nw=t=>{const e=typeof t=="function"?$L(t):t,n=(r,i)=>cR(e,r,i);return Object.assign(n,e),n},C1=t=>t?nw(t):nw,re=C1((t,e)=>({userLocation:null,selectedNode:null,discoveredNodes:new Set,culturalNodes:[],mapCenter:[45.7489,21.2087],mapZoom:14,map:null,clearRouteFunction:null,createRouteFunction:null,currentLanguage:"en",translatedNodes:{},translatedUI:{},nodeReviews:{},setMap:n=>t({map:n}),setClearRouteFunction:n=>t({clearRouteFunction:n}),setCreateRouteFunction:n=>t({createRouteFunction:n}),setCulturalNodes:n=>t({culturalNodes:n}),setUserLocation:n=>t({userLocation:n}),setSelectedNode:n=>t({selectedNode:n}),addDiscoveredNode:n=>t(r=>({discoveredNodes:new Set([...r.discoveredNodes,n])})),clearDiscoveredNodes:()=>t({discoveredNodes:new Set}),setMapCenter:n=>t({mapCenter:n}),setMapZoom:n=>t({mapZoom:n}),clearSelectedNode:()=>t({selectedNode:null}),setCurrentLanguage:n=>t({currentLanguage:n}),setTranslatedNode:(n,r,i)=>t(o=>({translatedNodes:{...o.translatedNodes,[n]:{...o.translatedNodes[n],[r]:i}}})),setTranslatedUI:(n,r)=>t(i=>({translatedUI:{...i.translatedUI,[n]:r}})),getNodeInLanguage:(n,r)=>{var o;const i=e();return r==="en"?i.culturalNodes.find(a=>a.id===n):(o=i.translatedNodes[n])==null?void 0:o[r]},setNodeReviews:(n,r,i,o)=>t(a=>({nodeReviews:{...a.nodeReviews,[n]:{reviews:r,averageRating:i,totalReviews:o}}})),addReviewToNode:(n,r)=>t(i=>{const o=i.nodeReviews[n]||{reviews:[],averageRating:0,totalReviews:0},a=[r,...o.reviews],u=a.reduce((f,m)=>f+m.rating,0),d=Math.round(u/a.length*10)/10;return{nodeReviews:{...i.nodeReviews,[n]:{reviews:a,averageRating:d,totalReviews:a.length}}}}),updateReviewInNode:(n,r)=>t(i=>{const o=i.nodeReviews[n];if(!o)return i;const a=o.reviews.map(f=>f.id===r.id?r:f),u=a.reduce((f,m)=>f+m.rating,0),d=Math.round(u/a.length*10)/10;return{nodeReviews:{...i.nodeReviews,[n]:{reviews:a,averageRating:d,totalReviews:a.length}}}}),removeReviewFromNode:(n,r)=>t(i=>{const o=i.nodeReviews[n];if(!o)return i;const a=o.reviews.filter(f=>f.id!==r),u=a.reduce((f,m)=>f+m.rating,0),d=a.length>0?Math.round(u/a.length*10)/10:0;return{nodeReviews:{...i.nodeReviews,[n]:{reviews:a,averageRating:d,totalReviews:a.length}}}})})),P1=E.createContext({}),cn=()=>{const t=E.useContext(P1);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t};function uR({children:t}){const[e,n]=E.useState(null),[r,i]=E.useState(null),[o,a]=E.useState(!0);E.useEffect(()=>{ke.auth.getSession().then(({data:{session:w}})=>{n((w==null?void 0:w.user)??null),w!=null&&w.user?u(w.user.id):a(!1)});const{data:{subscription:v}}=ke.auth.onAuthStateChange((w,_)=>{n((_==null?void 0:_.user)??null),_!=null&&_.user?u(_.user.id):(i(null),re.getState().clearDiscoveredNodes(),a(!1))});return()=>v.unsubscribe()},[]);const u=async v=>{try{const{data:w,error:_}=await ke.from("profiles").select("*").eq("id",v).single();if(_)throw _;i({...w,is_admin:w.is_admin??!1})}catch(w){console.error("Error fetching profile:",w.message)}finally{a(!1)}},g={user:e,profile:r,loading:o,signUp:async({email:v,password:w,username:_})=>{try{const{data:k,error:j}=await ke.auth.signUp({email:v,password:w,options:{data:{username:_}}});if(j)throw console.error("Signup error:",j.message),j;return await new Promise(S=>setTimeout(S,500)),{success:!0,data:k}}catch(k){return{success:!1,error:k.message}}},signIn:async({email:v,username:w,password:_})=>{try{let k;if(v)k=await ke.auth.signInWithPassword({email:v,password:_});else if(w){const{data:x,error:b}=await ke.from("profiles").select("email").eq("username",w).single();if(b||!x)throw new Error("Username not found");k=await ke.auth.signInWithPassword({email:x.email,password:_})}const{data:j,error:S}=k;if(S)throw S;return{success:!0,data:j}}catch(k){return{success:!1,error:k.message}}},signOut:async()=>{try{re.getState().clearDiscoveredNodes();const{error:v}=await ke.auth.signOut();if(v)throw v;return{success:!0}}catch(v){return{success:!1,error:v.message}}}};return c.jsx(P1.Provider,{value:g,children:t})}const E1=E.createContext();function dR({children:t}){const[e,n]=E.useState(()=>localStorage.getItem("darkMode")==="true");E.useEffect(()=>{const i=window.document.documentElement;e?i.classList.add("dark"):i.classList.remove("dark"),localStorage.setItem("darkMode",e)},[e]);const r=()=>{n(i=>!i)};return c.jsx(E1.Provider,{value:{isDark:e,toggleDarkMode:r},children:t})}function qn(){const t=E.useContext(E1);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t}var hR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const fR=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mR=(t,e)=>{const n=E.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:a,children:u,...d},f)=>E.createElement("svg",{ref:f,...hR,width:i,height:i,stroke:r,strokeWidth:a?Number(o)*24/Number(i):o,className:`lucide lucide-${fR(t)}`,...d},[...e.map(([m,g])=>E.createElement(m,g)),...(Array.isArray(u)?u:[u])||[]]));return n.displayName=`${t}`,n};var he=mR;const rw=he("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Mu=he("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),iw=he("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),j1=he("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),uh=he("Bot",[["rect",{width:"18",height:"10",x:"3",y:"11",rx:"2",key:"1ofdy3"}],["circle",{cx:"12",cy:"5",r:"2",key:"f1ur92"}],["path",{d:"M12 7v4",key:"xawao1"}],["line",{x1:"8",x2:"8",y1:"16",y2:"16",key:"h6x27f"}],["line",{x1:"16",x2:"16",y1:"16",y2:"16",key:"5lty7f"}]]),pp=he("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),pR=he("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),ot=he("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),gp=he("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),N1=he("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),sw=he("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),gR=he("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),Fi=he("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Vi=he("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),vR=he("FileAudio",[["path",{d:"M17.5 22h.5c.5 0 1-.2 1.4-.6.4-.4.6-.9.6-1.4V7.5L14.5 2H6c-.5 0-1 .2-1.4.6C4.2 3 4 3.5 4 4v3",key:"1013sb"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M10 20v-1a2 2 0 1 1 4 0v1a2 2 0 1 1-4 0Z",key:"gqt63y"}],["path",{d:"M6 20v-1a2 2 0 1 0-4 0v1a2 2 0 1 0 4 0Z",key:"cf7lqx"}],["path",{d:"M2 19v-3a6 6 0 0 1 12 0v3",key:"1acxgf"}]]),T1=he("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]),Uf=he("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),ow=he("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),vr=he("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),wR=he("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),yR=he("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),aw=he("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),L1=he("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),It=he("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Qc=he("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]),zf=he("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]),xR=he("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),_R=he("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),lw=he("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),cw=he("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),uw=he("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),so=he("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),R1=he("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),dw=he("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),A1=he("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),ks=he("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),dh=he("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),bR=he("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),hw=he("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),hh=he("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),fw=he("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),O1=he("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),kR=he("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),ei=he("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),mw=he("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),SR=he("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),I1=he("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Zs=he("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Or=he("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),CR=he("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),Oe=he("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var pw;(function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"})(pw||(pw={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gw;(function(t){t.LANGUAGE_UNSPECIFIED="language_unspecified",t.PYTHON="python"})(gw||(gw={}));var vw;(function(t){t.OUTCOME_UNSPECIFIED="outcome_unspecified",t.OUTCOME_OK="outcome_ok",t.OUTCOME_FAILED="outcome_failed",t.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(vw||(vw={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww=["user","model","function","system"];var yw;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(yw||(yw={}));var xw;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(xw||(xw={}));var _w;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(_w||(_w={}));var bw;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(bw||(bw={}));var ha;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.OTHER="OTHER"})(ha||(ha={}));var kw;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(kw||(kw={}));var Sw;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(Sw||(Sw={}));var Cw;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Cw||(Cw={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class xs extends Ot{constructor(e,n){super(e),this.response=n}}class M1 extends Ot{constructor(e,n,r,i){super(e),this.status=n,this.statusText=r,this.errorDetails=i}}class ti extends Ot{}class D1 extends Ot{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR="https://generativelanguage.googleapis.com",ER="v1beta",jR="0.24.1",NR="genai-js";var Yi;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Yi||(Yi={}));class TR{constructor(e,n,r,i,o){this.model=e,this.task=n,this.apiKey=r,this.stream=i,this.requestOptions=o}toString(){var e,n;const r=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||ER;let o=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||PR}/${r}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}}function LR(t){const e=[];return t!=null&&t.apiClient&&e.push(t.apiClient),e.push(`${NR}/${jR}`),e.join(" ")}async function RR(t){var e;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",LR(t.requestOptions)),n.append("x-goog-api-key",t.apiKey);let r=(e=t.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(i){throw new ti(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${i.message}`)}for(const[i,o]of r.entries()){if(i==="x-goog-api-key")throw new ti(`Cannot set reserved header name ${i}`);if(i==="x-goog-api-client")throw new ti(`Header name ${i} can only be set using the apiClient field`);n.append(i,o)}}return n}async function AR(t,e,n,r,i,o){const a=new TR(t,e,n,r,o);return{url:a.toString(),fetchOptions:Object.assign(Object.assign({},DR(o)),{method:"POST",headers:await RR(a),body:i})}}async function Ja(t,e,n,r,i,o={},a=fetch){const{url:u,fetchOptions:d}=await AR(t,e,n,r,i,o);return OR(u,d,a)}async function OR(t,e,n=fetch){let r;try{r=await n(t,e)}catch(i){IR(i,t)}return r.ok||await MR(r,t),r}function IR(t,e){let n=t;throw n.name==="AbortError"?(n=new D1(`Request aborted when fetching ${e.toString()}: ${t.message}`),n.stack=t.stack):t instanceof M1||t instanceof ti||(n=new Ot(`Error fetching from ${e.toString()}: ${t.message}`),n.stack=t.stack),n}async function MR(t,e){let n="",r;try{const i=await t.json();n=i.error.message,i.error.details&&(n+=` ${JSON.stringify(i.error.details)}`,r=i.error.details)}catch{}throw new M1(`Error fetching from ${e.toString()}: [${t.status} ${t.statusText}] ${n}`,t.status,t.statusText,r)}function DR(t){const e={};if((t==null?void 0:t.signal)!==void 0||(t==null?void 0:t.timeout)>=0){const n=new AbortController;(t==null?void 0:t.timeout)>=0&&setTimeout(()=>n.abort(),t.timeout),t!=null&&t.signal&&t.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vp(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),wc(t.candidates[0]))throw new xs(`${Ir(t)}`,t);return BR(t)}else if(t.promptFeedback)throw new xs(`Text not available. ${Ir(t)}`,t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),wc(t.candidates[0]))throw new xs(`${Ir(t)}`,t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Pw(t)[0]}else if(t.promptFeedback)throw new xs(`Function call not available. ${Ir(t)}`,t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),wc(t.candidates[0]))throw new xs(`${Ir(t)}`,t);return Pw(t)}else if(t.promptFeedback)throw new xs(`Function call not available. ${Ir(t)}`,t)},t}function BR(t){var e,n,r,i;const o=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const a of(i=(r=t.candidates)===null||r===void 0?void 0:r[0].content)===null||i===void 0?void 0:i.parts)a.text&&o.push(a.text),a.executableCode&&o.push("\n```"+a.executableCode.language+`
`+a.executableCode.code+"\n```\n"),a.codeExecutionResult&&o.push("\n```\n"+a.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}function Pw(t){var e,n,r,i;const o=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const a of(i=(r=t.candidates)===null||r===void 0?void 0:r[0].content)===null||i===void 0?void 0:i.parts)a.functionCall&&o.push(a.functionCall);if(o.length>0)return o}const $R=[ha.RECITATION,ha.SAFETY,ha.LANGUAGE];function wc(t){return!!t.finishReason&&$R.includes(t.finishReason)}function Ir(t){var e,n,r;let i="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)i+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(i+=` due to ${t.promptFeedback.blockReason}`),!((n=t.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(i+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((r=t.candidates)===null||r===void 0)&&r[0]){const o=t.candidates[0];wc(o)&&(i+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(i+=`: ${o.finishMessage}`))}return i}function Ua(t){return this instanceof Ua?(this.v=t,this):new Ua(t)}function UR(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(v){r[v]&&(i[v]=function(w){return new Promise(function(_,k){o.push([v,w,_,k])>1||u(v,w)})})}function u(v,w){try{d(r[v](w))}catch(_){g(o[0][3],_)}}function d(v){v.value instanceof Ua?Promise.resolve(v.value.v).then(f,m):g(o[0][2],v)}function f(v){u("next",v)}function m(v){u("throw",v)}function g(v,w){v(w),o.shift(),o.length&&u(o[0][0],o[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function zR(t){const e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=qR(e),[r,i]=n.tee();return{stream:VR(r),response:FR(i)}}async function FR(t){const e=[],n=t.getReader();for(;;){const{done:r,value:i}=await n.read();if(r)return vp(HR(e));e.push(i)}}function VR(t){return UR(this,arguments,function*(){const n=t.getReader();for(;;){const{value:r,done:i}=yield Ua(n.read());if(i)break;yield yield Ua(vp(r))}})}function qR(t){const e=t.getReader();return new ReadableStream({start(r){let i="";return o();function o(){return e.read().then(({value:a,done:u})=>{if(u){if(i.trim()){r.error(new Ot("Failed to parse stream"));return}r.close();return}i+=a;let d=i.match(Ew),f;for(;d;){try{f=JSON.parse(d[1])}catch{r.error(new Ot(`Error parsing JSON response: "${d[1]}"`));return}r.enqueue(f),i=i.substring(d[0].length),d=i.match(Ew)}return o()}).catch(a=>{let u=a;throw u.stack=a.stack,u.name==="AbortError"?u=new D1("Request aborted when reading from the stream"):u=new Ot("Error reading from the stream"),u})}}})}function HR(t){const e=t[t.length-1],n={promptFeedback:e==null?void 0:e.promptFeedback};for(const r of t){if(r.candidates){let i=0;for(const o of r.candidates)if(n.candidates||(n.candidates=[]),n.candidates[i]||(n.candidates[i]={index:i}),n.candidates[i].citationMetadata=o.citationMetadata,n.candidates[i].groundingMetadata=o.groundingMetadata,n.candidates[i].finishReason=o.finishReason,n.candidates[i].finishMessage=o.finishMessage,n.candidates[i].safetyRatings=o.safetyRatings,o.content&&o.content.parts){n.candidates[i].content||(n.candidates[i].content={role:o.content.role||"user",parts:[]});const a={};for(const u of o.content.parts)u.text&&(a.text=u.text),u.functionCall&&(a.functionCall=u.functionCall),u.executableCode&&(a.executableCode=u.executableCode),u.codeExecutionResult&&(a.codeExecutionResult=u.codeExecutionResult),Object.keys(a).length===0&&(a.text=""),n.candidates[i].content.parts.push(a)}i++}r.usageMetadata&&(n.usageMetadata=r.usageMetadata)}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B1(t,e,n,r){const i=await Ja(e,Yi.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(n),r);return zR(i)}async function $1(t,e,n,r){const o=await(await Ja(e,Yi.GENERATE_CONTENT,t,!1,JSON.stringify(n),r)).json();return{response:vp(o)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function za(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(const n of t)typeof n=="string"?e.push({text:n}):e.push(n);return WR(e)}function WR(t){const e={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,i=!1;for(const o of t)"functionResponse"in o?(n.parts.push(o),i=!0):(e.parts.push(o),r=!0);if(r&&i)throw new Ot("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!i)throw new Ot("No content is provided for sending chat message.");return r?e:n}function ZR(t,e){var n;let r={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(n=e==null?void 0:e.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const i=t.generateContentRequest!=null;if(t.contents){if(i)throw new ti("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=t.contents}else if(i)r=Object.assign(Object.assign({},r),t.generateContentRequest);else{const o=za(t);r.contents=[o]}return{generateContentRequest:r}}function jw(t){let e;return t.contents?e=t:e={contents:[za(t)]},t.systemInstruction&&(e.systemInstruction=U1(t.systemInstruction)),e}function GR(t){return typeof t=="string"||Array.isArray(t)?{content:za(t)}:t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],KR={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function YR(t){let e=!1;for(const n of t){const{role:r,parts:i}=n;if(!e&&r!=="user")throw new Ot(`First content should be with role 'user', got ${r}`);if(!ww.includes(r))throw new Ot(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(ww)}`);if(!Array.isArray(i))throw new Ot("Content should have 'parts' property with an array of Parts");if(i.length===0)throw new Ot("Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const u of i)for(const d of Nw)d in u&&(o[d]+=1);const a=KR[r];for(const u of Nw)if(!a.includes(u)&&o[u]>0)throw new Ot(`Content with role '${r}' can't contain '${u}' part`);e=!0}}function Tw(t){var e;if(t.candidates===void 0||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const r of n.parts)if(r===void 0||Object.keys(r).length===0||r.text!==void 0&&r.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw="SILENT_ERROR";class JR{constructor(e,n,r,i={}){this.model=n,this.params=r,this._requestOptions=i,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,r!=null&&r.history&&(YR(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var r,i,o,a,u,d;await this._sendPromise;const f=za(e),m={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,f]},g=Object.assign(Object.assign({},this._requestOptions),n);let v;return this._sendPromise=this._sendPromise.then(()=>$1(this._apiKey,this.model,m,g)).then(w=>{var _;if(Tw(w.response)){this._history.push(f);const k=Object.assign({parts:[],role:"model"},(_=w.response.candidates)===null||_===void 0?void 0:_[0].content);this._history.push(k)}else{const k=Ir(w.response);k&&console.warn(`sendMessage() was unsuccessful. ${k}. Inspect response object for details.`)}v=w}).catch(w=>{throw this._sendPromise=Promise.resolve(),w}),await this._sendPromise,v}async sendMessageStream(e,n={}){var r,i,o,a,u,d;await this._sendPromise;const f=za(e),m={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,f]},g=Object.assign(Object.assign({},this._requestOptions),n),v=B1(this._apiKey,this.model,m,g);return this._sendPromise=this._sendPromise.then(()=>v).catch(w=>{throw new Error(Lw)}).then(w=>w.response).then(w=>{if(Tw(w)){this._history.push(f);const _=Object.assign({},w.candidates[0].content);_.role||(_.role="model"),this._history.push(_)}else{const _=Ir(w);_&&console.warn(`sendMessageStream() was unsuccessful. ${_}. Inspect response object for details.`)}}).catch(w=>{w.message!==Lw&&console.error(w)}),v}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QR(t,e,n,r){return(await Ja(e,Yi.COUNT_TOKENS,t,!1,JSON.stringify(n),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XR(t,e,n,r){return(await Ja(e,Yi.EMBED_CONTENT,t,!1,JSON.stringify(n),r)).json()}async function eA(t,e,n,r){const i=n.requests.map(a=>Object.assign(Object.assign({},a),{model:e}));return(await Ja(e,Yi.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:i}),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e,n,r={}){this.apiKey=e,this._requestOptions=r,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=U1(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var r;const i=jw(e),o=Object.assign(Object.assign({},this._requestOptions),n);return $1(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},i),o)}async generateContentStream(e,n={}){var r;const i=jw(e),o=Object.assign(Object.assign({},this._requestOptions),n);return B1(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},i),o)}startChat(e){var n;return new JR(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){const r=ZR(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),i=Object.assign(Object.assign({},this._requestOptions),n);return QR(this.apiKey,this.model,r,i)}async embedContent(e,n={}){const r=GR(e),i=Object.assign(Object.assign({},this._requestOptions),n);return XR(this.apiKey,this.model,r,i)}async batchEmbedContents(e,n={}){const r=Object.assign(Object.assign({},this._requestOptions),n);return eA(this.apiKey,this.model,e,r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new Ot("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Rw(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,r){if(!e.name)throw new ti("Cached content must contain a `name` field.");if(!e.model)throw new ti("Cached content must contain a `model` field.");const i=["model","systemInstruction"];for(const a of i)if(n!=null&&n[a]&&e[a]&&(n==null?void 0:n[a])!==e[a]){if(a==="model"){const u=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,d=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(u===d)continue}throw new ti(`Different value for "${a}" specified in modelParams (${n[a]}) and cachedContent (${e[a]})`)}const o=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new Rw(this.apiKey,o,r)}}const F1=new z1("AIzaSyCbomRTnq2os1QvNdGa2NE3jWfLg8t1Ijk");async function tA(){var t;try{const n=await(await fetch("https://generativelanguage.googleapis.com/v1beta/models?key=AIzaSyCbomRTnq2os1QvNdGa2NE3jWfLg8t1Ijk")).json();return console.log(" Available Gemini Models:",((t=n.models)==null?void 0:t.map(r=>r.name))||[]),n.models}catch(e){return console.error("Error checking models:",e),[]}}function Xl(t){return{en:"English",ro:"Romanian",hu:"Hungarian",de:"German",fr:"French",es:"Spanish"}[t]||"English"}async function wp(t,e){const n=["gemini-2.5-flash","gemini-flash-latest","gemini-2.0-flash","gemini-pro-latest","gemini-2.5-pro"];let r=null;for(const i of n)try{console.log(` Trying model: ${i}`);const o=F1.getGenerativeModel({model:i}),a=`
    Translate this heritage site information to ${e}, maintaining cultural context and historical accuracy:
    
    Title: ${t.title}
    Description: ${t.description}
    Historical Period: ${t.historicalPeriod||t.historical_period||""}
    Category: ${t.category||""}
    Images: ${JSON.stringify(t.images||[])}
    
    Requirements:
    - Preserve the storytelling tone and engagement level
    - Keep proper nouns (place names, people) in original language with translation in parentheses if needed
    - Maintain historical accuracy
    - For images: preserve the URL exactly as-is, only translate the caption text
    - Return ONLY valid JSON without any markdown formatting or code blocks
    
    Return exactly this JSON structure:
    {
      "title": "translated title here",
      "description": "translated description here",
      "historicalPeriod": "translated period here",
      "category": "translated category here",
      "images": [{"url": "keep original url unchanged", "caption": "translated caption here"}]
    }
      `;console.log(` Starting translation to: ${e} with ${i}`);const f=(await(await o.generateContent(a)).response).text();console.log(" Raw Gemini response:",f);let m=f.trim();m=m.replace(/```json\s*/g,"").replace(/```\s*/g,"");const g=m.match(/\{[\s\S]*\}/);if(!g)throw console.error("No JSON found in response:",m),new Error("No valid JSON in translation response");const v=JSON.parse(g[0]);if(!v.title||!v.description)throw console.error("Invalid translation structure:",v),new Error("Translation missing required fields");return console.log(` Translation successful with ${i}:`,v),v}catch(o){console.warn(` Model ${i} failed:`,o.message),r=o;continue}throw console.error(" All models failed. Last error:",r),new Error(`Failed to translate with any model: ${r==null?void 0:r.message}`)}async function nA(t,e){const n=["gemini-2.5-flash","gemini-flash-latest","gemini-2.0-flash","gemini-pro-latest","gemini-2.5-pro"],r=JSON.stringify(t,null,2),i=`
    Translate these UI text labels to ${e}.
    
    Original texts (JSON):
    ${r}
    
    Requirements:
    - Keep the same JSON structure
    - Translate all text values to ${e}
    - Keep any placeholders like {name}, {count}, etc. unchanged
    - Use appropriate formal/informal tone for UI elements
    - Return ONLY valid JSON without markdown
    
    Return the translated JSON with the same structure.
  `;let o=null;for(const a of n)try{console.log(` Trying UI translation with model: ${a}`);let g=(await(await F1.getGenerativeModel({model:a}).generateContent(i)).response).text().trim();g=g.replace(/```json\s*/g,"").replace(/```\s*/g,"");const v=g.match(/\{[\s\S]*\}/);if(!v)throw new Error("No JSON found in response");const w=JSON.parse(v[0]);return console.log(` UI translation successful with ${a}`),w}catch(u){console.warn(` UI translation with ${a} failed:`,u.message),o=u;continue}throw console.error(" All models failed for UI translation. Last error:",o),new Error(`Failed to translate UI with any model: ${o==null?void 0:o.message}`)}const fa={header:{leaderboard:"Leaderboard",friends:"Friends",profile:"Profile",admin:"Admin",signOut:"Sign Out",login:"Login"},profile:{title:"User Profile",backToMap:"Back to Map",discoveries:"nodes discovered",of:"of",rank:"Rank",points:"points",credentials:"Credentials",yourDiscoveries:"Discoveries",username:"Username",email:"Email Address",currentPassword:"Current Password",newPassword:"New Password",confirmPassword:"Confirm New Password",enterCurrentPassword:"Enter current password",enterNewPassword:"Enter new password",confirmNewPassword:"Confirm your new password",updateProfile:"Update Profile",updating:"Updating...",requestLocation:"Request Location",noDiscoveriesYet:"No Discoveries Yet",startExploring:"Start exploring the map to discover cultural heritage nodes!",goToMap:"Go to Map",discovered:"Discovered",changePassword:"Change Password",changeEmail:"Change Email Address (Two-Step Process)",newEmail:"New Email Address",howItWorks:"How it works:",step1:"We send a confirmation link to your",currentEmail:"current email",step2:"Click the link to authorize the change",step3:"We then send a verification link to your",newEmailLower:"new email",step4:"Click the verification link to complete the change",logoutWarning:"You'll be logged out automatically for security after starting this process.",languageSettings:"Language Settings",selectLanguage:"Select your preferred language"},friends:{title:"Friends",subtitle:"Connect with fellow heritage explorers",tabFriends:"Friends",tabFind:"Find",tabRequests:"Requests",searchPlaceholder:"Search by username",noFriends:"No Friends Yet",startConnecting:"Start connecting with other heritage explorers to see their discoveries!",discoveries:"discoveries",points:"points",removeFriend:"Remove Friend",searching:"Searching...",noResults:"No Users Found",tryDifferentSearch:"Try a different username or email address.",addFriend:"Add Friend",requestSent:"Request Sent",alreadyFriends:"Friends",incomingRequests:"Incoming Requests",noPendingRequests:"No Pending Requests",noOneWaiting:"No one is waiting for your response right now.",accept:"Accept",reject:"Reject",sentRequests:"Sent Requests",noSentRequests:"No Sent Requests",notWaitingForAnyone:"You're not waiting for anyone's response.",waiting:"Waiting",confirmRemove:"Remove Friend?",confirmRemoveText:"Are you sure you want to remove {username} from your friends list?",yesRemove:"Yes, Remove",friendRemoved:"Friend Removed",removedSuccessfully:"Friend removed successfully.",friendRequestSent:"Friend Request Sent",requestSentTo:"Friend request sent to {username}!",friendRequestAccepted:"Friend Request Accepted",nowFriendsWith:"You're now friends with {username}!",friendRequestRejected:"Request Rejected",requestRejectedFor:"Friend request from {username} rejected.",errorLoadingFriends:"Error loading friends",errorSearchingUsers:"Error searching users",errorSendingRequest:"Error sending friend request",errorAcceptingRequest:"Error accepting request",errorRejectingRequest:"Error rejecting request",errorRemovingFriend:"Error removing friend",noDiscoveriesYet:"No discoveries yet",discovery:"discovery",removed:"Friend Removed"},activity:{title:"Activity Feed",subtitle:"See what your friends have discovered",noActivities:"No Activities Yet",startExploringWithFriends:"Add friends to see their discoveries and achievements here!",loadingActivities:"Loading activities...",discovered:"discovered",unlocked:"unlocked the achievement",reviewed:"reviewed",addedFriend:"added a new friend",posted:"posted",rating:"rating",category:"category"},leaderboard:{title:"Leaderboard",subtitle:"Top Heritage Explorers",yourRank:"Your Rank",noExplorers:"No explorers yet",beFirst:"Be the first to discover locations!",discoveries:"discoveries",howPointsWork:"How Points Work",discoverLocation:"Discover a Location",earnPoints:"Earn 10 points when you unlock a new cultural node"},node:{getDirections:"Get Directions",unlockLocation:"Walk within 50 meters of this location to unlock the full story and historic images.",listenToStory:"Listen to Story",pauseStory:"Pause Story",translatedTo:"Translated to"},map:{findMyPath:"Find My Path",clearRoute:"Clear Route",recenter:"Recenter",locatingYou:"Locating you..."},route:{planYourRoute:"Plan Your Route",filterByCategory:"Filter by Category",selectLocationTypes:"Select which types of locations to visit:",howManyLocations:"How many locations do you want to visit?",undiscoveredLocationsAvailable:"undiscovered locations available",howMuchTime:"How much time do you have? (minutes)",includes10Minutes:"Includes 10 minutes at each location",createRoute:"Create Route",cancel:"Cancel",locationRequired:"Location Required",enableLocationAccess:"Please enable location access to plan your route.",allDiscovered:"All Discovered!",congratsAllDiscovered:"Congratulations! You have discovered all cultural nodes!",noMatchingLocations:"No Matching Locations",noUndiscoveredMatch:"No undiscovered locations match your selected categories.",routeCreated:"Route Created!",routeSlightlyOver:"Route slightly exceeds your time budget but within tolerance",routeUses:"Route uses",nearestNeighbor:"nearest neighbor",distance:"Distance",kmWalkingRoute:"km walking route",walkingTime:"Walking time",visitTime:"Visit time",minutes:"minutes",minPerLocation:"10 min per location",totalTime:"Total time",withinBudget:"Within your",minuteBudget:"minute budget",slightlyOverApproved:"Slightly over (approved) your",visiting:"Visiting",location:"location",locations:"locations",alwaysClosest:"always choosing closest unvisited",routeOrder:"Route order",calculatingRoute:"Calculating optimal route...",routeTooLong:"Route Too Long",cannotCreateRoute:"Cannot create a route within your time budget",availableTime:"Available time",minimumRouteTime:"Minimum route time",pleaseTry:"Please try",increaseTime:"Increase your available time",startCloser:"Start from a location closer to the heritage sites",routeAdjustmentNeeded:"Route Adjustment Needed",theRouteExceeds:"The {count}-location route exceeds your time budget",yourTimeBudget:"Your time budget",routeWouldRequire:"Route would require",weCanCreate:"We can create a route with {count} location{s} instead",shorterRouteFit:"This shorter route should fit within your {time} minute budget.",wouldYouLike:"Would you like to create this shorter route?",yesCreateShorter:"Yes, Create Shorter Route",noCancel:"No, Cancel",routeCreationFailed:"Route Creation Failed",unableToCreateRoute:"Unable to create a route that fits your time budget. Please try with more time or fewer locations.",failedToCreateRoute:"Failed to create route. Please ensure you have location access and try again."},customPath:{buttonText:"Make a Custom Path",modalTitle:"Select Locations for Your Custom Path",noLocationsAvailable:"No locations available",visited:"Visited",cancel:"Cancel",calculateRoute:"Calculate Route",noNodesSelectedTitle:"No Nodes Selected",noNodesSelectedText:"Please select at least one node to create a custom path.",enableLocationTitle:"Location Required",enableLocationText:"Please enable location access to create a custom path."},chatbot:{buttonText:"Assistant",modalTitle:"Heritage Assistant",welcomeMessage:"Hello! I'm your heritage guide for Timioara. I can tell you about our {count} cultural locations: {locations}. I can also recommend nearby restaurants, cafes, and give you practical visiting tips. What would you like to know?",inputPlaceholder:"Ask about places, nearby restaurants, cafes, visiting tips...",errorMessage:"Sorry, I encountered an error. Please try again."},categories:{architecture:"Architecture",event:"Event",person:"Person",artifact:"Artifact",scenic:"Scenic"},admin:{title:"Admin Panel",createLocation:"Create Location",locationRequests:"Location Requests",approve:"Approve",reject:"Reject",delete:"Delete"},auth:{loginTitle:"Log In",loginSubtitle:"Welcome back to Echoes",emailOrUsername:"Email or Username",emailOrUsernamePlaceholder:"username or email",password:"Password",passwordPlaceholder:"",loggingIn:"Logging In...",logIn:"Log In",forgotPassword:"Forgot Password?",dontHaveAccount:"Don't have an account?",signUpLink:"Sign Up",signUpTitle:"Sign Up",signUpSubtitle:"Create your Echoes account",username:"Username",usernamePlaceholder:"johndoe",email:"Email",emailPlaceholder:"you@example.com",createPassword:"Create a strong password",confirmPassword:"Confirm Password",confirmPasswordPlaceholder:"Confirm your password",creatingAccount:"Creating Account...",signUp:"Sign Up",alreadyHaveAccount:"Already have an account?",loginLink:"Log In",passwordStrengthWeak:"Weak",passwordStrengthMedium:"Medium",passwordStrengthStrong:"Strong",passwordMustContain:"Password must contain:",atLeast8Characters:"At least 8 characters",oneUppercase:"One uppercase letter (A-Z)",oneLowercase:"One lowercase letter (a-z)",oneNumber:"One number (0-9)",oneSpecial:"One special character (!@#$%^&*)",passwordsMatch:"Passwords match",passwordsDoNotMatch:"Passwords do not match",resetPassword:"Reset Password",resetPasswordDescription:"Enter your email address and we'll send you a link to reset your password.",emailAddress:"Email Address",sending:"Sending...",sendResetLink:"Send Reset Link",welcomeTitle:"Welcome!",welcomeMessage:"You have successfully logged in.",errorTitle:"Error",passwordsDoNotMatchError:"Passwords do not match",meetPasswordRequirements:"Please meet all password requirements",successTitle:"Success!",accountCreatedMessage:"Account created successfully. Check your email inbox to verify it before logging in.",checkYourEmailTitle:"Check Your Email",checkYourEmailMessage:"If an account exists with this email, you will receive a password reset link.<br><br><strong>Note:</strong> If you don't receive an email, please check your spam folder"},requestLocation:{title:"Request a Location",subtitle:"Help us expand Timioara's heritage trail",backToProfile:"Back to Profile",locationDetails:"Location Details",locationName:"Location Name",locationNamePlaceholder:"e.g., Old Town Hall",description:"Description & Historical Significance",descriptionPlaceholder:"Describe the location, its history, and why it should be added to the heritage trail...",category:"Category",selectCategory:"Select a category",historicalPeriod:"Historical Period",historicalPeriodPlaceholder:"e.g., 18th Century, 1890-1920",gpsCoordinates:"GPS Coordinates",latitudePlaceholder:"Latitude (e.g., 45.7489)",longitudePlaceholder:"Longitude (e.g., 21.2087)",useMyLocation:"Use My Current Location",photos:"Photos",photosDescription:"Upload up to 10 photos of the location (JPG, PNG)",addPhotos:"Add Photos",audioStory:"Audio Story",audioDescription:"Choose how to provide the audio narration for this location",uploadYourAudio:"Upload Your Audio",uploadAudioDescription:"Upload a pre-recorded audio file (MP3, WAV, max 10MB)",generateAudio:"Let Us Generate Audio",generateAudioDescription:"Provide a detailed description and we'll create the audio for you",uploadAudioFile:"Upload Audio File",changeOption:"Change Option",uploading:"Uploading...",clickToUpload:"Click to upload audio file",audioFileTypes:"MP3, WAV (max 10MB)",audioStoryDescription:"Audio Story Description",write8to10Sentences:"Write 8-10 sentences describing the location's story",audioStoryPlaceholder:"Tell us about this location's history, significance, interesting facts, and what makes it special. Be descriptive and engaging - this will be used to generate the audio narration that visitors will hear when they discover this location...",audioTip:"Tip: Write in an engaging, storytelling style. Include historical dates, key figures, and interesting anecdotes.",sentences:"sentences",contactInformation:"Your Contact Information",fullName:"Full Name",yourName:"Your name",email:"Email",emailPlaceholder:"your.email@example.com",phoneNumber:"Phone Number",phonePlaceholder:"+40 123 456 789",cancel:"Cancel",submitting:"Submitting...",submitRequest:"Submit Request"},locationCategories:{architecture:"Architecture",monument:"Monument",museum:"Museum",religiousSite:"Religious Site",historicalBuilding:"Historical Building",culturalCenter:"Cultural Center",parkGarden:"Park & Garden",other:"Other"},home:{heroTitle:"Walk Through History in",heroSubtitle:"Discover the stories behind Timioara's iconic landmarks. As you walk through the city, unlock audio narratives, historic photos, and fascinating details about Romania's cultural heart.",startExploring:"Start Exploring",learnMore:"Learn More",discoverTimisoara:"Discover Timioara",discoverTimisoaraDesc:"Explore the rich cultural heritage of Romania's first free city with GPS-guided walking tours.",audioStories:"Audio Stories",audioStoriesDesc:"Listen to captivating historical narratives as you approach each heritage location.",trackJourney:"Track Your Journey",trackJourneyDesc:"Build your personal collection of discovered sites and cultural treasures.",personalGuide:"Your Personal Heritage Guide",personalGuideDesc:"Experience Timioara's cultural landmarks like never before with immersive, location-based storytelling.",iconicLocations:"8 Iconic Locations",iconicLocationsDesc:"From Victory Square to the Bega Canal, discover the sites that shaped Timioara's history.",viewOnMap:"View on Map",readyToExplore:"Ready to Explore?",readyToExploreDesc:"Start your journey through Timioara's cultural heritage. Allow location access and begin discovering stories waiting around every corner.",beginJourney:"Begin Your Journey"},common:{loading:"Loading...",error:"Error",success:"Success",cancel:"Cancel",confirm:"Confirm",save:"Save",delete:"Delete",edit:"Edit",close:"Close"},reviews:{title:"Reviews",reviews:"reviews",leaveReview:"Leave Review",editReview:"Edit Review",rating:"Rating",yourReview:"Your Review",optional:"Optional",sharethoughts:"Share your thoughts about this location...",update:"Update",submit:"Submit",selectRating:"Please select a rating",success:"Success!",reviewSubmitted:"Your review has been submitted",reviewUpdated:"Your review has been updated",submitFailed:"Failed to submit review. Please try again.",unlockFirst:"Unlock Location First",discoverToReview:"You must discover this location before leaving a review.",unlockToReview:"Unlock location to review",deleteConfirm:"Delete Review?",deleteWarning:"This action cannot be undone.",deleted:"Deleted",reviewDeleted:"Your review has been deleted",deleteFailed:"Failed to delete review. Please try again.",noReviews:"No reviews yet. Be the first to review!",beFirst:"Leave the First Review"}};function P(t,e="en"){if(e==="en")return ec(fa,t)||t;const r=re.getState().translatedUI[e];return r?ec(r,t)||ec(fa,t)||t:ec(fa,t)||t}function ec(t,e){return e.split(".").reduce((n,r)=>n==null?void 0:n[r],t)}async function rA(t){const e=re.getState();if(e.translatedUI[t])return e.translatedUI[t];try{const n=await nA(fa,t);return e.setTranslatedUI(t,n),n}catch(n){return console.error("Failed to translate UI:",n),fa}}function iA(){const t=mn(),e=re(r=>r.currentLanguage),n=[{icon:It,title:P("home.discoverTimisoara",e),description:P("home.discoverTimisoaraDesc",e)},{icon:T1,title:P("home.audioStories",e),description:P("home.audioStoriesDesc",e)},{icon:j1,title:P("home.trackJourney",e),description:P("home.trackJourneyDesc",e)}];return c.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-heritage-50 via-heritage-100 to-amber-50 dark:from-neutral-900 dark:via-neutral-800 dark:to-neutral-900",children:[c.jsxs("div",{className:"relative overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-[url('https://images.unsplash.com/photo-1555854877-bab0e564b8d5?w=1600')] bg-cover bg-center opacity-10"}),c.jsx("div",{className:"relative px-6 pt-20 pb-32 lg:px-8",children:c.jsxs("div",{className:"mx-auto max-w-4xl text-center",children:[c.jsx("div",{className:"flex justify-center mb-8",children:c.jsxs("div",{className:"inline-flex items-center gap-3 px-6 py-3 bg-heritage-700 rounded-full",children:[c.jsx(Qc,{className:"w-6 h-6 text-amber-400"}),c.jsx("span",{className:"text-lg font-bold text-heritage-50",children:"Echoes"})]})}),c.jsxs("h1",{className:"text-5xl font-bold tracking-tight text-heritage-900 dark:text-heritage-100 sm:text-6xl lg:text-7xl mb-6",children:[P("home.heroTitle",e)," ",c.jsx("span",{className:"text-heritage-700 dark:text-heritage-400",children:"Timioara"})]}),c.jsx("p",{className:"text-xl leading-8 text-heritage-700 dark:text-heritage-300 max-w-2xl mx-auto mb-10",children:P("home.heroSubtitle",e)}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[c.jsxs("button",{onClick:()=>t("/map"),className:"group inline-flex items-center gap-3 rounded-xl bg-heritage-700 px-8 py-4 text-base font-semibold text-heritage-50 shadow-lg hover:bg-heritage-800 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-heritage-700 transition-all duration-300 hover:scale-105",children:[c.jsx(so,{className:"w-5 h-5"}),P("home.startExploring",e),c.jsx(iw,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),c.jsx("button",{onClick:()=>{const r=document.getElementById("features");r==null||r.scrollIntoView({behavior:"smooth"})},className:"inline-flex items-center gap-2 text-base font-semibold text-heritage-800 dark:text-heritage-300 hover:text-heritage-900 dark:hover:text-heritage-100 transition-colors",children:P("home.learnMore",e)})]})]})})]}),c.jsx("div",{id:"features",className:"py-24 px-6 lg:px-8",children:c.jsxs("div",{className:"mx-auto max-w-7xl",children:[c.jsxs("div",{className:"text-center mb-16",children:[c.jsx("h2",{className:"text-4xl font-bold text-heritage-900 dark:text-heritage-100 mb-4",children:P("home.personalGuide",e)}),c.jsx("p",{className:"text-lg text-heritage-700 dark:text-heritage-300 max-w-2xl mx-auto",children:P("home.personalGuideDesc",e)})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:n.map((r,i)=>c.jsxs("div",{className:"group relative bg-white dark:bg-neutral-800 rounded-2xl p-8 shadow-md hover:shadow-2xl transition-all duration-300 border border-heritage-200 dark:border-neutral-700 hover:border-heritage-400 dark:hover:border-heritage-500",children:[c.jsx("div",{className:"flex justify-center mb-6",children:c.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-2xl bg-heritage-100 dark:bg-heritage-900 text-heritage-700 dark:text-heritage-300 group-hover:bg-heritage-700 dark:group-hover:bg-heritage-600 group-hover:text-heritage-50 transition-all duration-300",children:c.jsx(r.icon,{className:"h-8 w-8"})})}),c.jsx("h3",{className:"text-xl font-bold text-heritage-900 dark:text-heritage-100 mb-3 text-center",children:r.title}),c.jsx("p",{className:"text-heritage-700 dark:text-heritage-300 text-center leading-relaxed",children:r.description})]},i))})]})}),c.jsx("div",{className:"py-24 px-6 lg:px-8 bg-heritage-800",children:c.jsxs("div",{className:"mx-auto max-w-7xl",children:[c.jsxs("div",{className:"text-center mb-16",children:[c.jsx("h2",{className:"text-4xl font-bold text-heritage-50 mb-4",children:P("home.iconicLocations",e)}),c.jsx("p",{className:"text-lg text-heritage-200 max-w-2xl mx-auto",children:P("home.iconicLocationsDesc",e)})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-12",children:[c.jsx("div",{className:"aspect-square rounded-xl bg-heritage-700 flex items-center justify-center p-4 hover:bg-heritage-600 transition-colors",children:c.jsx("span",{className:"text-heritage-100 font-semibold text-center text-sm",children:"Victory Square"})}),c.jsx("div",{className:"aspect-square rounded-xl bg-heritage-700 flex items-center justify-center p-4 hover:bg-heritage-600 transition-colors",children:c.jsx("span",{className:"text-heritage-100 font-semibold text-center text-sm",children:"Union Square"})}),c.jsx("div",{className:"aspect-square rounded-xl bg-heritage-700 flex items-center justify-center p-4 hover:bg-heritage-600 transition-colors",children:c.jsx("span",{className:"text-heritage-100 font-semibold text-center text-sm",children:"Huniade Castle"})}),c.jsx("div",{className:"aspect-square rounded-xl bg-heritage-700 flex items-center justify-center p-4 hover:bg-heritage-600 transition-colors",children:c.jsx("span",{className:"text-heritage-100 font-semibold text-center text-sm",children:"Orthodox Cathedral"})}),c.jsx("div",{className:"aspect-square rounded-xl bg-heritage-700 flex items-center justify-center p-4 hover:bg-heritage-600 transition-colors",children:c.jsx("span",{className:"text-heritage-100 font-semibold text-center text-sm",children:"Liberty Square"})}),c.jsx("div",{className:"aspect-square rounded-xl bg-heritage-700 flex items-center justify-center p-4 hover:bg-heritage-600 transition-colors",children:c.jsx("span",{className:"text-heritage-100 font-semibold text-center text-sm",children:"1989 Memorial"})}),c.jsx("div",{className:"aspect-square rounded-xl bg-heritage-700 flex items-center justify-center p-4 hover:bg-heritage-600 transition-colors",children:c.jsx("span",{className:"text-heritage-100 font-semibold text-center text-sm",children:"Bega Canal"})}),c.jsx("div",{className:"aspect-square rounded-xl bg-heritage-700 flex items-center justify-center p-4 hover:bg-heritage-600 transition-colors",children:c.jsx("span",{className:"text-heritage-100 font-semibold text-center text-sm",children:"Roses Park"})})]}),c.jsx("div",{className:"text-center",children:c.jsxs("button",{onClick:()=>t("/map"),className:"inline-flex items-center gap-3 rounded-xl bg-amber-500 px-8 py-4 text-base font-semibold text-heritage-900 shadow-lg hover:bg-amber-400 transition-all duration-300 hover:scale-105",children:[c.jsx(Qc,{className:"w-5 h-5"}),P("home.viewOnMap",e)]})})]})}),c.jsx("div",{className:"py-24 px-6 lg:px-8",children:c.jsxs("div",{className:"mx-auto max-w-4xl text-center",children:[c.jsx("h2",{className:"text-4xl font-bold text-heritage-900 dark:text-heritage-100 mb-6",children:P("home.readyToExplore",e)}),c.jsx("p",{className:"text-xl text-heritage-700 dark:text-heritage-300 mb-10 max-w-2xl mx-auto",children:P("home.readyToExploreDesc",e)}),c.jsxs("button",{onClick:()=>t("/map"),className:"group inline-flex items-center gap-3 rounded-xl bg-heritage-700 px-10 py-5 text-lg font-semibold text-heritage-50 shadow-xl hover:bg-heritage-800 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-heritage-700 transition-all duration-300 hover:scale-105",children:[c.jsx(so,{className:"w-6 h-6"}),P("home.beginJourney",e),c.jsx(iw,{className:"w-6 h-6 group-hover:translate-x-1 transition-transform"})]})]})})]})}const V1=E.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Du=E.createContext({}),Bu=E.createContext(null),$u=typeof document<"u",yp=$u?E.useLayoutEffect:E.useEffect,q1=E.createContext({strict:!1}),xp=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),sA="framerAppearId",H1="data-"+xp(sA);function oA(t,e,n,r){const{visualElement:i}=E.useContext(Du),o=E.useContext(q1),a=E.useContext(Bu),u=E.useContext(V1).reducedMotion,d=E.useRef();r=r||o.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:i,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:u}));const f=d.current;E.useInsertionEffect(()=>{f&&f.update(n,a)});const m=E.useRef(!!(n[H1]&&!window.HandoffComplete));return yp(()=>{f&&(f.render(),m.current&&f.animationState&&f.animationState.animateChanges())}),E.useEffect(()=>{f&&(f.updateFeatures(),!m.current&&f.animationState&&f.animationState.animateChanges(),m.current&&(m.current=!1,window.HandoffComplete=!0))}),f}function Ms(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function aA(t,e,n){return E.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Ms(n)&&(n.current=r))},[e])}function Fa(t){return typeof t=="string"||Array.isArray(t)}function Uu(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const _p=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],bp=["initial",..._p];function zu(t){return Uu(t.animate)||bp.some(e=>Fa(t[e]))}function W1(t){return!!(zu(t)||t.variants)}function lA(t,e){if(zu(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Fa(n)?n:void 0,animate:Fa(r)?r:void 0}}return t.inherit!==!1?e:{}}function cA(t){const{initial:e,animate:n}=lA(t,E.useContext(Du));return E.useMemo(()=>({initial:e,animate:n}),[Aw(e),Aw(n)])}function Aw(t){return Array.isArray(t)?t.join(" "):t}const Ow={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Va={};for(const t in Ow)Va[t]={isEnabled:e=>Ow[t].some(n=>!!e[n])};function uA(t){for(const e in t)Va[e]={...Va[e],...t[e]}}const kp=E.createContext({}),Z1=E.createContext({}),dA=Symbol.for("motionComponentSymbol");function hA({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&uA(t);function o(u,d){let f;const m={...E.useContext(V1),...u,layoutId:fA(u)},{isStatic:g}=m,v=cA(u),w=r(u,g);if(!g&&$u){v.visualElement=oA(i,w,m,e);const _=E.useContext(Z1),k=E.useContext(q1).strict;v.visualElement&&(f=v.visualElement.loadFeatures(m,k,t,_))}return E.createElement(Du.Provider,{value:v},f&&v.visualElement?E.createElement(f,{visualElement:v.visualElement,...m}):null,n(i,u,aA(w,v.visualElement,d),w,g,v.visualElement))}const a=E.forwardRef(o);return a[dA]=i,a}function fA({layoutId:t}){const e=E.useContext(kp).id;return e&&t!==void 0?e+"-"+t:t}function mA(t){function e(r,i={}){return hA(t(r,i))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,i)=>(n.has(i)||n.set(i,e(i)),n.get(i))})}const pA=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Sp(t){return typeof t!="string"||t.includes("-")?!1:!!(pA.indexOf(t)>-1||/[A-Z]/.test(t))}const Xc={};function gA(t){Object.assign(Xc,t)}const Qa=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],es=new Set(Qa);function G1(t,{layout:e,layoutId:n}){return es.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Xc[t]||t==="opacity")}const en=t=>!!(t&&t.getVelocity),vA={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},wA=Qa.length;function yA(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,i){let o="";for(let a=0;a<wA;a++){const u=Qa[a];if(t[u]!==void 0){const d=vA[u]||u;o+=`${d}(${t[u]}) `}}return e&&!t.z&&(o+="translateZ(0)"),o=o.trim(),i?o=i(t,r?"":o):n&&r&&(o="none"),o}const K1=t=>e=>typeof e=="string"&&e.startsWith(t),Y1=K1("--"),Ff=K1("var(--"),xA=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,_A=(t,e)=>e&&typeof t=="number"?e.transform(t):t,oi=(t,e,n)=>Math.min(Math.max(n,t),e),ts={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ma={...ts,transform:t=>oi(0,1,t)},tc={...ts,default:1},pa=t=>Math.round(t*1e5)/1e5,Fu=/(-)?([\d]*\.?[\d])+/g,J1=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,bA=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Xa(t){return typeof t=="string"}const el=t=>({test:e=>Xa(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Lr=el("deg"),tr=el("%"),me=el("px"),kA=el("vh"),SA=el("vw"),Iw={...tr,parse:t=>tr.parse(t)/100,transform:t=>tr.transform(t*100)},Mw={...ts,transform:Math.round},Q1={borderWidth:me,borderTopWidth:me,borderRightWidth:me,borderBottomWidth:me,borderLeftWidth:me,borderRadius:me,radius:me,borderTopLeftRadius:me,borderTopRightRadius:me,borderBottomRightRadius:me,borderBottomLeftRadius:me,width:me,maxWidth:me,height:me,maxHeight:me,size:me,top:me,right:me,bottom:me,left:me,padding:me,paddingTop:me,paddingRight:me,paddingBottom:me,paddingLeft:me,margin:me,marginTop:me,marginRight:me,marginBottom:me,marginLeft:me,rotate:Lr,rotateX:Lr,rotateY:Lr,rotateZ:Lr,scale:tc,scaleX:tc,scaleY:tc,scaleZ:tc,skew:Lr,skewX:Lr,skewY:Lr,distance:me,translateX:me,translateY:me,translateZ:me,x:me,y:me,z:me,perspective:me,transformPerspective:me,opacity:ma,originX:Iw,originY:Iw,originZ:me,zIndex:Mw,fillOpacity:ma,strokeOpacity:ma,numOctaves:Mw};function Cp(t,e,n,r){const{style:i,vars:o,transform:a,transformOrigin:u}=t;let d=!1,f=!1,m=!0;for(const g in e){const v=e[g];if(Y1(g)){o[g]=v;continue}const w=Q1[g],_=_A(v,w);if(es.has(g)){if(d=!0,a[g]=_,!m)continue;v!==(w.default||0)&&(m=!1)}else g.startsWith("origin")?(f=!0,u[g]=_):i[g]=_}if(e.transform||(d||r?i.transform=yA(t.transform,n,m,r):i.transform&&(i.transform="none")),f){const{originX:g="50%",originY:v="50%",originZ:w=0}=u;i.transformOrigin=`${g} ${v} ${w}`}}const Pp=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function X1(t,e,n){for(const r in e)!en(e[r])&&!G1(r,n)&&(t[r]=e[r])}function CA({transformTemplate:t},e,n){return E.useMemo(()=>{const r=Pp();return Cp(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function PA(t,e,n){const r=t.style||{},i={};return X1(i,r,t),Object.assign(i,CA(t,e,n)),t.transformValues?t.transformValues(i):i}function EA(t,e,n){const r={},i=PA(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=i,r}const jA=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function eu(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||jA.has(t)}let ek=t=>!eu(t);function NA(t){t&&(ek=e=>e.startsWith("on")?!eu(e):t(e))}try{NA(require("@emotion/is-prop-valid").default)}catch{}function TA(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(ek(i)||n===!0&&eu(i)||!e&&!eu(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function Dw(t,e,n){return typeof t=="string"?t:me.transform(e+n*t)}function LA(t,e,n){const r=Dw(e,t.x,t.width),i=Dw(n,t.y,t.height);return`${r} ${i}`}const RA={offset:"stroke-dashoffset",array:"stroke-dasharray"},AA={offset:"strokeDashoffset",array:"strokeDasharray"};function OA(t,e,n=1,r=0,i=!0){t.pathLength=1;const o=i?RA:AA;t[o.offset]=me.transform(-r);const a=me.transform(e),u=me.transform(n);t[o.array]=`${a} ${u}`}function Ep(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:o,pathLength:a,pathSpacing:u=1,pathOffset:d=0,...f},m,g,v){if(Cp(t,f,m,v),g){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:w,style:_,dimensions:k}=t;w.transform&&(k&&(_.transform=w.transform),delete w.transform),k&&(i!==void 0||o!==void 0||_.transform)&&(_.transformOrigin=LA(k,i!==void 0?i:.5,o!==void 0?o:.5)),e!==void 0&&(w.x=e),n!==void 0&&(w.y=n),r!==void 0&&(w.scale=r),a!==void 0&&OA(w,a,u,d,!1)}const tk=()=>({...Pp(),attrs:{}}),jp=t=>typeof t=="string"&&t.toLowerCase()==="svg";function IA(t,e,n,r){const i=E.useMemo(()=>{const o=tk();return Ep(o,e,{enableHardwareAcceleration:!1},jp(r),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};X1(o,t.style,t),i.style={...o,...i.style}}return i}function MA(t=!1){return(n,r,i,{latestValues:o},a)=>{const d=(Sp(n)?IA:EA)(r,o,a,n),m={...TA(r,typeof n=="string",t),...d,ref:i},{children:g}=r,v=E.useMemo(()=>en(g)?g.get():g,[g]);return E.createElement(n,{...m,children:v})}}function nk(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const o in n)t.style.setProperty(o,n[o])}const rk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function ik(t,e,n,r){nk(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(rk.has(i)?i:xp(i),e.attrs[i])}function Np(t,e){const{style:n}=t,r={};for(const i in n)(en(n[i])||e.style&&en(e.style[i])||G1(i,t))&&(r[i]=n[i]);return r}function sk(t,e){const n=Np(t,e);for(const r in t)if(en(t[r])||en(e[r])){const i=Qa.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=t[r]}return n}function Tp(t,e,n,r={},i={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),e}function ok(t){const e=E.useRef(null);return e.current===null&&(e.current=t()),e.current}const tu=t=>Array.isArray(t),DA=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),BA=t=>tu(t)?t[t.length-1]||0:t;function yc(t){const e=en(t)?t.get():t;return DA(e)?e.toValue():e}function $A({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,o){const a={latestValues:UA(r,i,o,t),renderState:e()};return n&&(a.mount=u=>n(r,u,a)),a}const ak=t=>(e,n)=>{const r=E.useContext(Du),i=E.useContext(Bu),o=()=>$A(t,e,r,i);return n?o():ok(o)};function UA(t,e,n,r){const i={},o=r(t,{});for(const v in o)i[v]=yc(o[v]);let{initial:a,animate:u}=t;const d=zu(t),f=W1(t);e&&f&&!d&&t.inherit!==!1&&(a===void 0&&(a=e.initial),u===void 0&&(u=e.animate));let m=n?n.initial===!1:!1;m=m||a===!1;const g=m?u:a;return g&&typeof g!="boolean"&&!Uu(g)&&(Array.isArray(g)?g:[g]).forEach(w=>{const _=Tp(t,w);if(!_)return;const{transitionEnd:k,transition:j,...S}=_;for(const x in S){let b=S[x];if(Array.isArray(b)){const N=m?b.length-1:0;b=b[N]}b!==null&&(i[x]=b)}for(const x in k)i[x]=k[x]}),i}const nt=t=>t;class Bw{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function zA(t){let e=new Bw,n=new Bw,r=0,i=!1,o=!1;const a=new WeakSet,u={schedule:(d,f=!1,m=!1)=>{const g=m&&i,v=g?e:n;return f&&a.add(d),v.add(d)&&g&&i&&(r=e.order.length),d},cancel:d=>{n.remove(d),a.delete(d)},process:d=>{if(i){o=!0;return}if(i=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let f=0;f<r;f++){const m=e.order[f];m(d),a.has(m)&&(u.schedule(m),t())}i=!1,o&&(o=!1,u.process(d))}};return u}const nc=["prepare","read","update","preRender","render","postRender"],FA=40;function VA(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=nc.reduce((g,v)=>(g[v]=zA(()=>n=!0),g),{}),a=g=>o[g].process(i),u=()=>{const g=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(g-i.timestamp,FA),1),i.timestamp=g,i.isProcessing=!0,nc.forEach(a),i.isProcessing=!1,n&&e&&(r=!1,t(u))},d=()=>{n=!0,r=!0,i.isProcessing||t(u)};return{schedule:nc.reduce((g,v)=>{const w=o[v];return g[v]=(_,k=!1,j=!1)=>(n||d(),w.schedule(_,k,j)),g},{}),cancel:g=>nc.forEach(v=>o[v].cancel(g)),state:i,steps:o}}const{schedule:ze,cancel:Cr,state:Rt,steps:fh}=VA(typeof requestAnimationFrame<"u"?requestAnimationFrame:nt,!0),qA={useVisualState:ak({scrapeMotionValuesFromProps:sk,createRenderState:tk,onMount:(t,e,{renderState:n,latestValues:r})=>{ze.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),ze.render(()=>{Ep(n,r,{enableHardwareAcceleration:!1},jp(e.tagName),t.transformTemplate),ik(e,n)})}})},HA={useVisualState:ak({scrapeMotionValuesFromProps:Np,createRenderState:Pp})};function WA(t,{forwardMotionProps:e=!1},n,r){return{...Sp(t)?qA:HA,preloadedFeatures:n,useRender:MA(e),createVisualElement:r,Component:t}}function pr(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const lk=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Vu(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const ZA=t=>e=>lk(e)&&t(e,Vu(e));function wr(t,e,n,r){return pr(t,e,ZA(n),r)}const GA=(t,e)=>n=>e(t(n)),ni=(...t)=>t.reduce(GA);function ck(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const $w=ck("dragHorizontal"),Uw=ck("dragVertical");function uk(t){let e=!1;if(t==="y")e=Uw();else if(t==="x")e=$w();else{const n=$w(),r=Uw();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function dk(){const t=uk(!0);return t?(t(),!1):!0}class mi{constructor(e){this.isMounted=!1,this.node=e}update(){}}function zw(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(o,a)=>{if(o.pointerType==="touch"||dk())return;const u=t.getProps();t.animationState&&u.whileHover&&t.animationState.setActive("whileHover",e),u[r]&&ze.update(()=>u[r](o,a))};return wr(t.current,n,i,{passive:!t.getProps()[r]})}class KA extends mi{mount(){this.unmount=ni(zw(this.node,!0),zw(this.node,!1))}unmount(){}}class YA extends mi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ni(pr(this.node.current,"focus",()=>this.onFocus()),pr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const hk=(t,e)=>e?t===e?!0:hk(t,e.parentElement):!1;function mh(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Vu(n))}class JA extends mi{constructor(){super(...arguments),this.removeStartListeners=nt,this.removeEndListeners=nt,this.removeAccessibleListeners=nt,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),o=wr(window,"pointerup",(u,d)=>{if(!this.checkPressEnd())return;const{onTap:f,onTapCancel:m,globalTapTarget:g}=this.node.getProps();ze.update(()=>{!g&&!hk(this.node.current,u.target)?m&&m(u,d):f&&f(u,d)})},{passive:!(r.onTap||r.onPointerUp)}),a=wr(window,"pointercancel",(u,d)=>this.cancelPress(u,d),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=ni(o,a),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=o=>{if(o.key!=="Enter"||this.isPressing)return;const a=u=>{u.key!=="Enter"||!this.checkPressEnd()||mh("up",(d,f)=>{const{onTap:m}=this.node.getProps();m&&ze.update(()=>m(d,f))})};this.removeEndListeners(),this.removeEndListeners=pr(this.node.current,"keyup",a),mh("down",(u,d)=>{this.startPress(u,d)})},n=pr(this.node.current,"keydown",e),r=()=>{this.isPressing&&mh("cancel",(o,a)=>this.cancelPress(o,a))},i=pr(this.node.current,"blur",r);this.removeAccessibleListeners=ni(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&ze.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!dk()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&ze.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=wr(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=pr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ni(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Vf=new WeakMap,ph=new WeakMap,QA=t=>{const e=Vf.get(t.target);e&&e(t)},XA=t=>{t.forEach(QA)};function eO({root:t,...e}){const n=t||document;ph.has(n)||ph.set(n,{});const r=ph.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(XA,{root:t,...e})),r[i]}function tO(t,e,n){const r=eO(e);return Vf.set(t,n),r.observe(t),()=>{Vf.delete(t),r.unobserve(t)}}const nO={some:0,all:1};class rO extends mi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:o}=e,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:nO[i]},u=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),v=f?m:g;v&&v(d)};return tO(this.node.current,a,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(iO(e,n))&&this.startObserver()}unmount(){}}function iO({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const sO={inView:{Feature:rO},tap:{Feature:JA},focus:{Feature:YA},hover:{Feature:KA}};function fk(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function oO(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function aO(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function qu(t,e,n){const r=t.getProps();return Tp(r,e,n!==void 0?n:r.custom,oO(t),aO(t))}let lO=nt,Lp=nt;const ri=t=>t*1e3,yr=t=>t/1e3,cO={current:!1},mk=t=>Array.isArray(t)&&typeof t[0]=="number";function pk(t){return!!(!t||typeof t=="string"&&gk[t]||mk(t)||Array.isArray(t)&&t.every(pk))}const ea=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,gk={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ea([0,.65,.55,1]),circOut:ea([.55,0,1,.45]),backIn:ea([.31,.01,.66,-.59]),backOut:ea([.33,1.53,.69,.99])};function vk(t){if(t)return mk(t)?ea(t):Array.isArray(t)?t.map(vk):gk[t]}function uO(t,e,n,{delay:r=0,duration:i,repeat:o=0,repeatType:a="loop",ease:u,times:d}={}){const f={[e]:n};d&&(f.offset=d);const m=vk(u);return Array.isArray(m)&&(f.easing=m),t.animate(f,{delay:r,duration:i,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}function dO(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const wk=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,hO=1e-7,fO=12;function mO(t,e,n,r,i){let o,a,u=0;do a=e+(n-e)/2,o=wk(a,r,i)-t,o>0?n=a:e=a;while(Math.abs(o)>hO&&++u<fO);return a}function tl(t,e,n,r){if(t===e&&n===r)return nt;const i=o=>mO(o,0,1,t,n);return o=>o===0||o===1?o:wk(i(o),e,r)}const pO=tl(.42,0,1,1),gO=tl(0,0,.58,1),yk=tl(.42,0,.58,1),vO=t=>Array.isArray(t)&&typeof t[0]!="number",xk=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,_k=t=>e=>1-t(1-e),Rp=t=>1-Math.sin(Math.acos(t)),bk=_k(Rp),wO=xk(Rp),kk=tl(.33,1.53,.69,.99),Ap=_k(kk),yO=xk(Ap),xO=t=>(t*=2)<1?.5*Ap(t):.5*(2-Math.pow(2,-10*(t-1))),_O={linear:nt,easeIn:pO,easeInOut:yk,easeOut:gO,circIn:Rp,circInOut:wO,circOut:bk,backIn:Ap,backInOut:yO,backOut:kk,anticipate:xO},Fw=t=>{if(Array.isArray(t)){Lp(t.length===4);const[e,n,r,i]=t;return tl(e,n,r,i)}else if(typeof t=="string")return _O[t];return t},Op=(t,e)=>n=>!!(Xa(n)&&bA.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),Sk=(t,e,n)=>r=>{if(!Xa(r))return r;const[i,o,a,u]=r.match(Fu);return{[t]:parseFloat(i),[e]:parseFloat(o),[n]:parseFloat(a),alpha:u!==void 0?parseFloat(u):1}},bO=t=>oi(0,255,t),gh={...ts,transform:t=>Math.round(bO(t))},$i={test:Op("rgb","red"),parse:Sk("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+gh.transform(t)+", "+gh.transform(e)+", "+gh.transform(n)+", "+pa(ma.transform(r))+")"};function kO(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const qf={test:Op("#"),parse:kO,transform:$i.transform},Ds={test:Op("hsl","hue"),parse:Sk("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+tr.transform(pa(e))+", "+tr.transform(pa(n))+", "+pa(ma.transform(r))+")"},$t={test:t=>$i.test(t)||qf.test(t)||Ds.test(t),parse:t=>$i.test(t)?$i.parse(t):Ds.test(t)?Ds.parse(t):qf.parse(t),transform:t=>Xa(t)?t:t.hasOwnProperty("red")?$i.transform(t):Ds.transform(t)},Qe=(t,e,n)=>-n*t+n*e+t;function vh(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function SO({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,o=0,a=0;if(!e)i=o=a=n;else{const u=n<.5?n*(1+e):n+e-n*e,d=2*n-u;i=vh(d,u,t+1/3),o=vh(d,u,t),a=vh(d,u,t-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:r}}const wh=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},CO=[qf,$i,Ds],PO=t=>CO.find(e=>e.test(t));function Vw(t){const e=PO(t);let n=e.parse(t);return e===Ds&&(n=SO(n)),n}const Ck=(t,e)=>{const n=Vw(t),r=Vw(e),i={...n};return o=>(i.red=wh(n.red,r.red,o),i.green=wh(n.green,r.green,o),i.blue=wh(n.blue,r.blue,o),i.alpha=Qe(n.alpha,r.alpha,o),$i.transform(i))};function EO(t){var e,n;return isNaN(t)&&Xa(t)&&(((e=t.match(Fu))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(J1))===null||n===void 0?void 0:n.length)||0)>0}const Pk={regex:xA,countKey:"Vars",token:"${v}",parse:nt},Ek={regex:J1,countKey:"Colors",token:"${c}",parse:$t.parse},jk={regex:Fu,countKey:"Numbers",token:"${n}",parse:ts.parse};function yh(t,{regex:e,countKey:n,token:r,parse:i}){const o=t.tokenised.match(e);o&&(t["num"+n]=o.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...o.map(i)))}function nu(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&yh(n,Pk),yh(n,Ek),yh(n,jk),n}function Nk(t){return nu(t).values}function Tk(t){const{values:e,numColors:n,numVars:r,tokenised:i}=nu(t),o=e.length;return a=>{let u=i;for(let d=0;d<o;d++)d<r?u=u.replace(Pk.token,a[d]):d<r+n?u=u.replace(Ek.token,$t.transform(a[d])):u=u.replace(jk.token,pa(a[d]));return u}}const jO=t=>typeof t=="number"?0:t;function NO(t){const e=Nk(t);return Tk(t)(e.map(jO))}const ai={test:EO,parse:Nk,createTransformer:Tk,getAnimatableNone:NO},Lk=(t,e)=>n=>`${n>0?e:t}`;function Rk(t,e){return typeof t=="number"?n=>Qe(t,e,n):$t.test(t)?Ck(t,e):t.startsWith("var(")?Lk(t,e):Ok(t,e)}const Ak=(t,e)=>{const n=[...t],r=n.length,i=t.map((o,a)=>Rk(o,e[a]));return o=>{for(let a=0;a<r;a++)n[a]=i[a](o);return n}},TO=(t,e)=>{const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=Rk(t[i],e[i]));return i=>{for(const o in r)n[o]=r[o](i);return n}},Ok=(t,e)=>{const n=ai.createTransformer(e),r=nu(t),i=nu(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?ni(Ak(r.values,i.values),n):Lk(t,e)},qa=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},qw=(t,e)=>n=>Qe(t,e,n);function LO(t){return typeof t=="number"?qw:typeof t=="string"?$t.test(t)?Ck:Ok:Array.isArray(t)?Ak:typeof t=="object"?TO:qw}function RO(t,e,n){const r=[],i=n||LO(t[0]),o=t.length-1;for(let a=0;a<o;a++){let u=i(t[a],t[a+1]);if(e){const d=Array.isArray(e)?e[a]||nt:e;u=ni(d,u)}r.push(u)}return r}function Ik(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const o=t.length;if(Lp(o===e.length),o===1)return()=>e[0];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=RO(e,r,i),u=a.length,d=f=>{let m=0;if(u>1)for(;m<t.length-2&&!(f<t[m+1]);m++);const g=qa(t[m],t[m+1],f);return a[m](g)};return n?f=>d(oi(t[0],t[o-1],f)):d}function AO(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=qa(0,e,r);t.push(Qe(n,1,i))}}function OO(t){const e=[0];return AO(e,t.length-1),e}function IO(t,e){return t.map(n=>n*e)}function MO(t,e){return t.map(()=>e||yk).splice(0,t.length-1)}function ru({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=vO(r)?r.map(Fw):Fw(r),o={done:!1,value:e[0]},a=IO(n&&n.length===e.length?n:OO(e),t),u=Ik(a,e,{ease:Array.isArray(i)?i:MO(e,i)});return{calculatedDuration:t,next:d=>(o.value=u(d),o.done=d>=t,o)}}function Mk(t,e){return e?t*(1e3/e):0}const DO=5;function Dk(t,e,n){const r=Math.max(e-DO,0);return Mk(n-t(r),e-r)}const xh=.001,BO=.01,Hw=10,$O=.05,UO=1;function zO({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,o;lO(t<=ri(Hw));let a=1-e;a=oi($O,UO,a),t=oi(BO,Hw,yr(t)),a<1?(i=f=>{const m=f*a,g=m*t,v=m-n,w=Hf(f,a),_=Math.exp(-g);return xh-v/w*_},o=f=>{const g=f*a*t,v=g*n+n,w=Math.pow(a,2)*Math.pow(f,2)*t,_=Math.exp(-g),k=Hf(Math.pow(f,2),a);return(-i(f)+xh>0?-1:1)*((v-w)*_)/k}):(i=f=>{const m=Math.exp(-f*t),g=(f-n)*t+1;return-xh+m*g},o=f=>{const m=Math.exp(-f*t),g=(n-f)*(t*t);return m*g});const u=5/t,d=VO(i,o,u);if(t=ri(t),isNaN(d))return{stiffness:100,damping:10,duration:t};{const f=Math.pow(d,2)*r;return{stiffness:f,damping:a*2*Math.sqrt(r*f),duration:t}}}const FO=12;function VO(t,e,n){let r=n;for(let i=1;i<FO;i++)r=r-t(r)/e(r);return r}function Hf(t,e){return t*Math.sqrt(1-e*e)}const qO=["duration","bounce"],HO=["stiffness","damping","mass"];function Ww(t,e){return e.some(n=>t[n]!==void 0)}function WO(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!Ww(t,HO)&&Ww(t,qO)){const n=zO(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function Bk({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],o=t[t.length-1],a={done:!1,value:i},{stiffness:u,damping:d,mass:f,duration:m,velocity:g,isResolvedFromDuration:v}=WO({...r,velocity:-yr(r.velocity||0)}),w=g||0,_=d/(2*Math.sqrt(u*f)),k=o-i,j=yr(Math.sqrt(u/f)),S=Math.abs(k)<5;n||(n=S?.01:2),e||(e=S?.005:.5);let x;if(_<1){const b=Hf(j,_);x=N=>{const R=Math.exp(-_*j*N);return o-R*((w+_*j*k)/b*Math.sin(b*N)+k*Math.cos(b*N))}}else if(_===1)x=b=>o-Math.exp(-j*b)*(k+(w+j*k)*b);else{const b=j*Math.sqrt(_*_-1);x=N=>{const R=Math.exp(-_*j*N),B=Math.min(b*N,300);return o-R*((w+_*j*k)*Math.sinh(B)+b*k*Math.cosh(B))/b}}return{calculatedDuration:v&&m||null,next:b=>{const N=x(b);if(v)a.done=b>=m;else{let R=w;b!==0&&(_<1?R=Dk(x,b,N):R=0);const B=Math.abs(R)<=n,I=Math.abs(o-N)<=e;a.done=B&&I}return a.value=a.done?o:N,a}}}function Zw({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:a,min:u,max:d,restDelta:f=.5,restSpeed:m}){const g=t[0],v={done:!1,value:g},w=F=>u!==void 0&&F<u||d!==void 0&&F>d,_=F=>u===void 0?d:d===void 0||Math.abs(u-F)<Math.abs(d-F)?u:d;let k=n*e;const j=g+k,S=a===void 0?j:a(j);S!==j&&(k=S-g);const x=F=>-k*Math.exp(-F/r),b=F=>S+x(F),N=F=>{const $=x(F),X=b(F);v.done=Math.abs($)<=f,v.value=v.done?S:X};let R,B;const I=F=>{w(v.value)&&(R=F,B=Bk({keyframes:[v.value,_(v.value)],velocity:Dk(b,F,v.value),damping:i,stiffness:o,restDelta:f,restSpeed:m}))};return I(0),{calculatedDuration:null,next:F=>{let $=!1;return!B&&R===void 0&&($=!0,N(F),I(F)),R!==void 0&&F>R?B.next(F-R):(!$&&N(F),v)}}}const ZO=t=>{const e=({timestamp:n})=>t(n);return{start:()=>ze.update(e,!0),stop:()=>Cr(e),now:()=>Rt.isProcessing?Rt.timestamp:performance.now()}},Gw=2e4;function Kw(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Gw;)e+=n,r=t.next(e);return e>=Gw?1/0:e}const GO={decay:Zw,inertia:Zw,tween:ru,keyframes:ru,spring:Bk};function iu({autoplay:t=!0,delay:e=0,driver:n=ZO,keyframes:r,type:i="keyframes",repeat:o=0,repeatDelay:a=0,repeatType:u="loop",onPlay:d,onStop:f,onComplete:m,onUpdate:g,...v}){let w=1,_=!1,k,j;const S=()=>{j=new Promise(O=>{k=O})};S();let x;const b=GO[i]||ru;let N;b!==ru&&typeof r[0]!="number"&&(N=Ik([0,100],r,{clamp:!1}),r=[0,100]);const R=b({...v,keyframes:r});let B;u==="mirror"&&(B=b({...v,keyframes:[...r].reverse(),velocity:-(v.velocity||0)}));let I="idle",F=null,$=null,X=null;R.calculatedDuration===null&&o&&(R.calculatedDuration=Kw(R));const{calculatedDuration:ne}=R;let Q=1/0,W=1/0;ne!==null&&(Q=ne+a,W=Q*(o+1)-a);let q=0;const ue=O=>{if($===null)return;w>0&&($=Math.min($,O)),w<0&&($=Math.min(O-W/w,$)),F!==null?q=F:q=Math.round(O-$)*w;const Y=q-e*(w>=0?1:-1),ce=w>=0?Y<0:Y>W;q=Math.max(Y,0),I==="finished"&&F===null&&(q=W);let ge=q,we=R;if(o){const Me=Math.min(q,W)/Q;let xe=Math.floor(Me),Ne=Me%1;!Ne&&Me>=1&&(Ne=1),Ne===1&&xe--,xe=Math.min(xe,o+1),!!(xe%2)&&(u==="reverse"?(Ne=1-Ne,a&&(Ne-=a/Q)):u==="mirror"&&(we=B)),ge=oi(0,1,Ne)*Q}const te=ce?{done:!1,value:r[0]}:we.next(ge);N&&(te.value=N(te.value));let{done:Se}=te;!ce&&ne!==null&&(Se=w>=0?q>=W:q<=0);const ve=F===null&&(I==="finished"||I==="running"&&Se);return g&&g(te.value),ve&&D(),te},M=()=>{x&&x.stop(),x=void 0},ee=()=>{I="idle",M(),k(),S(),$=X=null},D=()=>{I="finished",m&&m(),M(),k()},H=()=>{if(_)return;x||(x=n(ue));const O=x.now();d&&d(),F!==null?$=O-F:(!$||I==="finished")&&($=O),I==="finished"&&S(),X=$,F=null,I="running",x.start()};t&&H();const U={then(O,Y){return j.then(O,Y)},get time(){return yr(q)},set time(O){O=ri(O),q=O,F!==null||!x||w===0?F=O:$=x.now()-O/w},get duration(){const O=R.calculatedDuration===null?Kw(R):R.calculatedDuration;return yr(O)},get speed(){return w},set speed(O){O===w||!x||(w=O,U.time=yr(q))},get state(){return I},play:H,pause:()=>{I="paused",F=q},stop:()=>{_=!0,I!=="idle"&&(I="idle",f&&f(),ee())},cancel:()=>{X!==null&&ue(X),ee()},complete:()=>{I="finished"},sample:O=>($=0,ue(O))};return U}function KO(t){let e;return()=>(e===void 0&&(e=t()),e)}const YO=KO(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),JO=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),rc=10,QO=2e4,XO=(t,e)=>e.type==="spring"||t==="backgroundColor"||!pk(e.ease);function eI(t,e,{onUpdate:n,onComplete:r,...i}){if(!(YO()&&JO.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let a=!1,u,d,f=!1;const m=()=>{d=new Promise(b=>{u=b})};m();let{keyframes:g,duration:v=300,ease:w,times:_}=i;if(XO(e,i)){const b=iu({...i,repeat:0,delay:0});let N={done:!1,value:g[0]};const R=[];let B=0;for(;!N.done&&B<QO;)N=b.sample(B),R.push(N.value),B+=rc;_=void 0,g=R,v=B-rc,w="linear"}const k=uO(t.owner.current,e,g,{...i,duration:v,ease:w,times:_}),j=()=>{f=!1,k.cancel()},S=()=>{f=!0,ze.update(j),u(),m()};return k.onfinish=()=>{f||(t.set(dO(g,i)),r&&r(),S())},{then(b,N){return d.then(b,N)},attachTimeline(b){return k.timeline=b,k.onfinish=null,nt},get time(){return yr(k.currentTime||0)},set time(b){k.currentTime=ri(b)},get speed(){return k.playbackRate},set speed(b){k.playbackRate=b},get duration(){return yr(v)},play:()=>{a||(k.play(),Cr(j))},pause:()=>k.pause(),stop:()=>{if(a=!0,k.playState==="idle")return;const{currentTime:b}=k;if(b){const N=iu({...i,autoplay:!1});t.setWithVelocity(N.sample(b-rc).value,N.sample(b).value,rc)}S()},complete:()=>{f||k.finish()},cancel:S}}function tI({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const i=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:nt,pause:nt,stop:nt,then:o=>(o(),Promise.resolve()),cancel:nt,complete:nt});return e?iu({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const nI={type:"spring",stiffness:500,damping:25,restSpeed:10},rI=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),iI={type:"keyframes",duration:.8},sI={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},oI=(t,{keyframes:e})=>e.length>2?iI:es.has(t)?t.startsWith("scale")?rI(e[1]):nI:sI,Wf=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ai.test(e)||e==="0")&&!e.startsWith("url(")),aI=new Set(["brightness","contrast","saturate","opacity"]);function lI(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Fu)||[];if(!r)return t;const i=n.replace(r,"");let o=aI.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+i+")"}const cI=/([a-z-]*)\(.*?\)/g,Zf={...ai,getAnimatableNone:t=>{const e=t.match(cI);return e?e.map(lI).join(" "):t}},uI={...Q1,color:$t,backgroundColor:$t,outlineColor:$t,fill:$t,stroke:$t,borderColor:$t,borderTopColor:$t,borderRightColor:$t,borderBottomColor:$t,borderLeftColor:$t,filter:Zf,WebkitFilter:Zf},Ip=t=>uI[t];function $k(t,e){let n=Ip(t);return n!==Zf&&(n=ai),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Uk=t=>/^0[^.\s]+$/.test(t);function dI(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||Uk(t)}function hI(t,e,n,r){const i=Wf(e,n);let o;Array.isArray(n)?o=[...n]:o=[null,n];const a=r.from!==void 0?r.from:t.get();let u;const d=[];for(let f=0;f<o.length;f++)o[f]===null&&(o[f]=f===0?a:o[f-1]),dI(o[f])&&d.push(f),typeof o[f]=="string"&&o[f]!=="none"&&o[f]!=="0"&&(u=o[f]);if(i&&d.length&&u)for(let f=0;f<d.length;f++){const m=d[f];o[m]=$k(e,u)}return o}function fI({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:a,repeatDelay:u,from:d,elapsed:f,...m}){return!!Object.keys(m).length}function Mp(t,e){return t[e]||t.default||t}const mI={skipAnimations:!1},Dp=(t,e,n,r={})=>i=>{const o=Mp(r,t)||{},a=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-ri(a);const d=hI(e,t,n,o),f=d[0],m=d[d.length-1],g=Wf(t,f),v=Wf(t,m);let w={keyframes:d,velocity:e.getVelocity(),ease:"easeOut",...o,delay:-u,onUpdate:_=>{e.set(_),o.onUpdate&&o.onUpdate(_)},onComplete:()=>{i(),o.onComplete&&o.onComplete()}};if(fI(o)||(w={...w,...oI(t,w)}),w.duration&&(w.duration=ri(w.duration)),w.repeatDelay&&(w.repeatDelay=ri(w.repeatDelay)),!g||!v||cO.current||o.type===!1||mI.skipAnimations)return tI(w);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const _=eI(e,t,w);if(_)return _}return iu(w)};function su(t){return!!(en(t)&&t.add)}const zk=t=>/^\-?\d*\.?\d+$/.test(t);function Bp(t,e){t.indexOf(e)===-1&&t.push(e)}function $p(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Up{constructor(){this.subscriptions=[]}add(e){return Bp(this.subscriptions,e),()=>$p(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let o=0;o<i;o++){const a=this.subscriptions[o];a&&a(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const pI=t=>!isNaN(parseFloat(t));class gI{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:o,timestamp:a}=Rt;this.lastUpdated!==a&&(this.timeDelta=o,this.lastUpdated=a,ze.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>ze.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=pI(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Up);const r=this.events[e].add(n);return e==="change"?()=>{r(),ze.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Mk(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function oo(t,e){return new gI(t,e)}const Fk=t=>e=>e.test(t),vI={test:t=>t==="auto",parse:t=>t},Vk=[ts,me,tr,Lr,SA,kA,vI],Wo=t=>Vk.find(Fk(t)),wI=[...Vk,$t,ai],yI=t=>wI.find(Fk(t));function xI(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,oo(n))}function _I(t,e){const n=qu(t,e);let{transitionEnd:r={},transition:i={},...o}=n?t.makeTargetAnimatable(n,!1):{};o={...o,...r};for(const a in o){const u=BA(o[a]);xI(t,a,u)}}function bI(t,e,n){var r,i;const o=Object.keys(e).filter(u=>!t.hasValue(u)),a=o.length;if(a)for(let u=0;u<a;u++){const d=o[u],f=e[d];let m=null;Array.isArray(f)&&(m=f[0]),m===null&&(m=(i=(r=n[d])!==null&&r!==void 0?r:t.readValue(d))!==null&&i!==void 0?i:e[d]),m!=null&&(typeof m=="string"&&(zk(m)||Uk(m))?m=parseFloat(m):!yI(m)&&ai.test(f)&&(m=$k(d,f)),t.addValue(d,oo(m,{owner:t})),n[d]===void 0&&(n[d]=m),m!==null&&t.setBaseTarget(d,m))}}function kI(t,e){return e?(e[t]||e.default||e).from:void 0}function SI(t,e,n){const r={};for(const i in t){const o=kI(i,e);if(o!==void 0)r[i]=o;else{const a=n.getValue(i);a&&(r[i]=a.get())}}return r}function CI({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function PI(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function qk(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:a,...u}=t.makeTargetAnimatable(e);const d=t.getValue("willChange");r&&(o=r);const f=[],m=i&&t.animationState&&t.animationState.getState()[i];for(const g in u){const v=t.getValue(g),w=u[g];if(!v||w===void 0||m&&CI(m,g))continue;const _={delay:n,elapsed:0,...Mp(o||{},g)};if(window.HandoffAppearAnimations){const S=t.getProps()[H1];if(S){const x=window.HandoffAppearAnimations(S,g,v,ze);x!==null&&(_.elapsed=x,_.isHandoff=!0)}}let k=!_.isHandoff&&!PI(v,w);if(_.type==="spring"&&(v.getVelocity()||_.velocity)&&(k=!1),v.animation&&(k=!1),k)continue;v.start(Dp(g,v,w,t.shouldReduceMotion&&es.has(g)?{type:!1}:_));const j=v.animation;su(d)&&(d.add(g),j.then(()=>d.remove(g))),f.push(j)}return a&&Promise.all(f).then(()=>{a&&_I(t,a)}),f}function Gf(t,e,n={}){const r=qu(t,e,n.custom);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const o=r?()=>Promise.all(qk(t,r,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:f=0,staggerChildren:m,staggerDirection:g}=i;return EI(t,e,f+d,m,g,n)}:()=>Promise.resolve(),{when:u}=i;if(u){const[d,f]=u==="beforeChildren"?[o,a]:[a,o];return d().then(()=>f())}else return Promise.all([o(),a(n.delay)])}function EI(t,e,n=0,r=0,i=1,o){const a=[],u=(t.variantChildren.size-1)*r,d=i===1?(f=0)=>f*r:(f=0)=>u-f*r;return Array.from(t.variantChildren).sort(jI).forEach((f,m)=>{f.notify("AnimationStart",e),a.push(Gf(f,e,{...o,delay:n+d(m)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(a)}function jI(t,e){return t.sortNodePosition(e)}function NI(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>Gf(t,o,n));r=Promise.all(i)}else if(typeof e=="string")r=Gf(t,e,n);else{const i=typeof e=="function"?qu(t,e,n.custom):e;r=Promise.all(qk(t,i,n))}return r.then(()=>t.notify("AnimationComplete",e))}const TI=[..._p].reverse(),LI=_p.length;function RI(t){return e=>Promise.all(e.map(({animation:n,options:r})=>NI(t,n,r)))}function AI(t){let e=RI(t);const n=II();let r=!0;const i=(d,f)=>{const m=qu(t,f);if(m){const{transition:g,transitionEnd:v,...w}=m;d={...d,...w,...v}}return d};function o(d){e=d(t)}function a(d,f){const m=t.getProps(),g=t.getVariantContext(!0)||{},v=[],w=new Set;let _={},k=1/0;for(let S=0;S<LI;S++){const x=TI[S],b=n[x],N=m[x]!==void 0?m[x]:g[x],R=Fa(N),B=x===f?b.isActive:null;B===!1&&(k=S);let I=N===g[x]&&N!==m[x]&&R;if(I&&r&&t.manuallyAnimateOnMount&&(I=!1),b.protectedKeys={..._},!b.isActive&&B===null||!N&&!b.prevProp||Uu(N)||typeof N=="boolean")continue;let $=OI(b.prevProp,N)||x===f&&b.isActive&&!I&&R||S>k&&R,X=!1;const ne=Array.isArray(N)?N:[N];let Q=ne.reduce(i,{});B===!1&&(Q={});const{prevResolvedValues:W={}}=b,q={...W,...Q},ue=M=>{$=!0,w.has(M)&&(X=!0,w.delete(M)),b.needsAnimating[M]=!0};for(const M in q){const ee=Q[M],D=W[M];if(_.hasOwnProperty(M))continue;let H=!1;tu(ee)&&tu(D)?H=!fk(ee,D):H=ee!==D,H?ee!==void 0?ue(M):w.add(M):ee!==void 0&&w.has(M)?ue(M):b.protectedKeys[M]=!0}b.prevProp=N,b.prevResolvedValues=Q,b.isActive&&(_={..._,...Q}),r&&t.blockInitialAnimation&&($=!1),$&&(!I||X)&&v.push(...ne.map(M=>({animation:M,options:{type:x,...d}})))}if(w.size){const S={};w.forEach(x=>{const b=t.getBaseTarget(x);b!==void 0&&(S[x]=b)}),v.push({animation:S})}let j=!!v.length;return r&&(m.initial===!1||m.initial===m.animate)&&!t.manuallyAnimateOnMount&&(j=!1),r=!1,j?e(v):Promise.resolve()}function u(d,f,m){var g;if(n[d].isActive===f)return Promise.resolve();(g=t.variantChildren)===null||g===void 0||g.forEach(w=>{var _;return(_=w.animationState)===null||_===void 0?void 0:_.setActive(d,f)}),n[d].isActive=f;const v=a(m,d);for(const w in n)n[w].protectedKeys={};return v}return{animateChanges:a,setActive:u,setAnimateFunction:o,getState:()=>n}}function OI(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!fk(e,t):!1}function Si(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function II(){return{animate:Si(!0),whileInView:Si(),whileHover:Si(),whileTap:Si(),whileDrag:Si(),whileFocus:Si(),exit:Si()}}class MI extends mi{constructor(e){super(e),e.animationState||(e.animationState=AI(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Uu(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let DI=0;class BI extends mi{constructor(){super(...arguments),this.id=DI++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const o=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&o.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const $I={animation:{Feature:MI},exit:{Feature:BI}},Yw=(t,e)=>Math.abs(t-e);function UI(t,e){const n=Yw(t.x,e.x),r=Yw(t.y,e.y);return Math.sqrt(n**2+r**2)}class Hk{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=bh(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,w=UI(g.offset,{x:0,y:0})>=3;if(!v&&!w)return;const{point:_}=g,{timestamp:k}=Rt;this.history.push({..._,timestamp:k});const{onStart:j,onMove:S}=this.handlers;v||(j&&j(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,g)},this.handlePointerMove=(g,v)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=_h(v,this.transformPagePoint),ze.update(this.updatePoint,!0)},this.handlePointerUp=(g,v)=>{this.end();const{onEnd:w,onSessionEnd:_,resumeAnimation:k}=this.handlers;if(this.dragSnapToOrigin&&k&&k(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=bh(g.type==="pointercancel"?this.lastMoveEventInfo:_h(v,this.transformPagePoint),this.history);this.startEvent&&w&&w(g,j),_&&_(g,j)},!lk(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const a=Vu(e),u=_h(a,this.transformPagePoint),{point:d}=u,{timestamp:f}=Rt;this.history=[{...d,timestamp:f}];const{onSessionStart:m}=n;m&&m(e,bh(u,this.history)),this.removeListeners=ni(wr(this.contextWindow,"pointermove",this.handlePointerMove),wr(this.contextWindow,"pointerup",this.handlePointerUp),wr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Cr(this.updatePoint)}}function _h(t,e){return e?{point:e(t.point)}:t}function Jw(t,e){return{x:t.x-e.x,y:t.y-e.y}}function bh({point:t},e){return{point:t,delta:Jw(t,Wk(e)),offset:Jw(t,zI(e)),velocity:FI(e,.1)}}function zI(t){return t[0]}function Wk(t){return t[t.length-1]}function FI(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=Wk(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>ri(e)));)n--;if(!r)return{x:0,y:0};const o=yr(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const a={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function un(t){return t.max-t.min}function Kf(t,e=0,n=.01){return Math.abs(t-e)<=n}function Qw(t,e,n,r=.5){t.origin=r,t.originPoint=Qe(e.min,e.max,t.origin),t.scale=un(n)/un(e),(Kf(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Qe(n.min,n.max,t.origin)-t.originPoint,(Kf(t.translate)||isNaN(t.translate))&&(t.translate=0)}function ga(t,e,n,r){Qw(t.x,e.x,n.x,r?r.originX:void 0),Qw(t.y,e.y,n.y,r?r.originY:void 0)}function Xw(t,e,n){t.min=n.min+e.min,t.max=t.min+un(e)}function VI(t,e,n){Xw(t.x,e.x,n.x),Xw(t.y,e.y,n.y)}function ey(t,e,n){t.min=e.min-n.min,t.max=t.min+un(e)}function va(t,e,n){ey(t.x,e.x,n.x),ey(t.y,e.y,n.y)}function qI(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Qe(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Qe(n,t,r.max):Math.min(t,n)),t}function ty(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function HI(t,{top:e,left:n,bottom:r,right:i}){return{x:ty(t.x,n,i),y:ty(t.y,e,r)}}function ny(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function WI(t,e){return{x:ny(t.x,e.x),y:ny(t.y,e.y)}}function ZI(t,e){let n=.5;const r=un(t),i=un(e);return i>r?n=qa(e.min,e.max-r,t.min):r>i&&(n=qa(t.min,t.max-i,e.min)),oi(0,1,n)}function GI(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Yf=.35;function KI(t=Yf){return t===!1?t=0:t===!0&&(t=Yf),{x:ry(t,"left","right"),y:ry(t,"top","bottom")}}function ry(t,e,n){return{min:iy(t,e),max:iy(t,n)}}function iy(t,e){return typeof t=="number"?t:t[e]||0}const sy=()=>({translate:0,scale:1,origin:0,originPoint:0}),Bs=()=>({x:sy(),y:sy()}),oy=()=>({min:0,max:0}),dt=()=>({x:oy(),y:oy()});function bn(t){return[t("x"),t("y")]}function Zk({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function YI({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function JI(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function kh(t){return t===void 0||t===1}function Jf({scale:t,scaleX:e,scaleY:n}){return!kh(t)||!kh(e)||!kh(n)}function Ni(t){return Jf(t)||Gk(t)||t.z||t.rotate||t.rotateX||t.rotateY}function Gk(t){return ay(t.x)||ay(t.y)}function ay(t){return t&&t!=="0%"}function ou(t,e,n){const r=t-n,i=e*r;return n+i}function ly(t,e,n,r,i){return i!==void 0&&(t=ou(t,i,r)),ou(t,n,r)+e}function Qf(t,e=0,n=1,r,i){t.min=ly(t.min,e,n,r,i),t.max=ly(t.max,e,n,r,i)}function Kk(t,{x:e,y:n}){Qf(t.x,e.translate,e.scale,e.originPoint),Qf(t.y,n.translate,n.scale,n.originPoint)}function QI(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let o,a;for(let u=0;u<i;u++){o=n[u],a=o.projectionDelta;const d=o.instance;d&&d.style&&d.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&$s(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,Kk(t,a)),r&&Ni(o.latestValues)&&$s(t,o.latestValues))}e.x=cy(e.x),e.y=cy(e.y)}function cy(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Mr(t,e){t.min=t.min+e,t.max=t.max+e}function uy(t,e,[n,r,i]){const o=e[i]!==void 0?e[i]:.5,a=Qe(t.min,t.max,o);Qf(t,e[n],e[r],a,e.scale)}const XI=["x","scaleX","originX"],eM=["y","scaleY","originY"];function $s(t,e){uy(t.x,e,XI),uy(t.y,e,eM)}function Yk(t,e){return Zk(JI(t.getBoundingClientRect(),e))}function tM(t,e,n){const r=Yk(t,n),{scroll:i}=e;return i&&(Mr(r.x,i.offset.x),Mr(r.y,i.offset.y)),r}const Jk=({current:t})=>t?t.ownerDocument.defaultView:null,nM=new WeakMap;class rM{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=dt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Vu(m,"page").point)},o=(m,g)=>{const{drag:v,dragPropagation:w,onDragStart:_}=this.getProps();if(v&&!w&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=uk(v),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),bn(j=>{let S=this.getAxisMotionValue(j).get()||0;if(tr.test(S)){const{projection:x}=this.visualElement;if(x&&x.layout){const b=x.layout.layoutBox[j];b&&(S=un(b)*(parseFloat(S)/100))}}this.originPoint[j]=S}),_&&ze.update(()=>_(m,g),!1,!0);const{animationState:k}=this.visualElement;k&&k.setActive("whileDrag",!0)},a=(m,g)=>{const{dragPropagation:v,dragDirectionLock:w,onDirectionLock:_,onDrag:k}=this.getProps();if(!v&&!this.openGlobalLock)return;const{offset:j}=g;if(w&&this.currentDirection===null){this.currentDirection=iM(j),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",g.point,j),this.updateAxis("y",g.point,j),this.visualElement.render(),k&&k(m,g)},u=(m,g)=>this.stop(m,g),d=()=>bn(m=>{var g;return this.getAnimationState(m)==="paused"&&((g=this.getAxisMotionValue(m).animation)===null||g===void 0?void 0:g.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new Hk(e,{onSessionStart:i,onStart:o,onMove:a,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:Jk(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&ze.update(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!ic(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=qI(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&Ms(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=HI(i.layoutBox,n):this.constraints=!1,this.elastic=KI(r),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&bn(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=GI(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ms(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=tM(r,i.root,this.visualElement.getTransformPagePoint());let a=WI(i.layout.layoutBox,o);if(n){const u=n(YI(a));this.hasMutatedConstraints=!!u,u&&(a=Zk(u))}return a}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:u}=this.getProps(),d=this.constraints||{},f=bn(m=>{if(!ic(m,n,this.currentDirection))return;let g=d&&d[m]||{};a&&(g={min:0,max:0});const v=i?200:1e6,w=i?40:1e7,_={type:"inertia",velocity:r?e[m]:0,bounceStiffness:v,bounceDamping:w,timeConstant:750,restDelta:1,restSpeed:10,...o,...g};return this.startAxisValueAnimation(m,_)});return Promise.all(f).then(u)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(Dp(e,r,0,n))}stopAnimation(){bn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){bn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){bn(n=>{const{drag:r}=this.getProps();if(!ic(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(n);if(i&&i.layout){const{min:a,max:u}=i.layout.layoutBox[n];o.set(e[n]-Qe(a,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ms(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};bn(a=>{const u=this.getAxisMotionValue(a);if(u){const d=u.get();i[a]=ZI({min:d,max:d},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),bn(a=>{if(!ic(a,e,null))return;const u=this.getAxisMotionValue(a),{min:d,max:f}=this.constraints[a];u.set(Qe(d,f,i[a]))})}addListeners(){if(!this.visualElement.current)return;nM.set(this.visualElement,this);const e=this.visualElement.current,n=wr(e,"pointerdown",d=>{const{drag:f,dragListener:m=!0}=this.getProps();f&&m&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();Ms(d)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const a=pr(window,"resize",()=>this.scalePositionWithinConstraints()),u=i.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(bn(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=d[m].translate,g.set(g.get()+d[m].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:a=Yf,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:a,dragMomentum:u}}}function ic(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function iM(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class sM extends mi{constructor(e){super(e),this.removeGroupControls=nt,this.removeListeners=nt,this.controls=new rM(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||nt}unmount(){this.removeGroupControls(),this.removeListeners()}}const dy=t=>(e,n)=>{t&&ze.update(()=>t(e,n))};class oM extends mi{constructor(){super(...arguments),this.removePointerDownListener=nt}onPointerDown(e){this.session=new Hk(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Jk(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:dy(e),onStart:dy(n),onMove:r,onEnd:(o,a)=>{delete this.session,i&&ze.update(()=>i(o,a))}}}mount(){this.removePointerDownListener=wr(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function aM(){const t=E.useContext(Bu);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=E.useId();return E.useEffect(()=>r(i),[]),!e&&n?[!1,()=>n&&n(i)]:[!0]}const xc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function hy(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Zo={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(me.test(t))t=parseFloat(t);else return t;const n=hy(t,e.target.x),r=hy(t,e.target.y);return`${n}% ${r}%`}},lM={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=ai.parse(t);if(i.length>5)return r;const o=ai.createTransformer(t),a=typeof i[0]!="number"?1:0,u=n.x.scale*e.x,d=n.y.scale*e.y;i[0+a]/=u,i[1+a]/=d;const f=Qe(u,d,.5);return typeof i[2+a]=="number"&&(i[2+a]/=f),typeof i[3+a]=="number"&&(i[3+a]/=f),o(i)}};class cM extends nr.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;gA(uM),o&&(n.group&&n.group.add(o),r&&r.register&&i&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),xc.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:o}=this.props,a=r.projection;return a&&(a.isPresent=o,i||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||ze.postRender(()=>{const u=a.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Qk(t){const[e,n]=aM(),r=E.useContext(kp);return nr.createElement(cM,{...t,layoutGroup:r,switchLayoutGroup:E.useContext(Z1),isPresent:e,safeToRemove:n})}const uM={borderRadius:{...Zo,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Zo,borderTopRightRadius:Zo,borderBottomLeftRadius:Zo,borderBottomRightRadius:Zo,boxShadow:lM},Xk=["TopLeft","TopRight","BottomLeft","BottomRight"],dM=Xk.length,fy=t=>typeof t=="string"?parseFloat(t):t,my=t=>typeof t=="number"||me.test(t);function hM(t,e,n,r,i,o){i?(t.opacity=Qe(0,n.opacity!==void 0?n.opacity:1,fM(r)),t.opacityExit=Qe(e.opacity!==void 0?e.opacity:1,0,mM(r))):o&&(t.opacity=Qe(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let a=0;a<dM;a++){const u=`border${Xk[a]}Radius`;let d=py(e,u),f=py(n,u);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||my(d)===my(f)?(t[u]=Math.max(Qe(fy(d),fy(f),r),0),(tr.test(f)||tr.test(d))&&(t[u]+="%")):t[u]=f}(e.rotate||n.rotate)&&(t.rotate=Qe(e.rotate||0,n.rotate||0,r))}function py(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const fM=e2(0,.5,bk),mM=e2(.5,.95,nt);function e2(t,e,n){return r=>r<t?0:r>e?1:n(qa(t,e,r))}function gy(t,e){t.min=e.min,t.max=e.max}function xn(t,e){gy(t.x,e.x),gy(t.y,e.y)}function vy(t,e,n,r,i){return t-=e,t=ou(t,1/n,r),i!==void 0&&(t=ou(t,1/i,r)),t}function pM(t,e=0,n=1,r=.5,i,o=t,a=t){if(tr.test(e)&&(e=parseFloat(e),e=Qe(a.min,a.max,e/100)-a.min),typeof e!="number")return;let u=Qe(o.min,o.max,r);t===o&&(u-=e),t.min=vy(t.min,e,n,u,i),t.max=vy(t.max,e,n,u,i)}function wy(t,e,[n,r,i],o,a){pM(t,e[n],e[r],e[i],e.scale,o,a)}const gM=["x","scaleX","originX"],vM=["y","scaleY","originY"];function yy(t,e,n,r){wy(t.x,e,gM,n?n.x:void 0,r?r.x:void 0),wy(t.y,e,vM,n?n.y:void 0,r?r.y:void 0)}function xy(t){return t.translate===0&&t.scale===1}function t2(t){return xy(t.x)&&xy(t.y)}function wM(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function n2(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function _y(t){return un(t.x)/un(t.y)}class yM{constructor(){this.members=[]}add(e){Bp(this.members,e),e.scheduleRender()}remove(e){if($p(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function by(t,e,n){let r="";const i=t.x.translate/e.x,o=t.y.translate/e.y;if((i||o)&&(r=`translate3d(${i}px, ${o}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:d,rotateX:f,rotateY:m}=n;d&&(r+=`rotate(${d}deg) `),f&&(r+=`rotateX(${f}deg) `),m&&(r+=`rotateY(${m}deg) `)}const a=t.x.scale*e.x,u=t.y.scale*e.y;return(a!==1||u!==1)&&(r+=`scale(${a}, ${u})`),r||"none"}const xM=(t,e)=>t.depth-e.depth;class _M{constructor(){this.children=[],this.isDirty=!1}add(e){Bp(this.children,e),this.isDirty=!0}remove(e){$p(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(xM),this.isDirty=!1,this.children.forEach(e)}}function bM(t,e){const n=performance.now(),r=({timestamp:i})=>{const o=i-n;o>=e&&(Cr(r),t(o-e))};return ze.read(r,!0),()=>Cr(r)}function kM(t){window.MotionDebug&&window.MotionDebug.record(t)}function SM(t){return t instanceof SVGElement&&t.tagName!=="svg"}function CM(t,e,n){const r=en(t)?t:oo(t);return r.start(Dp("",r,e,n)),r.animation}const ky=["","X","Y","Z"],PM={visibility:"hidden"},Sy=1e3;let EM=0;const Ti={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function r2({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},u=e==null?void 0:e()){this.id=EM++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ti.totalNodes=Ti.resolvedTargetDeltas=Ti.recalculatedProjection=0,this.nodes.forEach(TM),this.nodes.forEach(IM),this.nodes.forEach(MM),this.nodes.forEach(LM),kM(Ti)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new _M)}addEventListener(a,u){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new Up),this.eventHandlers.get(a).add(u)}notifyListeners(a,...u){const d=this.eventHandlers.get(a);d&&d.notify(...u)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=SM(a),this.instance=a;const{layoutId:d,layout:f,visualElement:m}=this.options;if(m&&!m.current&&m.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(f||d)&&(this.isLayoutDirty=!0),t){let g;const v=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=bM(v,250),xc.hasAnimatedSinceResize&&(xc.hasAnimatedSinceResize=!1,this.nodes.forEach(Py))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&m&&(d||f)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:v,hasRelativeTargetChanged:w,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const k=this.options.transition||m.getDefaultTransition()||zM,{onLayoutAnimationStart:j,onLayoutAnimationComplete:S}=m.getProps(),x=!this.targetLayout||!n2(this.targetLayout,_)||w,b=!v&&w;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||v&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(g,b);const N={...Mp(k,"layout"),onPlay:j,onComplete:S};(m.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N)}else v||Py(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Cr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(DM),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:d}=this.options;if(u===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Cy);return}this.isUpdating||this.nodes.forEach(AM),this.isUpdating=!1,this.nodes.forEach(OM),this.nodes.forEach(jM),this.nodes.forEach(NM),this.clearAllSnapshots();const u=performance.now();Rt.delta=oi(0,1e3/60,u-Rt.timestamp),Rt.timestamp=u,Rt.isProcessing=!0,fh.update.process(Rt),fh.preRender.process(Rt),fh.render.process(Rt),Rt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(RM),this.sharedNodes.forEach(BM)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ze.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ze.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=dt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let u=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(u=!1),u&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform,u=this.projectionDelta&&!t2(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,m=f!==this.prevTransformTemplateValue;a&&(u||Ni(this.latestValues)||m)&&(i(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const u=this.measurePageBox();let d=this.removeElementScroll(u);return a&&(d=this.removeTransform(d)),FM(d),{animationId:this.root.animationId,measuredBox:u,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return dt();const u=a.measureViewportBox(),{scroll:d}=this.root;return d&&(Mr(u.x,d.offset.x),Mr(u.y,d.offset.y)),u}removeElementScroll(a){const u=dt();xn(u,a);for(let d=0;d<this.path.length;d++){const f=this.path[d],{scroll:m,options:g}=f;if(f!==this.root&&m&&g.layoutScroll){if(m.isRoot){xn(u,a);const{scroll:v}=this.root;v&&(Mr(u.x,-v.offset.x),Mr(u.y,-v.offset.y))}Mr(u.x,m.offset.x),Mr(u.y,m.offset.y)}}return u}applyTransform(a,u=!1){const d=dt();xn(d,a);for(let f=0;f<this.path.length;f++){const m=this.path[f];!u&&m.options.layoutScroll&&m.scroll&&m!==m.root&&$s(d,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),Ni(m.latestValues)&&$s(d,m.latestValues)}return Ni(this.latestValues)&&$s(d,this.latestValues),d}removeTransform(a){const u=dt();xn(u,a);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!Ni(f.latestValues))continue;Jf(f.latestValues)&&f.updateSnapshot();const m=dt(),g=f.measurePageBox();xn(m,g),yy(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,m)}return Ni(this.latestValues)&&yy(u,this.latestValues),u}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Rt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var u;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==d;if(!(a||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:g,layoutId:v}=this.options;if(!(!this.layout||!(g||v))){if(this.resolvedRelativeTargetAt=Rt.timestamp,!this.targetDelta&&!this.relativeTarget){const w=this.getClosestProjectingParent();w&&w.layout&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=dt(),this.relativeTargetOrigin=dt(),va(this.relativeTargetOrigin,this.layout.layoutBox,w.layout.layoutBox),xn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=dt(),this.targetWithTransforms=dt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),VI(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):xn(this.target,this.layout.layoutBox),Kk(this.target,this.targetDelta)):xn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const w=this.getClosestProjectingParent();w&&!!w.resumingFrom==!!this.resumingFrom&&!w.options.layoutScroll&&w.target&&this.animationProgress!==1?(this.relativeParent=w,this.forceRelativeParentToResolveTarget(),this.relativeTarget=dt(),this.relativeTargetOrigin=dt(),va(this.relativeTargetOrigin,this.target,w.target),xn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ti.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Jf(this.parent.latestValues)||Gk(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const u=this.getLead(),d=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(f=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Rt.timestamp&&(f=!1),f)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;xn(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,w=this.treeScale.y;QI(this.layoutCorrected,this.treeScale,this.path,d),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox);const{target:_}=u;if(!_){this.projectionTransform&&(this.projectionDelta=Bs(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Bs(),this.projectionDeltaWithTransform=Bs());const k=this.projectionTransform;ga(this.projectionDelta,this.layoutCorrected,_,this.latestValues),this.projectionTransform=by(this.projectionDelta,this.treeScale),(this.projectionTransform!==k||this.treeScale.x!==v||this.treeScale.y!==w)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_)),Ti.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,u=!1){const d=this.snapshot,f=d?d.latestValues:{},m={...this.latestValues},g=Bs();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const v=dt(),w=d?d.source:void 0,_=this.layout?this.layout.source:void 0,k=w!==_,j=this.getStack(),S=!j||j.members.length<=1,x=!!(k&&!S&&this.options.crossfade===!0&&!this.path.some(UM));this.animationProgress=0;let b;this.mixTargetDelta=N=>{const R=N/1e3;Ey(g.x,a.x,R),Ey(g.y,a.y,R),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(va(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),$M(this.relativeTarget,this.relativeTargetOrigin,v,R),b&&wM(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=dt()),xn(b,this.relativeTarget)),k&&(this.animationValues=m,hM(m,f,this.latestValues,R,x,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Cr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ze.update(()=>{xc.hasAnimatedSinceResize=!0,this.currentAnimation=CM(0,Sy,{...a,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Sy),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:u,target:d,layout:f,latestValues:m}=a;if(!(!u||!d||!f)){if(this!==a&&this.layout&&f&&i2(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||dt();const g=un(this.layout.layoutBox.x);d.x.min=a.target.x.min,d.x.max=d.x.min+g;const v=un(this.layout.layoutBox.y);d.y.min=a.target.y.min,d.y.max=d.y.min+v}xn(u,d),$s(u,m),ga(this.projectionDeltaWithTransform,this.layoutCorrected,u,m)}}registerSharedNode(a,u){this.sharedNodes.has(a)||this.sharedNodes.set(a,new yM),this.sharedNodes.get(a).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:u}=this.options;return u?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:u}=this.options;return u?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:u,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),a&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let u=!1;const{latestValues:d}=a;if((d.rotate||d.rotateX||d.rotateY||d.rotateZ)&&(u=!0),!u)return;const f={};for(let m=0;m<ky.length;m++){const g="rotate"+ky[m];d[g]&&(f[g]=d[g],a.setStaticValue(g,0))}a.render();for(const m in f)a.setStaticValue(m,f[m]);a.scheduleRender()}getProjectionStyles(a){var u,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return PM;const f={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=yc(a==null?void 0:a.pointerEvents)||"",f.transform=m?m(this.latestValues,""):"none",f;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const k={};return this.options.layoutId&&(k.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,k.pointerEvents=yc(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Ni(this.latestValues)&&(k.transform=m?m({},""):"none",this.hasProjected=!1),k}const v=g.animationValues||g.latestValues;this.applyTransformsToTarget(),f.transform=by(this.projectionDeltaWithTransform,this.treeScale,v),m&&(f.transform=m(v,f.transform));const{x:w,y:_}=this.projectionDelta;f.transformOrigin=`${w.origin*100}% ${_.origin*100}% 0`,g.animationValues?f.opacity=g===this?(d=(u=v.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:f.opacity=g===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const k in Xc){if(v[k]===void 0)continue;const{correct:j,applyTo:S}=Xc[k],x=f.transform==="none"?v[k]:j(v[k],g);if(S){const b=S.length;for(let N=0;N<b;N++)f[S[N]]=x}else f[k]=x}return this.options.layoutId&&(f.pointerEvents=g===this?yc(a==null?void 0:a.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var u;return(u=a.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(Cy),this.root.sharedNodes.clear()}}}function jM(t){t.updateLayout()}function NM(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:o}=t.options,a=n.source!==t.layout.source;o==="size"?bn(g=>{const v=a?n.measuredBox[g]:n.layoutBox[g],w=un(v);v.min=r[g].min,v.max=v.min+w}):i2(o,n.layoutBox,r)&&bn(g=>{const v=a?n.measuredBox[g]:n.layoutBox[g],w=un(r[g]);v.max=v.min+w,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+w)});const u=Bs();ga(u,r,n.layoutBox);const d=Bs();a?ga(d,t.applyTransform(i,!0),n.measuredBox):ga(d,r,n.layoutBox);const f=!t2(u);let m=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:v,layout:w}=g;if(v&&w){const _=dt();va(_,n.layoutBox,v.layoutBox);const k=dt();va(k,r,w.layoutBox),n2(_,k)||(m=!0),g.options.layoutRoot&&(t.relativeTarget=k,t.relativeTargetOrigin=_,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:d,layoutDelta:u,hasLayoutChanged:f,hasRelativeTargetChanged:m})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function TM(t){Ti.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function LM(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function RM(t){t.clearSnapshot()}function Cy(t){t.clearMeasurements()}function AM(t){t.isLayoutDirty=!1}function OM(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Py(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function IM(t){t.resolveTargetDelta()}function MM(t){t.calcProjection()}function DM(t){t.resetRotation()}function BM(t){t.removeLeadSnapshot()}function Ey(t,e,n){t.translate=Qe(e.translate,0,n),t.scale=Qe(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function jy(t,e,n,r){t.min=Qe(e.min,n.min,r),t.max=Qe(e.max,n.max,r)}function $M(t,e,n,r){jy(t.x,e.x,n.x,r),jy(t.y,e.y,n.y,r)}function UM(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const zM={duration:.45,ease:[.4,0,.1,1]},Ny=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),Ty=Ny("applewebkit/")&&!Ny("chrome/")?Math.round:nt;function Ly(t){t.min=Ty(t.min),t.max=Ty(t.max)}function FM(t){Ly(t.x),Ly(t.y)}function i2(t,e,n){return t==="position"||t==="preserve-aspect"&&!Kf(_y(e),_y(n),.2)}const VM=r2({attachResizeListener:(t,e)=>pr(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Sh={current:void 0},s2=r2({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Sh.current){const t=new VM({});t.mount(window),t.setOptions({layoutScroll:!0}),Sh.current=t}return Sh.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),qM={pan:{Feature:oM},drag:{Feature:sM,ProjectionNode:s2,MeasureLayout:Qk}},HM=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function WM(t){const e=HM.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function Xf(t,e,n=1){const[r,i]=WM(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const a=o.trim();return zk(a)?parseFloat(a):a}else return Ff(i)?Xf(i,e,n+1):i}function ZM(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(i=>{const o=i.get();if(!Ff(o))return;const a=Xf(o,r);a&&i.set(a)});for(const i in e){const o=e[i];if(!Ff(o))continue;const a=Xf(o,r);a&&(e[i]=a,n||(n={}),n[i]===void 0&&(n[i]=o))}return{target:e,transitionEnd:n}}const GM=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),o2=t=>GM.has(t),KM=t=>Object.keys(t).some(o2),Ry=t=>t===ts||t===me,Ay=(t,e)=>parseFloat(t.split(", ")[e]),Oy=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return Ay(i[1],e);{const o=r.match(/^matrix\((.+)\)$/);return o?Ay(o[1],t):0}},YM=new Set(["x","y","z"]),JM=Qa.filter(t=>!YM.has(t));function QM(t){const e=[];return JM.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const ao={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Oy(4,13),y:Oy(5,14)};ao.translateX=ao.x;ao.translateY=ao.y;const XM=(t,e,n)=>{const r=e.measureViewportBox(),i=e.current,o=getComputedStyle(i),{display:a}=o,u={};a==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(f=>{u[f]=ao[f](r,o)}),e.render();const d=e.measureViewportBox();return n.forEach(f=>{const m=e.getValue(f);m&&m.jump(u[f]),t[f]=ao[f](d,o)}),t},e4=(t,e,n={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(o2);let o=[],a=!1;const u=[];if(i.forEach(d=>{const f=t.getValue(d);if(!t.hasValue(d))return;let m=n[d],g=Wo(m);const v=e[d];let w;if(tu(v)){const _=v.length,k=v[0]===null?1:0;m=v[k],g=Wo(m);for(let j=k;j<_&&v[j]!==null;j++)w?Lp(Wo(v[j])===w):w=Wo(v[j])}else w=Wo(v);if(g!==w)if(Ry(g)&&Ry(w)){const _=f.get();typeof _=="string"&&f.set(parseFloat(_)),typeof v=="string"?e[d]=parseFloat(v):Array.isArray(v)&&w===me&&(e[d]=v.map(parseFloat))}else g!=null&&g.transform&&(w!=null&&w.transform)&&(m===0||v===0)?m===0?f.set(w.transform(m)):e[d]=g.transform(v):(a||(o=QM(t),a=!0),u.push(d),r[d]=r[d]!==void 0?r[d]:e[d],f.jump(v))}),u.length){const d=u.indexOf("height")>=0?window.pageYOffset:null,f=XM(e,t,u);return o.length&&o.forEach(([m,g])=>{t.getValue(m).set(g)}),t.render(),$u&&d!==null&&window.scrollTo({top:d}),{target:f,transitionEnd:r}}else return{target:e,transitionEnd:r}};function t4(t,e,n,r){return KM(e)?e4(t,e,n,r):{target:e,transitionEnd:r}}const n4=(t,e,n,r)=>{const i=ZM(t,e,r);return e=i.target,r=i.transitionEnd,t4(t,e,n,r)},em={current:null},a2={current:!1};function r4(){if(a2.current=!0,!!$u)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>em.current=t.matches;t.addListener(e),e()}else em.current=!1}function i4(t,e,n){const{willChange:r}=e;for(const i in e){const o=e[i],a=n[i];if(en(o))t.addValue(i,o),su(r)&&r.add(i);else if(en(a))t.addValue(i,oo(o,{owner:t})),su(r)&&r.remove(i);else if(a!==o)if(t.hasValue(i)){const u=t.getValue(i);!u.hasAnimated&&u.set(o)}else{const u=t.getStaticValue(i);t.addValue(i,oo(u!==void 0?u:o,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const Iy=new WeakMap,l2=Object.keys(Va),s4=l2.length,My=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],o4=bp.length;class a4{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>ze.render(this.render,!1,!0);const{latestValues:u,renderState:d}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.isControllingVariants=zu(n),this.isVariantNode=W1(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...m}=this.scrapeMotionValuesFromProps(n,{});for(const g in m){const v=m[g];u[g]!==void 0&&en(v)&&(v.set(u[g],!1),su(f)&&f.add(g))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,Iy.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),a2.current||r4(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:em.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Iy.delete(this.current),this.projection&&this.projection.unmount(),Cr(this.notifyUpdate),Cr(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=es.has(e),i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&ze.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),o()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,i,o){let a,u;for(let d=0;d<s4;d++){const f=l2[d],{isEnabled:m,Feature:g,ProjectionNode:v,MeasureLayout:w}=Va[f];v&&(a=v),m(n)&&(!this.features[f]&&g&&(this.features[f]=new g(this)),w&&(u=w))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:d,layout:f,drag:m,dragConstraints:g,layoutScroll:v,layoutRoot:w}=n;this.projection.setOptions({layoutId:d,layout:f,alwaysMeasureLayout:!!m||g&&Ms(g),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof f=="string"?f:"both",initialPromotionConfig:o,layoutScroll:v,layoutRoot:w})}return u}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):dt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<My.length;r++){const i=My[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o=e["on"+i];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=i4(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<o4;r++){const i=bp[r],o=this.props[i];(Fa(o)||o===!1)&&(n[i]=o)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=oo(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=Tp(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!en(o)?o:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Up),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class c2 extends a4{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:i},o){let a=SI(r,e||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),a&&(a=i(a))),o){bI(this,r,a);const u=n4(this,r,a,n);n=u.transitionEnd,r=u.target}return{transition:e,transitionEnd:n,...r}}}function l4(t){return window.getComputedStyle(t)}class c4 extends c2{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(es.has(n)){const r=Ip(n);return r&&r.default||0}else{const r=l4(e),i=(Y1(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Yk(e,n)}build(e,n,r,i){Cp(e,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,n){return Np(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;en(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,i){nk(e,n,r,i)}}class u4 extends c2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(es.has(n)){const r=Ip(n);return r&&r.default||0}return n=rk.has(n)?n:xp(n),e.getAttribute(n)}measureInstanceViewportBox(){return dt()}scrapeMotionValuesFromProps(e,n){return sk(e,n)}build(e,n,r,i){Ep(e,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,r,i){ik(e,n,r,i)}mount(e){this.isSVGTag=jp(e.tagName),super.mount(e)}}const d4=(t,e)=>Sp(t)?new u4(e,{enableHardwareAcceleration:!1}):new c4(e,{enableHardwareAcceleration:!0}),h4={layout:{ProjectionNode:s2,MeasureLayout:Qk}},f4={...$I,...sO,...qM,...h4},Pt=mA((t,e)=>WA(t,e,f4,d4));function u2(){const t=E.useRef(!1);return yp(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function m4(){const t=u2(),[e,n]=E.useState(0),r=E.useCallback(()=>{t.current&&n(e+1)},[e]);return[E.useCallback(()=>ze.postRender(r),[r]),e]}class p4 extends E.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function g4({children:t,isPresent:e}){const n=E.useId(),r=E.useRef(null),i=E.useRef({width:0,height:0,top:0,left:0});return E.useInsertionEffect(()=>{const{width:o,height:a,top:u,left:d}=i.current;if(e||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const f=document.createElement("style");return document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${u}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[e]),E.createElement(p4,{isPresent:e,childRef:r,sizeRef:i},E.cloneElement(t,{ref:r}))}const Ch=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:a})=>{const u=ok(v4),d=E.useId(),f=E.useMemo(()=>({id:d,initial:e,isPresent:n,custom:i,onExitComplete:m=>{u.set(m,!0);for(const g of u.values())if(!g)return;r&&r()},register:m=>(u.set(m,!1),()=>u.delete(m))}),o?void 0:[n]);return E.useMemo(()=>{u.forEach((m,g)=>u.set(g,!1))},[n]),E.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),a==="popLayout"&&(t=E.createElement(g4,{isPresent:n},t)),E.createElement(Bu.Provider,{value:f},t)};function v4(){return new Map}function w4(t){return E.useEffect(()=>()=>t(),[])}const Li=t=>t.key||"";function y4(t,e){t.forEach(n=>{const r=Li(n);e.set(r,n)})}function x4(t){const e=[];return E.Children.forEach(t,n=>{E.isValidElement(n)&&e.push(n)}),e}const ns=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:o=!0,mode:a="sync"})=>{const u=E.useContext(kp).forceRender||m4()[0],d=u2(),f=x4(t);let m=f;const g=E.useRef(new Map).current,v=E.useRef(m),w=E.useRef(new Map).current,_=E.useRef(!0);if(yp(()=>{_.current=!1,y4(f,w),v.current=m}),w4(()=>{_.current=!0,w.clear(),g.clear()}),_.current)return E.createElement(E.Fragment,null,m.map(x=>E.createElement(Ch,{key:Li(x),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:o,mode:a},x)));m=[...m];const k=v.current.map(Li),j=f.map(Li),S=k.length;for(let x=0;x<S;x++){const b=k[x];j.indexOf(b)===-1&&!g.has(b)&&g.set(b,void 0)}return a==="wait"&&g.size&&(m=[]),g.forEach((x,b)=>{if(j.indexOf(b)!==-1)return;const N=w.get(b);if(!N)return;const R=k.indexOf(b);let B=x;if(!B){const I=()=>{g.delete(b);const F=Array.from(w.keys()).filter($=>!j.includes($));if(F.forEach($=>w.delete($)),v.current=f.filter($=>{const X=Li($);return X===b||F.includes(X)}),!g.size){if(d.current===!1)return;u(),r&&r()}};B=E.createElement(Ch,{key:Li(N),isPresent:!1,onExitComplete:I,custom:e,presenceAffectsLayout:o,mode:a},N),g.set(b,B)}m.splice(R,0,B)}),m=m.map(x=>{const b=x.key;return g.has(b)?x:E.createElement(Ch,{key:Li(x),isPresent:!0,presenceAffectsLayout:o,mode:a},x)}),E.createElement(E.Fragment,null,g.size?m:m.map(x=>E.cloneElement(x)))},Ph=[{code:"en",name:"English",flag:""},{code:"ro",name:"Romanian",flag:""},{code:"hu",name:"Hungarian",flag:""},{code:"de",name:"German",flag:""},{code:"fr",name:"French",flag:""},{code:"es",name:"Spanish",flag:""}];function Dy({currentLanguage:t,onLanguageChange:e,isMobile:n}){const[r,i]=E.useState(!1),o=u=>{e(u),i(!1)},a=Ph.find(u=>u.code===t)||Ph[0];return c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>i(!r),className:"group flex items-center gap-2 px-3 py-2 bg-heritage-50 dark:bg-neutral-700/50 rounded-lg hover:bg-heritage-100 dark:hover:bg-neutral-700 transition-all border border-heritage-200 dark:border-neutral-600 w-full justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xl",children:a.flag}),c.jsx("span",{className:"font-medium text-heritage-900 dark:text-heritage-100 text-sm",children:a.name})]}),c.jsx(gp,{className:`w-4 h-4 text-heritage-700 dark:text-heritage-300 transition-transform ${r?"rotate-180":""}`})]}),r&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>i(!1)}),c.jsx("div",{className:`absolute top-full mt-2 ${n?"left-0 right-0":"right-0"} bg-white dark:bg-neutral-800 rounded-xl shadow-2xl border border-neutral-200 dark:border-neutral-700 overflow-hidden z-50 ${n?"w-full":"min-w-[220px]"}`,children:c.jsx("div",{className:"py-2",children:Ph.map(u=>c.jsxs("button",{onClick:()=>o(u.code),className:`w-full flex items-center gap-3 px-4 py-2.5 hover:bg-heritage-50 dark:hover:bg-neutral-700/50 transition-colors ${u.code===t?"bg-heritage-100 dark:bg-heritage-900/30":""}`,children:[c.jsx("span",{className:"text-xl",children:u.flag}),c.jsx("span",{className:"flex-1 text-left font-medium text-neutral-900 dark:text-white text-sm",children:u.name}),u.code===t&&c.jsx(ot,{className:"w-4 h-4 text-heritage-700 dark:text-heritage-400"})]},u.code))})})]})]})}/*!
* sweetalert2 v11.26.3
* Released under the MIT License.
*/function d2(t,e,n){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function _4(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function By(t,e){return t.get(d2(t,e))}function b4(t,e,n){_4(t,e),e.set(t,n)}function k4(t,e,n){return t.set(d2(t,e),n),n}const S4=100,de={},C4=()=>{de.previousActiveElement instanceof HTMLElement?(de.previousActiveElement.focus(),de.previousActiveElement=null):document.body&&document.body.focus()},P4=t=>new Promise(e=>{if(!t)return e();const n=window.scrollX,r=window.scrollY;de.restoreFocusTimeout=setTimeout(()=>{C4(),e()},S4),window.scrollTo(n,r)}),h2="swal2-",E4=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],V=E4.reduce((t,e)=>(t[e]=h2+e,t),{}),j4=["success","warning","info","question","error"],au=j4.reduce((t,e)=>(t[e]=h2+e,t),{}),f2="SweetAlert2:",zp=t=>t.charAt(0).toUpperCase()+t.slice(1),Vt=t=>{console.warn(`${f2} ${typeof t=="object"?t.join(" "):t}`)},rs=t=>{console.error(`${f2} ${t}`)},$y=[],N4=t=>{$y.includes(t)||($y.push(t),Vt(t))},m2=(t,e=null)=>{N4(`"${t}" is deprecated and will be removed in the next major release.${e?` Use "${e}" instead.`:""}`)},Hu=t=>typeof t=="function"?t():t,Fp=t=>t&&typeof t.toPromise=="function",nl=t=>Fp(t)?t.toPromise():Promise.resolve(t),Vp=t=>t&&Promise.resolve(t)===t,Wt=()=>document.body.querySelector(`.${V.container}`),rl=t=>{const e=Wt();return e?e.querySelector(t):null},pn=t=>rl(`.${t}`),Re=()=>pn(V.popup),xo=()=>pn(V.icon),T4=()=>pn(V["icon-content"]),p2=()=>pn(V.title),qp=()=>pn(V["html-container"]),g2=()=>pn(V.image),Hp=()=>pn(V["progress-steps"]),Wu=()=>pn(V["validation-message"]),rr=()=>rl(`.${V.actions} .${V.confirm}`),_o=()=>rl(`.${V.actions} .${V.cancel}`),is=()=>rl(`.${V.actions} .${V.deny}`),L4=()=>pn(V["input-label"]),bo=()=>rl(`.${V.loader}`),il=()=>pn(V.actions),v2=()=>pn(V.footer),Zu=()=>pn(V["timer-progress-bar"]),Wp=()=>pn(V.close),R4=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,Zp=()=>{const t=Re();if(!t)return[];const e=t.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),n=Array.from(e).sort((o,a)=>{const u=parseInt(o.getAttribute("tabindex")||"0"),d=parseInt(a.getAttribute("tabindex")||"0");return u>d?1:u<d?-1:0}),r=t.querySelectorAll(R4),i=Array.from(r).filter(o=>o.getAttribute("tabindex")!=="-1");return[...new Set(n.concat(i))].filter(o=>Xt(o))},Gp=()=>xr(document.body,V.shown)&&!xr(document.body,V["toast-shown"])&&!xr(document.body,V["no-backdrop"]),Gu=()=>{const t=Re();return t?xr(t,V.toast):!1},A4=()=>{const t=Re();return t?t.hasAttribute("data-loading"):!1},gn=(t,e)=>{if(t.textContent="",e){const r=new DOMParser().parseFromString(e,"text/html"),i=r.querySelector("head");i&&Array.from(i.childNodes).forEach(a=>{t.appendChild(a)});const o=r.querySelector("body");o&&Array.from(o.childNodes).forEach(a=>{a instanceof HTMLVideoElement||a instanceof HTMLAudioElement?t.appendChild(a.cloneNode(!0)):t.appendChild(a)})}},xr=(t,e)=>{if(!e)return!1;const n=e.split(/\s+/);for(let r=0;r<n.length;r++)if(!t.classList.contains(n[r]))return!1;return!0},O4=(t,e)=>{Array.from(t.classList).forEach(n=>{!Object.values(V).includes(n)&&!Object.values(au).includes(n)&&!Object.values(e.showClass||{}).includes(n)&&t.classList.remove(n)})},dn=(t,e,n)=>{if(O4(t,e),!e.customClass)return;const r=e.customClass[n];if(r){if(typeof r!="string"&&!r.forEach){Vt(`Invalid type of customClass.${n}! Expected string or iterable object, got "${typeof r}"`);return}Ae(t,r)}},Ku=(t,e)=>{if(!e)return null;switch(e){case"select":case"textarea":case"file":return t.querySelector(`.${V.popup} > .${V[e]}`);case"checkbox":return t.querySelector(`.${V.popup} > .${V.checkbox} input`);case"radio":return t.querySelector(`.${V.popup} > .${V.radio} input:checked`)||t.querySelector(`.${V.popup} > .${V.radio} input:first-child`);case"range":return t.querySelector(`.${V.popup} > .${V.range} input`);default:return t.querySelector(`.${V.popup} > .${V.input}`)}},w2=t=>{if(t.focus(),t.type!=="file"){const e=t.value;t.value="",t.value=e}},y2=(t,e,n)=>{!t||!e||(typeof e=="string"&&(e=e.split(/\s+/).filter(Boolean)),e.forEach(r=>{Array.isArray(t)?t.forEach(i=>{n?i.classList.add(r):i.classList.remove(r)}):n?t.classList.add(r):t.classList.remove(r)}))},Ae=(t,e)=>{y2(t,e,!0)},Tn=(t,e)=>{y2(t,e,!1)},Vr=(t,e)=>{const n=Array.from(t.children);for(let r=0;r<n.length;r++){const i=n[r];if(i instanceof HTMLElement&&xr(i,e))return i}},qi=(t,e,n)=>{n===`${parseInt(`${n}`)}`&&(n=parseInt(n)),n||parseInt(`${n}`)===0?t.style.setProperty(e,typeof n=="number"?`${n}px`:n):t.style.removeProperty(e)},_t=(t,e="flex")=>{t&&(t.style.display=e)},Dt=t=>{t&&(t.style.display="none")},Kp=(t,e="block")=>{t&&new MutationObserver(()=>{sl(t,t.innerHTML,e)}).observe(t,{childList:!0,subtree:!0})},Uy=(t,e,n,r)=>{const i=t.querySelector(e);i&&i.style.setProperty(n,r)},sl=(t,e,n="flex")=>{e?_t(t,n):Dt(t)},Xt=t=>!!(t&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)),I4=()=>!Xt(rr())&&!Xt(is())&&!Xt(_o()),tm=t=>t.scrollHeight>t.clientHeight,M4=(t,e)=>{let n=t;for(;n&&n!==e;){if(tm(n))return!0;n=n.parentElement}return!1},x2=t=>{const e=window.getComputedStyle(t),n=parseFloat(e.getPropertyValue("animation-duration")||"0"),r=parseFloat(e.getPropertyValue("transition-duration")||"0");return n>0||r>0},Yp=(t,e=!1)=>{const n=Zu();n&&Xt(n)&&(e&&(n.style.transition="none",n.style.width="100%"),setTimeout(()=>{n.style.transition=`width ${t/1e3}s linear`,n.style.width="0%"},10))},D4=()=>{const t=Zu();if(!t)return;const e=parseInt(window.getComputedStyle(t).width);t.style.removeProperty("transition"),t.style.width="100%";const n=parseInt(window.getComputedStyle(t).width),r=e/n*100;t.style.width=`${r}%`},B4=()=>typeof window>"u"||typeof document>"u",$4=`
 <div aria-labelledby="${V.title}" aria-describedby="${V["html-container"]}" class="${V.popup}" tabindex="-1">
   <button type="button" class="${V.close}"></button>
   <ul class="${V["progress-steps"]}"></ul>
   <div class="${V.icon}"></div>
   <img class="${V.image}" />
   <h2 class="${V.title}" id="${V.title}"></h2>
   <div class="${V["html-container"]}" id="${V["html-container"]}"></div>
   <input class="${V.input}" id="${V.input}" />
   <input type="file" class="${V.file}" />
   <div class="${V.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${V.select}" id="${V.select}"></select>
   <div class="${V.radio}"></div>
   <label class="${V.checkbox}">
     <input type="checkbox" id="${V.checkbox}" />
     <span class="${V.label}"></span>
   </label>
   <textarea class="${V.textarea}" id="${V.textarea}"></textarea>
   <div class="${V["validation-message"]}" id="${V["validation-message"]}"></div>
   <div class="${V.actions}">
     <div class="${V.loader}"></div>
     <button type="button" class="${V.confirm}"></button>
     <button type="button" class="${V.deny}"></button>
     <button type="button" class="${V.cancel}"></button>
   </div>
   <div class="${V.footer}"></div>
   <div class="${V["timer-progress-bar-container"]}">
     <div class="${V["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),U4=()=>{const t=Wt();return t?(t.remove(),Tn([document.documentElement,document.body],[V["no-backdrop"],V["toast-shown"],V["has-column"]]),!0):!1},Ci=()=>{de.currentInstance.resetValidationMessage()},z4=()=>{const t=Re(),e=Vr(t,V.input),n=Vr(t,V.file),r=t.querySelector(`.${V.range} input`),i=t.querySelector(`.${V.range} output`),o=Vr(t,V.select),a=t.querySelector(`.${V.checkbox} input`),u=Vr(t,V.textarea);e.oninput=Ci,n.onchange=Ci,o.onchange=Ci,a.onchange=Ci,u.oninput=Ci,r.oninput=()=>{Ci(),i.value=r.value},r.onchange=()=>{Ci(),i.value=r.value}},F4=t=>typeof t=="string"?document.querySelector(t):t,V4=t=>{const e=Re();e.setAttribute("role",t.toast?"alert":"dialog"),e.setAttribute("aria-live",t.toast?"polite":"assertive"),t.toast||e.setAttribute("aria-modal","true")},q4=t=>{window.getComputedStyle(t).direction==="rtl"&&Ae(Wt(),V.rtl)},H4=t=>{const e=U4();if(B4()){rs("SweetAlert2 requires document to initialize");return}const n=document.createElement("div");n.className=V.container,e&&Ae(n,V["no-transition"]),gn(n,$4),n.dataset.swal2Theme=t.theme;const r=F4(t.target);r.appendChild(n),t.topLayer&&(n.setAttribute("popover",""),n.showPopover()),V4(t),q4(r),z4()},Jp=(t,e)=>{t instanceof HTMLElement?e.appendChild(t):typeof t=="object"?W4(t,e):t&&gn(e,t)},W4=(t,e)=>{t.jquery?Z4(e,t):gn(e,t.toString())},Z4=(t,e)=>{if(t.textContent="",0 in e)for(let n=0;n in e;n++)t.appendChild(e[n].cloneNode(!0));else t.appendChild(e.cloneNode(!0))},G4=(t,e)=>{const n=il(),r=bo();!n||!r||(!e.showConfirmButton&&!e.showDenyButton&&!e.showCancelButton?Dt(n):_t(n),dn(n,e,"actions"),K4(n,r,e),gn(r,e.loaderHtml||""),dn(r,e,"loader"))};function K4(t,e,n){const r=rr(),i=is(),o=_o();!r||!i||!o||(jh(r,"confirm",n),jh(i,"deny",n),jh(o,"cancel",n),Y4(r,i,o,n),n.reverseButtons&&(n.toast?(t.insertBefore(o,r),t.insertBefore(i,r)):(t.insertBefore(o,e),t.insertBefore(i,e),t.insertBefore(r,e))))}function Y4(t,e,n,r){if(!r.buttonsStyling){Tn([t,e,n],V.styled);return}Ae([t,e,n],V.styled),r.confirmButtonColor&&t.style.setProperty("--swal2-confirm-button-background-color",r.confirmButtonColor),r.denyButtonColor&&e.style.setProperty("--swal2-deny-button-background-color",r.denyButtonColor),r.cancelButtonColor&&n.style.setProperty("--swal2-cancel-button-background-color",r.cancelButtonColor),Eh(t),Eh(e),Eh(n)}function Eh(t){const e=window.getComputedStyle(t);if(e.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const n=e.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");t.style.setProperty("--swal2-action-button-focus-box-shadow",e.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${n}`))}function jh(t,e,n){const r=zp(e);sl(t,n[`show${r}Button`],"inline-block"),gn(t,n[`${e}ButtonText`]||""),t.setAttribute("aria-label",n[`${e}ButtonAriaLabel`]||""),t.className=V[e],dn(t,n,`${e}Button`)}const J4=(t,e)=>{const n=Wp();n&&(gn(n,e.closeButtonHtml||""),dn(n,e,"closeButton"),sl(n,e.showCloseButton),n.setAttribute("aria-label",e.closeButtonAriaLabel||""))},Q4=(t,e)=>{const n=Wt();n&&(X4(n,e.backdrop),e3(n,e.position),t3(n,e.grow),dn(n,e,"container"))};function X4(t,e){typeof e=="string"?t.style.background=e:e||Ae([document.documentElement,document.body],V["no-backdrop"])}function e3(t,e){e&&(e in V?Ae(t,V[e]):(Vt('The "position" parameter is not valid, defaulting to "center"'),Ae(t,V.center)))}function t3(t,e){e&&Ae(t,V[`grow-${e}`])}var Fe={innerParams:new WeakMap,domCache:new WeakMap};const n3=["input","file","range","select","radio","checkbox","textarea"],r3=(t,e)=>{const n=Re();if(!n)return;const r=Fe.innerParams.get(t),i=!r||e.input!==r.input;n3.forEach(o=>{const a=Vr(n,V[o]);a&&(o3(o,e.inputAttributes),a.className=V[o],i&&Dt(a))}),e.input&&(i&&i3(e),a3(e))},i3=t=>{if(!t.input)return;if(!it[t.input]){rs(`Unexpected type of input! Expected ${Object.keys(it).join(" | ")}, got "${t.input}"`);return}const e=_2(t.input);if(!e)return;const n=it[t.input](e,t);_t(e),t.inputAutoFocus&&setTimeout(()=>{w2(n)})},s3=t=>{for(let e=0;e<t.attributes.length;e++){const n=t.attributes[e].name;["id","type","value","style"].includes(n)||t.removeAttribute(n)}},o3=(t,e)=>{const n=Re();if(!n)return;const r=Ku(n,t);if(r){s3(r);for(const i in e)r.setAttribute(i,e[i])}},a3=t=>{if(!t.input)return;const e=_2(t.input);e&&dn(e,t,"input")},Qp=(t,e)=>{!t.placeholder&&e.inputPlaceholder&&(t.placeholder=e.inputPlaceholder)},ol=(t,e,n)=>{if(n.inputLabel){const r=document.createElement("label"),i=V["input-label"];r.setAttribute("for",t.id),r.className=i,typeof n.customClass=="object"&&Ae(r,n.customClass.inputLabel),r.innerText=n.inputLabel,e.insertAdjacentElement("beforebegin",r)}},_2=t=>{const e=Re();if(e)return Vr(e,V[t]||V.input)},lu=(t,e)=>{["string","number"].includes(typeof e)?t.value=`${e}`:Vp(e)||Vt(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof e}"`)},it={};it.text=it.email=it.password=it.number=it.tel=it.url=it.search=it.date=it["datetime-local"]=it.time=it.week=it.month=(t,e)=>(lu(t,e.inputValue),ol(t,t,e),Qp(t,e),t.type=e.input,t);it.file=(t,e)=>(ol(t,t,e),Qp(t,e),t);it.range=(t,e)=>{const n=t.querySelector("input"),r=t.querySelector("output");return lu(n,e.inputValue),n.type=e.input,lu(r,e.inputValue),ol(n,t,e),t};it.select=(t,e)=>{if(t.textContent="",e.inputPlaceholder){const n=document.createElement("option");gn(n,e.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,t.appendChild(n)}return ol(t,t,e),t};it.radio=t=>(t.textContent="",t);it.checkbox=(t,e)=>{const n=Ku(Re(),"checkbox");n.value="1",n.checked=!!e.inputValue;const r=t.querySelector("span");return gn(r,e.inputPlaceholder||e.inputLabel),n};it.textarea=(t,e)=>{lu(t,e.inputValue),Qp(t,e),ol(t,t,e);const n=r=>parseInt(window.getComputedStyle(r).marginLeft)+parseInt(window.getComputedStyle(r).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const r=parseInt(window.getComputedStyle(Re()).width),i=()=>{if(!document.body.contains(t))return;const o=t.offsetWidth+n(t);o>r?Re().style.width=`${o}px`:qi(Re(),"width",e.width)};new MutationObserver(i).observe(t,{attributes:!0,attributeFilter:["style"]})}}),t};const l3=(t,e)=>{const n=qp();n&&(Kp(n),dn(n,e,"htmlContainer"),e.html?(Jp(e.html,n),_t(n,"block")):e.text?(n.textContent=e.text,_t(n,"block")):Dt(n),r3(t,e))},c3=(t,e)=>{const n=v2();n&&(Kp(n),sl(n,!!e.footer,"block"),e.footer&&Jp(e.footer,n),dn(n,e,"footer"))},u3=(t,e)=>{const n=Fe.innerParams.get(t),r=xo();if(!r)return;if(n&&e.icon===n.icon){Fy(r,e),zy(r,e);return}if(!e.icon&&!e.iconHtml){Dt(r);return}if(e.icon&&Object.keys(au).indexOf(e.icon)===-1){rs(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${e.icon}"`),Dt(r);return}_t(r),Fy(r,e),zy(r,e),Ae(r,e.showClass&&e.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",b2)},zy=(t,e)=>{for(const[n,r]of Object.entries(au))e.icon!==n&&Tn(t,r);Ae(t,e.icon&&au[e.icon]),f3(t,e),b2(),dn(t,e,"icon")},b2=()=>{const t=Re();if(!t)return;const e=window.getComputedStyle(t).getPropertyValue("background-color"),n=t.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let r=0;r<n.length;r++)n[r].style.backgroundColor=e},d3=t=>`
  ${t.animation?'<div class="swal2-success-circular-line-left"></div>':""}
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div>
  ${t.animation?'<div class="swal2-success-fix"></div>':""}
  ${t.animation?'<div class="swal2-success-circular-line-right"></div>':""}
`,h3=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,Fy=(t,e)=>{if(!e.icon&&!e.iconHtml)return;let n=t.innerHTML,r="";e.iconHtml?r=Vy(e.iconHtml):e.icon==="success"?(r=d3(e),n=n.replace(/ style=".*?"/g,"")):e.icon==="error"?r=h3:e.icon&&(r=Vy({question:"?",warning:"!",info:"i"}[e.icon])),n.trim()!==r.trim()&&gn(t,r)},f3=(t,e)=>{if(e.iconColor){t.style.color=e.iconColor,t.style.borderColor=e.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Uy(t,n,"background-color",e.iconColor);Uy(t,".swal2-success-ring","border-color",e.iconColor)}},Vy=t=>`<div class="${V["icon-content"]}">${t}</div>`,m3=(t,e)=>{const n=g2();if(n){if(!e.imageUrl){Dt(n);return}_t(n,""),n.setAttribute("src",e.imageUrl),n.setAttribute("alt",e.imageAlt||""),qi(n,"width",e.imageWidth),qi(n,"height",e.imageHeight),n.className=V.image,dn(n,e,"image")}};let Xp=!1,k2=0,S2=0,C2=0,P2=0;const p3=t=>{t.addEventListener("mousedown",cu),document.body.addEventListener("mousemove",uu),t.addEventListener("mouseup",du),t.addEventListener("touchstart",cu),document.body.addEventListener("touchmove",uu),t.addEventListener("touchend",du)},g3=t=>{t.removeEventListener("mousedown",cu),document.body.removeEventListener("mousemove",uu),t.removeEventListener("mouseup",du),t.removeEventListener("touchstart",cu),document.body.removeEventListener("touchmove",uu),t.removeEventListener("touchend",du)},cu=t=>{const e=Re();if(t.target===e||xo().contains(t.target)){Xp=!0;const n=E2(t);k2=n.clientX,S2=n.clientY,C2=parseInt(e.style.insetInlineStart)||0,P2=parseInt(e.style.insetBlockStart)||0,Ae(e,"swal2-dragging")}},uu=t=>{const e=Re();if(Xp){let{clientX:n,clientY:r}=E2(t);e.style.insetInlineStart=`${C2+(n-k2)}px`,e.style.insetBlockStart=`${P2+(r-S2)}px`}},du=()=>{const t=Re();Xp=!1,Tn(t,"swal2-dragging")},E2=t=>{let e=0,n=0;return t.type.startsWith("mouse")?(e=t.clientX,n=t.clientY):t.type.startsWith("touch")&&(e=t.touches[0].clientX,n=t.touches[0].clientY),{clientX:e,clientY:n}},v3=(t,e)=>{const n=Wt(),r=Re();if(!(!n||!r)){if(e.toast){qi(n,"width",e.width),r.style.width="100%";const i=bo();i&&r.insertBefore(i,xo())}else qi(r,"width",e.width);qi(r,"padding",e.padding),e.color&&(r.style.color=e.color),e.background&&(r.style.background=e.background),Dt(Wu()),w3(r,e),e.draggable&&!e.toast?(Ae(r,V.draggable),p3(r)):(Tn(r,V.draggable),g3(r))}},w3=(t,e)=>{const n=e.showClass||{};t.className=`${V.popup} ${Xt(t)?n.popup:""}`,e.toast?(Ae([document.documentElement,document.body],V["toast-shown"]),Ae(t,V.toast)):Ae(t,V.modal),dn(t,e,"popup"),typeof e.customClass=="string"&&Ae(t,e.customClass),e.icon&&Ae(t,V[`icon-${e.icon}`])},y3=(t,e)=>{const n=Hp();if(!n)return;const{progressSteps:r,currentProgressStep:i}=e;if(!r||r.length===0||i===void 0){Dt(n);return}_t(n),n.textContent="",i>=r.length&&Vt("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),r.forEach((o,a)=>{const u=x3(o);if(n.appendChild(u),a===i&&Ae(u,V["active-progress-step"]),a!==r.length-1){const d=_3(e);n.appendChild(d)}})},x3=t=>{const e=document.createElement("li");return Ae(e,V["progress-step"]),gn(e,t),e},_3=t=>{const e=document.createElement("li");return Ae(e,V["progress-step-line"]),t.progressStepsDistance&&qi(e,"width",t.progressStepsDistance),e},b3=(t,e)=>{const n=p2();n&&(Kp(n),sl(n,!!(e.title||e.titleText),"block"),e.title&&Jp(e.title,n),e.titleText&&(n.innerText=e.titleText),dn(n,e,"title"))},j2=(t,e)=>{v3(t,e),Q4(t,e),y3(t,e),u3(t,e),m3(t,e),b3(t,e),J4(t,e),l3(t,e),G4(t,e),c3(t,e);const n=Re();typeof e.didRender=="function"&&n&&e.didRender(n),de.eventEmitter.emit("didRender",n)},k3=()=>Xt(Re()),N2=()=>{var t;return(t=rr())===null||t===void 0?void 0:t.click()},S3=()=>{var t;return(t=is())===null||t===void 0?void 0:t.click()},C3=()=>{var t;return(t=_o())===null||t===void 0?void 0:t.click()},ko=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),T2=t=>{t.keydownTarget&&t.keydownHandlerAdded&&(t.keydownTarget.removeEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!1)},P3=(t,e,n)=>{T2(t),e.toast||(t.keydownHandler=r=>j3(e,r,n),t.keydownTarget=e.keydownListenerCapture?window:Re(),t.keydownListenerCapture=e.keydownListenerCapture,t.keydownTarget.addEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!0)},nm=(t,e)=>{var n;const r=Zp();if(r.length){t=t+e,t===-2&&(t=r.length-1),t===r.length?t=0:t===-1&&(t=r.length-1),r[t].focus();return}(n=Re())===null||n===void 0||n.focus()},L2=["ArrowRight","ArrowDown"],E3=["ArrowLeft","ArrowUp"],j3=(t,e,n)=>{t&&(e.isComposing||e.keyCode===229||(t.stopKeydownPropagation&&e.stopPropagation(),e.key==="Enter"?N3(e,t):e.key==="Tab"?T3(e):[...L2,...E3].includes(e.key)?L3(e.key):e.key==="Escape"&&R3(e,t,n)))},N3=(t,e)=>{if(!Hu(e.allowEnterKey))return;const n=Ku(Re(),e.input);if(t.target&&n&&t.target instanceof HTMLElement&&t.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(e.input))return;N2(),t.preventDefault()}},T3=t=>{const e=t.target,n=Zp();let r=-1;for(let i=0;i<n.length;i++)if(e===n[i]){r=i;break}t.shiftKey?nm(r,-1):nm(r,1),t.stopPropagation(),t.preventDefault()},L3=t=>{const e=il(),n=rr(),r=is(),i=_o();if(!e||!n||!r||!i)return;const o=[n,r,i];if(document.activeElement instanceof HTMLElement&&!o.includes(document.activeElement))return;const a=L2.includes(t)?"nextElementSibling":"previousElementSibling";let u=document.activeElement;if(u){for(let d=0;d<e.children.length;d++){if(u=u[a],!u)return;if(u instanceof HTMLButtonElement&&Xt(u))break}u instanceof HTMLButtonElement&&u.focus()}},R3=(t,e,n)=>{t.preventDefault(),Hu(e.allowEscapeKey)&&n(ko.esc)};var lo={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const A3=()=>{const t=Wt();Array.from(document.body.children).forEach(n=>{n.contains(t)||(n.hasAttribute("aria-hidden")&&n.setAttribute("data-previous-aria-hidden",n.getAttribute("aria-hidden")||""),n.setAttribute("aria-hidden","true"))})},R2=()=>{Array.from(document.body.children).forEach(e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")})},A2=typeof window<"u"&&!!window.GestureEvent,O3=()=>{if(A2&&!xr(document.body,V.iosfix)){const t=document.body.scrollTop;document.body.style.top=`${t*-1}px`,Ae(document.body,V.iosfix),I3()}},I3=()=>{const t=Wt();if(!t)return;let e;t.ontouchstart=n=>{e=M3(n)},t.ontouchmove=n=>{e&&(n.preventDefault(),n.stopPropagation())}},M3=t=>{const e=t.target,n=Wt(),r=qp();return!n||!r||D3(t)||B3(t)?!1:e===n||!tm(n)&&e instanceof HTMLElement&&!M4(e,r)&&e.tagName!=="INPUT"&&e.tagName!=="TEXTAREA"&&!(tm(r)&&r.contains(e))},D3=t=>t.touches&&t.touches.length&&t.touches[0].touchType==="stylus",B3=t=>t.touches&&t.touches.length>1,$3=()=>{if(xr(document.body,V.iosfix)){const t=parseInt(document.body.style.top,10);Tn(document.body,V.iosfix),document.body.style.top="",document.body.scrollTop=t*-1}},U3=()=>{const t=document.createElement("div");t.className=V["scrollbar-measure"],document.body.appendChild(t);const e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e};let Gs=null;const z3=t=>{Gs===null&&(document.body.scrollHeight>window.innerHeight||t==="scroll")&&(Gs=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${Gs+U3()}px`)},F3=()=>{Gs!==null&&(document.body.style.paddingRight=`${Gs}px`,Gs=null)};function O2(t,e,n,r){Gu()?qy(t,r):(P4(n).then(()=>qy(t,r)),T2(de)),A2?(e.setAttribute("style","display:none !important"),e.removeAttribute("class"),e.innerHTML=""):e.remove(),Gp()&&(F3(),$3(),R2()),V3()}function V3(){Tn([document.documentElement,document.body],[V.shown,V["height-auto"],V["no-backdrop"],V["toast-shown"]])}function qr(t){t=H3(t);const e=lo.swalPromiseResolve.get(this),n=q3(this);this.isAwaitingPromise?t.isDismissed||(al(this),e(t)):n&&e(t)}const q3=t=>{const e=Re();if(!e)return!1;const n=Fe.innerParams.get(t);if(!n||xr(e,n.hideClass.popup))return!1;Tn(e,n.showClass.popup),Ae(e,n.hideClass.popup);const r=Wt();return Tn(r,n.showClass.backdrop),Ae(r,n.hideClass.backdrop),W3(t,e,n),!0};function I2(t){const e=lo.swalPromiseReject.get(this);al(this),e&&e(t)}const al=t=>{t.isAwaitingPromise&&(delete t.isAwaitingPromise,Fe.innerParams.get(t)||t._destroy())},H3=t=>typeof t>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},t),W3=(t,e,n)=>{var r;const i=Wt(),o=x2(e);typeof n.willClose=="function"&&n.willClose(e),(r=de.eventEmitter)===null||r===void 0||r.emit("willClose",e),o?Z3(t,e,i,n.returnFocus,n.didClose):O2(t,i,n.returnFocus,n.didClose)},Z3=(t,e,n,r,i)=>{de.swalCloseEventFinishedCallback=O2.bind(null,t,n,r,i);const o=function(a){if(a.target===e){var u;(u=de.swalCloseEventFinishedCallback)===null||u===void 0||u.call(de),delete de.swalCloseEventFinishedCallback,e.removeEventListener("animationend",o),e.removeEventListener("transitionend",o)}};e.addEventListener("animationend",o),e.addEventListener("transitionend",o)},qy=(t,e)=>{setTimeout(()=>{var n;typeof e=="function"&&e.bind(t.params)(),(n=de.eventEmitter)===null||n===void 0||n.emit("didClose"),t._destroy&&t._destroy()})},co=t=>{let e=Re();if(e||new K,e=Re(),!e)return;const n=bo();Gu()?Dt(xo()):G3(e,t),_t(n),e.setAttribute("data-loading","true"),e.setAttribute("aria-busy","true"),e.focus()},G3=(t,e)=>{const n=il(),r=bo();!n||!r||(!e&&Xt(rr())&&(e=rr()),_t(n),e&&(Dt(e),r.setAttribute("data-button-to-replace",e.className),n.insertBefore(r,e)),Ae([t,n],V.loading))},K3=(t,e)=>{e.input==="select"||e.input==="radio"?e5(t,e):["text","email","number","tel","textarea"].some(n=>n===e.input)&&(Fp(e.inputValue)||Vp(e.inputValue))&&(co(rr()),t5(t,e))},Y3=(t,e)=>{const n=t.getInput();if(!n)return null;switch(e.input){case"checkbox":return J3(n);case"radio":return Q3(n);case"file":return X3(n);default:return e.inputAutoTrim?n.value.trim():n.value}},J3=t=>t.checked?1:0,Q3=t=>t.checked?t.value:null,X3=t=>t.files&&t.files.length?t.getAttribute("multiple")!==null?t.files:t.files[0]:null,e5=(t,e)=>{const n=Re();if(!n)return;const r=i=>{e.input==="select"?n5(n,hu(i),e):e.input==="radio"&&r5(n,hu(i),e)};Fp(e.inputOptions)||Vp(e.inputOptions)?(co(rr()),nl(e.inputOptions).then(i=>{t.hideLoading(),r(i)})):typeof e.inputOptions=="object"?r(e.inputOptions):rs(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof e.inputOptions}`)},t5=(t,e)=>{const n=t.getInput();n&&(Dt(n),nl(e.inputValue).then(r=>{n.value=e.input==="number"?`${parseFloat(r)||0}`:`${r}`,_t(n),n.focus(),t.hideLoading()}).catch(r=>{rs(`Error in inputValue promise: ${r}`),n.value="",_t(n),n.focus(),t.hideLoading()}))};function n5(t,e,n){const r=Vr(t,V.select);if(!r)return;const i=(o,a,u)=>{const d=document.createElement("option");d.value=u,gn(d,a),d.selected=M2(u,n.inputValue),o.appendChild(d)};e.forEach(o=>{const a=o[0],u=o[1];if(Array.isArray(u)){const d=document.createElement("optgroup");d.label=a,d.disabled=!1,r.appendChild(d),u.forEach(f=>i(d,f[1],f[0]))}else i(r,u,a)}),r.focus()}function r5(t,e,n){const r=Vr(t,V.radio);if(!r)return;e.forEach(o=>{const a=o[0],u=o[1],d=document.createElement("input"),f=document.createElement("label");d.type="radio",d.name=V.radio,d.value=a,M2(a,n.inputValue)&&(d.checked=!0);const m=document.createElement("span");gn(m,u),m.className=V.label,f.appendChild(d),f.appendChild(m),r.appendChild(f)});const i=r.querySelectorAll("input");i.length&&i[0].focus()}const hu=t=>{const e=[];return t instanceof Map?t.forEach((n,r)=>{let i=n;typeof i=="object"&&(i=hu(i)),e.push([r,i])}):Object.keys(t).forEach(n=>{let r=t[n];typeof r=="object"&&(r=hu(r)),e.push([n,r])}),e},M2=(t,e)=>!!e&&e.toString()===t.toString(),i5=t=>{const e=Fe.innerParams.get(t);t.disableButtons(),e.input?D2(t,"confirm"):tg(t,!0)},s5=t=>{const e=Fe.innerParams.get(t);t.disableButtons(),e.returnInputValueOnDeny?D2(t,"deny"):eg(t,!1)},o5=(t,e)=>{t.disableButtons(),e(ko.cancel)},D2=(t,e)=>{const n=Fe.innerParams.get(t);if(!n.input){rs(`The "input" parameter is needed to be set when using returnInputValueOn${zp(e)}`);return}const r=t.getInput(),i=Y3(t,n);n.inputValidator?a5(t,i,e):r&&!r.checkValidity()?(t.enableButtons(),t.showValidationMessage(n.validationMessage||r.validationMessage)):e==="deny"?eg(t,i):tg(t,i)},a5=(t,e,n)=>{const r=Fe.innerParams.get(t);t.disableInput(),Promise.resolve().then(()=>nl(r.inputValidator(e,r.validationMessage))).then(o=>{t.enableButtons(),t.enableInput(),o?t.showValidationMessage(o):n==="deny"?eg(t,e):tg(t,e)})},eg=(t,e)=>{const n=Fe.innerParams.get(t||void 0);n.showLoaderOnDeny&&co(is()),n.preDeny?(t.isAwaitingPromise=!0,Promise.resolve().then(()=>nl(n.preDeny(e,n.validationMessage))).then(i=>{i===!1?(t.hideLoading(),al(t)):t.close({isDenied:!0,value:typeof i>"u"?e:i})}).catch(i=>B2(t||void 0,i))):t.close({isDenied:!0,value:e})},Hy=(t,e)=>{t.close({isConfirmed:!0,value:e})},B2=(t,e)=>{t.rejectPromise(e)},tg=(t,e)=>{const n=Fe.innerParams.get(t||void 0);n.showLoaderOnConfirm&&co(),n.preConfirm?(t.resetValidationMessage(),t.isAwaitingPromise=!0,Promise.resolve().then(()=>nl(n.preConfirm(e,n.validationMessage))).then(i=>{Xt(Wu())||i===!1?(t.hideLoading(),al(t)):Hy(t,typeof i>"u"?e:i)}).catch(i=>B2(t||void 0,i))):Hy(t,e)};function fu(){const t=Fe.innerParams.get(this);if(!t)return;const e=Fe.domCache.get(this);Dt(e.loader),Gu()?t.icon&&_t(xo()):l5(e),Tn([e.popup,e.actions],V.loading),e.popup.removeAttribute("aria-busy"),e.popup.removeAttribute("data-loading"),e.confirmButton.disabled=!1,e.denyButton.disabled=!1,e.cancelButton.disabled=!1}const l5=t=>{const e=t.popup.getElementsByClassName(t.loader.getAttribute("data-button-to-replace"));e.length?_t(e[0],"inline-block"):I4()&&Dt(t.actions)};function $2(){const t=Fe.innerParams.get(this),e=Fe.domCache.get(this);return e?Ku(e.popup,t.input):null}function U2(t,e,n){const r=Fe.domCache.get(t);e.forEach(i=>{r[i].disabled=n})}function z2(t,e){const n=Re();if(!(!n||!t))if(t.type==="radio"){const r=n.querySelectorAll(`[name="${V.radio}"]`);for(let i=0;i<r.length;i++)r[i].disabled=e}else t.disabled=e}function F2(){U2(this,["confirmButton","denyButton","cancelButton"],!1)}function V2(){U2(this,["confirmButton","denyButton","cancelButton"],!0)}function q2(){z2(this.getInput(),!1)}function H2(){z2(this.getInput(),!0)}function W2(t){const e=Fe.domCache.get(this),n=Fe.innerParams.get(this);gn(e.validationMessage,t),e.validationMessage.className=V["validation-message"],n.customClass&&n.customClass.validationMessage&&Ae(e.validationMessage,n.customClass.validationMessage),_t(e.validationMessage);const r=this.getInput();r&&(r.setAttribute("aria-invalid","true"),r.setAttribute("aria-describedby",V["validation-message"]),w2(r),Ae(r,V.inputerror))}function Z2(){const t=Fe.domCache.get(this);t.validationMessage&&Dt(t.validationMessage);const e=this.getInput();e&&(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby"),Tn(e,V.inputerror))}const Ks={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},c5=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],u5={allowEnterKey:void 0},d5=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],G2=t=>Object.prototype.hasOwnProperty.call(Ks,t),K2=t=>c5.indexOf(t)!==-1,Y2=t=>u5[t],h5=t=>{G2(t)||Vt(`Unknown parameter "${t}"`)},f5=t=>{d5.includes(t)&&Vt(`The parameter "${t}" is incompatible with toasts`)},m5=t=>{const e=Y2(t);e&&m2(t,e)},J2=t=>{t.backdrop===!1&&t.allowOutsideClick&&Vt('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),t.theme&&!["light","dark","auto","minimal","borderless","bootstrap-4","bootstrap-4-light","bootstrap-4-dark","bootstrap-5","bootstrap-5-light","bootstrap-5-dark","material-ui","material-ui-light","material-ui-dark","embed-iframe","bulma","bulma-light","bulma-dark"].includes(t.theme)&&Vt(`Invalid theme "${t.theme}"`);for(const e in t)h5(e),t.toast&&f5(e),m5(e)};function Q2(t){const e=Wt(),n=Re(),r=Fe.innerParams.get(this);if(!n||xr(n,r.hideClass.popup)){Vt("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const i=p5(t),o=Object.assign({},r,i);J2(o),e.dataset.swal2Theme=o.theme,j2(this,o),Fe.innerParams.set(this,o),Object.defineProperties(this,{params:{value:Object.assign({},this.params,t),writable:!1,enumerable:!0}})}const p5=t=>{const e={};return Object.keys(t).forEach(n=>{K2(n)?e[n]=t[n]:Vt(`Invalid parameter to update: ${n}`)}),e};function X2(){const t=Fe.domCache.get(this),e=Fe.innerParams.get(this);if(!e){eS(this);return}t.popup&&de.swalCloseEventFinishedCallback&&(de.swalCloseEventFinishedCallback(),delete de.swalCloseEventFinishedCallback),typeof e.didDestroy=="function"&&e.didDestroy(),de.eventEmitter.emit("didDestroy"),g5(this)}const g5=t=>{eS(t),delete t.params,delete de.keydownHandler,delete de.keydownTarget,delete de.currentInstance},eS=t=>{t.isAwaitingPromise?(Nh(Fe,t),t.isAwaitingPromise=!0):(Nh(lo,t),Nh(Fe,t),delete t.isAwaitingPromise,delete t.disableButtons,delete t.enableButtons,delete t.getInput,delete t.disableInput,delete t.enableInput,delete t.hideLoading,delete t.disableLoading,delete t.showValidationMessage,delete t.resetValidationMessage,delete t.close,delete t.closePopup,delete t.closeModal,delete t.closeToast,delete t.rejectPromise,delete t.update,delete t._destroy)},Nh=(t,e)=>{for(const n in t)t[n].delete(e)};var v5=Object.freeze({__proto__:null,_destroy:X2,close:qr,closeModal:qr,closePopup:qr,closeToast:qr,disableButtons:V2,disableInput:H2,disableLoading:fu,enableButtons:F2,enableInput:q2,getInput:$2,handleAwaitingPromise:al,hideLoading:fu,rejectPromise:I2,resetValidationMessage:Z2,showValidationMessage:W2,update:Q2});const w5=(t,e,n)=>{t.toast?y5(t,e,n):(_5(e),b5(e),k5(t,e,n))},y5=(t,e,n)=>{e.popup.onclick=()=>{t&&(x5(t)||t.timer||t.input)||n(ko.close)}},x5=t=>!!(t.showConfirmButton||t.showDenyButton||t.showCancelButton||t.showCloseButton);let mu=!1;const _5=t=>{t.popup.onmousedown=()=>{t.container.onmouseup=function(e){t.container.onmouseup=()=>{},e.target===t.container&&(mu=!0)}}},b5=t=>{t.container.onmousedown=e=>{e.target===t.container&&e.preventDefault(),t.popup.onmouseup=function(n){t.popup.onmouseup=()=>{},(n.target===t.popup||n.target instanceof HTMLElement&&t.popup.contains(n.target))&&(mu=!0)}}},k5=(t,e,n)=>{e.container.onclick=r=>{if(mu){mu=!1;return}r.target===e.container&&Hu(t.allowOutsideClick)&&n(ko.backdrop)}},S5=t=>typeof t=="object"&&t.jquery,Wy=t=>t instanceof Element||S5(t),C5=t=>{const e={};return typeof t[0]=="object"&&!Wy(t[0])?Object.assign(e,t[0]):["title","html","icon"].forEach((n,r)=>{const i=t[r];typeof i=="string"||Wy(i)?e[n]=i:i!==void 0&&rs(`Unexpected type of ${n}! Expected "string" or "Element", got ${typeof i}`)}),e};function P5(...t){return new this(...t)}function E5(t){class e extends this{_main(r,i){return super._main(r,Object.assign({},t,i))}}return e}const j5=()=>de.timeout&&de.timeout.getTimerLeft(),tS=()=>{if(de.timeout)return D4(),de.timeout.stop()},nS=()=>{if(de.timeout){const t=de.timeout.start();return Yp(t),t}},N5=()=>{const t=de.timeout;return t&&(t.running?tS():nS())},T5=t=>{if(de.timeout){const e=de.timeout.increase(t);return Yp(e,!0),e}},L5=()=>!!(de.timeout&&de.timeout.isRunning());let Zy=!1;const rm={};function R5(t="data-swal-template"){rm[t]=this,Zy||(document.body.addEventListener("click",A5),Zy=!0)}const A5=t=>{for(let e=t.target;e&&e!==document;e=e.parentNode)for(const n in rm){const r=e.getAttribute(n);if(r){rm[n].fire({template:r});return}}};class O5{constructor(){this.events={}}_getHandlersByEventName(e){return typeof this.events[e]>"u"&&(this.events[e]=[]),this.events[e]}on(e,n){const r=this._getHandlersByEventName(e);r.includes(n)||r.push(n)}once(e,n){const r=(...i)=>{this.removeListener(e,r),n.apply(this,i)};this.on(e,r)}emit(e,...n){this._getHandlersByEventName(e).forEach(r=>{try{r.apply(this,n)}catch(i){console.error(i)}})}removeListener(e,n){const r=this._getHandlersByEventName(e),i=r.indexOf(n);i>-1&&r.splice(i,1)}removeAllListeners(e){this.events[e]!==void 0&&(this.events[e].length=0)}reset(){this.events={}}}de.eventEmitter=new O5;const I5=(t,e)=>{de.eventEmitter.on(t,e)},M5=(t,e)=>{de.eventEmitter.once(t,e)},D5=(t,e)=>{if(!t){de.eventEmitter.reset();return}e?de.eventEmitter.removeListener(t,e):de.eventEmitter.removeAllListeners(t)};var B5=Object.freeze({__proto__:null,argsToParams:C5,bindClickHandler:R5,clickCancel:C3,clickConfirm:N2,clickDeny:S3,enableLoading:co,fire:P5,getActions:il,getCancelButton:_o,getCloseButton:Wp,getConfirmButton:rr,getContainer:Wt,getDenyButton:is,getFocusableElements:Zp,getFooter:v2,getHtmlContainer:qp,getIcon:xo,getIconContent:T4,getImage:g2,getInputLabel:L4,getLoader:bo,getPopup:Re,getProgressSteps:Hp,getTimerLeft:j5,getTimerProgressBar:Zu,getTitle:p2,getValidationMessage:Wu,increaseTimer:T5,isDeprecatedParameter:Y2,isLoading:A4,isTimerRunning:L5,isUpdatableParameter:K2,isValidParameter:G2,isVisible:k3,mixin:E5,off:D5,on:I5,once:M5,resumeTimer:nS,showLoading:co,stopTimer:tS,toggleTimer:N5});class $5{constructor(e,n){this.callback=e,this.remaining=n,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(e){const n=this.running;return n&&this.stop(),this.remaining+=e,n&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const rS=["swal-title","swal-html","swal-footer"],U5=t=>{const e=typeof t.template=="string"?document.querySelector(t.template):t.template;if(!e)return{};const n=e.content;return G5(n),Object.assign(z5(n),F5(n),V5(n),q5(n),H5(n),W5(n),Z5(n,rS))},z5=t=>{const e={};return Array.from(t.querySelectorAll("swal-param")).forEach(r=>{Ji(r,["name","value"]);const i=r.getAttribute("name"),o=r.getAttribute("value");!i||!o||(typeof Ks[i]=="boolean"?e[i]=o!=="false":typeof Ks[i]=="object"?e[i]=JSON.parse(o):e[i]=o)}),e},F5=t=>{const e={};return Array.from(t.querySelectorAll("swal-function-param")).forEach(r=>{const i=r.getAttribute("name"),o=r.getAttribute("value");!i||!o||(e[i]=new Function(`return ${o}`)())}),e},V5=t=>{const e={};return Array.from(t.querySelectorAll("swal-button")).forEach(r=>{Ji(r,["type","color","aria-label"]);const i=r.getAttribute("type");!i||!["confirm","cancel","deny"].includes(i)||(e[`${i}ButtonText`]=r.innerHTML,e[`show${zp(i)}Button`]=!0,r.hasAttribute("color")&&(e[`${i}ButtonColor`]=r.getAttribute("color")),r.hasAttribute("aria-label")&&(e[`${i}ButtonAriaLabel`]=r.getAttribute("aria-label")))}),e},q5=t=>{const e={},n=t.querySelector("swal-image");return n&&(Ji(n,["src","width","height","alt"]),n.hasAttribute("src")&&(e.imageUrl=n.getAttribute("src")||void 0),n.hasAttribute("width")&&(e.imageWidth=n.getAttribute("width")||void 0),n.hasAttribute("height")&&(e.imageHeight=n.getAttribute("height")||void 0),n.hasAttribute("alt")&&(e.imageAlt=n.getAttribute("alt")||void 0)),e},H5=t=>{const e={},n=t.querySelector("swal-icon");return n&&(Ji(n,["type","color"]),n.hasAttribute("type")&&(e.icon=n.getAttribute("type")),n.hasAttribute("color")&&(e.iconColor=n.getAttribute("color")),e.iconHtml=n.innerHTML),e},W5=t=>{const e={},n=t.querySelector("swal-input");n&&(Ji(n,["type","label","placeholder","value"]),e.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(e.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(e.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(e.inputValue=n.getAttribute("value")));const r=Array.from(t.querySelectorAll("swal-input-option"));return r.length&&(e.inputOptions={},r.forEach(i=>{Ji(i,["value"]);const o=i.getAttribute("value");if(!o)return;const a=i.innerHTML;e.inputOptions[o]=a})),e},Z5=(t,e)=>{const n={};for(const r in e){const i=e[r],o=t.querySelector(i);o&&(Ji(o,[]),n[i.replace(/^swal-/,"")]=o.innerHTML.trim())}return n},G5=t=>{const e=rS.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(t.children).forEach(n=>{const r=n.tagName.toLowerCase();e.includes(r)||Vt(`Unrecognized element <${r}>`)})},Ji=(t,e)=>{Array.from(t.attributes).forEach(n=>{e.indexOf(n.name)===-1&&Vt([`Unrecognized attribute "${n.name}" on <${t.tagName.toLowerCase()}>.`,`${e.length?`Allowed attributes are: ${e.join(", ")}`:"To set the value, use HTML within the element."}`])})},iS=10,K5=t=>{const e=Wt(),n=Re();typeof t.willOpen=="function"&&t.willOpen(n),de.eventEmitter.emit("willOpen",n);const i=window.getComputedStyle(document.body).overflowY;Q5(e,n,t),setTimeout(()=>{Y5(e,n)},iS),Gp()&&(J5(e,t.scrollbarPadding,i),A3()),!Gu()&&!de.previousActiveElement&&(de.previousActiveElement=document.activeElement),typeof t.didOpen=="function"&&setTimeout(()=>t.didOpen(n)),de.eventEmitter.emit("didOpen",n)},pu=t=>{const e=Re();if(t.target!==e)return;const n=Wt();e.removeEventListener("animationend",pu),e.removeEventListener("transitionend",pu),n.style.overflowY="auto",Tn(n,V["no-transition"])},Y5=(t,e)=>{x2(e)?(t.style.overflowY="hidden",e.addEventListener("animationend",pu),e.addEventListener("transitionend",pu)):t.style.overflowY="auto"},J5=(t,e,n)=>{O3(),e&&n!=="hidden"&&z3(n),setTimeout(()=>{t.scrollTop=0})},Q5=(t,e,n)=>{Ae(t,n.showClass.backdrop),n.animation?(e.style.setProperty("opacity","0","important"),_t(e,"grid"),setTimeout(()=>{Ae(e,n.showClass.popup),e.style.removeProperty("opacity")},iS)):_t(e,"grid"),Ae([document.documentElement,document.body],V.shown),n.heightAuto&&n.backdrop&&!n.toast&&Ae([document.documentElement,document.body],V["height-auto"])};var Gy={email:(t,e)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid email address"),url:(t,e)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid URL")};function X5(t){t.inputValidator||(t.input==="email"&&(t.inputValidator=Gy.email),t.input==="url"&&(t.inputValidator=Gy.url))}function eD(t){(!t.target||typeof t.target=="string"&&!document.querySelector(t.target)||typeof t.target!="string"&&!t.target.appendChild)&&(Vt('Target parameter is not valid, defaulting to "body"'),t.target="body")}function tD(t){X5(t),t.showLoaderOnConfirm&&!t.preConfirm&&Vt(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),eD(t),typeof t.title=="string"&&(t.title=t.title.split(`
`).join("<br />")),H4(t)}let Jn;var sc=new WeakMap;class lt{constructor(...e){if(b4(this,sc,void 0),typeof window>"u")return;Jn=this;const n=Object.freeze(this.constructor.argsToParams(e));this.params=n,this.isAwaitingPromise=!1,k4(sc,this,this._main(Jn.params))}_main(e,n={}){if(J2(Object.assign({},n,e)),de.currentInstance){const o=lo.swalPromiseResolve.get(de.currentInstance),{isAwaitingPromise:a}=de.currentInstance;de.currentInstance._destroy(),a||o({isDismissed:!0}),Gp()&&R2()}de.currentInstance=Jn;const r=rD(e,n);tD(r),Object.freeze(r),de.timeout&&(de.timeout.stop(),delete de.timeout),clearTimeout(de.restoreFocusTimeout);const i=iD(Jn);return j2(Jn,r),Fe.innerParams.set(Jn,r),nD(Jn,i,r)}then(e){return By(sc,this).then(e)}finally(e){return By(sc,this).finally(e)}}const nD=(t,e,n)=>new Promise((r,i)=>{const o=a=>{t.close({isDismissed:!0,dismiss:a,isConfirmed:!1,isDenied:!1})};lo.swalPromiseResolve.set(t,r),lo.swalPromiseReject.set(t,i),e.confirmButton.onclick=()=>{i5(t)},e.denyButton.onclick=()=>{s5(t)},e.cancelButton.onclick=()=>{o5(t,o)},e.closeButton.onclick=()=>{o(ko.close)},w5(n,e,o),P3(de,n,o),K3(t,n),K5(n),sD(de,n,o),oD(e,n),setTimeout(()=>{e.container.scrollTop=0})}),rD=(t,e)=>{const n=U5(t),r=Object.assign({},Ks,e,n,t);return r.showClass=Object.assign({},Ks.showClass,r.showClass),r.hideClass=Object.assign({},Ks.hideClass,r.hideClass),r.animation===!1&&(r.showClass={backdrop:"swal2-noanimation"},r.hideClass={}),r},iD=t=>{const e={popup:Re(),container:Wt(),actions:il(),confirmButton:rr(),denyButton:is(),cancelButton:_o(),loader:bo(),closeButton:Wp(),validationMessage:Wu(),progressSteps:Hp()};return Fe.domCache.set(t,e),e},sD=(t,e,n)=>{const r=Zu();Dt(r),e.timer&&(t.timeout=new $5(()=>{n("timer"),delete t.timeout},e.timer),e.timerProgressBar&&(_t(r),dn(r,e,"timerProgressBar"),setTimeout(()=>{t.timeout&&t.timeout.running&&Yp(e.timer)})))},oD=(t,e)=>{if(!e.toast){if(!Hu(e.allowEnterKey)){m2("allowEnterKey"),cD();return}aD(t)||lD(t,e)||nm(-1,1)}},aD=t=>{const e=Array.from(t.popup.querySelectorAll("[autofocus]"));for(const n of e)if(n instanceof HTMLElement&&Xt(n))return n.focus(),!0;return!1},lD=(t,e)=>e.focusDeny&&Xt(t.denyButton)?(t.denyButton.focus(),!0):e.focusCancel&&Xt(t.cancelButton)?(t.cancelButton.focus(),!0):e.focusConfirm&&Xt(t.confirmButton)?(t.confirmButton.focus(),!0):!1,cD=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};lt.prototype.disableButtons=V2;lt.prototype.enableButtons=F2;lt.prototype.getInput=$2;lt.prototype.disableInput=H2;lt.prototype.enableInput=q2;lt.prototype.hideLoading=fu;lt.prototype.disableLoading=fu;lt.prototype.showValidationMessage=W2;lt.prototype.resetValidationMessage=Z2;lt.prototype.close=qr;lt.prototype.closePopup=qr;lt.prototype.closeModal=qr;lt.prototype.closeToast=qr;lt.prototype.rejectPromise=I2;lt.prototype.update=Q2;lt.prototype._destroy=X2;Object.assign(lt,B5);Object.keys(v5).forEach(t=>{lt[t]=function(...e){return Jn&&Jn[t]?Jn[t](...e):null}});lt.DismissReason=ko;lt.version="11.26.3";const K=lt;K.default=K;typeof document<"u"&&function(t,e){var n=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=e);else try{n.innerHTML=e}catch{n.innerText=e}}(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.15s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-timer-progress-bar-background: rgba(0, 0, 0, 0.3);--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;overflow-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:var(--swal2-timer-progress-bar-background)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;overflow-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}100%{transform:translate3d(0, 0, 0) scale(1);opacity:1}}@keyframes swal2-hide{0%{transform:translate3d(0, 0, 0) scale(1);opacity:1}100%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');function uD(){const t=mn(),e=go(),{user:n,profile:r,signOut:i}=cn(),[o,a]=E.useState(!1),{isDark:u,toggleDarkMode:d}=qn(),f=re(S=>S.currentLanguage),m=re(S=>S.setCurrentLanguage),[g,v]=E.useState(!1),w=async S=>{if(S!==f){K.fire({title:"Translating...",html:`
        <div class="flex flex-col items-center gap-4 py-4">
          <div class="animate-spin rounded-full h-16 w-16 border-4 border-heritage-200 border-t-heritage-700"></div>
          <p class="text-sm ${u?"text-neutral-300":"text-neutral-600"}">Please wait while we translate the interface...</p>
        </div>
      `,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,background:u?"#1f2937":"#ffffff",color:u?"#f3f4f6":"#000000",didOpen:()=>{K.showLoading()}}),v(!0);try{S!=="en"&&await rA(S),m(S),K.fire({title:"Translation Complete!",icon:"success",timer:1e3,showConfirmButton:!1,background:u?"#1f2937":"#ffffff",color:u?"#f3f4f6":"#000000"})}catch(x){console.error("Failed to change language:",x),await K.fire({title:"Translation Error",text:"Failed to translate the interface. Please try again.",icon:"error",confirmButtonColor:"#6f4e35",background:u?"#1f2937":"#ffffff",color:u?"#f3f4f6":"#000000"})}finally{v(!1)}}},_=()=>{a(!o)},k=()=>{a(!1)},j=async()=>{if((await K.fire({title:P("header.signOut",f),text:"Are you sure you want to sign out?",icon:"question",showCancelButton:!0,confirmButtonColor:"#6f4e35",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, sign out",background:u?"#1f2937":"#ffffff",color:u?"#f3f4f6":"#000000"})).isConfirmed){const{success:x,error:b}=await i();x?await K.fire({title:"Signed Out",text:"You have been successfully signed out.",icon:"success",confirmButtonColor:"#6f4e35",timer:1500,background:u?"#1f2937":"#ffffff",color:u?"#f3f4f6":"#000000"}):await K.fire({title:P("common.error",f),text:b||"Failed to sign out. Please try again.",icon:"error",confirmButtonColor:"#6f4e35",background:u?"#1f2937":"#ffffff",color:u?"#f3f4f6":"#000000"})}};return c.jsxs("header",{className:"fixed top-0 left-0 right-0 bg-white/95 dark:bg-neutral-800/95 backdrop-blur-sm border-b border-neutral-200 dark:border-neutral-700 z-[1000]",children:[c.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[c.jsxs(cr,{to:"/",className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-8 h-8 bg-heritage-700 rounded-lg flex items-center justify-center",children:c.jsx(Qc,{className:"w-5 h-5 text-white"})}),c.jsx("span",{className:"text-xl font-bold text-neutral-900 dark:text-white",children:"Echoes"})]}),c.jsxs("nav",{className:"hidden md:flex items-center gap-4",children:[c.jsx("div",{className:g?"opacity-50 pointer-events-none":"",children:c.jsx(Dy,{currentLanguage:f,onLanguageChange:w})}),c.jsx("button",{onClick:d,className:"p-2 rounded-lg text-heritage-700 dark:text-heritage-300 hover:bg-heritage-50 dark:hover:bg-neutral-700 transition-colors","aria-label":"Toggle dark mode",children:u?c.jsx(fw,{className:"w-5 h-5"}):c.jsx(cw,{className:"w-5 h-5"})}),c.jsxs(cr,{to:"/leaderboard",className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${e.pathname==="/leaderboard"?"bg-heritage-100 dark:bg-heritage-800 text-heritage-700 dark:text-heritage-300":"text-heritage-700 dark:text-heritage-300 hover:bg-heritage-50 dark:hover:bg-neutral-700"}`,children:[c.jsx(ei,{className:"w-5 h-5"}),c.jsx("span",{className:"font-medium",children:P("header.leaderboard",f)})]}),n&&c.jsxs(cr,{to:"/friends",className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${e.pathname==="/friends"?"bg-heritage-100 dark:bg-heritage-800 text-heritage-700 dark:text-heritage-300":"text-heritage-700 dark:text-heritage-300 hover:bg-heritage-50 dark:hover:bg-neutral-700"}`,children:[c.jsx(Or,{className:"w-5 h-5"}),c.jsx("span",{className:"font-medium",children:P("header.friends",f)})]}),n&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{onClick:()=>t("/profile"),className:"flex items-center gap-2 text-sm cursor-pointer hover:bg-heritage-50 dark:hover:bg-neutral-700 px-3 py-2 rounded-lg transition-colors",children:[c.jsx(Zs,{className:"w-4 h-4 text-heritage-700 dark:text-heritage-300"}),c.jsx("span",{className:"text-heritage-700 dark:text-heritage-300 font-medium",children:(r==null?void 0:r.username)||"User"})]}),(r==null?void 0:r.is_admin)&&c.jsx(cr,{to:"/admin",className:`p-2 rounded-lg transition-colors ${e.pathname==="/admin"?"bg-heritage-100 dark:bg-heritage-800 text-heritage-700 dark:text-heritage-300":"text-heritage-700 dark:text-heritage-300 hover:bg-heritage-50 dark:hover:bg-neutral-700"}`,"aria-label":P("header.admin",f),children:c.jsx(hw,{className:"w-5 h-5"})}),c.jsx("button",{onClick:j,className:"p-2 rounded-lg text-heritage-700 dark:text-heritage-300 hover:bg-heritage-50 dark:hover:bg-neutral-700 transition-colors","aria-label":P("header.signOut",f),children:c.jsx(aw,{className:"w-5 h-5"})})]}),!n&&c.jsx(cr,{to:"/login",className:"bg-heritage-700 hover:bg-heritage-800 text-white px-4 py-2 rounded-lg font-semibold transition-colors text-sm",children:P("header.login",f)})]}),c.jsx("button",{onClick:_,className:"md:hidden p-2 rounded-lg text-heritage-700 dark:text-heritage-300 hover:bg-heritage-50 dark:hover:bg-neutral-700 transition-colors","aria-label":"Toggle menu",children:o?c.jsx(Oe,{className:"w-6 h-6"}):c.jsx(xR,{className:"w-6 h-6"})})]}),c.jsx(ns,{children:o&&c.jsx(Pt.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2,ease:"easeInOut"},className:"md:hidden border-t border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 overflow-hidden",children:c.jsxs("nav",{className:"flex flex-col gap-2 px-4 py-4",children:[c.jsx("div",{className:`pb-2 border-b border-neutral-200 dark:border-neutral-700 ${g?"opacity-50 pointer-events-none":""}`,children:c.jsx(Dy,{currentLanguage:f,onLanguageChange:w,isMobile:!0})}),c.jsxs("button",{onClick:()=>{d(),k()},className:"flex items-center gap-2 px-3 py-2 rounded-lg text-heritage-700 dark:text-heritage-300 hover:bg-heritage-50 dark:hover:bg-neutral-700 transition-colors",children:[u?c.jsx(fw,{className:"w-5 h-5"}):c.jsx(cw,{className:"w-5 h-5"}),c.jsx("span",{className:"font-medium",children:u?"Light Mode":"Dark Mode"})]}),c.jsxs(cr,{to:"/leaderboard",onClick:k,className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${e.pathname==="/leaderboard"?"bg-heritage-100 dark:bg-heritage-800 text-heritage-700 dark:text-heritage-300":"text-heritage-700 dark:text-heritage-300 hover:bg-heritage-50 dark:hover:bg-neutral-700"}`,children:[c.jsx(ei,{className:"w-5 h-5"}),c.jsx("span",{className:"font-medium",children:"Leaderboard"})]}),n&&c.jsxs(cr,{to:"/friends",onClick:k,className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${e.pathname==="/friends"?"bg-heritage-100 dark:bg-heritage-800 text-heritage-700 dark:text-heritage-300":"text-heritage-700 dark:text-heritage-300 hover:bg-heritage-50 dark:hover:bg-neutral-700"}`,children:[c.jsx(Or,{className:"w-5 h-5"}),c.jsx("span",{className:"font-medium",children:P("header.friends",f)})]}),n&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{onClick:()=>{t("/profile"),k()},className:"flex items-center gap-2 text-sm cursor-pointer hover:bg-heritage-50 dark:hover:bg-neutral-700 px-3 py-2 rounded-lg transition-colors",children:[c.jsx(Zs,{className:"w-4 h-4 text-heritage-700 dark:text-heritage-300"}),c.jsx("span",{className:"text-heritage-700 dark:text-heritage-300 font-medium",children:(r==null?void 0:r.username)||"User"})]}),(r==null?void 0:r.is_admin)&&c.jsxs(cr,{to:"/admin",onClick:k,className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${e.pathname==="/admin"?"bg-heritage-100 dark:bg-heritage-800 text-heritage-700 dark:text-heritage-300":"text-heritage-700 dark:text-heritage-300 hover:bg-heritage-50 dark:hover:bg-neutral-700"}`,children:[c.jsx(hw,{className:"w-5 h-5"}),c.jsx("span",{className:"font-medium",children:"Admin Panel"})]}),c.jsxs("button",{onClick:()=>{j(),k()},className:"flex items-center gap-2 px-3 py-2 rounded-lg text-heritage-700 dark:text-heritage-300 hover:bg-heritage-50 dark:hover:bg-neutral-700 transition-colors",children:[c.jsx(aw,{className:"w-5 h-5"}),c.jsx("span",{className:"font-medium",children:"Logout"})]})]}),!n&&c.jsx(cr,{to:"/login",onClick:k,className:`p-2 rounded-lg transition-colors ${e.pathname==="/login"?"bg-heritage-100 dark:bg-heritage-800 text-heritage-700 dark:text-heritage-300":"text-heritage-700 dark:text-heritage-300 hover:bg-heritage-50 dark:hover:bg-neutral-700"}`,"aria-label":"Log In",children:c.jsx(Zs,{className:"w-5 h-5"})})]})})})]})}function dD(t,e){const n=E.useRef(e);E.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}function sS(t,e,n){e.center!==n.center&&t.setLatLng(e.center),e.radius!=null&&e.radius!==n.radius&&t.setRadius(e.radius)}const hD=1;function fD(t){return Object.freeze({__version:hD,map:t})}function ng(t,e){return Object.freeze({...t,...e})}const oS=E.createContext(null),aS=oS.Provider;function rg(){const t=E.useContext(oS);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function lS(t){function e(n,r){const{instance:i,context:o}=t(n).current;return E.useImperativeHandle(r,()=>i),n.children==null?null:nr.createElement(aS,{value:o},n.children)}return E.forwardRef(e)}function cS(t){function e(n,r){const{instance:i}=t(n).current;return E.useImperativeHandle(r,()=>i),null}return E.forwardRef(e)}function mD(t){return function(n){const r=rg(),i=t(n,r),{instance:o}=i.current,a=E.useRef(n.position),{position:u}=n;return E.useEffect(function(){return o.addTo(r.map),function(){o.remove()}},[r.map,o]),E.useEffect(function(){u!=null&&u!==a.current&&(o.setPosition(u),a.current=u)},[o,u]),i}}function uS(t,e){const n=E.useRef();E.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function ig(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var im={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(zC,function(n){var r="1.9.4";function i(s){var l,h,p,y;for(h=1,p=arguments.length;h<p;h++){y=arguments[h];for(l in y)s[l]=y[l]}return s}var o=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function a(s,l){var h=Array.prototype.slice;if(s.bind)return s.bind.apply(s,h.call(arguments,1));var p=h.call(arguments,2);return function(){return s.apply(l,p.length?p.concat(h.call(arguments)):arguments)}}var u=0;function d(s){return"_leaflet_id"in s||(s._leaflet_id=++u),s._leaflet_id}function f(s,l,h){var p,y,C,T;return T=function(){p=!1,y&&(C.apply(h,y),y=!1)},C=function(){p?y=arguments:(s.apply(h,arguments),setTimeout(T,l),p=!0)},C}function m(s,l,h){var p=l[1],y=l[0],C=p-y;return s===p&&h?s:((s-y)%C+C)%C+y}function g(){return!1}function v(s,l){if(l===!1)return s;var h=Math.pow(10,l===void 0?6:l);return Math.round(s*h)/h}function w(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function _(s){return w(s).split(/\s+/)}function k(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var h in l)s.options[h]=l[h];return s.options}function j(s,l,h){var p=[];for(var y in s)p.push(encodeURIComponent(h?y.toUpperCase():y)+"="+encodeURIComponent(s[y]));return(!l||l.indexOf("?")===-1?"?":"&")+p.join("&")}var S=/\{ *([\w_ -]+) *\}/g;function x(s,l){return s.replace(S,function(h,p){var y=l[p];if(y===void 0)throw new Error("No value provided for variable "+h);return typeof y=="function"&&(y=y(l)),y})}var b=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function N(s,l){for(var h=0;h<s.length;h++)if(s[h]===l)return h;return-1}var R="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function B(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var I=0;function F(s){var l=+new Date,h=Math.max(0,16-(l-I));return I=l+h,window.setTimeout(s,h)}var $=window.requestAnimationFrame||B("RequestAnimationFrame")||F,X=window.cancelAnimationFrame||B("CancelAnimationFrame")||B("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function ne(s,l,h){if(h&&$===F)s.call(l);else return $.call(window,a(s,l))}function Q(s){s&&X.call(window,s)}var W={__proto__:null,extend:i,create:o,bind:a,get lastId(){return u},stamp:d,throttle:f,wrapNum:m,falseFn:g,formatNum:v,trim:w,splitWords:_,setOptions:k,getParamString:j,template:x,isArray:b,indexOf:N,emptyImageUrl:R,requestFn:$,cancelFn:X,requestAnimFrame:ne,cancelAnimFrame:Q};function q(){}q.extend=function(s){var l=function(){k(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=l.__super__=this.prototype,p=o(h);p.constructor=l,l.prototype=p;for(var y in this)Object.prototype.hasOwnProperty.call(this,y)&&y!=="prototype"&&y!=="__super__"&&(l[y]=this[y]);return s.statics&&i(l,s.statics),s.includes&&(ue(s.includes),i.apply(null,[p].concat(s.includes))),i(p,s),delete p.statics,delete p.includes,p.options&&(p.options=h.options?o(h.options):{},i(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var C=0,T=p._initHooks.length;C<T;C++)p._initHooks[C].call(this)}},l},q.include=function(s){var l=this.prototype.options;return i(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},q.mergeOptions=function(s){return i(this.prototype.options,s),this},q.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),h=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};function ue(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=b(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var M={on:function(s,l,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],l);else{s=_(s);for(var y=0,C=s.length;y<C;y++)this._on(s[y],l,h)}return this},off:function(s,l,h){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],l);else{s=_(s);for(var y=arguments.length===1,C=0,T=s.length;C<T;C++)y?this._off(s[C]):this._off(s[C],l,h)}return this},_on:function(s,l,h,p){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,h)===!1){h===this&&(h=void 0);var y={fn:l,ctx:h};p&&(y.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(y)}},_off:function(s,l,h){var p,y,C;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(y=0,C=p.length;y<C;y++)p[y].fn=g;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var T=this._listens(s,l,h);if(T!==!1){var A=p[T];this._firingCount&&(A.fn=g,this._events[s]=p=p.slice()),p.splice(T,1)}}},fire:function(s,l,h){if(!this.listens(s,h))return this;var p=i({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var y=this._events[s];if(y){this._firingCount=this._firingCount+1||1;for(var C=0,T=y.length;C<T;C++){var A=y[C],z=A.fn;A.once&&this.off(s,z,A.ctx),z.call(A.ctx||this,p)}this._firingCount--}}return h&&this._propagateEvent(p),this},listens:function(s,l,h,p){typeof s!="string"&&console.warn('"string" type argument expected');var y=l;typeof l!="function"&&(p=!!l,y=void 0,h=void 0);var C=this._events&&this._events[s];if(C&&C.length&&this._listens(s,y,h)!==!1)return!0;if(p){for(var T in this._eventParents)if(this._eventParents[T].listens(s,l,h,p))return!0}return!1},_listens:function(s,l,h){if(!this._events)return!1;var p=this._events[s]||[];if(!l)return!!p.length;h===this&&(h=void 0);for(var y=0,C=p.length;y<C;y++)if(p[y].fn===l&&p[y].ctx===h)return y;return!1},once:function(s,l,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],l,!0);else{s=_(s);for(var y=0,C=s.length;y<C;y++)this._on(s[y],l,h,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[d(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[d(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,i({layer:s.target,propagatedFrom:s.target},s),!0)}};M.addEventListener=M.on,M.removeEventListener=M.clearAllEventListeners=M.off,M.addOneTimeEventListener=M.once,M.fireEvent=M.fire,M.hasEventListeners=M.listens;var ee=q.extend(M);function D(s,l,h){this.x=h?Math.round(s):s,this.y=h?Math.round(l):l}var H=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};D.prototype={clone:function(){return new D(this.x,this.y)},add:function(s){return this.clone()._add(U(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(U(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new D(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new D(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=H(this.x),this.y=H(this.y),this},distanceTo:function(s){s=U(s);var l=s.x-this.x,h=s.y-this.y;return Math.sqrt(l*l+h*h)},equals:function(s){return s=U(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=U(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function U(s,l,h){return s instanceof D?s:b(s)?new D(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new D(s.x,s.y):new D(s,l,h)}function O(s,l){if(s)for(var h=l?[s,l]:s,p=0,y=h.length;p<y;p++)this.extend(h[p])}O.prototype={extend:function(s){var l,h;if(!s)return this;if(s instanceof D||typeof s[0]=="number"||"x"in s)l=h=U(s);else if(s=Y(s),l=s.min,h=s.max,!l||!h)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=h.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(h.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(h.y,this.max.y)),this},getCenter:function(s){return U((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return U(this.min.x,this.max.y)},getTopRight:function(){return U(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,h;return typeof s[0]=="number"||s instanceof D?s=U(s):s=Y(s),s instanceof O?(l=s.min,h=s.max):l=h=s,l.x>=this.min.x&&h.x<=this.max.x&&l.y>=this.min.y&&h.y<=this.max.y},intersects:function(s){s=Y(s);var l=this.min,h=this.max,p=s.min,y=s.max,C=y.x>=l.x&&p.x<=h.x,T=y.y>=l.y&&p.y<=h.y;return C&&T},overlaps:function(s){s=Y(s);var l=this.min,h=this.max,p=s.min,y=s.max,C=y.x>l.x&&p.x<h.x,T=y.y>l.y&&p.y<h.y;return C&&T},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,h=this.max,p=Math.abs(l.x-h.x)*s,y=Math.abs(l.y-h.y)*s;return Y(U(l.x-p,l.y-y),U(h.x+p,h.y+y))},equals:function(s){return s?(s=Y(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function Y(s,l){return!s||s instanceof O?s:new O(s,l)}function ce(s,l){if(s)for(var h=l?[s,l]:s,p=0,y=h.length;p<y;p++)this.extend(h[p])}ce.prototype={extend:function(s){var l=this._southWest,h=this._northEast,p,y;if(s instanceof we)p=s,y=s;else if(s instanceof ce){if(p=s._southWest,y=s._northEast,!p||!y)return this}else return s?this.extend(te(s)||ge(s)):this;return!l&&!h?(this._southWest=new we(p.lat,p.lng),this._northEast=new we(y.lat,y.lng)):(l.lat=Math.min(p.lat,l.lat),l.lng=Math.min(p.lng,l.lng),h.lat=Math.max(y.lat,h.lat),h.lng=Math.max(y.lng,h.lng)),this},pad:function(s){var l=this._southWest,h=this._northEast,p=Math.abs(l.lat-h.lat)*s,y=Math.abs(l.lng-h.lng)*s;return new ce(new we(l.lat-p,l.lng-y),new we(h.lat+p,h.lng+y))},getCenter:function(){return new we((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new we(this.getNorth(),this.getWest())},getSouthEast:function(){return new we(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof we||"lat"in s?s=te(s):s=ge(s);var l=this._southWest,h=this._northEast,p,y;return s instanceof ce?(p=s.getSouthWest(),y=s.getNorthEast()):p=y=s,p.lat>=l.lat&&y.lat<=h.lat&&p.lng>=l.lng&&y.lng<=h.lng},intersects:function(s){s=ge(s);var l=this._southWest,h=this._northEast,p=s.getSouthWest(),y=s.getNorthEast(),C=y.lat>=l.lat&&p.lat<=h.lat,T=y.lng>=l.lng&&p.lng<=h.lng;return C&&T},overlaps:function(s){s=ge(s);var l=this._southWest,h=this._northEast,p=s.getSouthWest(),y=s.getNorthEast(),C=y.lat>l.lat&&p.lat<h.lat,T=y.lng>l.lng&&p.lng<h.lng;return C&&T},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=ge(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ge(s,l){return s instanceof ce?s:new ce(s,l)}function we(s,l,h){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,h!==void 0&&(this.alt=+h)}we.prototype={equals:function(s,l){if(!s)return!1;s=te(s);var h=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return h<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+v(this.lat,s)+", "+v(this.lng,s)+")"},distanceTo:function(s){return ve.distance(this,te(s))},wrap:function(){return ve.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,h=l/Math.cos(Math.PI/180*this.lat);return ge([this.lat-l,this.lng-h],[this.lat+l,this.lng+h])},clone:function(){return new we(this.lat,this.lng,this.alt)}};function te(s,l,h){return s instanceof we?s:b(s)&&typeof s[0]!="object"?s.length===3?new we(s[0],s[1],s[2]):s.length===2?new we(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new we(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new we(s,l,h)}var Se={latLngToPoint:function(s,l){var h=this.projection.project(s),p=this.scale(l);return this.transformation._transform(h,p)},pointToLatLng:function(s,l){var h=this.scale(l),p=this.transformation.untransform(s,h);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,h=this.scale(s),p=this.transformation.transform(l.min,h),y=this.transformation.transform(l.max,h);return new O(p,y)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?m(s.lng,this.wrapLng,!0):s.lng,h=this.wrapLat?m(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new we(h,l,p)},wrapLatLngBounds:function(s){var l=s.getCenter(),h=this.wrapLatLng(l),p=l.lat-h.lat,y=l.lng-h.lng;if(p===0&&y===0)return s;var C=s.getSouthWest(),T=s.getNorthEast(),A=new we(C.lat-p,C.lng-y),z=new we(T.lat-p,T.lng-y);return new ce(A,z)}},ve=i({},Se,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var h=Math.PI/180,p=s.lat*h,y=l.lat*h,C=Math.sin((l.lat-s.lat)*h/2),T=Math.sin((l.lng-s.lng)*h/2),A=C*C+Math.cos(p)*Math.cos(y)*T*T,z=2*Math.atan2(Math.sqrt(A),Math.sqrt(1-A));return this.R*z}}),Me=6378137,xe={R:Me,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,h=this.MAX_LATITUDE,p=Math.max(Math.min(h,s.lat),-h),y=Math.sin(p*l);return new D(this.R*s.lng*l,this.R*Math.log((1+y)/(1-y))/2)},unproject:function(s){var l=180/Math.PI;return new we((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=Me*Math.PI;return new O([-s,-s],[s,s])}()};function Ne(s,l,h,p){if(b(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=h,this._d=p}Ne.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new D((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function He(s,l,h,p){return new Ne(s,l,h,p)}var We=i({},ve,{code:"EPSG:3857",projection:xe,transformation:function(){var s=.5/(Math.PI*xe.R);return He(s,.5,-s,.5)}()}),Ze=i({},We,{code:"EPSG:900913"});function bt(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Z(s,l){var h="",p,y,C,T,A,z;for(p=0,C=s.length;p<C;p++){for(A=s[p],y=0,T=A.length;y<T;y++)z=A[y],h+=(y?"L":"M")+z.x+" "+z.y;h+=l?ae.svg?"z":"x":""}return h||"M0 0"}var Ee=document.documentElement.style,De="ActiveXObject"in window,_e=De&&!document.addEventListener,Nt="msLaunchUri"in navigator&&!("documentMode"in document),ir=Hn("webkit"),So=Hn("android"),gi=Hn("android 2")||Hn("android 3"),Ju=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),xS=So&&Hn("Google")&&Ju<537&&!("AudioNode"in window),Qu=!!window.opera,sg=!Nt&&Hn("chrome"),og=Hn("gecko")&&!ir&&!Qu&&!De,_S=!sg&&Hn("safari"),ag=Hn("phantom"),lg="OTransition"in Ee,bS=navigator.platform.indexOf("Win")===0,cg=De&&"transition"in Ee,Xu="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!gi,ug="MozPerspective"in Ee,kS=!window.L_DISABLE_3D&&(cg||Xu||ug)&&!lg&&!ag,Co=typeof orientation<"u"||Hn("mobile"),SS=Co&&ir,CS=Co&&Xu,dg=!window.PointerEvent&&window.MSPointerEvent,hg=!!(window.PointerEvent||dg),fg="ontouchstart"in window||!!window.TouchEvent,PS=!window.L_NO_TOUCH&&(fg||hg),ES=Co&&Qu,jS=Co&&og,NS=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,TS=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",g,l),window.removeEventListener("testPassiveEventSupport",g,l)}catch{}return s}(),LS=function(){return!!document.createElement("canvas").getContext}(),ed=!!(document.createElementNS&&bt("svg").createSVGRect),RS=!!ed&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),AS=!ed&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),OS=navigator.platform.indexOf("Mac")===0,IS=navigator.platform.indexOf("Linux")===0;function Hn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var ae={ie:De,ielt9:_e,edge:Nt,webkit:ir,android:So,android23:gi,androidStock:xS,opera:Qu,chrome:sg,gecko:og,safari:_S,phantom:ag,opera12:lg,win:bS,ie3d:cg,webkit3d:Xu,gecko3d:ug,any3d:kS,mobile:Co,mobileWebkit:SS,mobileWebkit3d:CS,msPointer:dg,pointer:hg,touch:PS,touchNative:fg,mobileOpera:ES,mobileGecko:jS,retina:NS,passiveEvents:TS,canvas:LS,svg:ed,vml:AS,inlineSvg:RS,mac:OS,linux:IS},mg=ae.msPointer?"MSPointerDown":"pointerdown",pg=ae.msPointer?"MSPointerMove":"pointermove",gg=ae.msPointer?"MSPointerUp":"pointerup",vg=ae.msPointer?"MSPointerCancel":"pointercancel",td={touchstart:mg,touchmove:pg,touchend:gg,touchcancel:vg},wg={touchstart:zS,touchmove:cl,touchend:cl,touchcancel:cl},ss={},yg=!1;function MS(s,l,h){return l==="touchstart"&&US(),wg[l]?(h=wg[l].bind(this,h),s.addEventListener(td[l],h,!1),h):(console.warn("wrong event specified:",l),g)}function DS(s,l,h){if(!td[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(td[l],h,!1)}function BS(s){ss[s.pointerId]=s}function $S(s){ss[s.pointerId]&&(ss[s.pointerId]=s)}function xg(s){delete ss[s.pointerId]}function US(){yg||(document.addEventListener(mg,BS,!0),document.addEventListener(pg,$S,!0),document.addEventListener(gg,xg,!0),document.addEventListener(vg,xg,!0),yg=!0)}function cl(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var h in ss)l.touches.push(ss[h]);l.changedTouches=[l],s(l)}}function zS(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&kt(l),cl(s,l)}function FS(s){var l={},h,p;for(p in s)h=s[p],l[p]=h&&h.bind?h.bind(s):h;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var VS=200;function qS(s,l){s.addEventListener("dblclick",l);var h=0,p;function y(C){if(C.detail!==1){p=C.detail;return}if(!(C.pointerType==="mouse"||C.sourceCapabilities&&!C.sourceCapabilities.firesTouchEvents)){var T=Cg(C);if(!(T.some(function(z){return z instanceof HTMLLabelElement&&z.attributes.for})&&!T.some(function(z){return z instanceof HTMLInputElement||z instanceof HTMLSelectElement}))){var A=Date.now();A-h<=VS?(p++,p===2&&l(FS(C))):p=1,h=A}}}return s.addEventListener("click",y),{dblclick:l,simDblclick:y}}function HS(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var nd=hl(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Po=hl(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),_g=Po==="webkitTransition"||Po==="OTransition"?Po+"End":"transitionend";function bg(s){return typeof s=="string"?document.getElementById(s):s}function Eo(s,l){var h=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!h||h==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);h=p?p[l]:null}return h==="auto"?null:h}function Le(s,l,h){var p=document.createElement(s);return p.className=l||"",h&&h.appendChild(p),p}function Ke(s){var l=s.parentNode;l&&l.removeChild(s)}function ul(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function os(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function as(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function rd(s,l){if(s.classList!==void 0)return s.classList.contains(l);var h=dl(s);return h.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(h)}function be(s,l){if(s.classList!==void 0)for(var h=_(l),p=0,y=h.length;p<y;p++)s.classList.add(h[p]);else if(!rd(s,l)){var C=dl(s);id(s,(C?C+" ":"")+l)}}function rt(s,l){s.classList!==void 0?s.classList.remove(l):id(s,w((" "+dl(s)+" ").replace(" "+l+" "," ")))}function id(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function dl(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function vn(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&WS(s,l)}function WS(s,l){var h=!1,p="DXImageTransform.Microsoft.Alpha";try{h=s.filters.item(p)}catch{if(l===1)return}l=Math.round(l*100),h?(h.Enabled=l!==100,h.Opacity=l):s.style.filter+=" progid:"+p+"(opacity="+l+")"}function hl(s){for(var l=document.documentElement.style,h=0;h<s.length;h++)if(s[h]in l)return s[h];return!1}function vi(s,l,h){var p=l||new D(0,0);s.style[nd]=(ae.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(h?" scale("+h+")":"")}function ct(s,l){s._leaflet_pos=l,ae.any3d?vi(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function wi(s){return s._leaflet_pos||new D(0,0)}var jo,No,sd;if("onselectstart"in document)jo=function(){ye(window,"selectstart",kt)},No=function(){Be(window,"selectstart",kt)};else{var To=hl(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);jo=function(){if(To){var s=document.documentElement.style;sd=s[To],s[To]="none"}},No=function(){To&&(document.documentElement.style[To]=sd,sd=void 0)}}function od(){ye(window,"dragstart",kt)}function ad(){Be(window,"dragstart",kt)}var fl,ld;function cd(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(ml(),fl=s,ld=s.style.outlineStyle,s.style.outlineStyle="none",ye(window,"keydown",ml))}function ml(){fl&&(fl.style.outlineStyle=ld,fl=void 0,ld=void 0,Be(window,"keydown",ml))}function kg(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function ud(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var ZS={__proto__:null,TRANSFORM:nd,TRANSITION:Po,TRANSITION_END:_g,get:bg,getStyle:Eo,create:Le,remove:Ke,empty:ul,toFront:os,toBack:as,hasClass:rd,addClass:be,removeClass:rt,setClass:id,getClass:dl,setOpacity:vn,testProp:hl,setTransform:vi,setPosition:ct,getPosition:wi,get disableTextSelection(){return jo},get enableTextSelection(){return No},disableImageDrag:od,enableImageDrag:ad,preventOutline:cd,restoreOutline:ml,getSizedParentNode:kg,getScale:ud};function ye(s,l,h,p){if(l&&typeof l=="object")for(var y in l)hd(s,y,l[y],h);else{l=_(l);for(var C=0,T=l.length;C<T;C++)hd(s,l[C],h,p)}return this}var Wn="_leaflet_events";function Be(s,l,h,p){if(arguments.length===1)Sg(s),delete s[Wn];else if(l&&typeof l=="object")for(var y in l)fd(s,y,l[y],h);else if(l=_(l),arguments.length===2)Sg(s,function(A){return N(l,A)!==-1});else for(var C=0,T=l.length;C<T;C++)fd(s,l[C],h,p);return this}function Sg(s,l){for(var h in s[Wn]){var p=h.split(/\d/)[0];(!l||l(p))&&fd(s,p,null,null,h)}}var dd={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function hd(s,l,h,p){var y=l+d(h)+(p?"_"+d(p):"");if(s[Wn]&&s[Wn][y])return this;var C=function(A){return h.call(p||s,A||window.event)},T=C;!ae.touchNative&&ae.pointer&&l.indexOf("touch")===0?C=MS(s,l,C):ae.touch&&l==="dblclick"?C=qS(s,C):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(dd[l]||l,C,ae.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(C=function(A){A=A||window.event,pd(s,A)&&T(A)},s.addEventListener(dd[l],C,!1)):s.addEventListener(l,T,!1):s.attachEvent("on"+l,C),s[Wn]=s[Wn]||{},s[Wn][y]=C}function fd(s,l,h,p,y){y=y||l+d(h)+(p?"_"+d(p):"");var C=s[Wn]&&s[Wn][y];if(!C)return this;!ae.touchNative&&ae.pointer&&l.indexOf("touch")===0?DS(s,l,C):ae.touch&&l==="dblclick"?HS(s,C):"removeEventListener"in s?s.removeEventListener(dd[l]||l,C,!1):s.detachEvent("on"+l,C),s[Wn][y]=null}function yi(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function md(s){return hd(s,"wheel",yi),this}function Lo(s){return ye(s,"mousedown touchstart dblclick contextmenu",yi),s._leaflet_disable_click=!0,this}function kt(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function xi(s){return kt(s),yi(s),this}function Cg(s){if(s.composedPath)return s.composedPath();for(var l=[],h=s.target;h;)l.push(h),h=h.parentNode;return l}function Pg(s,l){if(!l)return new D(s.clientX,s.clientY);var h=ud(l),p=h.boundingClientRect;return new D((s.clientX-p.left)/h.x-l.clientLeft,(s.clientY-p.top)/h.y-l.clientTop)}var GS=ae.linux&&ae.chrome?window.devicePixelRatio:ae.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Eg(s){return ae.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/GS:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function pd(s,l){var h=l.relatedTarget;if(!h)return!0;try{for(;h&&h!==s;)h=h.parentNode}catch{return!1}return h!==s}var KS={__proto__:null,on:ye,off:Be,stopPropagation:yi,disableScrollPropagation:md,disableClickPropagation:Lo,preventDefault:kt,stop:xi,getPropagationPath:Cg,getMousePosition:Pg,getWheelDelta:Eg,isExternalTarget:pd,addListener:ye,removeListener:Be},jg=ee.extend({run:function(s,l,h,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=wi(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=ne(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,h=this._duration*1e3;l<h?this._runFrame(this._easeOut(l/h),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var h=this._startPos.add(this._offset.multiplyBy(s));l&&h._round(),ct(this._el,h),this.fire("step")},_complete:function(){Q(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),je=ee.extend({options:{crs:We,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=k(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(te(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Po&&ae.any3d&&!ae.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ye(this._proxy,_g,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,h){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(te(s),l,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&h!==!0){h.animate!==void 0&&(h.zoom=i({animate:h.animate},h.zoom),h.pan=i({animate:h.animate,duration:h.duration},h.pan));var p=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,h.zoom):this._tryAnimatedPan(s,h.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,h.pan&&h.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,h){var p=this.getZoomScale(l),y=this.getSize().divideBy(2),C=s instanceof D?s:this.latLngToContainerPoint(s),T=C.subtract(y).multiplyBy(1-1/p),A=this.containerPointToLatLng(y.add(T));return this.setView(A,l,{zoom:h})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():ge(s);var h=U(l.paddingTopLeft||l.padding||[0,0]),p=U(l.paddingBottomRight||l.padding||[0,0]),y=this.getBoundsZoom(s,!1,h.add(p));if(y=typeof l.maxZoom=="number"?Math.min(l.maxZoom,y):y,y===1/0)return{center:s.getCenter(),zoom:y};var C=p.subtract(h).divideBy(2),T=this.project(s.getSouthWest(),y),A=this.project(s.getNorthEast(),y),z=this.unproject(T.add(A).divideBy(2).add(C),y);return{center:z,zoom:y}},fitBounds:function(s,l){if(s=ge(s),!s.isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(s,l);return this.setView(h.center,h.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=U(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new jg,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){be(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,h,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,h){if(h=h||{},h.animate===!1||!ae.any3d)return this.setView(s,l,h);this._stop();var p=this.project(this.getCenter()),y=this.project(s),C=this.getSize(),T=this._zoom;s=te(s),l=l===void 0?T:l;var A=Math.max(C.x,C.y),z=A*this.getZoomScale(T,l),G=y.distanceTo(p)||1,ie=1.42,fe=ie*ie;function Ce(ut){var Pl=ut?-1:1,DC=ut?z:A,BC=z*z-A*A+Pl*fe*fe*G*G,$C=2*DC*fe*G,Pd=BC/$C,l0=Math.sqrt(Pd*Pd+1)-Pd,UC=l0<1e-9?-18:Math.log(l0);return UC}function Bt(ut){return(Math.exp(ut)-Math.exp(-ut))/2}function vt(ut){return(Math.exp(ut)+Math.exp(-ut))/2}function yn(ut){return Bt(ut)/vt(ut)}var Zt=Ce(0);function fs(ut){return A*(vt(Zt)/vt(Zt+ie*ut))}function AC(ut){return A*(vt(Zt)*yn(Zt+ie*ut)-Bt(Zt))/fe}function OC(ut){return 1-Math.pow(1-ut,1.5)}var IC=Date.now(),o0=(Ce(1)-Zt)/ie,MC=h.duration?1e3*h.duration:1e3*o0*.8;function a0(){var ut=(Date.now()-IC)/MC,Pl=OC(ut)*o0;ut<=1?(this._flyToFrame=ne(a0,this),this._move(this.unproject(p.add(y.subtract(p).multiplyBy(AC(Pl)/G)),T),this.getScaleZoom(A/fs(Pl),T),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,h.noMoveStart),a0.call(this),this},flyToBounds:function(s,l){var h=this._getBoundsCenterZoom(s,l);return this.flyTo(h.center,h.zoom,l)},setMaxBounds:function(s){return s=ge(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var h=this.getCenter(),p=this._limitCenter(h,this._zoom,ge(s));return h.equals(p)||this.panTo(p,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var h=U(l.paddingTopLeft||l.padding||[0,0]),p=U(l.paddingBottomRight||l.padding||[0,0]),y=this.project(this.getCenter()),C=this.project(s),T=this.getPixelBounds(),A=Y([T.min.add(h),T.max.subtract(p)]),z=A.getSize();if(!A.contains(C)){this._enforcingBounds=!0;var G=C.subtract(A.getCenter()),ie=A.extend(C).getSize().subtract(z);y.x+=G.x<0?-ie.x:ie.x,y.y+=G.y<0?-ie.y:ie.y,this.panTo(this.unproject(y),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=i({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),p=l.divideBy(2).round(),y=h.divideBy(2).round(),C=p.subtract(y);return!C.x&&!C.y?this:(s.animate&&s.pan?this.panBy(C):(s.pan&&this._rawPanBy(C),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:h}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=i({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),h=a(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,h,s):navigator.geolocation.getCurrentPosition(l,h,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,h=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,h=s.coords.longitude,p=new we(l,h),y=p.toBounds(s.coords.accuracy*2),C=this._locateOptions;if(C.setView){var T=this.getBoundsZoom(y);this.setView(p,C.maxZoom?Math.min(T,C.maxZoom):T)}var A={latlng:p,bounds:y,timestamp:s.timestamp};for(var z in s.coords)typeof s.coords[z]=="number"&&(A[z]=s.coords[z]);this.fire("locationfound",A)}},addHandler:function(s,l){if(!l)return this;var h=this[s]=new l(this);return this._handlers.push(h),this.options[s]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ke(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Q(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)Ke(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var h="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=Le("div",h,l||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),h=this.unproject(s.getTopRight());return new ce(l,h)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,h){s=ge(s),h=U(h||[0,0]);var p=this.getZoom()||0,y=this.getMinZoom(),C=this.getMaxZoom(),T=s.getNorthWest(),A=s.getSouthEast(),z=this.getSize().subtract(h),G=Y(this.project(A,p),this.project(T,p)).getSize(),ie=ae.any3d?this.options.zoomSnap:1,fe=z.x/G.x,Ce=z.y/G.y,Bt=l?Math.max(fe,Ce):Math.min(fe,Ce);return p=this.getScaleZoom(Bt,p),ie&&(p=Math.round(p/(ie/100))*(ie/100),p=l?Math.ceil(p/ie)*ie:Math.floor(p/ie)*ie),Math.max(y,Math.min(C,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new D(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var h=this._getTopLeftPoint(s,l);return new O(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var h=this.options.crs;return l=l===void 0?this._zoom:l,h.scale(s)/h.scale(l)},getScaleZoom:function(s,l){var h=this.options.crs;l=l===void 0?this._zoom:l;var p=h.zoom(s*h.scale(l));return isNaN(p)?1/0:p},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(te(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(U(s),l)},layerPointToLatLng:function(s){var l=U(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(te(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(te(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(ge(s))},distance:function(s,l){return this.options.crs.distance(te(s),te(l))},containerPointToLayerPoint:function(s){return U(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return U(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(U(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(te(s)))},mouseEventToContainerPoint:function(s){return Pg(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=bg(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ye(l,"scroll",this._onScroll,this),this._containerId=d(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&ae.any3d,be(s,"leaflet-container"+(ae.touch?" leaflet-touch":"")+(ae.retina?" leaflet-retina":"")+(ae.ielt9?" leaflet-oldie":"")+(ae.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=Eo(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ct(this._mapPane,new D(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(be(s.markerPane,"leaflet-zoom-hide"),be(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,h){ct(this._mapPane,new D(0,0));var p=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var y=this._zoom!==l;this._moveStart(y,h)._move(s,l)._moveEnd(y),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,h,p){l===void 0&&(l=this._zoom);var y=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?h&&h.pinch&&this.fire("zoom",h):((y||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Q(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){ct(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[d(this._container)]=this;var l=s?Be:ye;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),ae.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Q(this._resizeRequest),this._resizeRequest=ne(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var h=[],p,y=l==="mouseout"||l==="mouseover",C=s.target||s.srcElement,T=!1;C;){if(p=this._targets[d(C)],p&&(l==="click"||l==="preclick")&&this._draggableMoved(p)){T=!0;break}if(p&&p.listens(l,!0)&&(y&&!pd(C,s)||(h.push(p),y))||C===this._container)break;C=C.parentNode}return!h.length&&!T&&!y&&this.listens(l,!0)&&(h=[this]),h},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var h=s.type;h==="mousedown"&&cd(l),this._fireDOMEvent(s,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,h){if(s.type==="click"){var p=i({},s);p.type="preclick",this._fireDOMEvent(p,p.type,h)}var y=this._findEventTargets(s,l);if(h){for(var C=[],T=0;T<h.length;T++)h[T].listens(l,!0)&&C.push(h[T]);y=C.concat(y)}if(y.length){l==="contextmenu"&&kt(s);var A=y[0],z={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var G=A.getLatLng&&(!A._radius||A._radius<=10);z.containerPoint=G?this.latLngToContainerPoint(A.getLatLng()):this.mouseEventToContainerPoint(s),z.layerPoint=this.containerPointToLayerPoint(z.containerPoint),z.latlng=G?A.getLatLng():this.layerPointToLatLng(z.layerPoint)}for(T=0;T<y.length;T++)if(y[T].fire(l,z,!0),z.originalEvent._stopped||y[T].options.bubblingMouseEvents===!1&&N(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return wi(this._mapPane)||new D(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var h=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return h.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var h=this.getSize()._divideBy(2);return this.project(s,l)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,h){var p=this._getNewPixelOrigin(h,l);return this.project(s,l)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,l,h){var p=this._getNewPixelOrigin(h,l);return Y([this.project(s.getSouthWest(),l)._subtract(p),this.project(s.getNorthWest(),l)._subtract(p),this.project(s.getSouthEast(),l)._subtract(p),this.project(s.getNorthEast(),l)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,h){if(!h)return s;var p=this.project(s,l),y=this.getSize().divideBy(2),C=new O(p.subtract(y),p.add(y)),T=this._getBoundsOffset(C,h,l);return Math.abs(T.x)<=1&&Math.abs(T.y)<=1?s:this.unproject(p.add(T),l)},_limitOffset:function(s,l){if(!l)return s;var h=this.getPixelBounds(),p=new O(h.min.add(s),h.max.add(s));return s.add(this._getBoundsOffset(p,l))},_getBoundsOffset:function(s,l,h){var p=Y(this.project(l.getNorthEast(),h),this.project(l.getSouthWest(),h)),y=p.min.subtract(s.min),C=p.max.subtract(s.max),T=this._rebound(y.x,-C.x),A=this._rebound(y.y,-C.y);return new D(T,A)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),h=this.getMaxZoom(),p=ae.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(l,Math.min(h,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){rt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var h=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(h)?!1:(this.panBy(h,l),!0)},_createAnimProxy:function(){var s=this._proxy=Le("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var h=nd,p=this._proxy.style[h];vi(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),p===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ke(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();vi(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||h.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(l),y=this._getCenterOffset(s)._divideBy(1-1/p);return h.animate!==!0&&!this.getSize().contains(y)?!1:(ne(function(){this._moveStart(!0,h.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,h,p){this._mapPane&&(h&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,be(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&rt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function YS(s,l){return new je(s,l)}var Ln=q.extend({options:{position:"topright"},initialize:function(s){k(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),h=this.getPosition(),p=s._controlCorners[h];return be(l,"leaflet-control"),h.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ke(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),Ro=function(s){return new Ln(s)};je.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",h=this._controlContainer=Le("div",l+"control-container",this._container);function p(y,C){var T=l+y+" "+l+C;s[y+C]=Le("div",T,h)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)Ke(this._controlCorners[s]);Ke(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ng=Ln.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,h,p){return h<p?-1:p<h?1:0}},initialize:function(s,l,h){k(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in l)this._addLayer(l[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return Ln.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(d(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){be(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(be(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):rt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return rt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=Le("div",s),h=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Lo(l),md(l);var p=this._section=Le("section",s+"-list");h&&(this._map.on("click",this.collapse,this),ye(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var y=this._layersLink=Le("a",s+"-toggle",l);y.href="#",y.title="Layers",y.setAttribute("role","button"),ye(y,{keydown:function(C){C.keyCode===13&&this._expandSafely()},click:function(C){kt(C),this._expandSafely()}},this),h||this.expand(),this._baseLayersList=Le("div",s+"-base",p),this._separator=Le("div",s+"-separator",p),this._overlaysList=Le("div",s+"-overlays",p),l.appendChild(p)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&d(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,h){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:h}),this.options.sortLayers&&this._layers.sort(a(function(p,y){return this.options.sortFunction(p.layer,y.layer,p.name,y.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ul(this._baseLayersList),ul(this._overlaysList),this._layerControlInputs=[];var s,l,h,p,y=0;for(h=0;h<this._layers.length;h++)p=this._layers[h],this._addItem(p),l=l||p.overlay,s=s||!p.overlay,y+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&y>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(d(s.target)),h=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;h&&this._map.fire(h,l)},_createRadioElement:function(s,l){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=h,p.firstChild},_addItem:function(s){var l=document.createElement("label"),h=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=h):p=this._createRadioElement("leaflet-base-layers_"+d(this),h),this._layerControlInputs.push(p),p.layerId=d(s.layer),ye(p,"click",this._onInputClick,this);var y=document.createElement("span");y.innerHTML=" "+s.name;var C=document.createElement("span");l.appendChild(C),C.appendChild(p),C.appendChild(y);var T=s.overlay?this._overlaysList:this._baseLayersList;return T.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,h,p=[],y=[];this._handlingClick=!0;for(var C=s.length-1;C>=0;C--)l=s[C],h=this._getLayer(l.layerId).layer,l.checked?p.push(h):l.checked||y.push(h);for(C=0;C<y.length;C++)this._map.hasLayer(y[C])&&this._map.removeLayer(y[C]);for(C=0;C<p.length;C++)this._map.hasLayer(p[C])||this._map.addLayer(p[C]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,h,p=this._map.getZoom(),y=s.length-1;y>=0;y--)l=s[y],h=this._getLayer(l.layerId).layer,l.disabled=h.options.minZoom!==void 0&&p<h.options.minZoom||h.options.maxZoom!==void 0&&p>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,ye(s,"click",kt),this.expand();var l=this;setTimeout(function(){Be(s,"click",kt),l._preventClick=!1})}}),JS=function(s,l,h){return new Ng(s,l,h)},gd=Ln.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",h=Le("div",l+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,l+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,l+"-out",h,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,h,p,y){var C=Le("a",h,p);return C.innerHTML=s,C.href="#",C.title=l,C.setAttribute("role","button"),C.setAttribute("aria-label",l),Lo(C),ye(C,"click",xi),ye(C,"click",y,this),ye(C,"click",this._refocusOnMap,this),C},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";rt(this._zoomInButton,l),rt(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(be(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(be(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});je.mergeOptions({zoomControl:!0}),je.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new gd,this.addControl(this.zoomControl))});var QS=function(s){return new gd(s)},Tg=Ln.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",h=Le("div",l),p=this.options;return this._addScales(p,l+"-line",h),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),h},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,h){s.metric&&(this._mScale=Le("div",l,h)),s.imperial&&(this._iScale=Le("div",l,h))},_update:function(){var s=this._map,l=s.getSize().y/2,h=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(h)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),h=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,h,l/s)},_updateImperial:function(s){var l=s*3.2808399,h,p,y;l>5280?(h=l/5280,p=this._getRoundNum(h),this._updateScale(this._iScale,p+" mi",p/h)):(y=this._getRoundNum(l),this._updateScale(this._iScale,y+" ft",y/l))},_updateScale:function(s,l,h){s.style.width=Math.round(this.options.maxWidth*h)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),h=s/l;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,l*h}}),XS=function(s){return new Tg(s)},eC='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',vd=Ln.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ae.inlineSvg?eC+" ":"")+"Leaflet</a>"},initialize:function(s){k(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Le("div","leaflet-control-attribution"),Lo(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var h=[];this.options.prefix&&h.push(this.options.prefix),s.length&&h.push(s.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});je.mergeOptions({attributionControl:!0}),je.addInitHook(function(){this.options.attributionControl&&new vd().addTo(this)});var tC=function(s){return new vd(s)};Ln.Layers=Ng,Ln.Zoom=gd,Ln.Scale=Tg,Ln.Attribution=vd,Ro.layers=JS,Ro.zoom=QS,Ro.scale=XS,Ro.attribution=tC;var Zn=q.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Zn.addTo=function(s,l){return s.addHandler(l,this),this};var nC={Events:M},Lg=ae.touch?"touchstart mousedown":"mousedown",Er=ee.extend({options:{clickTolerance:3},initialize:function(s,l,h,p){k(this,p),this._element=s,this._dragStartTarget=l||s,this._preventOutline=h},enable:function(){this._enabled||(ye(this._dragStartTarget,Lg,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Er._dragging===this&&this.finishDrag(!0),Be(this._dragStartTarget,Lg,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!rd(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Er._dragging===this&&this.finishDrag();return}if(!(Er._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Er._dragging=this,this._preventOutline&&cd(this._element),od(),jo(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,h=kg(this._element);this._startPoint=new D(l.clientX,l.clientY),this._startPos=wi(this._element),this._parentScale=ud(h);var p=s.type==="mousedown";ye(document,p?"mousemove":"touchmove",this._onMove,this),ye(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,h=new D(l.clientX,l.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,kt(s),this._moved||(this.fire("dragstart"),this._moved=!0,be(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),be(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),ct(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){rt(document.body,"leaflet-dragging"),this._lastTarget&&(rt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Be(document,"mousemove touchmove",this._onMove,this),Be(document,"mouseup touchend touchcancel",this._onUp,this),ad(),No();var l=this._moved&&this._moving;this._moving=!1,Er._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Rg(s,l,h){var p,y=[1,4,2,8],C,T,A,z,G,ie,fe,Ce;for(C=0,ie=s.length;C<ie;C++)s[C]._code=_i(s[C],l);for(A=0;A<4;A++){for(fe=y[A],p=[],C=0,ie=s.length,T=ie-1;C<ie;T=C++)z=s[C],G=s[T],z._code&fe?G._code&fe||(Ce=pl(G,z,fe,l,h),Ce._code=_i(Ce,l),p.push(Ce)):(G._code&fe&&(Ce=pl(G,z,fe,l,h),Ce._code=_i(Ce,l),p.push(Ce)),p.push(z));s=p}return s}function Ag(s,l){var h,p,y,C,T,A,z,G,ie;if(!s||s.length===0)throw new Error("latlngs not passed");wn(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var fe=te([0,0]),Ce=ge(s),Bt=Ce.getNorthWest().distanceTo(Ce.getSouthWest())*Ce.getNorthEast().distanceTo(Ce.getNorthWest());Bt<1700&&(fe=wd(s));var vt=s.length,yn=[];for(h=0;h<vt;h++){var Zt=te(s[h]);yn.push(l.project(te([Zt.lat-fe.lat,Zt.lng-fe.lng])))}for(A=z=G=0,h=0,p=vt-1;h<vt;p=h++)y=yn[h],C=yn[p],T=y.y*C.x-C.y*y.x,z+=(y.x+C.x)*T,G+=(y.y+C.y)*T,A+=T*3;A===0?ie=yn[0]:ie=[z/A,G/A];var fs=l.unproject(U(ie));return te([fs.lat+fe.lat,fs.lng+fe.lng])}function wd(s){for(var l=0,h=0,p=0,y=0;y<s.length;y++){var C=te(s[y]);l+=C.lat,h+=C.lng,p++}return te([l/p,h/p])}var rC={__proto__:null,clipPolygon:Rg,polygonCenter:Ag,centroid:wd};function Og(s,l){if(!l||!s.length)return s.slice();var h=l*l;return s=oC(s,h),s=sC(s,h),s}function Ig(s,l,h){return Math.sqrt(Ao(s,l,h,!0))}function iC(s,l,h){return Ao(s,l,h)}function sC(s,l){var h=s.length,p=typeof Uint8Array!=void 0+""?Uint8Array:Array,y=new p(h);y[0]=y[h-1]=1,yd(s,y,l,0,h-1);var C,T=[];for(C=0;C<h;C++)y[C]&&T.push(s[C]);return T}function yd(s,l,h,p,y){var C=0,T,A,z;for(A=p+1;A<=y-1;A++)z=Ao(s[A],s[p],s[y],!0),z>C&&(T=A,C=z);C>h&&(l[T]=1,yd(s,l,h,p,T),yd(s,l,h,T,y))}function oC(s,l){for(var h=[s[0]],p=1,y=0,C=s.length;p<C;p++)aC(s[p],s[y])>l&&(h.push(s[p]),y=p);return y<C-1&&h.push(s[C-1]),h}var Mg;function Dg(s,l,h,p,y){var C=p?Mg:_i(s,h),T=_i(l,h),A,z,G;for(Mg=T;;){if(!(C|T))return[s,l];if(C&T)return!1;A=C||T,z=pl(s,l,A,h,y),G=_i(z,h),A===C?(s=z,C=G):(l=z,T=G)}}function pl(s,l,h,p,y){var C=l.x-s.x,T=l.y-s.y,A=p.min,z=p.max,G,ie;return h&8?(G=s.x+C*(z.y-s.y)/T,ie=z.y):h&4?(G=s.x+C*(A.y-s.y)/T,ie=A.y):h&2?(G=z.x,ie=s.y+T*(z.x-s.x)/C):h&1&&(G=A.x,ie=s.y+T*(A.x-s.x)/C),new D(G,ie,y)}function _i(s,l){var h=0;return s.x<l.min.x?h|=1:s.x>l.max.x&&(h|=2),s.y<l.min.y?h|=4:s.y>l.max.y&&(h|=8),h}function aC(s,l){var h=l.x-s.x,p=l.y-s.y;return h*h+p*p}function Ao(s,l,h,p){var y=l.x,C=l.y,T=h.x-y,A=h.y-C,z=T*T+A*A,G;return z>0&&(G=((s.x-y)*T+(s.y-C)*A)/z,G>1?(y=h.x,C=h.y):G>0&&(y+=T*G,C+=A*G)),T=s.x-y,A=s.y-C,p?T*T+A*A:new D(y,C)}function wn(s){return!b(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function Bg(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),wn(s)}function $g(s,l){var h,p,y,C,T,A,z,G;if(!s||s.length===0)throw new Error("latlngs not passed");wn(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ie=te([0,0]),fe=ge(s),Ce=fe.getNorthWest().distanceTo(fe.getSouthWest())*fe.getNorthEast().distanceTo(fe.getNorthWest());Ce<1700&&(ie=wd(s));var Bt=s.length,vt=[];for(h=0;h<Bt;h++){var yn=te(s[h]);vt.push(l.project(te([yn.lat-ie.lat,yn.lng-ie.lng])))}for(h=0,p=0;h<Bt-1;h++)p+=vt[h].distanceTo(vt[h+1])/2;if(p===0)G=vt[0];else for(h=0,C=0;h<Bt-1;h++)if(T=vt[h],A=vt[h+1],y=T.distanceTo(A),C+=y,C>p){z=(C-p)/y,G=[A.x-z*(A.x-T.x),A.y-z*(A.y-T.y)];break}var Zt=l.unproject(U(G));return te([Zt.lat+ie.lat,Zt.lng+ie.lng])}var lC={__proto__:null,simplify:Og,pointToSegmentDistance:Ig,closestPointOnSegment:iC,clipSegment:Dg,_getEdgeIntersection:pl,_getBitCode:_i,_sqClosestPointOnSegment:Ao,isFlat:wn,_flat:Bg,polylineCenter:$g},xd={project:function(s){return new D(s.lng,s.lat)},unproject:function(s){return new we(s.y,s.x)},bounds:new O([-180,-90],[180,90])},_d={R:6378137,R_MINOR:6356752314245179e-9,bounds:new O([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,h=this.R,p=s.lat*l,y=this.R_MINOR/h,C=Math.sqrt(1-y*y),T=C*Math.sin(p),A=Math.tan(Math.PI/4-p/2)/Math.pow((1-T)/(1+T),C/2);return p=-h*Math.log(Math.max(A,1e-10)),new D(s.lng*l*h,p)},unproject:function(s){for(var l=180/Math.PI,h=this.R,p=this.R_MINOR/h,y=Math.sqrt(1-p*p),C=Math.exp(-s.y/h),T=Math.PI/2-2*Math.atan(C),A=0,z=.1,G;A<15&&Math.abs(z)>1e-7;A++)G=y*Math.sin(T),G=Math.pow((1-G)/(1+G),y/2),z=Math.PI/2-2*Math.atan(C*G)-T,T+=z;return new we(T*l,s.x*l/h)}},cC={__proto__:null,LonLat:xd,Mercator:_d,SphericalMercator:xe},uC=i({},ve,{code:"EPSG:3395",projection:_d,transformation:function(){var s=.5/(Math.PI*_d.R);return He(s,.5,-s,.5)}()}),Ug=i({},ve,{code:"EPSG:4326",projection:xd,transformation:He(1/180,1,-1/180,.5)}),dC=i({},Se,{projection:xd,transformation:He(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var h=l.lng-s.lng,p=l.lat-s.lat;return Math.sqrt(h*h+p*p)},infinite:!0});Se.Earth=ve,Se.EPSG3395=uC,Se.EPSG3857=We,Se.EPSG900913=Ze,Se.EPSG4326=Ug,Se.Simple=dC;var Rn=ee.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[d(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[d(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var h=this.getEvents();l.on(h,this),this.once("remove",function(){l.off(h,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});je.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=d(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=d(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return d(s)in this._layers},eachLayer:function(s,l){for(var h in this._layers)s.call(l,this._layers[h]);return this},_addLayers:function(s){s=s?b(s)?s:[s]:[];for(var l=0,h=s.length;l<h;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[d(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=d(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,h=this._getZoomSpan();for(var p in this._zoomBoundLayers){var y=this._zoomBoundLayers[p].options;s=y.minZoom===void 0?s:Math.min(s,y.minZoom),l=y.maxZoom===void 0?l:Math.max(l,y.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ls=Rn.extend({initialize:function(s,l){k(this,l),this._layers={};var h,p;if(s)for(h=0,p=s.length;h<p;h++)this.addLayer(s[h])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),h,p;for(h in this._layers)p=this._layers[h],p[s]&&p[s].apply(p,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var h in this._layers)s.call(l,this._layers[h]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return d(s)}}),hC=function(s,l){return new ls(s,l)},sr=ls.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),ls.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),ls.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new ce;for(var l in this._layers){var h=this._layers[l];s.extend(h.getBounds?h.getBounds():h.getLatLng())}return s}}),fC=function(s,l){return new sr(s,l)},cs=q.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){k(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var h=this._getIconUrl(s);if(!h){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(h,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,l){var h=this.options,p=h[l+"Size"];typeof p=="number"&&(p=[p,p]);var y=U(p),C=U(l==="shadow"&&h.shadowAnchor||h.iconAnchor||y&&y.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(h.className||""),C&&(s.style.marginLeft=-C.x+"px",s.style.marginTop=-C.y+"px"),y&&(s.style.width=y.x+"px",s.style.height=y.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return ae.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function mC(s){return new cs(s)}var Oo=cs.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof Oo.imagePath!="string"&&(Oo.imagePath=this._detectIconPath()),(this.options.imagePath||Oo.imagePath)+cs.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(h,p,y){var C=p.exec(h);return C&&C[y]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Le("div","leaflet-default-icon-path",document.body),l=Eo(s,"background-image")||Eo(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),zg=Zn.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Er(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),be(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&rt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,h=l._map,p=this._marker.options.autoPanSpeed,y=this._marker.options.autoPanPadding,C=wi(l._icon),T=h.getPixelBounds(),A=h.getPixelOrigin(),z=Y(T.min._subtract(A).add(y),T.max._subtract(A).subtract(y));if(!z.contains(C)){var G=U((Math.max(z.max.x,C.x)-z.max.x)/(T.max.x-z.max.x)-(Math.min(z.min.x,C.x)-z.min.x)/(T.min.x-z.min.x),(Math.max(z.max.y,C.y)-z.max.y)/(T.max.y-z.max.y)-(Math.min(z.min.y,C.y)-z.min.y)/(T.min.y-z.min.y)).multiplyBy(p);h.panBy(G,{animate:!1}),this._draggable._newPos._add(G),this._draggable._startPos._add(G),ct(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=ne(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(Q(this._panRequest),this._panRequest=ne(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,h=l._shadow,p=wi(l._icon),y=l._map.layerPointToLatLng(p);h&&ct(h,p),l._latlng=y,s.latlng=y,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){Q(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),gl=Rn.extend({options:{icon:new Oo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){k(this,l),this._latlng=te(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=te(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=s.icon.createIcon(this._icon),p=!1;h!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(h.title=s.title),h.tagName==="IMG"&&(h.alt=s.alt||"")),be(h,l),s.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ye(h,"focus",this._panOnFocus,this);var y=s.icon.createShadow(this._shadow),C=!1;y!==this._shadow&&(this._removeShadow(),C=!0),y&&(be(y,l),y.alt=""),this._shadow=y,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),y&&C&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Be(this._icon,"focus",this._panOnFocus,this),Ke(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ke(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&ct(this._icon,s),this._shadow&&ct(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(be(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),zg)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new zg(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&vn(this._icon,s),this._shadow&&vn(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,h=l.iconSize?U(l.iconSize):U(0,0),p=l.iconAnchor?U(l.iconAnchor):U(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:h.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function pC(s,l){return new gl(s,l)}var jr=Rn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return k(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),vl=jr.extend({options:{fill:!0,radius:10},initialize:function(s,l){k(this,l),this._latlng=te(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=te(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return jr.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,h=this._clickTolerance(),p=[s+h,l+h];this._pxBounds=new O(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function gC(s,l){return new vl(s,l)}var bd=vl.extend({initialize:function(s,l,h){if(typeof l=="number"&&(l=i({},h,{radius:l})),k(this,l),this._latlng=te(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new ce(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:jr.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,h=this._map,p=h.options.crs;if(p.distance===ve.distance){var y=Math.PI/180,C=this._mRadius/ve.R/y,T=h.project([l+C,s]),A=h.project([l-C,s]),z=T.add(A).divideBy(2),G=h.unproject(z).lat,ie=Math.acos((Math.cos(C*y)-Math.sin(l*y)*Math.sin(G*y))/(Math.cos(l*y)*Math.cos(G*y)))/y;(isNaN(ie)||ie===0)&&(ie=C/Math.cos(Math.PI/180*l)),this._point=z.subtract(h.getPixelOrigin()),this._radius=isNaN(ie)?0:z.x-h.project([G,s-ie]).x,this._radiusY=z.y-T.y}else{var fe=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(fe).x}this._updateBounds()}});function vC(s,l,h){return new bd(s,l,h)}var or=jr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){k(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,h=null,p=Ao,y,C,T=0,A=this._parts.length;T<A;T++)for(var z=this._parts[T],G=1,ie=z.length;G<ie;G++){y=z[G-1],C=z[G];var fe=p(s,y,C,!0);fe<l&&(l=fe,h=p(s,y,C))}return h&&(h.distance=Math.sqrt(l)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return $g(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=te(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new ce,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return wn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],h=wn(s),p=0,y=s.length;p<y;p++)h?(l[p]=te(s[p]),this._bounds.extend(l[p])):l[p]=this._convertLatLngs(s[p]);return l},_project:function(){var s=new O;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new D(s,s);this._rawPxBounds&&(this._pxBounds=new O([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,h){var p=s[0]instanceof we,y=s.length,C,T;if(p){for(T=[],C=0;C<y;C++)T[C]=this._map.latLngToLayerPoint(s[C]),h.extend(T[C]);l.push(T)}else for(C=0;C<y;C++)this._projectLatlngs(s[C],l,h)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,h,p,y,C,T,A,z;for(h=0,y=0,C=this._rings.length;h<C;h++)for(z=this._rings[h],p=0,T=z.length;p<T-1;p++)A=Dg(z[p],z[p+1],s,p,!0),A&&(l[y]=l[y]||[],l[y].push(A[0]),(A[1]!==z[p+1]||p===T-2)&&(l[y].push(A[1]),y++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,h=0,p=s.length;h<p;h++)s[h]=Og(s[h],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var h,p,y,C,T,A,z=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(h=0,C=this._parts.length;h<C;h++)for(A=this._parts[h],p=0,T=A.length,y=T-1;p<T;y=p++)if(!(!l&&p===0)&&Ig(s,A[y],A[p])<=z)return!0;return!1}});function wC(s,l){return new or(s,l)}or._flat=Bg;var us=or.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ag(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=or.prototype._convertLatLngs.call(this,s),h=l.length;return h>=2&&l[0]instanceof we&&l[0].equals(l[h-1])&&l.pop(),l},_setLatLngs:function(s){or.prototype._setLatLngs.call(this,s),wn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return wn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,h=new D(l,l);if(s=new O(s.min.subtract(h),s.max.add(h)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,y=this._rings.length,C;p<y;p++)C=Rg(this._rings[p],s,!0),C.length&&this._parts.push(C)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,h,p,y,C,T,A,z,G;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(C=0,z=this._parts.length;C<z;C++)for(h=this._parts[C],T=0,G=h.length,A=G-1;T<G;A=T++)p=h[T],y=h[A],p.y>s.y!=y.y>s.y&&s.x<(y.x-p.x)*(s.y-p.y)/(y.y-p.y)+p.x&&(l=!l);return l||or.prototype._containsPoint.call(this,s,!0)}});function yC(s,l){return new us(s,l)}var ar=sr.extend({initialize:function(s,l){k(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=b(s)?s:s.features,h,p,y;if(l){for(h=0,p=l.length;h<p;h++)y=l[h],(y.geometries||y.geometry||y.features||y.coordinates)&&this.addData(y);return this}var C=this.options;if(C.filter&&!C.filter(s))return this;var T=wl(s,C);return T?(T.feature=_l(s),T.defaultOptions=T.options,this.resetStyle(T),C.onEachFeature&&C.onEachFeature(s,T),this.addLayer(T)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=i({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function wl(s,l){var h=s.type==="Feature"?s.geometry:s,p=h?h.coordinates:null,y=[],C=l&&l.pointToLayer,T=l&&l.coordsToLatLng||kd,A,z,G,ie;if(!p&&!h)return null;switch(h.type){case"Point":return A=T(p),Fg(C,s,A,l);case"MultiPoint":for(G=0,ie=p.length;G<ie;G++)A=T(p[G]),y.push(Fg(C,s,A,l));return new sr(y);case"LineString":case"MultiLineString":return z=yl(p,h.type==="LineString"?0:1,T),new or(z,l);case"Polygon":case"MultiPolygon":return z=yl(p,h.type==="Polygon"?1:2,T),new us(z,l);case"GeometryCollection":for(G=0,ie=h.geometries.length;G<ie;G++){var fe=wl({geometry:h.geometries[G],type:"Feature",properties:s.properties},l);fe&&y.push(fe)}return new sr(y);case"FeatureCollection":for(G=0,ie=h.features.length;G<ie;G++){var Ce=wl(h.features[G],l);Ce&&y.push(Ce)}return new sr(y);default:throw new Error("Invalid GeoJSON object.")}}function Fg(s,l,h,p){return s?s(l,h):new gl(h,p&&p.markersInheritOptions&&p)}function kd(s){return new we(s[1],s[0],s[2])}function yl(s,l,h){for(var p=[],y=0,C=s.length,T;y<C;y++)T=l?yl(s[y],l-1,h):(h||kd)(s[y]),p.push(T);return p}function Sd(s,l){return s=te(s),s.alt!==void 0?[v(s.lng,l),v(s.lat,l),v(s.alt,l)]:[v(s.lng,l),v(s.lat,l)]}function xl(s,l,h,p){for(var y=[],C=0,T=s.length;C<T;C++)y.push(l?xl(s[C],wn(s[C])?0:l-1,h,p):Sd(s[C],p));return!l&&h&&y.length>0&&y.push(y[0].slice()),y}function ds(s,l){return s.feature?i({},s.feature,{geometry:l}):_l(l)}function _l(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Cd={toGeoJSON:function(s){return ds(this,{type:"Point",coordinates:Sd(this.getLatLng(),s)})}};gl.include(Cd),bd.include(Cd),vl.include(Cd),or.include({toGeoJSON:function(s){var l=!wn(this._latlngs),h=xl(this._latlngs,l?1:0,!1,s);return ds(this,{type:(l?"Multi":"")+"LineString",coordinates:h})}}),us.include({toGeoJSON:function(s){var l=!wn(this._latlngs),h=l&&!wn(this._latlngs[0]),p=xl(this._latlngs,h?2:l?1:0,!0,s);return l||(p=[p]),ds(this,{type:(h?"Multi":"")+"Polygon",coordinates:p})}}),ls.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(h){l.push(h.toGeoJSON(s).geometry.coordinates)}),ds(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var h=l==="GeometryCollection",p=[];return this.eachLayer(function(y){if(y.toGeoJSON){var C=y.toGeoJSON(s);if(h)p.push(C.geometry);else{var T=_l(C);T.type==="FeatureCollection"?p.push.apply(p,T.features):p.push(T)}}}),h?ds(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function Vg(s,l){return new ar(s,l)}var xC=Vg,bl=Rn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,h){this._url=s,this._bounds=ge(l),k(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(be(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ke(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&os(this._image),this},bringToBack:function(){return this._map&&as(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=ge(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:Le("img");if(be(l,"leaflet-image-layer"),this._zoomAnimated&&be(l,"leaflet-zoom-animated"),this.options.className&&be(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;vi(this._image,h,l)},_reset:function(){var s=this._image,l=new O(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=l.getSize();ct(s,l.min),s.style.width=h.x+"px",s.style.height=h.y+"px"},_updateOpacity:function(){vn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),_C=function(s,l,h){return new bl(s,l,h)},qg=bl.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:Le("video");if(be(l,"leaflet-image-layer"),this._zoomAnimated&&be(l,"leaflet-zoom-animated"),this.options.className&&be(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onloadeddata=a(this.fire,this,"load"),s){for(var h=l.getElementsByTagName("source"),p=[],y=0;y<h.length;y++)p.push(h[y].src);this._url=h.length>0?p:[l.src];return}b(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var C=0;C<this._url.length;C++){var T=Le("source");T.src=this._url[C],l.appendChild(T)}}});function bC(s,l,h){return new qg(s,l,h)}var Hg=bl.extend({_initImage:function(){var s=this._image=this._url;be(s,"leaflet-image-layer"),this._zoomAnimated&&be(s,"leaflet-zoom-animated"),this.options.className&&be(s,this.options.className),s.onselectstart=g,s.onmousemove=g}});function kC(s,l,h){return new Hg(s,l,h)}var Gn=Rn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof we||b(s))?(this._latlng=te(s),k(this,l)):(k(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&vn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&vn(this._container,1),this.bringToFront(),this.options.interactive&&(be(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(vn(this._container,0),this._removeTimeout=setTimeout(a(Ke,void 0,this._container),200)):Ke(this._container),this.options.interactive&&(rt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=te(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&os(this._container),this},bringToBack:function(){return this._map&&as(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof sr){l=null;var h=this._source._layers;for(var p in h)if(h[p]._map){l=h[p];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=U(this.options.offset),h=this._getAnchor();this._zoomAnimated?ct(this._container,s.add(h)):l=l.add(s).add(h);var p=this._containerBottom=-l.y,y=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=p+"px",this._container.style.left=y+"px"}},_getAnchor:function(){return[0,0]}});je.include({_initOverlay:function(s,l,h,p){var y=l;return y instanceof s||(y=new s(p).setContent(l)),h&&y.setLatLng(h),y}}),Rn.include({_initOverlay:function(s,l,h,p){var y=h;return y instanceof s?(k(y,p),y._source=this):(y=l&&!p?l:new s(p,this),y.setContent(h)),y}});var kl=Gn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,Gn.prototype.openOn.call(this,s)},onAdd:function(s){Gn.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof jr||this._source.on("preclick",yi))},onRemove:function(s){Gn.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof jr||this._source.off("preclick",yi))},getEvents:function(){var s=Gn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=Le("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=Le("div",s+"-content-wrapper",l);if(this._contentNode=Le("div",s+"-content",h),Lo(l),md(this._contentNode),ye(l,"contextmenu",yi),this._tipContainer=Le("div",s+"-tip-container",l),this._tip=Le("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=Le("a",s+"-close-button",l);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',ye(p,"click",function(y){kt(y),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var h=s.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),l.width=h+1+"px",l.whiteSpace="",l.height="";var p=s.offsetHeight,y=this.options.maxHeight,C="leaflet-popup-scrolled";y&&p>y?(l.height=y+"px",be(s,C)):rt(s,C),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),h=this._getAnchor();ct(this._container,l.add(h))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(Eo(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+l,p=this._containerWidth,y=new D(this._containerLeft,-h-this._containerBottom);y._add(wi(this._container));var C=s.layerPointToContainerPoint(y),T=U(this.options.autoPanPadding),A=U(this.options.autoPanPaddingTopLeft||T),z=U(this.options.autoPanPaddingBottomRight||T),G=s.getSize(),ie=0,fe=0;C.x+p+z.x>G.x&&(ie=C.x+p-G.x+z.x),C.x-ie-A.x<0&&(ie=C.x-A.x),C.y+h+z.y>G.y&&(fe=C.y+h-G.y+z.y),C.y-fe-A.y<0&&(fe=C.y-A.y),(ie||fe)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([ie,fe]))}},_getAnchor:function(){return U(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),SC=function(s,l){return new kl(s,l)};je.mergeOptions({closePopupOnClick:!0}),je.include({openPopup:function(s,l,h){return this._initOverlay(kl,s,l,h).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Rn.include({bindPopup:function(s,l){return this._popup=this._initOverlay(kl,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof sr||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){xi(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof jr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var Sl=Gn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){Gn.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){Gn.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=Gn.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Le("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,h,p=this._map,y=this._container,C=p.latLngToContainerPoint(p.getCenter()),T=p.layerPointToContainerPoint(s),A=this.options.direction,z=y.offsetWidth,G=y.offsetHeight,ie=U(this.options.offset),fe=this._getAnchor();A==="top"?(l=z/2,h=G):A==="bottom"?(l=z/2,h=0):A==="center"?(l=z/2,h=G/2):A==="right"?(l=0,h=G/2):A==="left"?(l=z,h=G/2):T.x<C.x?(A="right",l=0,h=G/2):(A="left",l=z+(ie.x+fe.x)*2,h=G/2),s=s.subtract(U(l,h,!0)).add(ie).add(fe),rt(y,"leaflet-tooltip-right"),rt(y,"leaflet-tooltip-left"),rt(y,"leaflet-tooltip-top"),rt(y,"leaflet-tooltip-bottom"),be(y,"leaflet-tooltip-"+A),ct(y,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&vn(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return U(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),CC=function(s,l){return new Sl(s,l)};je.include({openTooltip:function(s,l,h){return this._initOverlay(Sl,s,l,h).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Rn.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Sl,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip,this._map?this._addFocusListeners():h.add=this._addFocusListeners),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[l](h),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof sr||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(ye(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),ye(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,h,p;this._tooltip.options.sticky&&s.originalEvent&&(h=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(h),l=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(l)}});var Wg=cs.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),h=this.options;if(h.html instanceof Element?(ul(l),l.appendChild(h.html)):l.innerHTML=h.html!==!1?h.html:"",h.bgPos){var p=U(h.bgPos);l.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function PC(s){return new Wg(s)}cs.Default=Oo;var Io=Rn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ae.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){k(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),Ke(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(os(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(as(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof D?s:new D(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,h=-s(-1/0,1/0),p=0,y=l.length,C;p<y;p++)C=l[p].style.zIndex,l[p]!==this._container&&C&&(h=s(h,+C));isFinite(h)&&(this.options.zIndex=h+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ae.ielt9){vn(this._container,this.options.opacity);var s=+new Date,l=!1,h=!1;for(var p in this._tiles){var y=this._tiles[p];if(!(!y.current||!y.loaded)){var C=Math.min(1,(s-y.loaded)/200);vn(y.el,C),C<1?l=!0:(y.active?h=!0:this._onOpaqueTile(y),y.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),l&&(Q(this._fadeFrame),this._fadeFrame=ne(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=Le("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===s?(this._levels[h].el.style.zIndex=l-Math.abs(s-h),this._onUpdateLevel(h)):(Ke(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var p=this._levels[s],y=this._map;return p||(p=this._levels[s]={},p.el=Le("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=l,p.origin=y.project(y.unproject(y.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,y.getCenter(),y.getZoom()),g(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var s,l,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var p=l.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)Ke(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,h,p){var y=Math.floor(s/2),C=Math.floor(l/2),T=h-1,A=new D(+y,+C);A.z=+T;var z=this._tileCoordsToKey(A),G=this._tiles[z];return G&&G.active?(G.retain=!0,!0):(G&&G.loaded&&(G.retain=!0),T>p?this._retainParent(y,C,T,p):!1)},_retainChildren:function(s,l,h,p){for(var y=2*s;y<2*s+2;y++)for(var C=2*l;C<2*l+2;C++){var T=new D(y,C);T.z=h+1;var A=this._tileCoordsToKey(T),z=this._tiles[A];if(z&&z.active){z.retain=!0;continue}else z&&z.loaded&&(z.retain=!0);h+1<p&&this._retainChildren(y,C,h+1,p)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,h,p){var y=Math.round(l);this.options.maxZoom!==void 0&&y>this.options.maxZoom||this.options.minZoom!==void 0&&y<this.options.minZoom?y=void 0:y=this._clampZoom(y);var C=this.options.updateWhenZooming&&y!==this._tileZoom;(!p||C)&&(this._tileZoom=y,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),y!==void 0&&this._update(s),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var h in this._levels)this._setZoomTransform(this._levels[h],s,l)},_setZoomTransform:function(s,l,h){var p=this._map.getZoomScale(h,s.zoom),y=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(l,h)).round();ae.any3d?vi(s.el,y,p):ct(s.el,y)},_resetGrid:function(){var s=this._map,l=s.options.crs,h=this._tileSize=this.getTileSize(),p=this._tileZoom,y=this._map.getPixelWorldBounds(this._tileZoom);y&&(this._globalTileRange=this._pxBoundsToTileRange(y)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],p).x/h.x),Math.ceil(s.project([0,l.wrapLng[1]],p).x/h.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],p).y/h.x),Math.ceil(s.project([l.wrapLat[1],0],p).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,h=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),p=l.getZoomScale(h,this._tileZoom),y=l.project(s,this._tileZoom).floor(),C=l.getSize().divideBy(p*2);return new O(y.subtract(C),y.add(C))},_update:function(s){var l=this._map;if(l){var h=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),y=this._pxBoundsToTileRange(p),C=y.getCenter(),T=[],A=this.options.keepBuffer,z=new O(y.getBottomLeft().subtract([A,-A]),y.getTopRight().add([A,-A]));if(!(isFinite(y.min.x)&&isFinite(y.min.y)&&isFinite(y.max.x)&&isFinite(y.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var G in this._tiles){var ie=this._tiles[G].coords;(ie.z!==this._tileZoom||!z.contains(new D(ie.x,ie.y)))&&(this._tiles[G].current=!1)}if(Math.abs(h-this._tileZoom)>1){this._setView(s,h);return}for(var fe=y.min.y;fe<=y.max.y;fe++)for(var Ce=y.min.x;Ce<=y.max.x;Ce++){var Bt=new D(Ce,fe);if(Bt.z=this._tileZoom,!!this._isValidTile(Bt)){var vt=this._tiles[this._tileCoordsToKey(Bt)];vt?vt.current=!0:T.push(Bt)}}if(T.sort(function(Zt,fs){return Zt.distanceTo(C)-fs.distanceTo(C)}),T.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var yn=document.createDocumentFragment();for(Ce=0;Ce<T.length;Ce++)this._addTile(T[Ce],yn);this._level.el.appendChild(yn)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var h=this._globalTileRange;if(!l.wrapLng&&(s.x<h.min.x||s.x>h.max.x)||!l.wrapLat&&(s.y<h.min.y||s.y>h.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return ge(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,h=this.getTileSize(),p=s.scaleBy(h),y=p.add(h),C=l.unproject(p,s.z),T=l.unproject(y,s.z);return[C,T]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),h=new ce(l[0],l[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),h=new D(+l[0],+l[1]);return h.z=+l[2],h},_removeTile:function(s){var l=this._tiles[s];l&&(Ke(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){be(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=g,s.onmousemove=g,ae.ielt9&&this.options.opacity<1&&vn(s,this.options.opacity)},_addTile:function(s,l){var h=this._getTilePos(s),p=this._tileCoordsToKey(s),y=this.createTile(this._wrapCoords(s),a(this._tileReady,this,s));this._initTile(y),this.createTile.length<2&&ne(a(this._tileReady,this,s,null,y)),ct(y,h),this._tiles[p]={el:y,coords:s,current:!0},l.appendChild(y),this.fire("tileloadstart",{tile:y,coords:s})},_tileReady:function(s,l,h){l&&this.fire("tileerror",{error:l,tile:h,coords:s});var p=this._tileCoordsToKey(s);h=this._tiles[p],h&&(h.loaded=+new Date,this._map._fadeAnimated?(vn(h.el,0),Q(this._fadeFrame),this._fadeFrame=ne(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),l||(be(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ae.ielt9||!this._map._fadeAnimated?ne(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new D(this._wrapX?m(s.x,this._wrapX):s.x,this._wrapY?m(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new O(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function EC(s){return new Io(s)}var hs=Io.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=k(this,l),l.detectRetina&&ae.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var h=document.createElement("img");return ye(h,"load",a(this._tileOnLoad,this,l,h)),ye(h,"error",a(this._tileOnError,this,l,h)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.src=this.getTileUrl(s),h},getTileUrl:function(s){var l={r:ae.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=h),l["-y"]=h}return x(this._url,i(l,this.options))},_tileOnLoad:function(s,l){ae.ielt9?setTimeout(a(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,h){var p=this.options.errorTileUrl;p&&l.getAttribute("src")!==p&&(l.src=p),s(h,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,h=this.options.zoomReverse,p=this.options.zoomOffset;return h&&(s=l-s),s+p},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=g,l.onerror=g,!l.complete)){l.src=R;var h=this._tiles[s].coords;Ke(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:h})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",R),Io.prototype._removeTile.call(this,s)},_tileReady:function(s,l,h){if(!(!this._map||h&&h.getAttribute("src")===R))return Io.prototype._tileReady.call(this,s,l,h)}});function Zg(s,l){return new hs(s,l)}var Gg=hs.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var h=i({},this.defaultWmsParams);for(var p in l)p in this.options||(h[p]=l[p]);l=k(this,l);var y=l.detectRetina&&ae.retina?2:1,C=this.getTileSize();h.width=C.x*y,h.height=C.y*y,this.wmsParams=h},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,hs.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),h=this._crs,p=Y(h.project(l[0]),h.project(l[1])),y=p.min,C=p.max,T=(this._wmsVersion>=1.3&&this._crs===Ug?[y.y,y.x,C.y,C.x]:[y.x,y.y,C.x,C.y]).join(","),A=hs.prototype.getTileUrl.call(this,s);return A+j(this.wmsParams,A,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+T},setParams:function(s,l){return i(this.wmsParams,s),l||this.redraw(),this}});function jC(s,l){return new Gg(s,l)}hs.WMS=Gg,Zg.wms=jC;var lr=Rn.extend({options:{padding:.1},initialize:function(s){k(this,s),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),be(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var h=this._map.getZoomScale(l,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),y=this._map.project(this._center,l),C=p.multiplyBy(-h).add(y).subtract(this._map._getNewPixelOrigin(s,l));ae.any3d?vi(this._container,C,h):ct(this._container,C)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),h=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new O(h,h.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Kg=lr.extend({options:{tolerance:0},getEvents:function(){var s=lr.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){lr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");ye(s,"mousemove",this._onMouseMove,this),ye(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ye(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){Q(this._redrawRequest),delete this._ctx,Ke(this._container),Be(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){lr.prototype._update.call(this);var s=this._bounds,l=this._container,h=s.getSize(),p=ae.retina?2:1;ct(l,s.min),l.width=p*h.x,l.height=p*h.y,l.style.width=h.x+"px",l.style.height=h.y+"px",ae.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){lr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[d(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,h=l.next,p=l.prev;h?h.prev=p:this._drawLast=p,p?p.next=h:this._drawFirst=h,delete s._order,delete this._layers[d(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),h=[],p,y;for(y=0;y<l.length;y++){if(p=Number(l[y]),isNaN(p))return;h.push(p)}s.options._dashArray=h}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||ne(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new O,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var h=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var h,p,y,C,T=s._parts,A=T.length,z=this._ctx;if(A){for(z.beginPath(),h=0;h<A;h++){for(p=0,y=T[h].length;p<y;p++)C=T[h][p],z[p?"lineTo":"moveTo"](C.x,C.y);l&&z.closePath()}this._fillStroke(z,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,h=this._ctx,p=Math.max(Math.round(s._radius),1),y=(Math.max(Math.round(s._radiusY),1)||p)/p;y!==1&&(h.save(),h.scale(1,y)),h.beginPath(),h.arc(l.x,l.y/y,p,0,Math.PI*2,!1),y!==1&&h.restore(),this._fillStroke(h,s)}},_fillStroke:function(s,l){var h=l.options;h.fill&&(s.globalAlpha=h.fillOpacity,s.fillStyle=h.fillColor||h.color,s.fill(h.fillRule||"evenodd")),h.stroke&&h.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=h.opacity,s.lineWidth=h.weight,s.strokeStyle=h.color,s.lineCap=h.lineCap,s.lineJoin=h.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),h,p,y=this._drawFirst;y;y=y.next)h=y.layer,h.options.interactive&&h._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(h))&&(p=h);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(rt(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var h,p,y=this._drawFirst;y;y=y.next)h=y.layer,h.options.interactive&&h._containsPoint(l)&&(p=h);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(be(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,h){this._map._fireDOMEvent(l,h||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var h=l.next,p=l.prev;if(h)h.prev=p;else return;p?p.next=h:h&&(this._drawFirst=h),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var h=l.next,p=l.prev;if(p)p.next=h;else return;h?h.prev=p:p&&(this._drawLast=p),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function Yg(s){return ae.canvas?new Kg(s):null}var Mo=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),NC={_initContainer:function(){this._container=Le("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(lr.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=Mo("shape");be(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=Mo("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;Ke(l),s.removeInteractiveTarget(l),delete this._layers[d(s)]},_updateStyle:function(s){var l=s._stroke,h=s._fill,p=s.options,y=s._container;y.stroked=!!p.stroke,y.filled=!!p.fill,p.stroke?(l||(l=s._stroke=Mo("stroke")),y.appendChild(l),l.weight=p.weight+"px",l.color=p.color,l.opacity=p.opacity,p.dashArray?l.dashStyle=b(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=p.lineCap.replace("butt","flat"),l.joinstyle=p.lineJoin):l&&(y.removeChild(l),s._stroke=null),p.fill?(h||(h=s._fill=Mo("fill")),y.appendChild(h),h.color=p.fillColor||p.color,h.opacity=p.fillOpacity):h&&(y.removeChild(h),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),h=Math.round(s._radius),p=Math.round(s._radiusY||h);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+h+","+p+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){os(s._container)},_bringToBack:function(s){as(s._container)}},Cl=ae.vml?Mo:bt,Do=lr.extend({_initContainer:function(){this._container=Cl("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Cl("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ke(this._container),Be(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){lr.prototype._update.call(this);var s=this._bounds,l=s.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,h.setAttribute("width",l.x),h.setAttribute("height",l.y)),ct(h,s.min),h.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=Cl("path");s.options.className&&be(l,s.options.className),s.options.interactive&&be(l,"leaflet-interactive"),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){Ke(s._path),s.removeInteractiveTarget(s._path),delete this._layers[d(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,h=s.options;l&&(h.stroke?(l.setAttribute("stroke",h.color),l.setAttribute("stroke-opacity",h.opacity),l.setAttribute("stroke-width",h.weight),l.setAttribute("stroke-linecap",h.lineCap),l.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?l.setAttribute("stroke-dasharray",h.dashArray):l.removeAttribute("stroke-dasharray"),h.dashOffset?l.setAttribute("stroke-dashoffset",h.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),h.fill?(l.setAttribute("fill",h.fillColor||h.color),l.setAttribute("fill-opacity",h.fillOpacity),l.setAttribute("fill-rule",h.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,Z(s._parts,l))},_updateCircle:function(s){var l=s._point,h=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||h,y="a"+h+","+p+" 0 1,0 ",C=s._empty()?"M0 0":"M"+(l.x-h)+","+l.y+y+h*2+",0 "+y+-h*2+",0 ";this._setPath(s,C)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){os(s._path)},_bringToBack:function(s){as(s._path)}});ae.vml&&Do.include(NC);function Jg(s){return ae.svg||ae.vml?new Do(s):null}je.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&Yg(s)||Jg(s)}});var Qg=us.extend({initialize:function(s,l){us.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=ge(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function TC(s,l){return new Qg(s,l)}Do.create=Cl,Do.pointsToPath=Z,ar.geometryToLayer=wl,ar.coordsToLatLng=kd,ar.coordsToLatLngs=yl,ar.latLngToCoords=Sd,ar.latLngsToCoords=xl,ar.getFeature=ds,ar.asFeature=_l,je.mergeOptions({boxZoom:!0});var Xg=Zn.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){ye(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Be(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ke(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),jo(),od(),this._startPoint=this._map.mouseEventToContainerPoint(s),ye(document,{contextmenu:xi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Le("div","leaflet-zoom-box",this._container),be(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new O(this._point,this._startPoint),h=l.getSize();ct(this._box,l.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&(Ke(this._box),rt(this._container,"leaflet-crosshair")),No(),ad(),Be(document,{contextmenu:xi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new ce(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});je.addInitHook("addHandler","boxZoom",Xg),je.mergeOptions({doubleClickZoom:!0});var e0=Zn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,h=l.getZoom(),p=l.options.zoomDelta,y=s.originalEvent.shiftKey?h-p:h+p;l.options.doubleClickZoom==="center"?l.setZoom(y):l.setZoomAround(s.containerPoint,y)}});je.addInitHook("addHandler","doubleClickZoom",e0),je.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var t0=Zn.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Er(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}be(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){rt(this._map._container,"leaflet-grab"),rt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=ge(this._map.options.maxBounds);this._offsetLimit=Y(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),h=this._initialWorldOffset,p=this._draggable._newPos.x,y=(p-l+h)%s+l-h,C=(p+l+h)%s-l-h,T=Math.abs(y+h)<Math.abs(C+h)?y:C;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=T},_onDragEnd:function(s){var l=this._map,h=l.options,p=!h.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),p)l.fire("moveend");else{this._prunePositions(+new Date);var y=this._lastPos.subtract(this._positions[0]),C=(this._lastTime-this._times[0])/1e3,T=h.easeLinearity,A=y.multiplyBy(T/C),z=A.distanceTo([0,0]),G=Math.min(h.inertiaMaxSpeed,z),ie=A.multiplyBy(G/z),fe=G/(h.inertiaDeceleration*T),Ce=ie.multiplyBy(-fe/2).round();!Ce.x&&!Ce.y?l.fire("moveend"):(Ce=l._limitOffset(Ce,l.options.maxBounds),ne(function(){l.panBy(Ce,{duration:fe,easeLinearity:T,noMoveStart:!0,animate:!0})}))}}});je.addInitHook("addHandler","dragging",t0),je.mergeOptions({keyboard:!0,keyboardPanDelta:80});var n0=Zn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),ye(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Be(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,h=s.scrollTop||l.scrollTop,p=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(p,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},h=this.keyCodes,p,y;for(p=0,y=h.left.length;p<y;p++)l[h.left[p]]=[-1*s,0];for(p=0,y=h.right.length;p<y;p++)l[h.right[p]]=[s,0];for(p=0,y=h.down.length;p<y;p++)l[h.down[p]]=[0,s];for(p=0,y=h.up.length;p<y;p++)l[h.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},h=this.keyCodes,p,y;for(p=0,y=h.zoomIn.length;p<y;p++)l[h.zoomIn[p]]=s;for(p=0,y=h.zoomOut.length;p<y;p++)l[h.zoomOut[p]]=-s},_addHooks:function(){ye(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Be(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,h=this._map,p;if(l in this._panKeys){if(!h._panAnim||!h._panAnim._inProgress)if(p=this._panKeys[l],s.shiftKey&&(p=U(p).multiplyBy(3)),h.options.maxBounds&&(p=h._limitOffset(U(p),h.options.maxBounds)),h.options.worldCopyJump){var y=h.wrapLatLng(h.unproject(h.project(h.getCenter()).add(p)));h.panTo(y)}else h.panBy(p)}else if(l in this._zoomKeys)h.setZoom(h.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&h._popup&&h._popup.options.closeOnEscapeKey)h.closePopup();else return;xi(s)}}});je.addInitHook("addHandler","keyboard",n0),je.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var r0=Zn.extend({addHooks:function(){ye(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Be(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=Eg(s),h=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),p),xi(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),h=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),y=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,C=h?Math.ceil(y/h)*h:y,T=s._limitZoom(l+(this._delta>0?C:-C))-l;this._delta=0,this._startTime=null,T&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+T):s.setZoomAround(this._lastMousePos,l+T))}});je.addInitHook("addHandler","scrollWheelZoom",r0);var LC=600;je.mergeOptions({tapHold:ae.touchNative&&ae.safari&&ae.mobile,tapTolerance:15});var i0=Zn.extend({addHooks:function(){ye(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Be(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new D(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(ye(document,"touchend",kt),ye(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),LC),ye(document,"touchend touchcancel contextmenu",this._cancel,this),ye(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){Be(document,"touchend",kt),Be(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),Be(document,"touchend touchcancel contextmenu",this._cancel,this),Be(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new D(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var h=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});h._simulated=!0,l.target.dispatchEvent(h)}});je.addInitHook("addHandler","tapHold",i0),je.mergeOptions({touchZoom:ae.touch,bounceAtZoomLimits:!0});var s0=Zn.extend({addHooks:function(){be(this._map._container,"leaflet-touch-zoom"),ye(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){rt(this._map._container,"leaflet-touch-zoom"),Be(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var h=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(h.add(p)._divideBy(2))),this._startDist=h.distanceTo(p),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),ye(document,"touchmove",this._onTouchMove,this),ye(document,"touchend touchcancel",this._onTouchEnd,this),kt(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,h=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]),y=h.distanceTo(p)/this._startDist;if(this._zoom=l.getScaleZoom(y,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&y<1||this._zoom>l.getMaxZoom()&&y>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,y===1)return}else{var C=h._add(p)._divideBy(2)._subtract(this._centerPoint);if(y===1&&C.x===0&&C.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(C),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),Q(this._animRequest);var T=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=ne(T,this,!0),kt(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Q(this._animRequest),Be(document,"touchmove",this._onTouchMove,this),Be(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});je.addInitHook("addHandler","touchZoom",s0),je.BoxZoom=Xg,je.DoubleClickZoom=e0,je.Drag=t0,je.Keyboard=n0,je.ScrollWheelZoom=r0,je.TapHold=i0,je.TouchZoom=s0,n.Bounds=O,n.Browser=ae,n.CRS=Se,n.Canvas=Kg,n.Circle=bd,n.CircleMarker=vl,n.Class=q,n.Control=Ln,n.DivIcon=Wg,n.DivOverlay=Gn,n.DomEvent=KS,n.DomUtil=ZS,n.Draggable=Er,n.Evented=ee,n.FeatureGroup=sr,n.GeoJSON=ar,n.GridLayer=Io,n.Handler=Zn,n.Icon=cs,n.ImageOverlay=bl,n.LatLng=we,n.LatLngBounds=ce,n.Layer=Rn,n.LayerGroup=ls,n.LineUtil=lC,n.Map=je,n.Marker=gl,n.Mixin=nC,n.Path=jr,n.Point=D,n.PolyUtil=rC,n.Polygon=us,n.Polyline=or,n.Popup=kl,n.PosAnimation=jg,n.Projection=cC,n.Rectangle=Qg,n.Renderer=lr,n.SVG=Do,n.SVGOverlay=Hg,n.TileLayer=hs,n.Tooltip=Sl,n.Transformation=Ne,n.Util=W,n.VideoOverlay=qg,n.bind=a,n.bounds=Y,n.canvas=Yg,n.circle=vC,n.circleMarker=gC,n.control=Ro,n.divIcon=PC,n.extend=i,n.featureGroup=fC,n.geoJSON=Vg,n.geoJson=xC,n.gridLayer=EC,n.icon=mC,n.imageOverlay=_C,n.latLng=te,n.latLngBounds=ge,n.layerGroup=hC,n.map=YS,n.marker=pC,n.point=U,n.polygon=yC,n.polyline=wC,n.popup=SC,n.rectangle=TC,n.setOptions=k,n.stamp=d,n.svg=Jg,n.svgOverlay=kC,n.tileLayer=Zg,n.tooltip=CC,n.transformation=He,n.version=r,n.videoOverlay=bC;var RC=window.L;n.noConflict=function(){return window.L=RC,this},window.L=n})})(im,im.exports);var pi=im.exports;const _n=om(pi);function ll(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function Yu(t,e){return e==null?function(r,i){const o=E.useRef();return o.current||(o.current=t(r,i)),o}:function(r,i){const o=E.useRef();o.current||(o.current=t(r,i));const a=E.useRef(r),{instance:u}=o.current;return E.useEffect(function(){a.current!==r&&(e(u,r,a.current),a.current=r)},[u,r,i]),o}}function dS(t,e){E.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function hS(t){return function(n){const r=rg(),i=t(ig(n,r),r);return dD(r.map,n.attribution),uS(i.current,n.eventHandlers),dS(i.current,r),i}}function pD(t,e){const n=E.useRef();E.useEffect(function(){if(e.pathOptions!==n.current){const i=e.pathOptions??{};t.instance.setStyle(i),n.current=i}},[t,e])}function gD(t){return function(n){const r=rg(),i=t(ig(n,r),r);return uS(i.current,n.eventHandlers),dS(i.current,r),pD(i.current,n),i}}function vD(t){function e(i,o){return ll(t(i),o)}const n=Yu(e),r=mD(n);return cS(r)}function wD(t,e){const n=Yu(t,e),r=hS(n);return lS(r)}function fS(t,e){const n=Yu(t,e),r=gD(n);return lS(r)}function yD(t,e){const n=Yu(t,e),r=hS(n);return cS(r)}function xD(t,e,n){const{opacity:r,zIndex:i}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),i!=null&&i!==n.zIndex&&t.setZIndex(i)}const _D=fS(function({center:e,children:n,...r},i){const o=new pi.Circle(e,r);return ll(o,ng(i,{overlayContainer:o}))},sS),bD=fS(function({center:e,children:n,...r},i){const o=new pi.CircleMarker(e,r);return ll(o,ng(i,{overlayContainer:o}))},sS);function sm(){return sm=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sm.apply(this,arguments)}function kD({bounds:t,boundsOptions:e,center:n,children:r,className:i,id:o,placeholder:a,style:u,whenReady:d,zoom:f,...m},g){const[v]=E.useState({className:i,id:o,style:u}),[w,_]=E.useState(null);E.useImperativeHandle(g,()=>(w==null?void 0:w.map)??null,[w]);const k=E.useCallback(S=>{if(S!==null&&w===null){const x=new pi.Map(S,m);n!=null&&f!=null?x.setView(n,f):t!=null&&x.fitBounds(t,e),d!=null&&x.whenReady(d),_(fD(x))}},[]);E.useEffect(()=>()=>{w==null||w.map.remove()},[w]);const j=w?nr.createElement(aS,{value:w},r):a??null;return nr.createElement("div",sm({},v,{ref:k}),j)}const SD=E.forwardRef(kD),CD=wD(function({position:e,...n},r){const i=new pi.Marker(e,n);return ll(i,ng(r,{overlayContainer:i}))},function(e,n,r){n.position!==r.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),PD=yD(function({url:e,...n},r){const i=new pi.TileLayer(e,ig(n,r));return ll(i,r)},function(e,n,r){xD(e,n,r);const{url:i}=n;i!=null&&i!==r.url&&e.setUrl(i)}),ED=vD(function(e){return new pi.Control.Zoom(e)});function jD(t,e,n,r){const o=t*Math.PI/180,a=n*Math.PI/180,u=(n-t)*Math.PI/180,d=(r-e)*Math.PI/180,f=Math.sin(u/2)*Math.sin(u/2)+Math.cos(o)*Math.cos(a)*Math.sin(d/2)*Math.sin(d/2),g=6371e3*(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)));return Math.round(g)}function mS(t,e,n,r,i){return jD(t,e,n,r)<=i}function ND({node:t}){const e=re(f=>f.userLocation),n=re(f=>f.discoveredNodes),r=re(f=>f.setSelectedNode),[i,o]=E.useState(!1);E.useEffect(()=>{if(e){const f=mS(e.lat,e.lng,t.latitude,t.longitude,t.proximityRadius);o(f)}},[e,t]);const a=n.has(t.id),u=()=>{console.log("Marker clicked:",t.title),r(t)},d=nr.useMemo(()=>{const f=a?"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCAzMiA0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTYgMEMxMC40NzcyIDAgNiA0LjQ3NzE1IDYgMTBDNiAxNy41IDEzIDE2IDE2IDQ4QzE5IDE2IDI2IDE3LjUgMjYgMTBDMjYgNC40NzcxNSAyMS41MjI4IDAgMTYgMFoiIGZpbGw9IiNkOTc3MDYiLz48Y2lyY2xlIGN4PSIxNiIgY3k9IjEwIiByPSI1IiBmaWxsPSIjZmZmZmZmIi8+PC9zdmc+":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCAzMiA0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTYgMEMxMC40NzcyIDAgNiA0LjQ3NzE1IDYgMTBDNiAxNy41IDEzIDE2IDE2IDQ4QzE5IDE2IDI2IDE3LjUgMjYgMTBDMjYgNC40NzcxNSAyMS41MjI4IDAgMTYgMFoiIGZpbGw9IiM4YjY0NDEiLz48Y2lyY2xlIGN4PSIxNiIgY3k9IjEwIiByPSI1IiBmaWxsPSIjZmZmZmZmIi8+PC9zdmc+";return new pi.Icon({iconUrl:f,iconSize:[32,48],iconAnchor:[16,48],popupAnchor:[0,-48]})},[a]);return c.jsx(CD,{position:[t.latitude,t.longitude],icon:d,zIndexOffset:a?1e3:0,className:i?"marker-pulse unlocked-marker":"",eventHandlers:{click:u}})}function TD({position:t}){return c.jsxs(c.Fragment,{children:[c.jsx(_D,{center:[t.lat,t.lng],radius:t.accuracy||50,pathOptions:{fillColor:"#8b6441",fillOpacity:.1,color:"#8b6441",weight:1}}),c.jsx(bD,{center:[t.lat,t.lng],radius:8,pathOptions:{fillColor:"#8b6441",fillOpacity:1,color:"#ffffff",weight:3}})]})}function LD({isOpen:t,onClose:e,onStartRoute:n}){const{isDark:r}=qn(),i=re(k=>k.culturalNodes),o=re(k=>k.discoveredNodes),a=re(k=>k.currentLanguage),u=re(k=>k.translatedNodes),d=re(k=>k.setTranslatedNode),[f,m]=E.useState(new Set);E.useEffect(()=>{async function k(){var j;if(!(!t||a==="en"||i.length===0)){for(const S of i)if(!((j=u[S.id])!=null&&j[a]))try{const x=await wp(S,a);d(S.id,a,x)}catch(x){console.error(`Failed to translate node ${S.id}:`,x)}}}k()},[t,a,i,u,d]);const g=k=>{m(j=>{const S=new Set(j);return S.has(k)?S.delete(k):S.add(k),S})},v=k=>f.has(k),w=async()=>{if(f.size===0){await K.fire({title:P("customPath.noNodesSelectedTitle",a),text:P("customPath.noNodesSelectedText",a),icon:"warning",confirmButtonColor:"#6f4e35",background:r?"#1f2937":"#ffffff",color:r?"#f3f4f6":"#000000"});return}const k=i.filter(j=>f.has(j.id));e(),n(k),m(new Set)},_=()=>{m(new Set),e()};return t?c.jsx(ns,{children:c.jsx(Pt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-[2000] flex items-center justify-center p-4",onClick:_,children:c.jsxs(Pt.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:k=>k.stopPropagation(),className:`${r?"bg-neutral-900 text-white":"bg-white text-neutral-900"} rounded-xl shadow-2xl max-w-2xl w-full max-h-[85vh] overflow-hidden flex flex-col`,children:[c.jsxs("div",{className:"bg-heritage-700 text-white p-4 flex items-center justify-between flex-shrink-0",children:[c.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[c.jsx(It,{className:"w-6 h-6"}),P("customPath.modalTitle",a)]}),c.jsx("button",{onClick:_,className:"p-1 hover:bg-heritage-800 rounded-lg transition-colors","aria-label":"Close",children:c.jsx(Oe,{className:"w-6 h-6"})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:i.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx(It,{className:`w-16 h-16 mx-auto mb-4 ${r?"text-neutral-600":"text-neutral-400"}`}),c.jsx("p",{className:`text-lg ${r?"text-neutral-400":"text-neutral-600"}`,children:P("customPath.noLocationsAvailable",a)})]}):c.jsx("div",{className:"space-y-3",children:i.map(k=>{var b;const j=v(k.id),S=o.has(k.id),x=a==="en"?k:(b=u[k.id])!=null&&b[a]?{...k,...u[k.id][a]}:k;return c.jsxs("div",{onClick:()=>g(k.id),className:`flex gap-4 p-3 rounded-lg border-2 cursor-pointer transition-all ${j?r?"border-green-500 bg-green-900/20":"border-green-500 bg-green-50":r?"border-neutral-700 bg-neutral-800 hover:border-neutral-600":"border-neutral-200 bg-neutral-50 hover:border-neutral-300"}`,children:[c.jsx("div",{className:"flex-shrink-0 pt-1",children:c.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center ${j?"bg-green-500 border-green-500":r?"border-neutral-500 bg-neutral-700":"border-neutral-400 bg-white"}`,children:j&&c.jsx(ot,{className:"w-4 h-4 text-white"})})}),x.primaryImageUrl&&c.jsx("div",{className:"flex-shrink-0",children:c.jsx("img",{src:x.primaryImageUrl,alt:x.title,className:"w-20 h-20 object-cover rounded-lg"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[c.jsx("h3",{className:`font-semibold text-base leading-tight ${r?"text-neutral-100":"text-neutral-900"}`,children:x.title}),S&&c.jsx("span",{className:"flex-shrink-0 px-2 py-0.5 bg-amber-500 text-white text-xs font-medium rounded",children:P("customPath.visited",a)})]}),c.jsx("p",{className:`text-xs mb-2 ${r?"text-neutral-400":"text-neutral-600"}`,children:x.category}),c.jsx("p",{className:`text-sm line-clamp-2 ${r?"text-neutral-300":"text-neutral-700"}`,children:x.description})]})]},k.id)})})}),c.jsxs("div",{className:`p-4 border-t flex gap-3 flex-shrink-0 ${r?"border-neutral-700 bg-neutral-900":"border-neutral-200 bg-white"}`,children:[c.jsx("button",{onClick:_,className:`flex-1 px-4 py-3 rounded-lg font-semibold transition-colors ${r?"bg-neutral-800 hover:bg-neutral-700 text-neutral-200":"bg-neutral-200 hover:bg-neutral-300 text-neutral-800"}`,children:P("customPath.cancel",a)}),c.jsxs("button",{onClick:w,disabled:f.size===0,className:`flex-1 px-4 py-3 rounded-lg font-semibold transition-colors flex items-center justify-center gap-2 ${f.size===0?"bg-neutral-400 cursor-not-allowed text-neutral-600":"bg-heritage-700 hover:bg-heritage-800 text-white"}`,children:[c.jsx(so,{className:"w-4 h-4"}),P("customPath.calculateRoute",a)," (",f.size,")"]})]})]})})}):null}const RD=new z1("AIzaSyCbomRTnq2os1QvNdGa2NE3jWfLg8t1Ijk");function AD({isOpen:t,onClose:e,onCreateRoute:n,userLocation:r}){const{isDark:i}=qn(),o=re(x=>x.currentLanguage),a=re(x=>x.culturalNodes),u=re(x=>x.discoveredNodes),[d,f]=E.useState([]),[m,g]=E.useState(""),[v,w]=E.useState(!1),_=E.useRef(null),k=()=>{var x;(x=_.current)==null||x.scrollIntoView({behavior:"smooth"})};E.useEffect(()=>{k()},[d]),E.useEffect(()=>{if(t){const x=a.map(R=>R.title).join(", "),N=P("chatbot.welcomeMessage",o).replace("{count}",a.length).replace("{locations}",x);f([{role:"assistant",content:N}])}},[t,o,a]);const j=async()=>{if(!m.trim()||v)return;const x=m.trim();g(""),f(b=>[...b,{role:"user",content:x}]),w(!0);try{const b=RD.getGenerativeModel({model:"gemini-2.0-flash"}),N=a.map(ne=>({title:ne.title,description:ne.description,category:ne.category,historicalPeriod:ne.historicalPeriod,coordinates:`${ne.latitude}, ${ne.longitude}`,discovered:u.has(ne.id)})),B=`You are a knowledgeable and friendly tour guide assistant for Timioara, Romania.
You have access to the following cultural heritage locations in our database:

${JSON.stringify(N,null,2)}

Your role:
1. Help users learn about these specific locations in detail
2. Provide historical context and interesting facts about the monuments
3. Recommend nearby restaurants, cafes, and attractions around these locations
4. Create custom trip itineraries based on user preferences (interests, time available, etc.)
5. Answer questions about the architecture, history, and cultural significance
6. Provide practical information like opening hours, accessibility, etc.

IMPORTANT: When a user asks you to create a trip, plan a route, or make an itinerary based on their interests (like "make me a trip based on architecture" or "plan a 2-hour route for history lovers"), you MUST:
1. Select the most relevant locations from the database that match their preferences
2. Include a special JSON block at the END of your response with this exact format:

---ROUTE_DATA---
{"locations": ["Location Title 1", "Location Title 2", "Location Title 3"]}
---END_ROUTE_DATA---

3. Before the JSON block, provide a friendly explanation of the route in natural language

For example, if someone asks "make me a trip based on architecture":
- First, write a friendly response explaining the route
- Then add the JSON block with exact location titles from the database

Categories available: ${[...new Set(a.map(ne=>ne.category))].join(", ")}

Be conversational, informative, and enthusiastic about Timioara's rich history.
Keep responses concise but informative (2-4 paragraphs max).
Respond in ${o==="ro"?"Romanian":o==="hu"?"Hungarian":o==="de"?"German":o==="fr"?"French":o==="es"?"Spanish":"English"}.

User question: ${x}`,$=(await(await b.generateContent(B)).response).text();console.log("AI Response:",$);const X=$.match(/---ROUTE_DATA---(.*?)---END_ROUTE_DATA---/s);if(console.log("Route match found:",!!X),X)try{const Q=JSON.parse(X[1].trim()).locations||[];console.log("Parsed location titles:",Q);const W=a.filter(q=>Q.some(ue=>q.title.toLowerCase().includes(ue.toLowerCase())||ue.toLowerCase().includes(q.title.toLowerCase())));if(console.log("Selected nodes:",W.length,W.map(q=>q.title)),W.length>0&&r&&n){let q=$.replace(/---ROUTE_DATA---.*?---END_ROUTE_DATA---/s,"").trim();q=q.replace(/```json[\s\S]*?```/gi,"").trim(),q=q.replace(/```[\s\S]*?```/g,"").trim(),q=q.replace(/\{[\s\S]*?"locations"[\s\S]*?\}/g,"").trim(),q=q.replace(/\{[\s"]*locations[\s"]*:[\s\S]*?\}/g,"").trim(),q=q.replace(/```/g,"").trim(),q=q.replace(/^\s*["'`]+|["'`]+\s*$/g,"").trim(),q=q.split(`
`).filter(U=>!U.trim().match(/^[`'"{}[\]]+$/)&&U.trim()!=="json").join(`
`).trim(),f(U=>[...U,{role:"assistant",content:q}]),e();const ue=document.documentElement.classList.contains("dark"),M=U=>{var Y;return((Y={Architecture:{ro:"Arhitectur",hu:"ptszet",de:"Architektur",fr:"Architecture",es:"Arquitectura",en:"Architecture"},Monument:{ro:"Monument",hu:"Emlkm",de:"Denkmal",fr:"Monument",es:"Monumento",en:"Monument"},Museum:{ro:"Muzeu",hu:"Mzeum",de:"Museum",fr:"Muse",es:"Museo",en:"Museum"},Park:{ro:"Parc",hu:"Park",de:"Park",fr:"Parc",es:"Parque",en:"Park"},Church:{ro:"Biseric",hu:"Templom",de:"Kirche",fr:"glise",es:"Iglesia",en:"Church"},Square:{ro:"Pia",hu:"Tr",de:"Platz",fr:"Place",es:"Plaza",en:"Square"}}[U])==null?void 0:Y[o])||U},ee=W.map((U,O)=>`<div style="text-align: left; padding: 8px; margin: 4px 0; background: ${ue?"#374151":"#f3f4f6"}; border-radius: 6px;">
                <strong>${O+1}. ${U.title}</strong>
                <div style="font-size: 0.9em; opacity: 0.8; margin-top: 4px;">${M(U.category)}</div>
              </div>`).join(""),D=o==="ro"?"Recomandarea Asistentului:":o==="hu"?"Asszisztens Ajnlsa:":o==="de"?"Assistentenempfehlung:":o==="fr"?"Recommandation de l'Assistant:":o==="es"?"Recomendacin del Asistente:":"Assistant's Recommendation:",H=o==="ro"?"Locaii Sugerate:":o==="hu"?"Javasolt Helysznek:":o==="de"?"Vorgeschlagene Orte:":o==="fr"?"Lieux Suggrs:":o==="es"?"Lugares Sugeridos:":"Suggested Locations:";setTimeout(async()=>{(await K.fire({title:o==="ro"?"Confirmare Traseu":o==="hu"?"tvonal Megerstse":o==="de"?"Route Besttigen":o==="fr"?"Confirmer l'Itinraire":o==="es"?"Confirmar Ruta":"Confirm Trip",html:`
                  <div style="text-align: left; margin-bottom: 20px; padding: 12px; background: ${ue?"#1f2937":"#f9fafb"}; border-radius: 8px; border-left: 4px solid #6f4e35;">
                    <h4 style="margin: 0 0 8px 0; color: #6f4e35; font-size: 0.95em; font-weight: 600;">${D}</h4>
                    <p style="margin: 0; font-size: 0.9em; line-height: 1.5; white-space: pre-wrap;">${q}</p>
                  </div>
                  <div style="margin-bottom: 16px;">
                    <h4 style="margin: 0 0 12px 0; font-size: 1em; font-weight: 600; text-align: left;">${H}</h4>
                  </div>
                  ${ee}
                  <p style="margin-top: 16px; font-size: 0.95em;">
                    ${o==="ro"?"Dorii s creez acest traseu pe hart?":o==="hu"?"Szeretnd, hogy ltrehozzam ezt az tvonalat a trkpen?":o==="de"?"Soll ich diese Route auf der Karte erstellen?":o==="fr"?"Voulez-vous que je cre cet itinraire sur la carte?":o==="es"?"Quieres que cree esta ruta en el mapa?":"Would you like me to create this route on the map?"}
                  </p>
                `,icon:"question",showCancelButton:!0,confirmButtonText:o==="ro"?"Da, creeaz traseul":o==="hu"?"Igen, hozd ltre":o==="de"?"Ja, erstellen":o==="fr"?"Oui, crer":o==="es"?"S, crear":"Yes, create route",cancelButtonText:o==="ro"?"Nu, mulumesc":o==="hu"?"Nem, ksznm":o==="de"?"Nein, danke":o==="fr"?"Non, merci":o==="es"?"No, gracias":"No, thanks",confirmButtonColor:"#6f4e35",cancelButtonColor:"#9ca3af",background:ue?"#1f2937":"#ffffff",color:ue?"#f3f4f6":"#000000",width:"600px"})).isConfirmed&&(n(r,W),await K.fire({title:o==="ro"?"Traseu Creat!":o==="hu"?"tvonal Ltrehozva!":o==="de"?"Route Erstellt!":o==="fr"?"Itinraire Cr!":o==="es"?"Ruta Creada!":"Route Created!",text:o==="ro"?"Traseul tu a fost creat. Bucur-te de vizit!":o==="hu"?"Az tvonalad elkszlt. lvezd a ltogatst!":o==="de"?"Ihre Route wurde erstellt. Viel Spa beim Besuch!":o==="fr"?"Votre itinraire a t cr. Profitez de votre visite!":o==="es"?"Tu ruta ha sido creada. Disfruta de tu visita!":"Your route has been created. Enjoy your visit!",icon:"success",timer:2e3,showConfirmButton:!1,background:ue?"#1f2937":"#ffffff",color:ue?"#f3f4f6":"#000000"}))},500);return}}catch(ne){console.error("Failed to parse route data:",ne)}f(ne=>[...ne,{role:"assistant",content:$}])}catch(b){console.error("Chat error:",b);let N=P("chatbot.errorMessage",o);b.message&&b.message.includes("quota")&&(N=o==="ro"?"Limit de solicitri atins. V rugm s ncercai din nou mai trziu (aproximativ 40 de secunde).":o==="hu"?"Krslimit elrve. Krjk, prbld jra ksbb (krlbell 40 msodperc mlva).":o==="de"?"Anforderungslimit erreicht. Bitte versuchen Sie es spter erneut (etwa 40 Sekunden).":o==="fr"?"Limite de requtes atteinte. Veuillez ressayer plus tard (environ 40 secondes).":o==="es"?"Lmite de solicitudes alcanzado. Por favor, intntalo de nuevo ms tarde (aproximadamente 40 segundos).":"Request limit reached. Please try again later (approximately 40 seconds)."),f(R=>[...R,{role:"assistant",content:N}])}finally{w(!1)}},S=x=>{x.key==="Enter"&&!x.shiftKey&&(x.preventDefault(),j())};return t?c.jsx(ns,{children:c.jsx(Pt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-[2000] flex items-center justify-center p-4",onClick:e,children:c.jsxs(Pt.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:x=>x.stopPropagation(),className:`${i?"bg-neutral-900 text-white":"bg-white text-neutral-900"} rounded-xl shadow-2xl max-w-2xl w-full h-[600px] overflow-hidden flex flex-col`,children:[c.jsxs("div",{className:"bg-heritage-700 text-white p-4 flex items-center justify-between flex-shrink-0",children:[c.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[c.jsx(uh,{className:"w-6 h-6"}),P("chatbot.modalTitle",o)]}),c.jsx("button",{onClick:e,className:"p-1 hover:bg-heritage-800 rounded-lg transition-colors","aria-label":"Close",children:c.jsx(Oe,{className:"w-6 h-6"})})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[d.map((x,b)=>c.jsxs("div",{className:`flex gap-3 ${x.role==="user"?"justify-end":"justify-start"}`,children:[x.role==="assistant"&&c.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${i?"bg-heritage-800":"bg-heritage-200"}`,children:c.jsx(uh,{className:`w-5 h-5 ${i?"text-heritage-200":"text-heritage-800"}`})}),c.jsx("div",{className:`max-w-[75%] rounded-lg p-3 ${x.role==="user"?"bg-heritage-700 text-white":i?"bg-neutral-800 text-neutral-100":"bg-neutral-100 text-neutral-900"}`,children:c.jsx("p",{className:"text-sm whitespace-pre-wrap",children:x.content})}),x.role==="user"&&c.jsx("div",{className:"w-8 h-8 rounded-full bg-heritage-600 flex items-center justify-center flex-shrink-0",children:c.jsx(Zs,{className:"w-5 h-5 text-white"})})]},b)),v&&c.jsxs("div",{className:"flex gap-3 justify-start",children:[c.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${i?"bg-heritage-800":"bg-heritage-200"}`,children:c.jsx(uh,{className:`w-5 h-5 ${i?"text-heritage-200":"text-heritage-800"}`})}),c.jsx("div",{className:`rounded-lg p-3 ${i?"bg-neutral-800":"bg-neutral-100"}`,children:c.jsx(vr,{className:"w-5 h-5 animate-spin text-heritage-700"})})]}),c.jsx("div",{ref:_})]}),c.jsxs("div",{className:`p-4 border-t flex gap-2 flex-shrink-0 ${i?"border-neutral-700 bg-neutral-900":"border-neutral-200 bg-white"}`,children:[c.jsx("input",{type:"text",value:m,onChange:x=>g(x.target.value),onKeyPress:S,placeholder:P("chatbot.inputPlaceholder",o),className:`flex-1 px-4 py-2 rounded-lg focus:ring-2 focus:ring-heritage-500 focus:outline-none ${i?"bg-neutral-800 border border-neutral-700 text-white":"bg-neutral-50 border border-neutral-300 text-neutral-900"}`,disabled:v},o),c.jsx("button",{onClick:j,disabled:!m.trim()||v,className:"bg-heritage-700 hover:bg-heritage-800 text-white p-2 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Send",children:c.jsx(bR,{className:"w-5 h-5"})})]})]})})}):null}function OD(t){const e=E.useRef(null),n=E.useRef([]);E.useEffect(()=>()=>{a()},[]);const r=E.useCallback(async(d,f,m=null,g=!1)=>{var x,b,N,R;const v=t.current||re.getState().map,w=re.getState().currentLanguage,_=document.documentElement.classList.contains("dark");if(!v)return{success:!1};if(!d)return{success:!1};if(!f.length)return{success:!1};const k={}.VITE_OPENROUTESERVICE_API_KEY;if(!k)return await K.fire({title:"API Key Missing",text:"Please add your OpenRouteService API key to the .env file as VITE_OPENROUTESERVICE_API_KEY",icon:"error",confirmButtonColor:"#6f4e35",background:_?"#1f2937":"#ffffff",color:_?"#f3f4f6":"#000000"}),{success:!1};a();const j=20,S=f.length>j?f.slice(0,j):f;f.length>j&&await K.fire({title:"Route Optimized",text:`Showing route to the nearest ${j} nodes. Discover these first!`,icon:"info",confirmButtonColor:"#6f4e35",timer:3e3,background:_?"#1f2937":"#ffffff",color:_?"#f3f4f6":"#000000"});try{const B=S.length>=4;let I;if(B){console.log(" Using TSP optimization for",S.length,"nodes...");const te="https://api.openrouteservice.org/optimization",Se=S.map((Ze,bt)=>({id:bt+1,service:600,location:[Ze.longitude,Ze.latitude],skills:[1]})),ve={id:1,profile:"foot-walking",start:[d.lng,d.lat],end:[d.lng,d.lat],skills:[1]},xe=await fetch(te,{method:"POST",headers:{"Content-Type":"application/json",Authorization:k},body:JSON.stringify({jobs:Se,vehicles:[ve],options:{g:!0}})});if(!xe.ok){const Ze=await xe.text();throw console.error("Optimization API error:",Ze),new Error(`Optimization API error: ${xe.status}`)}const Ne=await xe.json();if(console.log(" TSP Optimization result:",Ne),!Ne.routes||Ne.routes.length===0)throw new Error("No optimized route found");I=Ne.routes[0].steps.filter(Ze=>Ze.type==="job").map(Ze=>{const bt=Ze.job-1;return S[bt]}),console.log(" TSP optimized order:",I.map(Ze=>Ze.title))}else{console.log(" Using nearest neighbor for",S.length,"nodes...");const te=(xe,Ne,He,We)=>{const bt=xe*Math.PI/180,Z=He*Math.PI/180,Ee=(He-xe)*Math.PI/180,De=(We-Ne)*Math.PI/180,_e=Math.sin(Ee/2)*Math.sin(Ee/2)+Math.cos(bt)*Math.cos(Z)*Math.sin(De/2)*Math.sin(De/2);return 6371e3*(2*Math.atan2(Math.sqrt(_e),Math.sqrt(1-_e)))},Se=[...S];I=[];let ve=d.lat,Me=d.lng;for(;Se.length>0;){let xe=0,Ne=1/0;for(let We=0;We<Se.length;We++){const Ze=te(ve,Me,Se[We].latitude,Se[We].longitude);Ze<Ne&&(Ne=Ze,xe=We)}const He=Se.splice(xe,1)[0];I.push(He),ve=He.latitude,Me=He.longitude}console.log(" Nearest neighbor order:",I.map(xe=>xe.title))}const F=[{lat:d.lat,lng:d.lng},...I.map(te=>({lat:te.latitude,lng:te.longitude}))],$=F.map(te=>[te.lng,te.lat]),Q=await fetch("https://api.openrouteservice.org/v2/directions/foot-walking/geojson",{method:"POST",headers:{"Content-Type":"application/json",Authorization:k},body:JSON.stringify({coordinates:$,preference:"shortest",instructions:!1})});if(!Q.ok)throw new Error(`Directions API error: ${Q.status}`);const W=await Q.json();if(!W.features||W.features.length===0)throw new Error("No routes found");const q=W.features[0];if(!q.geometry||!q.geometry.coordinates)throw new Error("Invalid route geometry in response");const M=q.geometry.coordinates.map(te=>[te[1],te[0]]);e.current=_n.polyline(M,{color:"#6f4e35",weight:6,opacity:.8}).addTo(v),F.forEach((te,Se)=>{const ve=Se===0;let Me;ve?Me=_n.divIcon({className:"custom-route-marker",html:'<div style="background-color: #3b82f6; width: 20px; height: 20px; border-radius: 50%; border: 3px solid white;"></div>',iconSize:[20,20],iconAnchor:[10,10]}):Me=_n.divIcon({className:"custom-route-marker",html:`<div style="background-color: #8b6441; width: 16px; height: 16px; border-radius: 50%; border: 2px solid white; display: flex; align-items: center; justify-content: center; color: white; font-size: 10px; font-weight: bold;">${Se}</div>`,iconSize:[16,16],iconAnchor:[8,8]});const xe=_n.marker([te.lat,te.lng],{icon:Me}).addTo(v);n.current.push(xe)});const ee=((b=(x=q.properties)==null?void 0:x.summary)==null?void 0:b.distance)||0,D=((R=(N=q.properties)==null?void 0:N.summary)==null?void 0:R.duration)||0,H=(ee/1e3).toFixed(1),U=Math.round(D/60),O=I.length*10,Y=U+O;if(m&&!g){const te=Y-m,Se=Math.ceil(m*.2);if(te>Se)return a(),{success:!1,timeExceeded:!0,totalTimeMin:Y,availableTime:m,nodes:I}}const ce=!m||Y<=m,ge=m&&Y>m&&Y<=m+Math.ceil(m*.2);await K.fire({title:` ${P("route.routeCreated",w)}`,html:`
          <div class="text-left space-y-2">
            ${ge?`<p class="text-orange-600 font-semibold mb-2"> ${P("route.routeSlightlyOver",w)}</p>`:`<p class="text-sm ${_?"text-green-400":"text-green-600"} font-semibold mb-2"> ${P("route.routeUses",w)} ${P("route.nearestNeighbor",w)}</p>`}
            <p><strong>${P("route.distance",w)}:</strong> ${H} ${P("route.kmWalkingRoute",w)}</p>
            <p><strong>${P("route.walkingTime",w)}:</strong> ${U} ${P("route.minutes",w)}</p>
            <p><strong>${P("route.visitTime",w)}:</strong> ${O} ${P("route.minutes",w)} (${P("route.minPerLocation",w)})</p>
            <p class="text-lg font-bold ${_?"text-heritage-400":"text-heritage-700"} mt-3">${P("route.totalTime",w)}: ${Y} ${P("route.minutes",w)}</p>
            ${m?`<p class="text-sm ${ce?_?"text-green-400":"text-green-600":"text-orange-600"}"> ${P("route.slightlyOverApproved",w)} ${m} ${P("route.minuteBudget",w)}</p>`:""}
            <p class="text-sm ${_?"text-neutral-400":"text-neutral-600"} mt-2">${P("route.visiting",w)} ${I.length} ${I.length!==1?P("route.locations",w):P("route.location",w)} (${P("route.alwaysClosest",w)})</p>
            <div class="mt-3 text-xs ${_?"text-neutral-400":"text-neutral-500"}">
              <p class="font-semibold mb-1">${P("route.routeOrder",w)}:</p>
              <ol class="list-decimal pl-5">
                ${I.map(te=>`<li>${te.title}</li>`).join("")}
              </ol>
            </div>
          </div>
        `,icon:ge?"warning":"success",confirmButtonColor:"#6f4e35",confirmButtonText:"OK",background:_?"#1f2937":"#ffffff",color:_?"#f3f4f6":"#000000"});const we=_n.latLngBounds(M);return v.fitBounds(we,{padding:[80,80],maxZoom:16}),{success:!0,totalTimeMin:Y,nodes:I}}catch(B){return console.error(" Route creation failed:",B),console.log(" Falling back to simple path..."),await i(d,S,v,m,g)}},[]),i=async(d,f,m,g=null,v=!1)=>{var b,N,R,B;if(!m||!d||!f.length)return{success:!1};re.getState().currentLanguage;const w=document.documentElement.classList.contains("dark"),_=(I,F,$,X)=>{const Q=I*Math.PI/180,W=$*Math.PI/180,q=($-I)*Math.PI/180,ue=(X-F)*Math.PI/180,M=Math.sin(q/2)*Math.sin(q/2)+Math.cos(Q)*Math.cos(W)*Math.sin(ue/2)*Math.sin(ue/2);return 6371e3*(2*Math.atan2(Math.sqrt(M),Math.sqrt(1-M)))},j=((I,F,$)=>{const X=[...$],ne=[];let Q=I,W=F;for(;X.length>0;){let q=0,ue=1/0;for(let ee=0;ee<X.length;ee++){const D=_(Q,W,X[ee].latitude,X[ee].longitude);D<ue&&(ue=D,q=ee)}const M=X.splice(q,1)[0];ne.push(M),Q=M.latitude,W=M.longitude}return ne})(d.lat,d.lng,f);console.log(" Fallback optimized order:",j.map(I=>I.title));const S=[{lat:d.lat,lng:d.lng},...j.map(I=>({lat:I.latitude,lng:I.longitude}))],x={}.VITE_OPENROUTESERVICE_API_KEY;if(x)try{const I=S.map(X=>[X.lng,X.lat]),$=await fetch("https://api.openrouteservice.org/v2/directions/foot-walking/geojson",{method:"POST",headers:{"Content-Type":"application/json",Authorization:x},body:JSON.stringify({coordinates:I,preference:"shortest"})});if($.ok){const ne=(await $.json()).features[0],W=ne.geometry.coordinates.map(ce=>[ce[1],ce[0]]);e.current=_n.polyline(W,{color:"#6f4e35",weight:6,opacity:.8}).addTo(m),o(S,m);const q=((N=(b=ne.properties)==null?void 0:b.summary)==null?void 0:N.distance)||0,ue=((B=(R=ne.properties)==null?void 0:R.summary)==null?void 0:B.duration)||0,M=(q/1e3).toFixed(1),ee=Math.round(ue/60),D=j.length*10,H=ee+D;if(g&&!v){const ce=H-g,ge=Math.ceil(g*.2);if(ce>ge)return a(),{success:!1,timeExceeded:!0,totalTimeMin:H,availableTime:g,nodes:j}}const U=!g||H<=g,O=g&&H>g&&H<=g+Math.ceil(g*.2);await K.fire({title:" Optimized Route Created!",html:`
              <div class="text-left space-y-2">
                ${O?'<p class="text-orange-600 font-semibold mb-2"> Route slightly exceeds your time budget but within tolerance</p>':`<p class="text-sm ${w?"text-blue-400":"text-blue-600"} font-semibold mb-2">Using nearest-neighbor optimization</p>`}
                <p><strong>Distance:</strong> ${M} km</p>
                <p><strong>Walking time:</strong> ${ee} min</p>
                <p><strong>Visit time:</strong> ${D} min</p>
                <p class="text-lg font-bold ${w?"text-heritage-400":"text-heritage-700"} mt-3">Total: ${H} min</p>
                ${g?`<p class="text-sm ${U?w?"text-green-400":"text-green-600":"text-orange-600"}">${U?" Within":" Slightly over (approved)"} your ${g} minute budget</p>`:""}
                <p class="text-sm ${w?"text-neutral-400":"text-neutral-600"} mt-2">${j.length} locations</p>
                <div class="mt-3 text-xs ${w?"text-neutral-400":"text-neutral-500"}">
                  <p class="font-semibold mb-1">Route order:</p>
                  <ol class="list-decimal pl-5">
                    ${j.map(ce=>`<li>${ce.title}</li>`).join("")}
                  </ol>
                </div>
              </div>
            `,icon:O?"warning":"success",confirmButtonColor:"#6f4e35",confirmButtonText:"OK",background:w?"#1f2937":"#ffffff",color:w?"#f3f4f6":"#000000"});const Y=_n.latLngBounds(W);return m.fitBounds(Y,{padding:[80,80],maxZoom:16}),{success:!0,totalTimeMin:H,nodes:j}}}catch(I){console.error("Fallback route API failed:",I)}return u(S,j,g,v)},o=(d,f)=>{d.forEach((m,g)=>{const v=g===0;let w;v?w=_n.divIcon({className:"custom-route-marker",html:'<div style="background-color: #3b82f6; width: 20px; height: 20px; border-radius: 50%; border: 3px solid white;"></div>',iconSize:[20,20],iconAnchor:[10,10]}):w=_n.divIcon({className:"custom-route-marker",html:`<div style="background-color: #8b6441; width: 16px; height: 16px; border-radius: 50%; border: 2px solid white; display: flex; align-items: center; justify-content: center; color: white; font-size: 10px; font-weight: bold;">${g}</div>`,iconSize:[16,16],iconAnchor:[8,8]});const _=_n.marker([m.lat,m.lng],{icon:w}).addTo(f);n.current.push(_)})},a=E.useCallback(()=>{const d=t.current||re.getState().map;e.current&&d&&(d.removeLayer(e.current),e.current=null),n.current.forEach(f=>{d&&d.removeLayer(f)}),n.current=[]},[]);function u(d,f=null,m=null,g=!1){const v=t.current||re.getState().map,w=document.documentElement.classList.contains("dark");if(!v)return{success:!1};const _=d.map(I=>[I.lat,I.lng]);e.current=_n.polyline(_,{color:"#6f4e35",weight:6,opacity:.8,dashArray:"10, 10"}).addTo(v),o(d,v);let k=0;for(let I=0;I<_.length-1;I++){const[F,$]=_[I],[X,ne]=_[I+1],Q=6371e3,W=F*Math.PI/180,q=X*Math.PI/180,ue=(X-F)*Math.PI/180,M=(ne-$)*Math.PI/180,ee=Math.sin(ue/2)*Math.sin(ue/2)+Math.cos(W)*Math.cos(q)*Math.sin(M/2)*Math.sin(M/2),D=2*Math.atan2(Math.sqrt(ee),Math.sqrt(1-ee));k+=Q*D}const j=(k/1e3).toFixed(1),S=Math.round(k/1.4),x=(d.length-1)*10,b=S+x;if(m&&!g){const I=b-m,F=Math.ceil(m*.2);if(I>F)return a(),{success:!1,timeExceeded:!0,totalTimeMin:b,availableTime:m,nodes:f||[]}}const N=!m||b<=m,R=m&&b>m&&b<=m+Math.ceil(m*.2);K.fire({title:"Simple Route Created",html:`
        <div class="text-left space-y-2">
          ${R?'<p class="text-orange-600 font-semibold mb-2"> Route slightly exceeds your time budget but within tolerance</p>':`<p class="text-sm ${w?"text-neutral-400":"text-neutral-600"} mb-2">Using straight-line approximation</p>`}
          <p><strong>Approx. distance:</strong> ${j} km</p>
          <p><strong>Est. walking time:</strong> ${S} min</p>
          <p><strong>Visit time:</strong> ${x} min</p>
          <p class="text-lg font-bold ${w?"text-heritage-400":"text-heritage-700"} mt-3">Total: ~${b} min</p>
          ${m?`<p class="text-sm ${N?w?"text-green-400":"text-green-600":"text-orange-600"}">${N?" Within":" Slightly over (approved)"} your ${m} minute budget</p>`:""}
          ${f?`
            <div class="mt-3 text-xs ${w?"text-neutral-400":"text-neutral-500"}">
              <p class="font-semibold mb-1">Route order:</p>
              <ol class="list-decimal pl-5">
                ${f.map(I=>`<li>${I.title}</li>`).join("")}
              </ol>
            </div>
          `:""}
        </div>
      `,icon:R?"warning":"info",confirmButtonColor:"#6f4e35",confirmButtonText:"OK",background:w?"#1f2937":"#ffffff",color:w?"#f3f4f6":"#000000"});const B=_n.latLngBounds(_);return v.fitBounds(B,{padding:[80,80],maxZoom:16}),{success:!0,totalTimeMin:b,nodes:f||[]}}return{createRoute:r,clearRoute:a}}function ID(t){return"geolocation"in navigator?navigator.geolocation.watchPosition(n=>{t({lat:n.coords.latitude,lng:n.coords.longitude,accuracy:n.coords.accuracy})},n=>{console.error("Location watch error:",n),n.code===1?console.error("Location permission denied"):n.code===2?console.error("Position unavailable"):n.code===3&&console.error("Timeout getting position")},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0,maximumAge:1e3}):null}function MD(t){t!==null&&navigator.geolocation.clearWatch(t)}function DD(){const[t,e]=E.useState(null),[n,r]=E.useState(!0),i=re(o=>o.setUserLocation);return E.useEffect(()=>{const o=ID(a=>{i(a),r(!1),e(null)});return o===null&&(e("Geolocation is not supported"),r(!1)),()=>{o!==null&&MD(o)}},[i]),{error:t,loading:n}}function BD({mapRef:t}){const{isDark:e}=qn(),n=E.useRef(null),{error:r,loading:i}=DD(),o=re(q=>q.userLocation),a=re(q=>q.culturalNodes),u=re(q=>q.discoveredNodes),d=re(q=>q.mapCenter),f=re(q=>q.mapZoom),m=re(q=>q.currentLanguage),g=re(q=>q.setMap),v=re(q=>q.setClearRouteFunction),w=re(q=>q.setCreateRouteFunction),{createRoute:_,clearRoute:k}=OD(n),[j,S]=E.useState(!1),[x,b]=E.useState([]),[N,R]=E.useState(!1),[B,I]=E.useState(!1);E.useEffect(()=>{t&&(t.current=n.current)},[t]),E.useEffect(()=>{n.current&&g(n.current)},[n.current,g]),E.useEffect(()=>{k&&v(k)},[k,v]),E.useEffect(()=>{_&&w(_)},[_,w]),E.useEffect(()=>{o&&n.current&&n.current.flyTo([o.lat,o.lng],16,{duration:1.5})},[o]);const F=()=>{o&&n.current&&n.current.flyTo([o.lat,o.lng],16,{duration:1})},$=async()=>{if(!o){await K.fire({title:P("route.locationRequired",m),text:P("route.enableLocationAccess",m),icon:"warning",confirmButtonColor:"#6f4e35",background:e?"#1f2937":"#ffffff",color:e?"#f3f4f6":"#000000"});return}const q=a.filter(ve=>!u.has(ve.id));if(q.length===0){await K.fire({title:P("route.allDiscovered",m),text:P("route.congratsAllDiscovered",m),icon:"success",confirmButtonColor:"#6f4e35",background:e?"#1f2937":"#ffffff",color:e?"#f3f4f6":"#000000"});return}const ue=["Architecture","Event","Person","Artifact","Scenic"],M={Architecture:P("categories.architecture",m),Event:P("categories.event",m),Person:P("categories.person",m),Artifact:P("categories.artifact",m),Scenic:P("categories.scenic",m)},ee=ue.map(ve=>`
      <div class="flex items-center gap-2 py-1.5">
        <input 
          type="checkbox" 
          id="category-${ve}" 
          value="${ve}"
          ${x.length===0||x.includes(ve)?"checked":""}
          class="w-4 h-4 text-heritage-600 ${e?"bg-neutral-700 border-neutral-500":"bg-gray-100 border-gray-300"} rounded focus:ring-heritage-500"
        />
        <label for="category-${ve}" class="text-sm font-medium ${e?"text-neutral-100":"text-gray-900"}">
          ${M[ve]}
        </label>
      </div>
    `).join(""),{value:D}=await K.fire({title:P("route.planYourRoute",m),html:`
        <div class="space-y-4 text-left">
          <div class="${e?"bg-heritage-900/20 border-heritage-700":"bg-heritage-50 border-heritage-200"} p-3 rounded-lg border">
            <label class="block text-sm font-semibold ${e?"text-neutral-100":"text-neutral-900"} mb-2">
              <span class="flex items-center gap-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z" />
                </svg>
                ${P("route.filterByCategory",m)}
              </span>
            </label>
            <p class="text-xs ${e?"text-neutral-400":"text-neutral-600"} mb-2">${P("route.selectLocationTypes",m)}</p>
            ${ee}
          </div>
          <div>
            <label class="block text-sm font-semibold ${e?"text-neutral-100":"text-neutral-900"} mb-2">
              ${P("route.howManyLocations",m)}
            </label>
            <input 
              id="swal-locations" 
              type="number" 
              min="1" 
              max="${q.length}" 
              value="${Math.min(3,q.length)}"
              class="w-full px-4 py-2 border ${e?"border-neutral-600 bg-neutral-700 text-neutral-100":"border-neutral-300 bg-white text-neutral-900"} rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-heritage-500"
            />
            <p class="text-xs ${e?"text-neutral-400":"text-neutral-600"} mt-1">${q.length} ${P("route.undiscoveredLocationsAvailable",m)}</p>
          </div>
          <div>
            <label class="block text-sm font-semibold ${e?"text-neutral-100":"text-neutral-900"} mb-2">
              ${P("route.howMuchTime",m)}
            </label>
            <input 
              id="swal-time" 
              type="number" 
              min="30" 
              max="480" 
              value="90"
              class="w-full px-4 py-2 border ${e?"border-neutral-600 bg-neutral-700 text-neutral-100":"border-neutral-300 bg-white text-neutral-900"} rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-heritage-500"
            />
            <p class="text-xs ${e?"text-neutral-400":"text-neutral-600"} mt-1">${P("route.includes10Minutes",m)}</p>
          </div>
        </div>
      `,focusConfirm:!1,showCancelButton:!0,confirmButtonColor:"#6f4e35",cancelButtonColor:"#6b7280",confirmButtonText:P("route.createRoute",m),cancelButtonText:P("route.cancel",m),background:e?"#1f2937":"#ffffff",color:e?"#f3f4f6":"#000000",preConfirm:()=>{const ve=parseInt(document.getElementById("swal-locations").value),Me=parseInt(document.getElementById("swal-time").value),xe=ue.filter(Ne=>document.getElementById(`category-${Ne}`).checked);return!ve||ve<1?(K.showValidationMessage("Please enter at least 1 location"),!1):ve>q.length?(K.showValidationMessage(`Maximum ${q.length} locations available`),!1):!Me||Me<30?(K.showValidationMessage("Please enter at least 30 minutes"),!1):{locations:ve,time:Me,categories:xe}}});if(!D)return;const{locations:H,time:U,categories:O}=D;b(O);let Y=a.filter(ve=>!u.has(ve.id));if(O.length>0&&(Y=Y.filter(ve=>O.includes(ve.category))),Y.length===0){await K.fire({title:P("route.noMatchingLocations",m),text:P("route.noUndiscoveredMatch",m),icon:"info",confirmButtonColor:"#6f4e35",background:e?"#1f2937":"#ffffff",color:e?"#f3f4f6":"#000000"});return}const ce=Math.min(H,Y.length),ge=(ve,Me,xe,Ne)=>{const We=ve*Math.PI/180,Ze=xe*Math.PI/180,bt=(xe-ve)*Math.PI/180,Z=(Ne-Me)*Math.PI/180,Ee=Math.sin(bt/2)*Math.sin(bt/2)+Math.cos(We)*Math.cos(Ze)*Math.sin(Z/2)*Math.sin(Z/2);return 6371e3*(2*Math.atan2(Math.sqrt(Ee),Math.sqrt(1-Ee)))},we=(ve,Me,xe,Ne)=>{if(xe.length<=Ne)return xe;const He=[],We=[...xe];let Ze=ve,bt=Me;for(let Z=0;Z<Ne;Z++){let Ee=0,De=1/0;for(let Nt=0;Nt<We.length;Nt++){const ir=ge(Ze,bt,We[Nt].latitude,We[Nt].longitude);ir<De&&(De=ir,Ee=Nt)}const _e=We.splice(Ee,1)[0];He.push(_e),Ze=_e.latitude,bt=_e.longitude}return He},te=we(o.lat,o.lng,Y,ce);console.log(` Creating route to ${te.length} locations (${U} min available)`),console.log("Selected nodes:",te.map(ve=>ve.title)),S(!0);const Se=await _(o,te,U);if(S(!1),Se.success)console.log(" Route creation successful");else if(Se.timeExceeded){console.log(" Route exceeded time, attempting with fewer nodes...");const Me=Math.max(1,Math.floor(U/12)),xe=Math.min(Me,te.length-1);if(xe<1){await K.fire({title:P("route.routeTooLong",m),html:`
            <div class="text-left space-y-2">
              <p class="text-red-600 font-semibold"> ${P("route.cannotCreateRoute",m)}</p>
              <p><strong>${P("route.availableTime",m)}:</strong> ${U} ${P("route.minutes",m)}</p>
              <p><strong>${P("route.minimumRouteTime",m)}:</strong> ~${Se.totalTimeMin} ${P("route.minutes",m)}</p>
              <p class="text-sm ${e?"text-neutral-400":"text-neutral-600"} mt-3">${P("route.pleaseTry",m)}:</p>
              <ul class="list-disc pl-5 text-sm">
                <li>${P("route.increaseTime",m)}</li>
                <li>${P("route.startCloser",m)}</li>
              </ul>
            </div>
          `,icon:"error",confirmButtonColor:"#6f4e35",background:e?"#1f2937":"#ffffff",color:e?"#f3f4f6":"#000000"});return}const{value:Ne}=await K.fire({title:P("route.routeAdjustmentNeeded",m),html:`
          <div class="text-left space-y-2">
            <p class="text-orange-600 font-semibold"> ${P("route.theRouteExceeds",m).replace("{count}",te.length)}</p>
            <p><strong>${P("route.yourTimeBudget",m)}:</strong> ${U} ${P("route.minutes",m)}</p>
            <p><strong>${P("route.routeWouldRequire",m)}:</strong> ${Se.totalTimeMin} ${P("route.minutes",m)}</p>
            <hr class="my-3 ${e?"border-neutral-600":"border-neutral-300"}">
            <p class="text-green-${e?"400":"700"} font-semibold"> ${P("route.weCanCreate",m).replace("{count}",xe).replace("{s}",xe>1?"s":"")}</p>
            <p class="text-sm ${e?"text-neutral-400":"text-neutral-600"} mt-2">${P("route.shorterRouteFit",m).replace("{time}",U)}</p>
            <p class="text-sm font-semibold ${e?"text-heritage-400":"text-heritage-700"} mt-3">${P("route.wouldYouLike",m)}</p>
          </div>
        `,icon:"question",showCancelButton:!0,confirmButtonColor:"#6f4e35",cancelButtonColor:"#6b7280",confirmButtonText:P("route.yesCreateShorter",m),cancelButtonText:P("route.noCancel",m),background:e?"#1f2937":"#ffffff",color:e?"#f3f4f6":"#000000"});if(Ne){const He=we(o.lat,o.lng,q,xe);console.log(` Retrying with ${He.length} nodes`),S(!0);const We=await _(o,He,U);S(!1),We.success?console.log(" Shorter route created successfully"):await K.fire({title:P("route.routeCreationFailed",m),text:P("route.unableToCreateRoute",m),icon:"error",confirmButtonColor:"#6f4e35",background:e?"#1f2937":"#ffffff",color:e?"#f3f4f6":"#000000"})}}else console.error(" Route creation failed"),await K.fire({title:P("route.routeCreationFailed",m),text:P("route.failedToCreateRoute",m),icon:"error",confirmButtonColor:"#6f4e35",background:e?"#1f2937":"#ffffff",color:e?"#f3f4f6":"#000000"})},X=()=>{if(!o){K.fire({title:P("customPath.enableLocationTitle",m),text:P("customPath.enableLocationText",m),icon:"warning",confirmButtonColor:"#6f4e35",background:e?"#1f2937":"#ffffff",color:e?"#f3f4f6":"#000000"});return}R(!0)},ne=async q=>{if(q.length===0){await K.fire({title:P("customPath.noNodesSelectedTitle",m),text:P("customPath.noNodesSelectedText",m),icon:"warning",confirmButtonColor:"#6f4e35",background:e?"#1f2937":"#ffffff",color:e?"#f3f4f6":"#000000"});return}S(!0);const ue=await _(o,q,null,!0);S(!1),ue.success?(console.log(" Custom route created successfully"),clearCustomPathSelection()):(console.error(" Custom route creation failed"),await K.fire({title:"Route Creation Failed",text:"Failed to create custom route. Please try again.",icon:"error",confirmButtonColor:"#6f4e35",background:e?"#1f2937":"#ffffff",color:e?"#f3f4f6":"#000000"}))},Q=()=>{R(!1)},W=()=>{k()};return c.jsxs("div",{className:"relative w-full h-screen",children:[c.jsxs(SD,{ref:n,center:d,zoom:f,className:"w-full h-full z-0",zoomControl:!1,children:[c.jsx(PD,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",className:"dark-mode-map"}),c.jsx(ED,{position:"bottomright"}),o&&c.jsx(TD,{position:o}),a.map(q=>c.jsx(ND,{node:q},q.id))]}),i&&c.jsx("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 bg-white px-4 py-2 rounded-lg shadow-lg z-[1000]",children:c.jsx("p",{className:"text-sm text-neutral-600",children:P("map.locatingYou",m)})}),j&&c.jsxs("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 bg-heritage-700 px-6 py-3 rounded-lg shadow-xl z-[1000] flex items-center gap-3",children:[c.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),c.jsx("p",{className:"text-sm font-semibold text-white",children:P("route.calculatingRoute",m)})]}),r&&c.jsx("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 bg-red-50 px-4 py-2 rounded-lg shadow-lg z-[1000] border border-red-200",children:c.jsx("p",{className:"text-sm text-red-600",children:r})}),o&&c.jsx("button",{onClick:F,className:"absolute bottom-24 right-4 bg-white p-3 rounded-full shadow-lg hover:bg-heritage-50 transition-colors z-[1000]","aria-label":"Recenter map",children:c.jsx(so,{className:"w-5 h-5 text-heritage-700"})}),o&&a.length>0&&c.jsxs("div",{className:"absolute bottom-20 left-2 md:left-4 flex flex-col gap-1.5 md:gap-2 z-[1000]",children:[c.jsxs("button",{onClick:()=>I(!0),className:"bg-heritage-500 hover:bg-heritage-600 text-white p-2.5 md:px-4 md:py-3 rounded-lg shadow-lg transition-colors font-semibold text-sm flex items-center justify-center md:justify-start gap-2","aria-label":P("chatbot.buttonText",m),title:P("chatbot.buttonText",m),children:[c.jsx(_R,{className:"w-5 h-5 md:w-4 md:h-4"}),c.jsx("span",{className:"hidden md:inline",children:P("chatbot.buttonText",m)})]}),c.jsxs("button",{onClick:X,className:"bg-heritage-600 hover:bg-heritage-700 text-white p-2.5 md:px-4 md:py-3 rounded-lg shadow-lg transition-colors font-semibold text-sm flex items-center justify-center md:justify-start gap-2","aria-label":P("customPath.buttonText",m),title:P("customPath.buttonText",m),children:[c.jsx(Qc,{className:"w-5 h-5 md:w-4 md:h-4"}),c.jsx("span",{className:"hidden md:inline",children:P("customPath.buttonText",m)})]}),c.jsxs("button",{onClick:$,className:"bg-heritage-700 text-white p-2.5 md:px-4 md:py-3 rounded-lg shadow-lg hover:bg-heritage-800 transition-colors font-semibold text-sm flex items-center justify-center md:justify-start gap-2","aria-label":P("map.findMyPath",m),title:P("map.findMyPath",m),children:[c.jsx(so,{className:"w-5 h-5 md:w-4 md:h-4"}),c.jsx("span",{className:"hidden md:inline",children:P("map.findMyPath",m)})]}),c.jsxs("button",{onClick:W,className:"bg-white dark:bg-neutral-800 text-heritage-700 dark:text-heritage-300 p-2.5 md:px-4 md:py-3 rounded-lg shadow-lg hover:bg-heritage-50 dark:hover:bg-neutral-700 transition-colors font-semibold text-sm border border-heritage-700 dark:border-heritage-400","aria-label":P("map.clearRoute",m),title:P("map.clearRoute",m),children:[c.jsx("span",{className:"hidden md:inline",children:P("map.clearRoute",m)}),c.jsx("span",{className:"md:hidden text-xs",children:"Clear"})]})]}),c.jsx(LD,{isOpen:N,onClose:Q,onStartRoute:ne}),c.jsx(AD,{isOpen:B,onClose:()=>I(!1),onCreateRoute:_,userLocation:o})]})}const tn=C1(t=>({isPlaying:!1,currentNode:null,currentTime:0,duration:0,audioElement:null,setAudioElement:e=>t({audioElement:e}),setIsPlaying:e=>t({isPlaying:e}),setCurrentNode:e=>t({currentNode:e}),setCurrentTime:e=>t({currentTime:e}),setDuration:e=>t({duration:e}),playAudio:e=>t(n=>(n.audioElement&&n.audioElement.pause(),{currentNode:e,isPlaying:!0})),pauseAudio:()=>t({isPlaying:!1}),stopAudio:()=>t({isPlaying:!1,currentNode:null,currentTime:0})}));async function $D(t){try{const{data:e,error:n}=await ke.from("reviews").select("*").eq("node_id",t).order("created_at",{ascending:!1});if(n)throw n;return{success:!0,reviews:e||[]}}catch(e){return console.error("Error fetching reviews:",e),{success:!1,error:e.message}}}async function UD(t){try{const{data:e,error:n}=await ke.from("reviews").select("rating").eq("node_id",t);if(n)throw n;if(!e||e.length===0)return{success:!0,averageRating:0,totalReviews:0};const i=e.reduce((o,a)=>o+a.rating,0)/e.length;return{success:!0,averageRating:Math.round(i*10)/10,totalReviews:e.length}}catch(e){return console.error("Error fetching node rating:",e),{success:!1,error:e.message}}}async function zD(t,e){try{const{data:n,error:r}=await ke.from("reviews").select("*").eq("node_id",t).eq("user_id",e).single();if(r&&r.code!=="PGRST116")throw r;return{success:!0,review:n||null}}catch(n){return console.error("Error fetching user review:",n),{success:!1,error:n.message}}}async function FD(t,e,n,r,i=""){try{if(!t||!e||!n)throw new Error("Missing required fields");if(r<1||r>5)throw new Error("Rating must be between 1 and 5");const{data:o,error:a}=await ke.from("reviews").insert([{node_id:t,user_id:e,username:n,rating:r,review_text:i}]).select().single();if(a)throw a;return{success:!0,review:o}}catch(o){return console.error("Error creating review:",o),{success:!1,error:o.message}}}async function VD(t,e,n=""){try{if(e<1||e>5)throw new Error("Rating must be between 1 and 5");const{data:r,error:i}=await ke.from("reviews").update({rating:e,review_text:n}).eq("id",t).select().single();if(i)throw i;return{success:!0,review:r}}catch(r){return console.error("Error updating review:",r),{success:!1,error:r.message}}}async function qD(t){try{const{error:e}=await ke.from("reviews").delete().eq("id",t);if(e)throw e;return{success:!0}}catch(e){return console.error("Error deleting review:",e),{success:!1,error:e.message}}}function pS(){var Se,ve,Me,xe,Ne,He,We,Ze,bt;const{user:t,profile:e}=cn(),{isDark:n}=qn(),r=re(Z=>Z.selectedNode),i=re(Z=>Z.clearSelectedNode),o=re(Z=>Z.discoveredNodes),a=re(Z=>Z.userLocation),u=re(Z=>Z.map);re(Z=>Z.clearRouteFunction);const d=re(Z=>Z.createRouteFunction),f=re(Z=>Z.currentLanguage),m=re(Z=>Z.translatedNodes),g=re(Z=>Z.setTranslatedNode),v=re(Z=>Z.nodeReviews),w=re(Z=>Z.setNodeReviews),_=re(Z=>Z.addReviewToNode),k=re(Z=>Z.updateReviewInNode),j=re(Z=>Z.removeReviewFromNode),S=tn(Z=>Z.currentNode),x=tn(Z=>Z.isPlaying),b=tn(Z=>Z.playAudio),N=tn(Z=>Z.pauseAudio),[R,B]=E.useState(0),[I,F]=E.useState(!1),[$,X]=E.useState(null),[ne,Q]=E.useState(!1),[W,q]=E.useState(null);E.useEffect(()=>{var Z;if(!r){X(null),document.body.style.overflow="unset";return}return document.body.style.overflow="hidden",B(0),M(),f==="en"?X(r):(Z=m[r.id])!=null&&Z[f]?X({...r,...m[r.id][f]}):ue(),()=>{document.body.style.overflow="unset"}},[r,f,m]);const ue=async()=>{if(r){F(!0);try{const Z=await wp(r,Xl(f));g(r.id,f,Z),X({...r,...Z})}catch(Z){console.error("Translation failed:",Z),await K.fire({title:"Translation Failed",text:"Unable to translate content. Showing original.",icon:"warning",confirmButtonColor:"#6f4e35",timer:2e3}),X(r)}finally{F(!1)}}},M=async()=>{if(r){Q(!0);try{const[Z,Ee,De]=await Promise.all([$D(r.id),UD(r.id),t?zD(r.id,t.id):Promise.resolve({success:!0,review:null})]);Z.success&&Ee.success&&w(r.id,Z.reviews,Ee.averageRating,Ee.totalReviews),De.success&&q(De.review)}catch(Z){console.error("Error fetching reviews:",Z)}finally{Q(!1)}}},ee=async()=>{const Z=re.getState().currentLanguage;if(!o.has(r.id)){await K.fire({title:P("reviews.unlockFirst",Z)||"Unlock Location First",text:P("reviews.discoverToReview",Z)||"You must discover this location before leaving a review.",icon:"warning",confirmButtonColor:"#6f4e35",background:n?"#1f2937":"#ffffff",color:n?"#f3f4f6":"#000000",customClass:{container:"z-[2100]"}});return}const{value:De}=await K.fire({title:W?P("reviews.editReview",Z)||"Edit Your Review":P("reviews.leaveReview",Z)||"Leave a Review",html:`
        <div class="space-y-4 text-left">
          <div>
            <label class="block text-sm font-semibold ${n?"text-neutral-100":"text-neutral-900"} mb-2">
              ${P("reviews.rating",Z)||"Rating"}
            </label>
            <div class="flex gap-2 justify-center mb-4" id="star-rating">
              ${[1,2,3,4,5].map(_e=>`
                <button type="button" class="star-btn text-4xl ${_e<=((W==null?void 0:W.rating)||0)?"text-amber-500":"text-neutral-300"}" data-rating="${_e}">
                  
                </button>
              `).join("")}
            </div>
            <input type="hidden" id="rating-value" value="${(W==null?void 0:W.rating)||0}">
          </div>
          <div>
            <label class="block text-sm font-semibold ${n?"text-neutral-100":"text-neutral-900"} mb-2">
              ${P("reviews.yourReview",Z)||"Your Review"} (${P("reviews.optional",Z)||"Optional"})
            </label>
            <textarea
              id="review-text"
              rows="4"
              class="w-full px-4 py-2 border ${n?"border-neutral-600 bg-neutral-700 text-neutral-100":"border-neutral-300 bg-white text-neutral-900"} rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-heritage-500"
              placeholder="${P("reviews.sharethoughts",Z)||"Share your thoughts about this location..."}"
            >${(W==null?void 0:W.review_text)||""}</textarea>
          </div>
        </div>
      `,showCancelButton:!0,confirmButtonColor:"#6f4e35",cancelButtonColor:"#6b7280",confirmButtonText:W?P("reviews.update",Z)||"Update":P("reviews.submit",Z)||"Submit",cancelButtonText:P("common.cancel",Z)||"Cancel",background:n?"#1f2937":"#ffffff",color:n?"#f3f4f6":"#000000",customClass:{container:"z-[2100]"},didOpen:()=>{const _e=document.querySelectorAll(".star-btn"),Nt=document.getElementById("rating-value");_e.forEach(ir=>{ir.addEventListener("click",()=>{const So=parseInt(ir.dataset.rating);Nt.value=So,_e.forEach((gi,Ju)=>{Ju<So?(gi.classList.remove("text-neutral-300"),gi.classList.add("text-amber-500")):(gi.classList.remove("text-amber-500"),gi.classList.add("text-neutral-300"))})})})},preConfirm:()=>{const _e=parseInt(document.getElementById("rating-value").value),Nt=document.getElementById("review-text").value;return!_e||_e<1?(K.showValidationMessage(P("reviews.selectRating",Z)||"Please select a rating"),!1):{rating:_e,reviewText:Nt}}});if(De)try{let _e;if(W?(_e=await VD(W.id,De.rating,De.reviewText),_e.success&&(k(r.id,_e.review),q(_e.review))):(_e=await FD(r.id,t.id,(e==null?void 0:e.username)||t.email,De.rating,De.reviewText),_e.success&&(_(r.id,_e.review),q(_e.review))),_e.success)await K.fire({title:P("reviews.success",Z)||"Success!",text:W?P("reviews.reviewUpdated",Z)||"Your review has been updated":P("reviews.reviewSubmitted",Z)||"Your review has been submitted",icon:"success",confirmButtonColor:"#6f4e35",timer:2e3,background:n?"#1f2937":"#ffffff",color:n?"#f3f4f6":"#000000",customClass:{container:"z-[2100]"}});else throw new Error(_e.error)}catch(_e){console.error("Error submitting review:",_e),await K.fire({title:P("common.error",Z)||"Error",text:_e.message||P("reviews.submitFailed",Z)||"Failed to submit review. Please try again.",icon:"error",confirmButtonColor:"#6f4e35",background:n?"#1f2937":"#ffffff",color:n?"#f3f4f6":"#000000",customClass:{container:"z-[2100]"}})}},D=async Z=>{const Ee=re.getState().currentLanguage;if((await K.fire({title:P("reviews.deleteConfirm",Ee)||"Delete Review?",text:P("reviews.deleteWarning",Ee)||"This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280",confirmButtonText:P("common.delete",Ee)||"Delete",cancelButtonText:P("common.cancel",Ee)||"Cancel",background:n?"#1f2937":"#ffffff",color:n?"#f3f4f6":"#000000",customClass:{container:"z-[2100]"}})).isConfirmed)try{const _e=await qD(Z);if(_e.success)j(r.id,Z),(W==null?void 0:W.id)===Z&&q(null),await K.fire({title:P("reviews.deleted",Ee)||"Deleted",text:P("reviews.reviewDeleted",Ee)||"Your review has been deleted",icon:"success",confirmButtonColor:"#6f4e35",timer:2e3,background:n?"#1f2937":"#ffffff",color:n?"#f3f4f6":"#000000",customClass:{container:"z-[2100]"}});else throw new Error(_e.error)}catch(_e){console.error("Error deleting review:",_e),await K.fire({title:P("common.error",Ee)||"Error",text:P("reviews.deleteFailed",Ee)||"Failed to delete review. Please try again.",icon:"error",confirmButtonColor:"#6f4e35",background:n?"#1f2937":"#ffffff",color:n?"#f3f4f6":"#000000",customClass:{container:"z-[2100]"}})}},H=(Z,Ee="w-5 h-5")=>c.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(De=>c.jsx(hh,{className:`${Ee} ${De<=Math.round(Z)?"fill-amber-500 text-amber-500":"fill-neutral-300 text-neutral-300 dark:fill-neutral-600 dark:text-neutral-600"}`},De))});if(!r)return null;const U=o.has(r.id),O=(S==null?void 0:S.id)===r.id&&x,Y=r.videos&&r.videos.length>0,ce=()=>{O?N():b(r)},ge=()=>{if(!(!a||!r||!u)){if(!d){console.error("Create route function not available");return}d(a,[r]),i()}},we=()=>{Y&&B(Z=>(Z+1)%r.videos.length)},te=()=>{Y&&B(Z=>Z===0?r.videos.length-1:Z-1)};return c.jsx(ns,{children:r&&c.jsxs(c.Fragment,{children:[c.jsx(Pt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-[2000]",onClick:i}),c.jsx(Pt.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:30,stiffness:300},className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-neutral-800 rounded-t-3xl shadow-2xl z-[2001] max-h-[85vh] overflow-y-auto",children:I?c.jsxs("div",{className:"p-8 flex flex-col items-center justify-center min-h-[400px]",children:[c.jsx(vr,{className:"w-12 h-12 text-heritage-700 dark:text-heritage-400 animate-spin mb-4"}),c.jsxs("p",{className:"text-neutral-700 dark:text-neutral-300 font-medium",children:[P("loading",f)," ",Xl(f),"..."]}),c.jsxs("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mt-2",children:[P("translatedTo",f)," ",Xl(f)]})]}):$?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"sticky top-0 bg-white dark:bg-neutral-800 px-6 py-4 border-b border-neutral-200 dark:border-neutral-700 rounded-t-3xl z-10",children:c.jsxs("div",{className:"flex items-start justify-between gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white mb-2",children:($==null?void 0:$.title)||r.title}),c.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[H(((Se=v[r.id])==null?void 0:Se.averageRating)||0),c.jsxs("span",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:[((Me=(ve=v[r.id])==null?void 0:ve.averageRating)==null?void 0:Me.toFixed(1))||"0.0"," ","(",((xe=v[r.id])==null?void 0:xe.totalReviews)||0," ",P("reviews.reviews",f)||"reviews",")"]})]}),f!=="en"&&c.jsxs("p",{className:"text-xs text-heritage-600 dark:text-heritage-400 mt-1",children:[" ",P("node.translatedTo",f)," ",Xl(f)]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[t&&c.jsxs("button",{onClick:ee,disabled:!o.has(r.id),className:`px-4 py-2 rounded-lg font-semibold text-sm transition-all flex items-center gap-2 ${o.has(r.id)?"bg-heritage-700 hover:bg-heritage-800 text-white":"bg-neutral-200 dark:bg-neutral-700 text-neutral-400 dark:text-neutral-500 cursor-not-allowed"}`,title:o.has(r.id)?"":P("reviews.unlockToReview",f)||"Unlock location to review",children:[W?c.jsx(dw,{className:"w-4 h-4"}):c.jsx(hh,{className:"w-4 h-4"}),c.jsx("span",{children:W?P("reviews.editReview",f)||"Edit Review":P("reviews.leaveReview",f)||"Leave Review"})]}),c.jsx("button",{onClick:i,className:"p-2 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-full transition-colors","aria-label":"Close",children:c.jsx(Oe,{className:"w-5 h-5 text-neutral-600 dark:text-neutral-300"})})]})]})}),c.jsxs("div",{className:"p-6",children:[Y&&c.jsxs("div",{className:"relative w-full mb-6 rounded-xl overflow-hidden bg-black",children:[c.jsxs("video",{className:"w-full h-64 object-cover",controls:!0,autoPlay:!0,playsInline:!0,children:[c.jsx("source",{src:r.videos[R].url,type:"video/mp4"}),"Your browser does not support the video tag."]},R),r.videos.length>1&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:te,className:"absolute left-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-2 rounded-full transition-colors","aria-label":"Previous video",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),c.jsx("button",{onClick:we,className:"absolute right-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-2 rounded-full transition-colors","aria-label":"Next video",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),c.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-1",children:r.videos.map((Z,Ee)=>c.jsx("button",{onClick:()=>B(Ee),className:`w-2 h-2 rounded-full transition-colors ${Ee===R?"bg-white":"bg-white/50"}`,"aria-label":`Video ${Ee+1}`},Ee))})]}),r.videos[R].caption&&c.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4",children:c.jsx("p",{className:"text-sm text-white",children:((He=(Ne=$==null?void 0:$.videos)==null?void 0:Ne[R])==null?void 0:He.caption)||r.videos[R].caption})})]}),r.primaryImageUrl&&c.jsxs("div",{className:"relative w-full h-64 rounded-xl overflow-hidden mb-6",children:[c.jsx("img",{src:r.primaryImageUrl,alt:r.title,className:"w-full h-full object-cover"}),!U&&c.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:c.jsxs("div",{className:"text-center text-white px-4",children:[c.jsx(It,{className:"w-12 h-12 mx-auto mb-2"}),c.jsx("p",{className:"text-sm font-medium",children:"Get closer to unlock"})]})})]}),c.jsxs("div",{className:"flex items-center gap-4 mb-4 text-sm text-neutral-600 dark:text-neutral-300",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(pp,{className:"w-4 h-4"}),c.jsx("span",{children:$.historicalPeriod||r.historicalPeriod})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(O1,{className:"w-4 h-4"}),c.jsx("span",{children:$.category||r.category})]})]}),a&&c.jsxs("button",{onClick:ge,className:"w-full mb-6 bg-amber-600 hover:bg-amber-700 text-white px-6 py-4 rounded-xl flex items-center justify-center gap-3 transition-colors font-semibold",children:[c.jsx(so,{className:"w-5 h-5"}),c.jsx("span",{children:P("node.getDirections",f)})]}),c.jsx("p",{className:"text-neutral-700 dark:text-neutral-300 mb-6 leading-relaxed",children:U?$.description||r.description:P("node.unlockLocation",f)}),U&&r.audioUrl&&c.jsx("button",{onClick:ce,className:"w-full mb-6 bg-heritage-700 hover:bg-heritage-800 text-white px-6 py-4 rounded-xl flex items-center justify-center gap-3 transition-colors",children:O?c.jsxs(c.Fragment,{children:[c.jsx(R1,{className:"w-5 h-5"}),c.jsx("span",{className:"font-semibold",children:P("node.pauseStory",f)})]}):c.jsxs(c.Fragment,{children:[c.jsx(A1,{className:"w-5 h-5"}),c.jsxs("span",{className:"font-semibold",children:[P("node.listenToStory",f)," (",Math.floor(r.audioDuration/60),":",(r.audioDuration%60).toString().padStart(2,"0"),")"]})]})}),U&&r.images&&r.images.length>0&&c.jsx("div",{className:"mt-6 space-y-4",children:r.images.map((Z,Ee)=>{var _e,Nt;const De=((Nt=(_e=$==null?void 0:$.images)==null?void 0:_e[Ee])==null?void 0:Nt.caption)||Z.caption;return c.jsxs("div",{className:"space-y-2",children:[c.jsx("img",{src:Z.url,alt:De,className:"w-full rounded-lg"}),c.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-400 italic",children:De})]},Ee)})}),c.jsxs("div",{className:"mt-8 pt-8 border-t border-neutral-200 dark:border-neutral-700",children:[c.jsxs("h4",{className:"text-xl font-bold text-neutral-900 dark:text-white mb-4",children:[P("reviews.title",f)||"Reviews"," (",((We=v[r.id])==null?void 0:We.totalReviews)||0,")"]}),ne?c.jsx("div",{className:"flex justify-center py-8",children:c.jsx(vr,{className:"w-8 h-8 text-heritage-700 dark:text-heritage-400 animate-spin"})}):((bt=(Ze=v[r.id])==null?void 0:Ze.reviews)==null?void 0:bt.length)>0?c.jsx("div",{className:"space-y-4",children:v[r.id].reviews.map(Z=>c.jsx("div",{className:"bg-neutral-50 dark:bg-neutral-900 p-4 rounded-lg",children:c.jsxs("div",{className:"flex items-start justify-between mb-2",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("span",{className:"font-semibold text-neutral-900 dark:text-white",children:Z.username}),c.jsxs("div",{className:"flex items-center gap-1",children:[H(Z.rating,"w-4 h-4"),c.jsxs("span",{className:"text-sm text-neutral-600 dark:text-neutral-400 ml-1",children:[Z.rating,"/5"]})]})]}),Z.review_text&&c.jsx("p",{className:"text-neutral-700 dark:text-neutral-300 text-sm",children:Z.review_text}),c.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-500 mt-2",children:new Date(Z.created_at).toLocaleDateString(f==="ro"?"ro-RO":"en-US",{year:"numeric",month:"long",day:"numeric"})})]}),t&&Z.user_id===t.id&&c.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[c.jsx("button",{onClick:ee,className:"p-2 hover:bg-neutral-200 dark:hover:bg-neutral-800 rounded-lg transition-colors","aria-label":"Edit review",children:c.jsx(dw,{className:"w-4 h-4 text-heritage-700 dark:text-heritage-400"})}),c.jsx("button",{onClick:()=>D(Z.id),className:"p-2 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg transition-colors","aria-label":"Delete review",children:c.jsx(kR,{className:"w-4 h-4 text-red-600 dark:text-red-400"})})]})]})},Z.id))}):c.jsxs("div",{className:"text-center py-8",children:[c.jsx(hh,{className:"w-12 h-12 text-neutral-300 dark:text-neutral-600 mx-auto mb-3"}),c.jsx("p",{className:"text-neutral-600 dark:text-neutral-400",children:P("reviews.noReviews",f)||"No reviews yet. Be the first to review!"}),t&&o.has(r.id)&&c.jsx("button",{onClick:ee,className:"mt-4 bg-heritage-700 hover:bg-heritage-800 text-white px-6 py-2 rounded-lg font-semibold transition-colors",children:P("reviews.beFirst",f)||"Leave the First Review"})]})]})]})]}):c.jsx("div",{className:"p-8 text-center",children:c.jsx("p",{className:"text-neutral-600 dark:text-neutral-300",children:"Loading..."})})})]})})}function gS(){const t=E.useRef(null),e=tn(S=>S.currentNode),n=tn(S=>S.isPlaying),r=tn(S=>S.currentTime),i=tn(S=>S.duration),o=tn(S=>S.setAudioElement),a=tn(S=>S.setCurrentTime),u=tn(S=>S.setDuration),d=tn(S=>S.setIsPlaying),f=tn(S=>S.stopAudio);E.useEffect(()=>{t.current&&o(t.current)},[o]),E.useEffect(()=>{const S=t.current;!S||!e||(n?S.play().catch(x=>{console.error("Audio playback error:",x),d(!1)}):S.pause())},[n,e,d]);const m=()=>{t.current&&a(t.current.currentTime)},g=()=>{t.current&&u(t.current.duration)},v=()=>{d(!1),a(0)},w=S=>{const x=t.current;if(!x)return;const b=S.currentTarget.getBoundingClientRect(),B=(S.clientX-b.left)/b.width*i;x.currentTime=B,a(B)},_=()=>{d(!n)},k=S=>{const x=Math.floor(S/60),b=Math.floor(S%60);return`${x}:${b.toString().padStart(2,"0")}`},j=i>0?r/i*100:0;return c.jsxs(c.Fragment,{children:[c.jsx("audio",{ref:t,src:e==null?void 0:e.audioUrl,onTimeUpdate:m,onLoadedMetadata:g,onEnded:v}),c.jsx(ns,{children:e&&c.jsx(Pt.div,{initial:{y:100},animate:{y:0},exit:{y:100},className:"fixed bottom-0 left-0 right-0 bg-white border-t border-neutral-200 shadow-lg z-[1500]",children:c.jsxs("div",{className:"px-4 py-3",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h4",{className:"text-sm font-semibold text-neutral-900 truncate",children:e.title}),c.jsxs("p",{className:"text-xs text-neutral-600",children:[k(r)," / ",k(i)]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:_,className:"p-2 bg-heritage-700 text-white rounded-full hover:bg-heritage-800 transition-colors","aria-label":n?"Pause":"Play",children:n?c.jsx(R1,{className:"w-4 h-4"}):c.jsx(A1,{className:"w-4 h-4"})}),c.jsx("button",{onClick:f,className:"p-2 hover:bg-neutral-100 rounded-full transition-colors","aria-label":"Close",children:c.jsx(Oe,{className:"w-4 h-4 text-neutral-600"})})]})]}),c.jsx("div",{className:"w-full h-1 bg-neutral-200 rounded-full cursor-pointer",onClick:w,children:c.jsx("div",{className:"h-full bg-heritage-600 rounded-full transition-all",style:{width:`${j}%`}})})]})})})]})}function HD(){const[t,e]=E.useState(!1),[n,r]=E.useState(0);E.useEffect(()=>{localStorage.getItem("echoes-onboarding-seen")||e(!0)},[]);const i=[{icon:It,title:"Walk to Discover Stories",description:"As you explore the city, cultural nodes will appear on your map. Walk closer to unlock their secrets."},{icon:T1,title:"Unlock Content When Nearby",description:"Within 100 meters of a node, you'll unlock audio stories, historic photos, and fascinating details."},{icon:ei,title:"Save Your Journey",description:"Track your discoveries and build a personal collection of the city's cultural heritage."}],o=()=>{n<i.length-1?r(n+1):a()},a=()=>{localStorage.setItem("echoes-onboarding-seen","true"),e(!1)},u=()=>{a()};return c.jsx(ns,{children:t&&c.jsx(Pt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 dark:bg-black/90 z-[3000] flex items-center justify-center p-6",children:c.jsxs(Pt.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-neutral-800 rounded-2xl p-8 max-w-md w-full border border-neutral-200 dark:border-neutral-700",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("div",{className:"flex justify-center mb-4",children:nr.createElement(i[n].icon,{className:"w-16 h-16 text-heritage-700 dark:text-heritage-400"})}),c.jsx("h2",{className:"text-2xl font-bold text-neutral-900 dark:text-white mb-2",children:i[n].title}),c.jsx("p",{className:"text-neutral-600 dark:text-neutral-300",children:i[n].description})]}),c.jsx("div",{className:"flex justify-center gap-2 mb-6",children:i.map((d,f)=>c.jsx("div",{className:`h-1.5 rounded-full transition-all ${f===n?"w-8 bg-heritage-700 dark:bg-heritage-500":"w-1.5 bg-heritage-300 dark:bg-heritage-600"}`},f))}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:u,className:"flex-1 px-6 py-3 text-heritage-700 dark:text-heritage-400 hover:text-heritage-900 dark:hover:text-heritage-200 font-medium transition-colors",children:"Skip"}),c.jsx("button",{onClick:o,className:"flex-1 px-6 py-3 bg-heritage-700 dark:bg-heritage-600 hover:bg-heritage-800 dark:hover:bg-heritage-700 text-white rounded-lg font-semibold transition-colors",children:n<i.length-1?"Next":"Get Started"})]})]})})})}async function vS(){try{const{data:t,error:e}=await ke.from("cultural_nodes").select("*").order("created_at",{ascending:!0});return e?(console.error("Error fetching cultural nodes:",e),[]):t.map(n=>({id:n.id,title:n.title,slug:n.slug,latitude:parseFloat(n.latitude),longitude:parseFloat(n.longitude),proximityRadius:n.proximity_radius,description:n.description,historicalPeriod:n.historical_period,category:n.category,audioUrl:n.audio_url,audioDuration:n.audio_duration,primaryImageUrl:n.primary_image_url,videos:n.videos||[],images:n.images||[]}))}catch(t){return console.error("Unexpected error fetching nodes:",t),[]}}async function WD(t){try{const{data:e,error:n}=await ke.from("cultural_nodes").insert([{title:t.title,slug:t.slug,latitude:t.latitude,longitude:t.longitude,proximity_radius:t.proximityRadius,description:t.description,historical_period:t.historicalPeriod,category:t.category,audio_url:t.audioUrl,audio_duration:t.audioDuration,primary_image_url:t.primaryImageUrl,videos:t.videos||[],images:t.images||[]}]).select().single();return n?(console.error("Error creating cultural node:",n),{success:!1,error:n.message}):{success:!0,data:e}}catch(e){return console.error("Unexpected error creating node:",e),{success:!1,error:e.message}}}async function ZD(t,e){try{const{data:n,error:r}=await ke.from("user_discoveries").insert([{user_id:t,node_id:e}]).select().single();return r?r.code==="23505"?{success:!0,message:"Already discovered"}:(console.error("Error saving discovery:",r),{success:!1,error:r.message}):{success:!0,data:n}}catch(n){return console.error("Unexpected error saving discovery:",n),{success:!1,error:n.message}}}async function wS(t){try{const{data:e,error:n}=await ke.from("user_discoveries").select("node_id").eq("user_id",t);return n?(console.error("Error fetching discoveries:",n),[]):e.map(r=>r.node_id)}catch(e){return console.error("Unexpected error fetching discoveries:",e),[]}}function GD(){const{user:t}=cn(),e=re(u=>u.userLocation),n=re(u=>u.culturalNodes),r=re(u=>u.addDiscoveredNode),[i,o]=E.useState([]),a=E.useRef(null);return E.useEffect(()=>{if(!e){a.current&&(clearInterval(a.current),a.current=null);return}return n.length===0?void 0:((()=>{console.log("Checking proximity at:",new Date().toLocaleTimeString());const d=re.getState().discoveredNodes,f=n.filter(m=>{const g=mS(e.lat,e.lng,m.latitude,m.longitude,m.proximityRadius);return g&&(d.has(m.id)||(console.log(" NEW NODE DISCOVERED:",m.title),r(m.id),t&&ZD(t.id,m.id).then(w=>{w.success?console.log(" Discovery saved to database:",m.title):console.error(" Failed to save discovery:",w.error)}),"vibrate"in navigator&&navigator.vibrate([200,100,200]))),g});o(f)})(),()=>{a.current&&(clearInterval(a.current),a.current=null)})},[e,r]),i}function KD(){E.useRef(null),mn();const{user:t}=cn();cn();const e=re(r=>r.setCulturalNodes),n=re(r=>r.addDiscoveredNode);return GD(),E.useEffect(()=>{async function r(){const i=await vS();e(i),t&&(await wS(t.id)).forEach(a=>{n(a)})}r(),tA()},[e,n,t]),c.jsxs("div",{className:"relative",children:[c.jsx(BD,{}),c.jsx(pS,{}),c.jsx(gS,{}),c.jsx(HD,{})]})}function YD(){const t=mn(),{profile:e,loading:n}=cn(),{isDark:r}=qn(),[i,o]=E.useState("create"),[a,u]=E.useState([]),[d,f]=E.useState(!1),[m,g]=E.useState(null),[v,w]=E.useState(null),[_,k]=E.useState({title:"",latitude:"",longitude:"",proximityRadius:"100",description:"",historicalPeriod:"",category:"Architecture",audioUrl:"",audioDuration:"",primaryImageUrl:"",images:[],videos:[]}),[j,S]=E.useState({url:"",caption:"",historicalDate:""}),[x,b]=E.useState({url:"",caption:""});E.useEffect(()=>{i==="requests"&&N()},[i]);const N=async()=>{f(!0);try{const{data:M,error:ee}=await ke.from("location_requests").select("*").order("created_at",{ascending:!1});if(ee)throw ee;u(M||[])}catch(M){console.error("Error fetching requests:",M),await K.fire({title:"Error",text:"Failed to fetch location requests",icon:"error",confirmButtonColor:"#6f4e35",background:r?"#1f2937":"#ffffff",color:r?"#f3f4f6":"#000000"})}finally{f(!1)}},R=async M=>{g(M);try{const{error:ee}=await ke.from("location_requests").update({status:"approved",reviewed_at:new Date().toISOString()}).eq("id",M);if(ee)throw ee;await K.fire({title:"Approved!",text:"Location request has been approved.",icon:"success",confirmButtonColor:"#6f4e35",background:r?"#1f2937":"#ffffff",color:r?"#f3f4f6":"#000000"}),N()}catch(ee){console.error("Error approving request:",ee),await K.fire({title:"Error",text:"Failed to approve request",icon:"error",confirmButtonColor:"#6f4e35",background:r?"#1f2937":"#ffffff",color:r?"#f3f4f6":"#000000"})}finally{g(null)}},B=async M=>{if((await K.fire({title:"Discard Request?",text:"This will reject this location request. This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, discard it",background:r?"#1f2937":"#ffffff",color:r?"#f3f4f6":"#000000"})).isConfirmed){g(M);try{const{error:D}=await ke.from("location_requests").update({status:"rejected",reviewed_at:new Date().toISOString()}).eq("id",M);if(D)throw D;await K.fire({title:"Discarded!",text:"Location request has been rejected.",icon:"success",confirmButtonColor:"#6f4e35",background:r?"#1f2937":"#ffffff",color:r?"#f3f4f6":"#000000"}),N()}catch(D){console.error("Error discarding request:",D),await K.fire({title:"Error",text:"Failed to discard request",icon:"error",confirmButtonColor:"#6f4e35",background:r?"#1f2937":"#ffffff",color:r?"#f3f4f6":"#000000"})}finally{g(null)}}},I=async M=>{if((await K.fire({title:"Delete Request Permanently?",text:"This will permanently remove this request from the database. This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, delete it permanently",background:r?"#1f2937":"#ffffff",color:r?"#f3f4f6":"#000000"})).isConfirmed){g(M);try{const{error:D}=await ke.from("location_requests").delete().eq("id",M);if(D)throw D;await K.fire({title:"Deleted!",text:"Location request has been permanently deleted.",icon:"success",confirmButtonColor:"#6f4e35",background:r?"#1f2937":"#ffffff",color:r?"#f3f4f6":"#000000"}),N()}catch(D){console.error("Error deleting request:",D),await K.fire({title:"Error",text:"Failed to delete request",icon:"error",confirmButtonColor:"#6f4e35",background:r?"#1f2937":"#ffffff",color:r?"#f3f4f6":"#000000"})}finally{g(null)}}},F=M=>{const{name:ee,value:D}=M.target;k(H=>({...H,[ee]:D}))},$=async M=>{M.preventDefault();const ee={slug:_.title.toLowerCase().replace(/\s+/g,"-"),..._,latitude:parseFloat(_.latitude),longitude:parseFloat(_.longitude),proximityRadius:parseInt(_.proximityRadius),audioDuration:parseInt(_.audioDuration)},D=await WD(ee);D.success?await K.fire({title:"Node Created Successfully!",text:"Your cultural node has been saved to the database.",icon:"success",confirmButtonColor:"#6f4e35",background:r?"#1f2937":"#ffffff",color:r?"#f3f4f6":"#000000"}):await K.fire({title:"Node Created!",text:`Error: ${D.message}`,icon:"error",confirmButtonColor:"#6f4e35",background:r?"#1f2937":"#ffffff",color:r?"#f3f4f6":"#000000"}),k({title:"",latitude:"",longitude:"",proximityRadius:"50",description:"",historicalPeriod:"",category:"Architecture",audioUrl:"",audioDuration:"",primaryImageUrl:"",images:[],videos:[]}),S({url:"",caption:"",historicalDate:""}),b({url:"",caption:""})},X=()=>{j.url&&j.caption&&(k({..._,images:[..._.images,{url:j.url,caption:j.caption,...j.historicalDate&&{historicalDate:j.historicalDate}}]}),S({url:"",caption:"",historicalDate:""}))},ne=M=>{k({..._,images:_.images.filter((ee,D)=>D!==M)})},Q=M=>{const{name:ee,value:D}=M.target;S({...j,[ee]:D})},W=()=>{x.url&&(k({..._,videos:[..._.videos,{url:x.url,...x.caption&&{caption:x.caption}}]}),b({url:"",caption:""}))},q=M=>{k({..._,videos:_.videos.filter((ee,D)=>D!==M)})},ue=M=>{const{name:ee,value:D}=M.target;b({...x,[ee]:D})};return n?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-neutral-50",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-16 h-16 border-4 border-heritage-700 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),c.jsx("p",{className:"text-neutral-600",children:"Loading..."})]})}):!e||e.is_admin!==!0?c.jsx(sN,{to:"/",replace:!0}):c.jsx("div",{className:"min-h-screen bg-neutral-50 dark:bg-neutral-900 pt-16",children:c.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[c.jsxs("button",{onClick:()=>t("/map"),className:"flex items-center gap-2 text-neutral-600 dark:text-neutral-300 hover:text-neutral-900 dark:hover:text-white mb-6 transition-colors",children:[c.jsx(Mu,{className:"w-5 h-5"}),c.jsx("span",{children:"Back to Map"})]}),c.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-sm p-8",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"w-12 h-12 bg-heritage-200 dark:bg-heritage-900 rounded-xl flex items-center justify-center",children:c.jsx(ks,{className:"w-6 h-6 text-heritage-800 dark:text-heritage-300"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-neutral-900 dark:text-white",children:"Admin Panel"}),c.jsx("p",{className:"text-neutral-600 dark:text-neutral-300",children:"Create new location and Review Location Requests"})]})]}),c.jsxs("div",{className:"flex gap-2 mb-8 border-b border-neutral-200 dark:border-neutral-700",children:[c.jsxs("button",{onClick:()=>o("create"),className:`px-6 py-3 font-semibold transition-colors border-b-2 ${i==="create"?"border-heritage-700 dark:border-heritage-400 text-heritage-700 dark:text-heritage-400":"border-transparent text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-white"}`,children:[c.jsx(ks,{className:"w-5 h-5 inline mr-2"}),"Create Location"]}),c.jsxs("button",{onClick:()=>o("requests"),className:`px-6 py-3 font-semibold transition-colors border-b-2 ${i==="requests"?"border-heritage-700 dark:border-heritage-400 text-heritage-700 dark:text-heritage-400":"border-transparent text-neutral-600 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-white"}`,children:[c.jsx(lw,{className:"w-5 h-5 inline mr-2"}),"Location Requests"]})]}),i==="create"&&c.jsxs("form",{onSubmit:$,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-neutral-900 dark:text-white mb-2",children:c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(O1,{className:"w-4 h-4"}),"Title"]})}),c.jsx("input",{type:"text",name:"title",value:_.title,onChange:F,required:!0,className:"w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-heritage-500 transition-colors",placeholder:"e.g., The Old Theatre"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-neutral-900 dark:text-white mb-2",children:c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(It,{className:"w-4 h-4"}),"Latitude"]})}),c.jsx("input",{type:"number",name:"latitude",value:_.latitude,onChange:F,required:!0,step:"any",className:"w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-heritage-500 transition-colors",placeholder:"40.7484"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-neutral-900 dark:text-white mb-2",children:c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(It,{className:"w-4 h-4"}),"Longitude"]})}),c.jsx("input",{type:"number",name:"longitude",value:_.longitude,onChange:F,required:!0,step:"any",className:"w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-heritage-500 transition-colors",placeholder:"-73.9857"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-neutral-900 dark:text-white mb-2",children:"Proximity Radius (meters)"}),c.jsx("input",{type:"number",name:"proximityRadius",value:_.proximityRadius,onChange:F,required:!0,readOnly:!0,className:"w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-heritage-500 transition-colors",placeholder:"100"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-neutral-900 dark:text-white mb-2",children:c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(pp,{className:"w-4 h-4"}),"Historical Period"]})}),c.jsx("input",{type:"text",name:"historicalPeriod",value:_.historicalPeriod,onChange:F,required:!0,className:"w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-heritage-500 transition-colors",placeholder:"e.g., 1872-1954"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-neutral-900 dark:text-white mb-2",children:"Category"}),c.jsxs("select",{name:"category",value:_.category,onChange:F,required:!0,className:"w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-heritage-500 transition-colors",children:[c.jsx("option",{value:"Architecture",children:"Architecture"}),c.jsx("option",{value:"Event",children:"Event"}),c.jsx("option",{value:"Person",children:"Person"}),c.jsx("option",{value:"Artifact",children:"Artifact"}),c.jsx("option",{value:"Scenic",children:"Scenic"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-neutral-900 dark:text-white mb-2",children:"Description"}),c.jsx("textarea",{name:"description",value:_.description,onChange:F,required:!0,rows:5,className:"w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-heritage-500 resize-none transition-colors",placeholder:"Write a detailed historical description..."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-neutral-900 dark:text-white mb-2",children:c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(vR,{className:"w-4 h-4"}),"Audio URL"]})}),c.jsx("input",{type:"url",name:"audioUrl",value:_.audioUrl,onChange:F,className:"w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-heritage-500 transition-colors",placeholder:"/audio/story.mp3"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-neutral-900 dark:text-white mb-2",children:"Audio Duration (seconds)"}),c.jsx("input",{type:"number",name:"audioDuration",value:_.audioDuration,onChange:F,className:"w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-heritage-500 transition-colors",placeholder:"142"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-neutral-900 dark:text-white mb-2",children:c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(Uf,{className:"w-4 h-4"}),"Primary Image URL"]})}),c.jsx("input",{type:"url",name:"primaryImageUrl",value:_.primaryImageUrl,onChange:F,className:"w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-heritage-500 transition-colors",placeholder:"https://images.unsplash.com/photo-..."})]}),c.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-700 pt-6",children:[c.jsxs("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white mb-4 flex items-center gap-2",children:[c.jsx(CR,{className:"w-5 h-5"}),"Videos"]}),c.jsxs("div",{className:"space-y-4 bg-neutral-50 dark:bg-neutral-900 p-4 rounded-lg border border-neutral-200 dark:border-neutral-700",children:[c.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-neutral-900 dark:text-white mb-2",children:"Video URL"}),c.jsx("input",{type:"url",name:"url",value:x.url,onChange:ue,className:"w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-heritage-500 transition-colors",placeholder:"https://example.com/video.mp4"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-neutral-900 dark:text-white mb-2",children:"Caption (Optional)"}),c.jsx("input",{type:"text",name:"caption",value:x.caption,onChange:ue,className:"w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-heritage-500 transition-colors",placeholder:"Video description"})]})]}),c.jsxs("button",{type:"button",onClick:W,className:"w-full bg-heritage-600 hover:bg-heritage-700 text-white px-4 py-3 rounded-lg font-semibold transition-colors flex items-center justify-center gap-2",children:[c.jsx(ks,{className:"w-5 h-5"}),"Add Video to List"]})]}),_.videos.length>0&&c.jsxs("div",{className:"mt-4 space-y-3",children:[c.jsxs("p",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-300",children:["Added Videos (",_.videos.length,"):"]}),_.videos.map((M,ee)=>c.jsxs("div",{className:"flex items-start gap-3 p-4 bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-600 rounded-lg",children:[c.jsxs("div",{className:"flex-1 space-y-1",children:[c.jsx("p",{className:"text-sm font-medium text-neutral-900 dark:text-white truncate",children:M.caption||"No caption"}),c.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400 truncate",children:M.url})]}),c.jsx("button",{type:"button",onClick:()=>q(ee),className:"p-2 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors text-red-600 dark:text-red-400","aria-label":"Remove video",children:c.jsx(Oe,{className:"w-4 h-4"})})]},ee))]})]}),c.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-700 pt-6",children:[c.jsxs("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white mb-4 flex items-center gap-2",children:[c.jsx(Uf,{className:"w-5 h-5"}),"Additional Images"]}),c.jsxs("div",{className:"space-y-4 bg-neutral-50 dark:bg-neutral-900 p-4 rounded-lg border border-neutral-200 dark:border-neutral-700",children:[c.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-neutral-900 dark:text-white mb-2",children:"Image URL"}),c.jsx("input",{type:"url",name:"url",value:j.url,onChange:Q,className:"w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-heritage-500 transition-colors",placeholder:"https://images.unsplash.com/photo-..."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-neutral-900 dark:text-white mb-2",children:"Caption"}),c.jsx("input",{type:"text",name:"caption",value:j.caption,onChange:Q,className:"w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-heritage-500 transition-colors",placeholder:"Description of the image"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-neutral-900 dark:text-white mb-2",children:"Historical Date (Optional)"}),c.jsx("input",{type:"text",name:"historicalDate",value:j.historicalDate,onChange:Q,className:"w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-heritage-500 transition-colors",placeholder:"e.g., 1890s, 19th century, Modern"})]})]}),c.jsxs("button",{type:"button",onClick:X,className:"w-full bg-heritage-600 hover:bg-heritage-700 text-white px-4 py-3 rounded-lg font-semibold transition-colors flex items-center justify-center gap-2",children:[c.jsx(ks,{className:"w-5 h-5"}),"Add Image to List"]})]}),_.images.length>0&&c.jsxs("div",{className:"mt-4 space-y-3",children:[c.jsxs("p",{className:"text-sm font-semibold text-neutral-700 dark:text-neutral-300",children:["Added Images (",_.images.length,"):"]}),_.images.map((M,ee)=>c.jsxs("div",{className:"flex items-start gap-3 p-4 bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-600 rounded-lg",children:[c.jsxs("div",{className:"flex-1 space-y-1",children:[c.jsx("p",{className:"text-sm font-medium text-neutral-900 dark:text-white truncate",children:M.caption}),c.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400 truncate",children:M.url}),M.historicalDate&&c.jsxs("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:["Date: ",M.historicalDate]})]}),c.jsx("button",{type:"button",onClick:()=>ne(ee),className:"p-2 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors text-red-600 dark:text-red-400","aria-label":"Remove image",children:c.jsx(Oe,{className:"w-4 h-4"})})]},ee))]})]}),c.jsxs("button",{type:"submit",className:"w-full bg-heritage-700 hover:bg-heritage-800 text-white px-6 py-4 rounded-xl font-semibold transition-colors flex items-center justify-center gap-2 mt-6",children:[c.jsx(ks,{className:"w-5 h-5"}),"Create Cultural Node"]})]}),i==="requests"&&c.jsx("div",{children:d?c.jsx("div",{className:"flex justify-center items-center py-12",children:c.jsx("div",{className:"w-12 h-12 border-4 border-heritage-700 border-t-transparent rounded-full animate-spin"})}):a.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx(lw,{className:"w-16 h-16 text-neutral-300 mx-auto mb-4"}),c.jsx("p",{className:"text-neutral-600 font-semibold",children:"No location requests yet"}),c.jsx("p",{className:"text-sm text-neutral-500 mt-2",children:"User suggestions will appear here"})]}):c.jsx("div",{className:"space-y-3",children:a.map((M,ee)=>c.jsxs("div",{className:"border border-neutral-200 rounded-lg overflow-hidden bg-white shadow-sm hover:shadow-md transition-shadow",children:[c.jsxs("div",{className:"w-full px-6 py-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[c.jsxs("span",{className:"text-sm font-bold text-heritage-700 bg-heritage-100 px-3 py-1 rounded-full",children:["Request #",ee+1]}),c.jsx("span",{className:"text-sm text-neutral-500",children:new Date(M.created_at).toLocaleDateString()}),c.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${M.status==="approved"?"bg-green-100 text-green-700":M.status==="rejected"?"bg-red-100 text-red-700":"bg-amber-100 text-amber-700"}`,children:M.status.charAt(0).toUpperCase()+M.status.slice(1)})]}),c.jsx("button",{onClick:()=>w(v===M.id?null:M.id),className:"p-2 hover:bg-neutral-100 rounded-lg transition-colors",children:v===M.id?c.jsx(N1,{className:"w-5 h-5 text-neutral-400"}):c.jsx(gp,{className:"w-5 h-5 text-neutral-400"})})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("button",{onClick:()=>R(M.id),disabled:m===M.id||M.status==="approved",className:"flex-1 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[m===M.id?c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):null,"Approve"]}),M.status==="rejected"?c.jsxs("button",{onClick:()=>I(M.id),disabled:m===M.id,className:"flex-1 px-4 py-2 bg-red-700 hover:bg-red-800 text-white rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[m===M.id?c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):null,"Delete Permanently"]}):c.jsxs("button",{onClick:()=>B(M.id),disabled:m===M.id||M.status==="rejected",className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[m===M.id?c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):null,M.status==="rejected"?"Delete Permanently":"Discard"]})]})]}),v===M.id&&c.jsx("div",{className:"px-6 pb-6 pt-4 border-t border-neutral-100 bg-neutral-50",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white p-4 rounded-lg border border-neutral-200",children:[c.jsx("h4",{className:"text-sm font-bold text-heritage-900 mb-3 uppercase tracking-wide",children:"Location Details"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-semibold text-neutral-500 uppercase tracking-wide mb-1",children:"Title"}),c.jsx("p",{className:"text-base font-medium text-heritage-900",children:M.title})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-semibold text-neutral-500 uppercase tracking-wide mb-1",children:"Description"}),c.jsx("p",{className:"text-base text-neutral-700 leading-relaxed",children:M.description})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-semibold text-neutral-500 uppercase tracking-wide mb-1",children:"Latitude"}),c.jsx("p",{className:"text-base text-neutral-700 font-mono",children:M.latitude})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-semibold text-neutral-500 uppercase tracking-wide mb-1",children:"Longitude"}),c.jsx("p",{className:"text-base text-neutral-700 font-mono",children:M.longitude})]})]}),M.category&&c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-semibold text-neutral-500 uppercase tracking-wide mb-1",children:"Category"}),c.jsx("p",{className:"text-base text-neutral-700",children:M.category})]}),M.historical_period&&c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-semibold text-neutral-500 uppercase tracking-wide mb-1",children:"Historical Period"}),c.jsx("p",{className:"text-base text-neutral-700",children:M.historical_period})]})]})]}),c.jsxs("div",{className:"bg-white p-4 rounded-lg border border-neutral-200",children:[c.jsx("h4",{className:"text-sm font-bold text-heritage-900 mb-3 uppercase tracking-wide",children:"Submitter Information"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-semibold text-neutral-500 uppercase tracking-wide mb-1",children:"Name"}),c.jsx("p",{className:"text-base text-neutral-700",children:M.submitter_name})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-semibold text-neutral-500 uppercase tracking-wide mb-1",children:"Email"}),c.jsx("p",{className:"text-base text-neutral-700",children:M.submitter_email})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-semibold text-neutral-500 uppercase tracking-wide mb-1",children:"Phone"}),c.jsx("p",{className:"text-base text-neutral-700",children:M.submitter_phone})]})]})]}),(M.photos&&M.photos.length>0||M.audio_url||M.audio_description)&&c.jsxs("div",{className:"bg-white p-4 rounded-lg border border-neutral-200",children:[c.jsx("h4",{className:"text-sm font-bold text-heritage-900 mb-3 uppercase tracking-wide",children:"Media Content"}),c.jsxs("div",{className:"space-y-3",children:[M.photos&&M.photos.length>0&&c.jsxs("div",{children:[c.jsxs("p",{className:"text-xs font-semibold text-neutral-500 uppercase tracking-wide mb-2",children:["Photos (",M.photos.length,")"]}),c.jsx("div",{className:"grid grid-cols-3 gap-2",children:M.photos.map((D,H)=>c.jsx("a",{href:D,target:"_blank",rel:"noopener noreferrer",className:"block aspect-square rounded-lg overflow-hidden border border-neutral-200 hover:border-heritage-500 transition-colors",children:c.jsx("img",{src:D,alt:`Photo ${H+1}`,className:"w-full h-full object-cover"})},H))})]}),M.audio_url&&c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-semibold text-neutral-500 uppercase tracking-wide mb-2",children:"Audio File"}),c.jsxs("audio",{controls:!0,className:"w-full",children:[c.jsx("source",{src:M.audio_url,type:"audio/mpeg"}),"Your browser does not support the audio element."]})]}),M.audio_description&&c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-semibold text-neutral-500 uppercase tracking-wide mb-1",children:"Audio Description (for AI generation)"}),c.jsx("p",{className:"text-base text-neutral-700 leading-relaxed",children:M.audio_description})]})]})]}),c.jsxs("div",{className:"bg-white p-4 rounded-lg border border-neutral-200",children:[c.jsx("h4",{className:"text-sm font-bold text-heritage-900 mb-3 uppercase tracking-wide",children:"Request Status"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-semibold text-neutral-500 uppercase tracking-wide mb-1",children:"Status"}),c.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-semibold ${M.status==="approved"?"bg-green-100 text-green-700":M.status==="rejected"?"bg-red-100 text-red-700":"bg-amber-100 text-amber-700"}`,children:M.status.charAt(0).toUpperCase()+M.status.slice(1)})]}),M.admin_notes&&c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-semibold text-neutral-500 uppercase tracking-wide mb-1",children:"Admin Notes"}),c.jsx("p",{className:"text-base text-neutral-700 leading-relaxed",children:M.admin_notes})]}),M.reviewed_at&&c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-semibold text-neutral-500 uppercase tracking-wide mb-1",children:"Reviewed On"}),c.jsx("p",{className:"text-base text-neutral-700",children:new Date(M.reviewed_at).toLocaleString()})]})]})]}),c.jsxs("div",{className:"bg-white p-4 rounded-lg border border-neutral-200",children:[c.jsx("h4",{className:"text-sm font-bold text-heritage-900 mb-3 uppercase tracking-wide",children:"Timestamps"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-semibold text-neutral-500 uppercase tracking-wide mb-1",children:"Submitted On"}),c.jsx("p",{className:"text-base text-neutral-700",children:new Date(M.created_at).toLocaleString()})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-semibold text-neutral-500 uppercase tracking-wide mb-1",children:"Last Updated"}),c.jsx("p",{className:"text-base text-neutral-700",children:new Date(M.updated_at).toLocaleString()})]})]})]})]})})]},M.id))})})]})]})})}function JD(){const t=mn(),{signUp:e}=cn(),{isDark:n}=qn(),r=re(N=>N.currentLanguage),[i,o]=E.useState({username:"",email:"",password:"",confirmPassword:""}),[a,u]=E.useState(!1),[d,f]=E.useState(!1),[m,g]=E.useState(!1),[v,w]=E.useState(!1),_=N=>{o({...i,[N.target.name]:N.target.value})},k={minLength:i.password.length>=8,hasUppercase:/[A-Z]/.test(i.password),hasLowercase:/[a-z]/.test(i.password),hasNumber:/\d/.test(i.password),hasSpecial:/[!@#$%^&*(),.?":{}|<>]/.test(i.password)},j=Object.values(k).every(Boolean),x=(()=>{const N=Object.values(k).filter(Boolean).length;return N===0?{label:"",color:""}:N<=2?{label:P("auth.passwordStrengthWeak",r),color:"text-red-600"}:N<=4?{label:P("auth.passwordStrengthMedium",r),color:"text-amber-600"}:{label:P("auth.passwordStrengthStrong",r),color:"text-green-600"}})(),b=async N=>{if(N.preventDefault(),i.password!==i.confirmPassword){await K.fire({title:P("auth.errorTitle",r),text:P("auth.passwordsDoNotMatchError",r),icon:"error",confirmButtonColor:"#6f4e35",background:n?"#1f2937":"#ffffff",color:n?"#f3f4f6":"#000000"});return}if(!j){await K.fire({title:P("auth.errorTitle",r),text:P("auth.meetPasswordRequirements",r),icon:"error",confirmButtonColor:"#6f4e35",background:n?"#1f2937":"#ffffff",color:n?"#f3f4f6":"#000000"});return}u(!0);const R=await e({email:i.email,password:i.password,username:i.username});u(!1),R.success?(await K.fire({title:P("auth.successTitle",r),text:P("auth.accountCreatedMessage",r),icon:"success",confirmButtonColor:"#6f4e35",background:n?"#1f2937":"#ffffff",color:n?"#f3f4f6":"#000000"}),t("/login")):await K.fire({title:P("auth.errorTitle",r),text:R.error,icon:"error",confirmButtonColor:"#6f4e35",background:n?"#1f2937":"#ffffff",color:n?"#f3f4f6":"#000000"})};return c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-heritage-50 via-heritage-100 to-amber-50 dark:from-neutral-900 dark:via-neutral-800 dark:to-neutral-900 pt-16 flex items-center justify-center px-4",children:c.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-neutral-800 rounded-2xl shadow-lg p-8",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"w-12 h-12 bg-heritage-200 dark:bg-heritage-800 rounded-xl flex items-center justify-center",children:c.jsx(I1,{className:"w-6 h-6 text-heritage-800 dark:text-heritage-200"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-neutral-900 dark:text-white",children:P("auth.signUpTitle",r)}),c.jsx("p",{className:"text-neutral-600 dark:text-neutral-300",children:P("auth.signUpSubtitle",r)})]})]}),c.jsxs("form",{onSubmit:b,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-neutral-900 dark:text-white mb-2",children:P("auth.username",r)}),c.jsx("input",{type:"text",name:"username",value:i.username,onChange:_,required:!0,className:"w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-heritage-500 transition-colors",placeholder:P("auth.usernamePlaceholder",r)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-neutral-900 dark:text-white mb-2",children:P("auth.email",r)}),c.jsx("input",{type:"email",name:"email",value:i.email,onChange:_,required:!0,className:"w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-heritage-500 transition-colors",placeholder:P("auth.emailPlaceholder",r)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-neutral-900 dark:text-white mb-2",children:P("auth.password",r)}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:d?"text":"password",name:"password",value:i.password,onChange:_,onFocus:()=>w(!0),onBlur:()=>w(!1),required:!0,className:"w-full px-4 py-3 pr-12 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-heritage-500 transition-colors",placeholder:P("auth.createPassword",r)}),c.jsx("button",{type:"button",onClick:()=>f(!d),className:"absolute right-3 top-1/2 -translate-y-1/2 text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200 transition-colors","aria-label":d?"Hide password":"Show password",children:d?c.jsx(Fi,{className:"w-5 h-5"}):c.jsx(Vi,{className:"w-5 h-5"})})]}),i.password&&c.jsx("div",{className:"mt-2",children:c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("div",{className:"flex-1 h-1 bg-neutral-200 dark:bg-neutral-700 rounded-full overflow-hidden",children:c.jsx("div",{className:`h-full transition-all duration-300 ${x.label==="Weak"?"bg-red-500 w-1/3":x.label==="Medium"?"bg-amber-500 w-2/3":x.label==="Strong"?"bg-green-500 w-full":"w-0"}`})}),x.label&&c.jsx("span",{className:`text-xs font-semibold ${x.color}`,children:x.label})]})}),(v||i.password)&&c.jsxs("div",{className:"mt-3 p-3 bg-neutral-50 dark:bg-neutral-900 rounded-lg border border-neutral-200 dark:border-neutral-700 space-y-2",children:[c.jsx("p",{className:"text-xs font-semibold text-neutral-700 dark:text-neutral-200 mb-2",children:P("auth.passwordMustContain",r)}),c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[k.minLength?c.jsx(ot,{className:"w-4 h-4 text-green-600"}):c.jsx(Oe,{className:"w-4 h-4 text-neutral-400"}),c.jsx("span",{className:`text-xs ${k.minLength?"text-green-600 dark:text-green-400 font-medium":"text-neutral-600 dark:text-neutral-400"}`,children:P("auth.atLeast8Characters",r)})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[k.hasUppercase?c.jsx(ot,{className:"w-4 h-4 text-green-600"}):c.jsx(Oe,{className:"w-4 h-4 text-neutral-400"}),c.jsx("span",{className:`text-xs ${k.hasUppercase?"text-green-600 dark:text-green-400 font-medium":"text-neutral-600 dark:text-neutral-400"}`,children:P("auth.oneUppercase",r)})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[k.hasLowercase?c.jsx(ot,{className:"w-4 h-4 text-green-600"}):c.jsx(Oe,{className:"w-4 h-4 text-neutral-400"}),c.jsx("span",{className:`text-xs ${k.hasLowercase?"text-green-600 dark:text-green-400 font-medium":"text-neutral-600 dark:text-neutral-400"}`,children:P("auth.oneLowercase",r)})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[k.hasNumber?c.jsx(ot,{className:"w-4 h-4 text-green-600"}):c.jsx(Oe,{className:"w-4 h-4 text-neutral-400"}),c.jsx("span",{className:`text-xs ${k.hasNumber?"text-green-600 dark:text-green-400 font-medium":"text-neutral-600 dark:text-neutral-400"}`,children:P("auth.oneNumber",r)})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[k.hasSpecial?c.jsx(ot,{className:"w-4 h-4 text-green-600"}):c.jsx(Oe,{className:"w-4 h-4 text-neutral-400"}),c.jsx("span",{className:`text-xs ${k.hasSpecial?"text-green-600 dark:text-green-400 font-medium":"text-neutral-600 dark:text-neutral-400"}`,children:P("auth.oneSpecial",r)})]})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-neutral-900 dark:text-white mb-2",children:P("auth.confirmPassword",r)}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:m?"text":"password",name:"confirmPassword",value:i.confirmPassword,onChange:_,required:!0,className:"w-full px-4 py-3 pr-12 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-heritage-500 transition-colors",placeholder:P("auth.confirmPasswordPlaceholder",r)}),c.jsx("button",{type:"button",onClick:()=>g(!m),className:"absolute right-3 top-1/2 -translate-y-1/2 text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200 transition-colors","aria-label":m?"Hide password":"Show password",children:m?c.jsx(Fi,{className:"w-5 h-5"}):c.jsx(Vi,{className:"w-5 h-5"})})]}),i.confirmPassword&&c.jsx("div",{className:"mt-2 flex items-center gap-2",children:i.password===i.confirmPassword?c.jsxs(c.Fragment,{children:[c.jsx(ot,{className:"w-4 h-4 text-green-600"}),c.jsx("span",{className:"text-xs text-green-600 font-medium",children:P("auth.passwordsMatch",r)})]}):c.jsxs(c.Fragment,{children:[c.jsx(Oe,{className:"w-4 h-4 text-red-600"}),c.jsx("span",{className:"text-xs text-red-600 font-medium",children:P("auth.passwordsDoNotMatch",r)})]})})]}),c.jsx("button",{type:"submit",disabled:a,className:"w-full bg-heritage-700 hover:bg-heritage-800 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:P(a?"auth.creatingAccount":"auth.signUp",r)})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsxs("p",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:[P("auth.alreadyHaveAccount",r)," ",c.jsx("button",{onClick:()=>t("/login"),className:"text-heritage-700 dark:text-heritage-400 font-semibold hover:text-heritage-800 dark:hover:text-heritage-300",children:P("auth.loginLink",r)})]})})]})})}function QD({onClose:t}){const e=re(u=>u.currentLanguage),[n,r]=E.useState(""),[i,o]=E.useState(!1),a=async u=>{u.preventDefault(),o(!0);const{error:d}=await ke.auth.resetPasswordForEmail(n,{redirectTo:`${window.location.origin}/reset-password`});o(!1),d?(o(!1),await K.fire({title:P("auth.errorTitle",e),text:d.message,icon:"error",confirmButtonColor:"#6f4e35"})):(await K.fire({title:P("auth.checkYourEmailTitle",e),html:P("auth.checkYourEmailMessage",e),icon:"success",confirmButtonColor:"#6f4e35"}),t())};return c.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 bg-heritage-200 rounded-xl flex items-center justify-center",children:c.jsx(L1,{className:"w-5 h-5 text-heritage-800"})}),c.jsx("h2",{className:"text-xl font-bold text-neutral-900",children:P("auth.resetPassword",e)})]}),c.jsx("button",{onClick:t,className:"p-2 hover:bg-neutral-100 rounded-full transition-colors","aria-label":"Close",children:c.jsx(Oe,{className:"w-5 h-5 text-neutral-600"})})]}),c.jsx("p",{className:"text-neutral-600 mb-6",children:P("auth.resetPasswordDescription",e)}),c.jsxs("form",{onSubmit:a,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-neutral-900 mb-2",children:P("auth.emailAddress",e)}),c.jsx("input",{type:"email",value:n,onChange:u=>r(u.target.value),required:!0,className:"w-full px-4 py-3 border border-neutral-300 rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-heritage-500 transition-colors",placeholder:P("auth.emailPlaceholder",e)})]}),c.jsx("button",{type:"submit",disabled:i,className:"w-full bg-heritage-700 hover:bg-heritage-800 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:P(i?"auth.sending":"auth.sendResetLink",e)})]})]})})}function XD(){const t=mn(),{signIn:e}=cn(),{isDark:n}=qn(),r=re(v=>v.currentLanguage),[i,o]=E.useState({emailOrUsername:"",password:""}),[a,u]=E.useState(!1),[d,f]=E.useState(!1),m=v=>{o({...i,[v.target.name]:v.target.value})},g=async v=>{v.preventDefault(),u(!0);const w=i.emailOrUsername.includes("@"),_=await e({email:w?i.emailOrUsername:void 0,username:w?void 0:i.emailOrUsername,password:i.password});u(!1),_.success?(await K.fire({title:P("auth.welcomeTitle",r),text:P("auth.welcomeMessage",r),icon:"success",confirmButtonColor:"#6f4e35",timer:1500,background:n?"#1f2937":"#ffffff",color:n?"#ffffff":"#000000"}),t("/map")):await K.fire({title:P("auth.errorTitle",r),text:_.error,icon:"error",confirmButtonColor:"#6f4e35",background:n?"#1f2937":"#ffffff",color:n?"#ffffff":"#000000"})};return c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-heritage-50 via-heritage-100 to-amber-50 dark:from-neutral-900 dark:via-neutral-800 dark:to-neutral-900 pt-16 flex items-center justify-center px-4",children:c.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-neutral-800 rounded-2xl shadow-lg p-8",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"w-12 h-12 bg-heritage-200 dark:bg-heritage-900 rounded-xl flex items-center justify-center",children:c.jsx(yR,{className:"w-6 h-6 text-heritage-800 dark:text-heritage-300"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-neutral-900 dark:text-white",children:P("auth.loginTitle",r)}),c.jsx("p",{className:"text-neutral-600 dark:text-neutral-300",children:P("auth.loginSubtitle",r)})]})]}),c.jsxs("form",{onSubmit:g,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-neutral-900 dark:text-white mb-2",children:P("auth.emailOrUsername",r)}),c.jsx("input",{type:"text",name:"emailOrUsername",value:i.emailOrUsername,onChange:m,required:!0,className:"w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-heritage-500 transition-colors",placeholder:P("auth.emailOrUsernamePlaceholder",r)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-neutral-900 dark:text-white mb-2",children:P("auth.password",r)}),c.jsx("input",{type:"password",name:"password",value:i.password,onChange:m,required:!0,className:"w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-heritage-500 transition-colors",placeholder:P("auth.passwordPlaceholder",r)})]}),c.jsx("button",{type:"submit",disabled:a,className:"w-full bg-heritage-700 dark:bg-heritage-600 hover:bg-heritage-800 dark:hover:bg-heritage-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:P(a?"auth.loggingIn":"auth.logIn",r)})]}),c.jsx("div",{className:"mt-4 text-center",children:c.jsx("button",{onClick:()=>f(!0),className:"text-sm text-heritage-700 dark:text-heritage-300 hover:text-heritage-800 dark:hover:text-heritage-100 font-medium transition-colors",children:P("auth.forgotPassword",r)})}),c.jsx("div",{className:"mt-6 text-center",children:c.jsxs("p",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:[P("auth.dontHaveAccount",r)," ",c.jsx("button",{onClick:()=>t("/signup"),className:"text-heritage-700 dark:text-heritage-400 font-semibold hover:text-heritage-800 dark:hover:text-heritage-300",children:P("auth.signUpLink",r)})]})}),d&&c.jsx(QD,{onClose:()=>f(!1)})]})})}function eB(){const t=mn(),{isDark:e}=qn(),[n,r]=E.useState({password:"",confirmPassword:""}),[i,o]=E.useState(!1),[a,u]=E.useState(!1),[d,f]=E.useState(!1),[m,g]=E.useState(!1),[v,w]=E.useState(!1);E.useEffect(()=>{(async()=>{const{data:{session:R}}=await ke.auth.getSession();R?u(!0):K.fire({title:"Invalid or Expired Link",text:"This password reset link is invalid or has expired.",icon:"error",confirmButtonColor:"#6f4e35",background:e?"#1f2937":"#ffffff",color:e?"#f3f4f6":"#000000"}).then(()=>{t("/login")})})()},[t,e]);const _=N=>{r({...n,[N.target.name]:N.target.value})},k={minLength:n.password.length>=8,hasUppercase:/[A-Z]/.test(n.password),hasLowercase:/[a-z]/.test(n.password),hasNumber:/\d/.test(n.password),hasSpecial:/[!@#$%^&*(),.?":{}|<>]/.test(n.password)},j=Object.values(k).every(Boolean),x=(()=>{const N=Object.values(k).filter(Boolean).length;return N===0?{label:"",color:""}:N<=2?{label:"Weak",color:"text-red-600"}:N<=4?{label:"Medium",color:"text-amber-600"}:{label:"Strong",color:"text-green-600"}})(),b=async N=>{if(N.preventDefault(),n.password!==n.confirmPassword){await K.fire({title:"Error",text:"Passwords do not match",icon:"error",confirmButtonColor:"#6f4e35",background:e?"#1f2937":"#ffffff",color:e?"#f3f4f6":"#000000"});return}if(!j){await K.fire({title:"Error",text:"Please meet all password requirements",icon:"error",confirmButtonColor:"#6f4e35",background:e?"#1f2937":"#ffffff",color:e?"#f3f4f6":"#000000"});return}o(!0);try{const{error:R}=await ke.auth.updateUser({password:n.password});o(!1),R?await K.fire({title:"Error",text:R.message,icon:"error",confirmButtonColor:"#6f4e35",background:e?"#1f2937":"#ffffff",color:e?"#f3f4f6":"#000000"}):(await K.fire({title:"Success!",text:"Your password has been reset successfully.",icon:"success",confirmButtonColor:"#6f4e35",background:e?"#1f2937":"#ffffff",color:e?"#f3f4f6":"#000000"}),t("/login"))}catch{o(!1),await K.fire({title:"Error",text:"An unexpected error occurred. Please try again.",icon:"error",confirmButtonColor:"#6f4e35",background:e?"#1f2937":"#ffffff",color:e?"#f3f4f6":"#000000"})}};return a?c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-heritage-50 via-heritage-100 to-amber-50 dark:from-neutral-900 dark:via-neutral-800 dark:to-neutral-900 pt-16 flex items-center justify-center px-4",children:c.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-neutral-800 rounded-2xl shadow-lg p-8",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"w-12 h-12 bg-heritage-200 dark:bg-heritage-900/50 rounded-xl flex items-center justify-center",children:c.jsx(wR,{className:"w-6 h-6 text-heritage-800 dark:text-heritage-400"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-neutral-900 dark:text-white",children:"Reset Password"}),c.jsx("p",{className:"text-neutral-600 dark:text-neutral-300",children:"Enter your new password"})]})]}),c.jsxs("form",{onSubmit:b,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-neutral-900 dark:text-white mb-2",children:"New Password"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:d?"text":"password",name:"password",value:n.password,onChange:_,onFocus:()=>w(!0),onBlur:()=>w(!1),required:!0,className:"w-full px-4 py-3 pr-12 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-heritage-500 transition-colors",placeholder:"Create a strong password"}),c.jsx("button",{type:"button",onClick:()=>f(!d),className:"absolute right-3 top-1/2 -translate-y-1/2 text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200 transition-colors","aria-label":d?"Hide password":"Show password",children:d?c.jsx(Fi,{className:"w-5 h-5"}):c.jsx(Vi,{className:"w-5 h-5"})})]}),n.password&&c.jsx("div",{className:"mt-2",children:c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("div",{className:"flex-1 h-1 bg-neutral-200 dark:bg-neutral-600 rounded-full overflow-hidden",children:c.jsx("div",{className:`h-full transition-all duration-300 ${x.label==="Weak"?"bg-red-500 w-1/3":x.label==="Medium"?"bg-amber-500 w-2/3":x.label==="Strong"?"bg-green-500 w-full":"w-0"}`})}),x.label&&c.jsx("span",{className:`text-xs font-semibold ${x.label==="Weak"?"text-red-600 dark:text-red-400":x.label==="Medium"?"text-amber-600 dark:text-amber-400":"text-green-600 dark:text-green-400"}`,children:x.label})]})}),(v||n.password)&&c.jsxs("div",{className:"mt-3 p-3 bg-neutral-50 dark:bg-neutral-900 rounded-lg border border-neutral-200 dark:border-neutral-600 space-y-2",children:[c.jsx("p",{className:"text-xs font-semibold text-neutral-700 dark:text-neutral-300 mb-2",children:"Password must contain:"}),c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[k.minLength?c.jsx(ot,{className:"w-4 h-4 text-green-600 dark:text-green-400"}):c.jsx(Oe,{className:"w-4 h-4 text-neutral-400 dark:text-neutral-500"}),c.jsx("span",{className:`text-xs ${k.minLength?"text-green-600 dark:text-green-400 font-medium":"text-neutral-600 dark:text-neutral-400"}`,children:"At least 8 characters"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[k.hasUppercase?c.jsx(ot,{className:"w-4 h-4 text-green-600 dark:text-green-400"}):c.jsx(Oe,{className:"w-4 h-4 text-neutral-400 dark:text-neutral-500"}),c.jsx("span",{className:`text-xs ${k.hasUppercase?"text-green-600 dark:text-green-400 font-medium":"text-neutral-600 dark:text-neutral-400"}`,children:"One uppercase letter (A-Z)"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[k.hasLowercase?c.jsx(ot,{className:"w-4 h-4 text-green-600 dark:text-green-400"}):c.jsx(Oe,{className:"w-4 h-4 text-neutral-400 dark:text-neutral-500"}),c.jsx("span",{className:`text-xs ${k.hasLowercase?"text-green-600 dark:text-green-400 font-medium":"text-neutral-600 dark:text-neutral-400"}`,children:"One lowercase letter (a-z)"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[k.hasNumber?c.jsx(ot,{className:"w-4 h-4 text-green-600 dark:text-green-400"}):c.jsx(Oe,{className:"w-4 h-4 text-neutral-400 dark:text-neutral-500"}),c.jsx("span",{className:`text-xs ${k.hasNumber?"text-green-600 dark:text-green-400 font-medium":"text-neutral-600 dark:text-neutral-400"}`,children:"One number (0-9)"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[k.hasSpecial?c.jsx(ot,{className:"w-4 h-4 text-green-600 dark:text-green-400"}):c.jsx(Oe,{className:"w-4 h-4 text-neutral-400 dark:text-neutral-500"}),c.jsx("span",{className:`text-xs ${k.hasSpecial?"text-green-600 dark:text-green-400 font-medium":"text-neutral-600 dark:text-neutral-400"}`,children:"One special character (!@#$%^&*)"})]})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-neutral-900 dark:text-white mb-2",children:"Confirm New Password"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:m?"text":"password",name:"confirmPassword",value:n.confirmPassword,onChange:_,required:!0,className:"w-full px-4 py-3 pr-12 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-heritage-500 transition-colors",placeholder:"Confirm your new password"}),c.jsx("button",{type:"button",onClick:()=>g(!m),className:"absolute right-3 top-1/2 -translate-y-1/2 text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200 transition-colors","aria-label":m?"Hide password":"Show password",children:m?c.jsx(Fi,{className:"w-5 h-5"}):c.jsx(Vi,{className:"w-5 h-5"})})]}),n.confirmPassword&&c.jsx("div",{className:"mt-2 flex items-center gap-2",children:n.password===n.confirmPassword?c.jsxs(c.Fragment,{children:[c.jsx(ot,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),c.jsx("span",{className:"text-xs text-green-600 dark:text-green-400 font-medium",children:"Passwords match"})]}):c.jsxs(c.Fragment,{children:[c.jsx(Oe,{className:"w-4 h-4 text-red-600 dark:text-red-400"}),c.jsx("span",{className:"text-xs text-red-600 dark:text-red-400 font-medium",children:"Passwords do not match"})]})})]}),c.jsx("button",{type:"submit",disabled:i,className:"w-full bg-heritage-700 hover:bg-heritage-800 dark:bg-heritage-600 dark:hover:bg-heritage-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:i?"Resetting Password...":"Reset Password"})]})]})}):c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-neutral-50 dark:bg-neutral-900",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-16 h-16 border-4 border-heritage-700 dark:border-heritage-400 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),c.jsx("p",{className:"text-neutral-600 dark:text-neutral-300",children:"Verifying reset link..."})]})})}async function tB(t=100){try{const{data:e,error:n}=await ke.from("leaderboard").select("*").order("points",{ascending:!1}).order("discoveries_count",{ascending:!1}).limit(t);return n?(console.error("Error fetching leaderboard:",n),[]):e.map((r,i)=>({rank:i+1,id:r.id,username:r.username,points:r.points,discoveriesCount:r.discoveries_count,createdAt:r.created_at}))}catch(e){return console.error("Unexpected error fetching leaderboard:",e),[]}}async function yS(t){try{const{data:e,error:n}=await ke.from("leaderboard").select("*").order("points",{ascending:!1}).order("discoveries_count",{ascending:!1});if(n)return console.error("Error fetching user rank:",n),null;const r=e.findIndex(i=>i.id===t);return r===-1?null:{rank:r+1,points:e[r].points,discoveriesCount:e[r].discoveries_count}}catch(e){return console.error("Unexpected error fetching user rank:",e),null}}async function nB(t){try{console.log(" Fetching discoveries for user:",t);const{data:e,error:n}=await ke.from("user_discoveries").select(`
        node_id,
        discovered_at,
        cultural_nodes (
          title,
          slug,
          latitude,
          longitude,
          category,
          primary_image_url
        )
      `).eq("user_id",t).order("discovered_at",{ascending:!1});return n?(console.error("Error fetching user discoveries:",n),console.error("Error details:",n.message,n.details,n.hint),[]):(console.log(" Discoveries fetched:",(e==null?void 0:e.length)||0),console.log("Data:",e),e.map(r=>{var i,o,a,u,d,f;return{nodeId:r.node_id,discoveredAt:r.discovered_at,title:((i=r.cultural_nodes)==null?void 0:i.title)||"Unknown Location",slug:((o=r.cultural_nodes)==null?void 0:o.slug)||"",latitude:((a=r.cultural_nodes)==null?void 0:a.latitude)||0,longitude:((u=r.cultural_nodes)==null?void 0:u.longitude)||0,category:((d=r.cultural_nodes)==null?void 0:d.category)||"",imageUrl:((f=r.cultural_nodes)==null?void 0:f.primary_image_url)||""}}))}catch(e){return console.error("Unexpected error fetching user discoveries:",e),[]}}function rB(){const t=mn(),{user:e,profile:n}=cn(),r=re(H=>H.discoveredNodes),i=re(H=>H.culturalNodes),o=re(H=>H.setSelectedNode),a=re(H=>H.currentLanguage);re(H=>H.setCurrentLanguage);const u=re(H=>H.translatedNodes),d=re(H=>H.setTranslatedNode),[f,m]=E.useState("credentials"),[g,v]=E.useState(!1),[w,_]=E.useState(!1),[k,j]=E.useState(!1),[S,x]=E.useState(!1),[b,N]=E.useState(!1),[R,B]=E.useState(!1),[I,F]=E.useState({rank:null,points:0}),[$,X]=E.useState({username:(n==null?void 0:n.username)||"",email:(n==null?void 0:n.email)||"",currentPassword:"",newPassword:"",confirmNewPassword:""});E.useEffect(()=>{n&&X({username:n.username||"",email:n.email||"",currentPassword:"",newPassword:"",confirmNewPassword:""})},[n]),E.useEffect(()=>{async function H(){if(e!=null&&e.id){const U=await yS(e.id);U&&F({rank:U.rank,points:U.points})}}H()},[e,r]),E.useEffect(()=>{async function H(){const U=await vS();re.setState({culturalNodes:U}),e&&(await wS(e.id)).forEach(Y=>{re.getState().addDiscoveredNode(Y)})}H()},[e]),E.useEffect(()=>{async function H(){var O;if(a==="en"||i.length===0||r.size===0)return;const U=i.filter(Y=>r.has(Y.id));for(const Y of U)if(!((O=u[Y.id])!=null&&O[a]))try{const ce=await wp(Y,a);d(Y.id,a,ce)}catch(ce){console.error(`Failed to translate node ${Y.id}:`,ce)}}H()},[a,i,r,u,d]);const ne=i.filter(H=>r.has(H.id)),Q=H=>{X({...$,[H.target.name]:H.target.value})},W={minLength:$.newPassword.length>=8,hasUppercase:/[A-Z]/.test($.newPassword),hasLowercase:/[a-z]/.test($.newPassword),hasNumber:/\d/.test($.newPassword),hasSpecial:/[!@#$%^&*(),.?":{}|<>]/.test($.newPassword)},q=Object.values(W).every(Boolean),M=(()=>{const H=Object.values(W).filter(Boolean).length;return H===0?{label:"",color:""}:H<=2?{label:"Weak",color:"text-red-600"}:H<=4?{label:"Medium",color:"text-amber-600"}:{label:"Strong",color:"text-green-600"}})(),ee=async H=>{if(H.preventDefault(),$.currentPassword||$.newPassword||$.confirmNewPassword){if(!$.currentPassword){await K.fire({title:"Error",text:"Please enter your current password",icon:"error",confirmButtonColor:"#6f4e35"});return}if(!$.newPassword){await K.fire({title:"Error",text:"Please enter a new password",icon:"error",confirmButtonColor:"#6f4e35"});return}if(!q){await K.fire({title:"Error",text:"Please meet all password requirements",icon:"error",confirmButtonColor:"#6f4e35"});return}if($.newPassword!==$.confirmNewPassword){await K.fire({title:"Error",text:"New passwords do not match",icon:"error",confirmButtonColor:"#6f4e35"});return}}if($.email!==n.email&&!$.email){await K.fire({title:"Error",text:"Email address cannot be empty",icon:"error",confirmButtonColor:"#6f4e35"});return}v(!0);try{const U={};if($.username!==n.username&&$.username){const{error:Y}=await ke.from("profiles").update({username:$.username}).eq("id",e.id);if(Y){if(v(!1),Y.code==="23505"&&Y.message.includes("profiles_username_key")){await K.fire({title:"Username Taken",text:"This username is already taken. Please choose another one.",icon:"error",confirmButtonColor:"#6f4e35"});return}throw Y}U.username=!0}if($.email!==n.email&&$.email){const{error:Y}=await ke.auth.updateUser({email:$.email},{emailRedirectTo:`${window.location.origin}/profile`});if(Y)throw Y;U.email=!0}if($.currentPassword&&$.newPassword){const{error:Y}=await ke.auth.signInWithPassword({email:n.email,password:$.currentPassword});if(Y){v(!1),await K.fire({title:"Error",text:"Current password is incorrect",icon:"error",confirmButtonColor:"#6f4e35"});return}const{error:ce}=await ke.auth.updateUser({password:$.newPassword});if(ce)throw ce;U.password=!0}v(!1);const O=U.email;if(X({...$,currentPassword:"",newPassword:"",confirmNewPassword:""}),O){await K.fire({title:"Email Change Started",html:`
            <div class="text-left">
              <p class="mb-4"><strong>Step 1:</strong> Check your <strong>current email (${n.email})</strong> for a confirmation link.</p>
              <p class="mb-4"><strong>Step 2:</strong> After you click the confirmation link, check your <strong>new email (${$.email})</strong> for a verification link.</p>
              <p class="text-sm text-gray-600 mt-4"> Your email won't change until both steps are complete.</p>
            </div>
          `,icon:"success",confirmButtonColor:"#6f4e35"}),await ke.auth.signOut(),await K.fire({title:"Logged Out",text:"For security reasons, you have been logged out. Please sign in with your new email address once verified.",icon:"success",confirmButtonColor:"#6f4e35"}),t("/login");return}U.email||await K.fire({title:"Success!",text:"Your profile has been updated successfully.",icon:"success",confirmButtonColor:"#6f4e35"})}catch(U){v(!1),await K.fire({title:"Error",text:U.message||"Failed to update profile. Please try again.",icon:"error",confirmButtonColor:"#6f4e35"})}},D=H=>{o(H),t("/profile",{replace:!0})};return w?c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-heritage-50 via-heritage-100 to-amber-50 dark:from-neutral-900 dark:via-neutral-800 dark:to-neutral-900 pt-16 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-16 h-16 border-4 border-heritage-700 dark:border-heritage-400 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),c.jsx("p",{className:"text-neutral-600 dark:text-neutral-300",children:"Translating interface..."})]})}):c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-heritage-50 via-heritage-100 to-amber-50 dark:from-neutral-900 dark:via-neutral-800 dark:to-neutral-900 pt-16",children:c.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[c.jsxs("button",{onClick:()=>t("/map"),className:"flex items-center gap-2 text-heritage-700 dark:text-heritage-300 hover:text-heritage-900 dark:hover:text-heritage-100 mb-6 transition-colors",children:[c.jsx(Mu,{className:"w-5 h-5"}),c.jsx("span",{children:P("profile.backToMap",a)})]}),c.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg overflow-hidden",children:[c.jsx("div",{className:"bg-heritage-700 px-8 py-6",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-16 h-16 bg-heritage-100 rounded-full flex items-center justify-center",children:c.jsx(Zs,{className:"w-8 h-8 text-heritage-800"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-white",children:(n==null?void 0:n.username)||P("profile.title",a)}),c.jsxs("p",{className:"text-heritage-200",children:[ne.length," ",P("profile.of",a)," ",i.length," ",P("profile.discoveries",a)]})]})]}),c.jsxs("div",{className:"flex flex-col items-end gap-2",children:[I.rank&&c.jsxs("div",{className:"flex items-center gap-2 bg-heritage-600 px-4 py-2 rounded-lg",children:[c.jsx(zf,{className:"w-5 h-5 text-amber-300"}),c.jsxs("span",{className:"text-white font-semibold",children:[P("profile.rank",a)," #",I.rank]})]}),c.jsxs("div",{className:"flex items-center gap-2 bg-amber-500 px-4 py-2 rounded-lg",children:[c.jsx(ei,{className:"w-5 h-5 text-white"}),c.jsxs("span",{className:"text-white font-semibold",children:[I.points," ",P("profile.points",a)]})]})]})]})}),c.jsx("div",{className:"border-b border-neutral-200 dark:border-neutral-700",children:c.jsxs("div",{className:"flex",children:[c.jsx("button",{onClick:()=>m("credentials"),className:`flex-1 px-6 py-4 font-semibold transition-colors ${f==="credentials"?"border-b-2 border-heritage-700 dark:border-heritage-400 text-heritage-700 dark:text-heritage-400":"text-neutral-600 dark:text-neutral-400 hover:text-heritage-700 dark:hover:text-heritage-300"}`,children:c.jsxs("div",{className:"flex items-center justify-center gap-2",children:[c.jsx(ow,{className:"w-5 h-5"}),c.jsx("span",{children:P("profile.credentials",a)})]})}),c.jsx("button",{onClick:()=>m("discoveries"),className:`flex-1 px-6 py-4 font-semibold transition-colors ${f==="discoveries"?"border-b-2 border-heritage-700 dark:border-heritage-400 text-heritage-700 dark:text-heritage-400":"text-neutral-600 dark:text-neutral-400 hover:text-heritage-700 dark:hover:text-heritage-300"}`,children:c.jsxs("div",{className:"flex items-center justify-center gap-2",children:[c.jsx(ei,{className:"w-5 h-5"}),c.jsx("span",{children:P("profile.yourDiscoveries",a)})]})})]})}),c.jsxs("div",{className:"p-8",children:[f==="credentials"&&c.jsxs("form",{onSubmit:ee,className:"space-y-6 max-w-2xl",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-neutral-900 dark:text-white mb-2",children:c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(Zs,{className:"w-4 h-4"}),P("profile.username",a)]})}),c.jsx("input",{type:"text",name:"username",value:$.username,onChange:Q,required:!0,className:"w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-heritage-500 transition-colors"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-neutral-900 dark:text-white mb-2",children:c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(L1,{className:"w-4 h-4"}),P("profile.email",a)]})}),c.jsx("input",{type:"email",name:"email",value:$.email,onChange:Q,required:!0,readOnly:!0,className:"w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-transparent"})]}),c.jsxs("div",{className:"pt-6 border-t border-neutral-200",children:[c.jsxs("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white mb-4 flex items-center gap-2",children:[c.jsx(rw,{className:"w-5 h-5 text-amber-600"}),P("profile.changeEmail",a)]}),c.jsxs("div",{className:"mb-4 space-y-2 bg-amber-50 dark:bg-amber-900/20 p-4 rounded-lg border border-amber-200 dark:border-amber-700",children:[c.jsx("p",{class:"text-sm text-neutral-700 dark:text-neutral-300 mb-2",children:c.jsx("strong",{children:P("profile.howItWorks",a)})}),c.jsxs("ol",{class:"list-decimal list-inside space-y-1 text-sm text-neutral-600 dark:text-neutral-400",children:[c.jsxs("li",{children:[P("profile.step1",a)," ",c.jsx("strong",{children:P("profile.currentEmail",a)})," (",n==null?void 0:n.email,")"]}),c.jsx("li",{children:P("profile.step2",a)}),c.jsxs("li",{children:[P("profile.step3",a)," ",c.jsx("strong",{children:P("profile.newEmailLower",a)})]}),c.jsx("li",{children:P("profile.step4",a)})]}),c.jsxs("p",{class:"text-xs text-amber-700 dark:text-amber-400 mt-3 flex items-start gap-1",children:[c.jsx(rw,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),P("profile.logoutWarning",a)]})]}),c.jsx("label",{className:"block text-sm font-semibold text-neutral-900 dark:text-white mb-2",children:P("profile.newEmail",a)}),c.jsx("input",{type:"email",name:"email",value:$.email,onChange:Q,required:!0,className:"w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-heritage-500 transition-colors"})]}),c.jsxs("div",{className:"pt-6 border-t border-neutral-200 dark:border-neutral-700",children:[c.jsxs("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-white mb-4 flex items-center gap-2",children:[c.jsx(ow,{className:"w-5 h-5"}),P("profile.changePassword",a)]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-neutral-900 dark:text-white mb-2",children:P("profile.currentPassword",a)}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:k?"text":"password",name:"currentPassword",value:$.currentPassword,onChange:Q,className:"w-full px-4 py-3 pr-12 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-heritage-500 transition-colors",placeholder:P("profile.enterCurrentPassword",a)}),c.jsx("button",{type:"button",onClick:()=>j(!k),className:"absolute right-3 top-1/2 -translate-y-1/2 text-neutral-500 hover:text-neutral-700 transition-colors","aria-label":k?"Hide password":"Show password",children:k?c.jsx(Fi,{className:"w-5 h-5"}):c.jsx(Vi,{className:"w-5 h-5"})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-neutral-900 dark:text-white mb-2",children:P("profile.newPassword",a)}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:S?"text":"password",name:"newPassword",value:$.newPassword,onChange:Q,onFocus:()=>B(!0),onBlur:()=>B(!1),className:"w-full px-4 py-3 pr-12 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-heritage-500 transition-colors",placeholder:P("profile.enterNewPassword",a)}),c.jsx("button",{type:"button",onClick:()=>x(!S),className:"absolute right-3 top-1/2 -translate-y-1/2 text-neutral-500 hover:text-neutral-700 transition-colors","aria-label":S?"Hide password":"Show password",children:S?c.jsx(Fi,{className:"w-5 h-5"}):c.jsx(Vi,{className:"w-5 h-5"})})]}),$.newPassword&&c.jsx("div",{className:"mt-2",children:c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("div",{className:"flex-1 h-1 bg-neutral-200 rounded-full overflow-hidden",children:c.jsx("div",{className:`h-full transition-all duration-300 ${M.label==="Weak"?"bg-red-500 w-1/3":M.label==="Medium"?"bg-amber-500 w-2/3":M.label==="Strong"?"bg-green-500 w-full":"w-0"}`})}),M.label&&c.jsx("span",{className:`text-xs font-semibold ${M.color}`,children:M.label})]})}),(R||$.newPassword)&&$.newPassword&&c.jsxs("div",{className:"mt-3 p-3 bg-neutral-50 dark:bg-neutral-900 rounded-lg border border-neutral-200 dark:border-neutral-700 space-y-2",children:[c.jsx("p",{className:"text-xs font-semibold text-neutral-700 dark:text-neutral-200 mb-2",children:"Password must contain:"}),c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[W.minLength?c.jsx(ot,{className:"w-4 h-4 text-green-600"}):c.jsx(Oe,{className:"w-4 h-4 text-neutral-400"}),c.jsx("span",{className:`text-xs ${W.minLength?"text-green-600 dark:text-green-400 font-medium":"text-neutral-600 dark:text-neutral-400"}`,children:"At least 8 characters"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[W.hasUppercase?c.jsx(ot,{className:"w-4 h-4 text-green-600"}):c.jsx(Oe,{className:"w-4 h-4 text-neutral-400"}),c.jsx("span",{className:`text-xs ${W.hasUppercase?"text-green-600 dark:text-green-400 font-medium":"text-neutral-600 dark:text-neutral-400"}`,children:"One uppercase letter (A-Z)"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[W.hasLowercase?c.jsx(ot,{className:"w-4 h-4 text-green-600"}):c.jsx(Oe,{className:"w-4 h-4 text-neutral-400"}),c.jsx("span",{className:`text-xs ${W.hasLowercase?"text-green-600 dark:text-green-400 font-medium":"text-neutral-600 dark:text-neutral-400"}`,children:"One lowercase letter (a-z)"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[W.hasNumber?c.jsx(ot,{className:"w-4 h-4 text-green-600"}):c.jsx(Oe,{className:"w-4 h-4 text-neutral-400"}),c.jsx("span",{className:`text-xs ${W.hasNumber?"text-green-600 dark:text-green-400 font-medium":"text-neutral-600 dark:text-neutral-400"}`,children:"One number (0-9)"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[W.hasSpecial?c.jsx(ot,{className:"w-4 h-4 text-green-600"}):c.jsx(Oe,{className:"w-4 h-4 text-neutral-400"}),c.jsx("span",{className:`text-xs ${W.hasSpecial?"text-green-600 dark:text-green-400 font-medium":"text-neutral-600 dark:text-neutral-400"}`,children:"One special character (!@#$%^&*)"})]})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-neutral-900 dark:text-white mb-2",children:P("profile.confirmPassword",a)}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:b?"text":"password",name:"confirmNewPassword",value:$.confirmNewPassword,onChange:Q,className:"w-full px-4 py-3 pr-12 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-heritage-500 transition-colors",placeholder:P("profile.confirmNewPassword",a)}),c.jsx("button",{type:"button",onClick:()=>N(!b),className:"absolute right-3 top-1/2 -translate-y-1/2 text-neutral-500 hover:text-neutral-700 transition-colors","aria-label":b?"Hide password":"Show password",children:b?c.jsx(Fi,{className:"w-5 h-5"}):c.jsx(Vi,{className:"w-5 h-5"})})]}),$.confirmNewPassword&&c.jsx("div",{className:"mt-2 flex items-center gap-2",children:$.newPassword===$.confirmNewPassword?c.jsxs(c.Fragment,{children:[c.jsx(ot,{className:"w-4 h-4 text-green-600"}),c.jsx("span",{className:"text-xs text-green-600 font-medium",children:"Passwords match"})]}):c.jsxs(c.Fragment,{children:[c.jsx(Oe,{className:"w-4 h-4 text-red-600"}),c.jsx("span",{className:"text-xs text-red-600 font-medium",children:"Passwords do not match"})]})})]})]})]}),c.jsx("button",{type:"submit",disabled:g,className:"w-full bg-heritage-700 hover:bg-heritage-800 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:g?"Updating...":"Update Profile"})]}),f==="discoveries"&&c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("h3",{className:"text-xl font-semibold text-neutral-900 dark:text-white",children:[P("profile.yourDiscoveries",a)," (",ne.length,"/",i.length,")"]}),c.jsxs("button",{onClick:()=>t("/request-location"),className:"flex items-center gap-2 bg-heritage-700 hover:bg-heritage-800 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:[c.jsx(ks,{className:"w-4 h-4"}),c.jsx("span",{children:P("profile.requestLocation",a)})]})]}),ne.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx(It,{className:"w-16 h-16 text-heritage-300 dark:text-heritage-600 mx-auto mb-4"}),c.jsx("h3",{className:"text-xl font-semibold text-neutral-900 dark:text-white mb-2",children:P("profile.noDiscoveriesYet",a)}),c.jsx("p",{className:"text-neutral-600 dark:text-neutral-300 mb-6",children:P("profile.startExploring",a)}),c.jsx("button",{onClick:()=>t("/map"),className:"bg-heritage-700 hover:bg-heritage-800 text-white px-6 py-3 rounded-lg font-semibold transition-colors",children:P("profile.goToMap",a)})]}):c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ne.map(H=>{var O;const U=a==="en"?H:(O=u[H.id])!=null&&O[a]?{...H,...u[H.id][a]}:H;return c.jsxs("div",{onClick:()=>D(H),className:"group cursor-pointer bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-xl overflow-hidden hover:shadow-lg transition-all duration-300",children:[U.primaryImageUrl&&c.jsxs("div",{className:"relative h-48 overflow-hidden",children:[c.jsx("img",{src:U.primaryImageUrl,alt:U.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}),c.jsxs("div",{className:"absolute top-3 right-3 bg-amber-500 text-white px-3 py-1 rounded-full text-xs font-semibold flex items-center gap-1",children:[c.jsx(ei,{className:"w-5 h-5"}),P("profile.discovered",a)]})]}),c.jsxs("div",{className:"p-4",children:[c.jsx("h4",{className:"font-semibold text-neutral-900 dark:text-white mb-2 group-hover:text-heritage-700 dark:group-hover:text-heritage-400 transition-colors",children:U.title}),c.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300 line-clamp-2 mb-3",children:U.description}),c.jsxs("div",{className:"flex items-center gap-4 text-xs text-neutral-500 dark:text-neutral-400",children:[c.jsx("span",{children:U.category}),c.jsx("span",{children:""}),c.jsx("span",{children:U.historicalPeriod})]})]})]},H.id)})})]})]})]}),c.jsx(pS,{}),c.jsx(gS,{})]})})}function iB(){const t=mn(),{user:e,profile:n}=cn(),r=re(b=>b.currentLanguage),[i,o]=E.useState([]),[a,u]=E.useState(null),[d,f]=E.useState(!0),[m,g]=E.useState(new Set),[v,w]=E.useState({});E.useEffect(()=>{_()},[e]);const _=async()=>{f(!0);const b=await tB(100);if(o(b),e){const N=await yS(e.id);u(N)}f(!1)},k=b=>{switch(b){case 1:return c.jsx(gR,{className:"w-6 h-6 text-yellow-500"});case 2:return c.jsx(zf,{className:"w-6 h-6 text-gray-400"});case 3:return c.jsx(zf,{className:"w-6 h-6 text-amber-600"});default:return c.jsx(j1,{className:"w-5 h-5 text-heritage-600"})}},j=(b,N=!1)=>{const R="flex items-center justify-between p-4 rounded-lg transition-all ";if(N)return R+"bg-heritage-100 dark:bg-heritage-900 border-2 border-heritage-700 dark:border-heritage-400";switch(b){case 1:return R+"bg-gradient-to-r from-yellow-50 to-amber-50 dark:from-yellow-900/20 dark:to-amber-900/20 border border-yellow-300 dark:border-yellow-700";case 2:return R+"bg-gradient-to-r from-gray-50 to-slate-50 dark:from-gray-800 dark:to-slate-800 border border-gray-300 dark:border-gray-600";case 3:return R+"bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 border border-amber-300 dark:border-amber-700";default:return R+"bg-white dark:bg-neutral-700 border border-neutral-200 dark:border-neutral-600 hover:border-heritage-300 dark:hover:border-heritage-500"}},S=async b=>{const N=new Set(m);if(N.has(b))N.delete(b);else if(N.add(b),!v[b]){const R=await nB(b);w(B=>({...B,[b]:R}))}g(N)},x=b=>new Date(b).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"});return d?c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-heritage-50 via-heritage-100 to-amber-50 dark:from-neutral-900 dark:via-neutral-800 dark:to-neutral-900 pt-16 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-16 h-16 border-4 border-heritage-700 dark:border-heritage-400 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),c.jsx("p",{className:"text-neutral-600 dark:text-neutral-300",children:"Loading leaderboard..."})]})}):c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-heritage-50 via-heritage-100 to-amber-50 dark:from-neutral-900 dark:via-neutral-800 dark:to-neutral-900 pt-16",children:c.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[c.jsxs("button",{onClick:()=>t("/map"),className:"flex items-center gap-2 text-heritage-700 dark:text-heritage-300 hover:text-heritage-900 dark:hover:text-heritage-100 mb-6 transition-colors",children:[c.jsx(Mu,{className:"w-5 h-5"}),c.jsx("span",{children:P("profile.backToMap",r)})]}),c.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg overflow-hidden mb-6",children:[c.jsx("div",{className:"bg-gradient-to-r from-heritage-700 to-heritage-800 px-8 py-6",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(ei,{className:"w-10 h-10 text-amber-400"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-white",children:P("leaderboard.title",r)}),c.jsx("p",{className:"text-heritage-200",children:P("leaderboard.subtitle",r)})]})]})}),e&&a&&c.jsx("div",{className:"p-6 bg-heritage-50 dark:bg-neutral-700 border-b border-heritage-200 dark:border-neutral-600",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-12 h-12 bg-heritage-700 dark:bg-heritage-600 rounded-full flex items-center justify-center",children:c.jsxs("span",{className:"text-white font-bold",children:["#",a.rank]})}),c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-neutral-900 dark:text-white",children:P("leaderboard.yourRank",r)}),c.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:n==null?void 0:n.username})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("p",{className:"text-2xl font-bold text-heritage-700 dark:text-heritage-400",children:a.points}),c.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:P("profile.points",r)})]})]})}),c.jsx("div",{className:"p-6 space-y-3",children:i.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx(ei,{className:"w-16 h-16 text-heritage-300 dark:text-heritage-600 mx-auto mb-4"}),c.jsx("h3",{className:"text-xl font-semibold text-neutral-900 dark:text-white mb-2",children:P("leaderboard.noExplorers",r)}),c.jsx("p",{className:"text-neutral-600 dark:text-neutral-300",children:P("leaderboard.beFirst",r)})]}):i.map(b=>c.jsxs("div",{children:[c.jsxs("div",{className:j(b.rank,(e==null?void 0:e.id)===b.id),children:[c.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[c.jsx("div",{className:"flex items-center justify-center w-10",children:k(b.rank)}),c.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[c.jsxs("span",{className:"font-bold text-xl text-neutral-700 dark:text-white w-8",children:["#",b.rank]}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("p",{className:"font-semibold text-neutral-900 dark:text-white",children:[b.username,(e==null?void 0:e.id)===b.id&&c.jsx("span",{className:"ml-2 text-xs bg-heritage-700 dark:bg-heritage-600 text-white px-2 py-1 rounded-full",children:"You"})]}),c.jsxs("div",{className:"flex items-center gap-2 text-sm text-neutral-600 dark:text-neutral-300",children:[c.jsx(It,{className:"w-4 h-4"}),c.jsxs("span",{children:[b.discoveriesCount," ",P("leaderboard.discoveries",r)]})]})]})]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("p",{className:"text-2xl font-bold text-heritage-700 dark:text-heritage-400",children:b.points}),c.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-300",children:P("profile.points",r)})]}),b.discoveriesCount>0&&c.jsx("button",{onClick:()=>S(b.id),className:"p-2 hover:bg-heritage-100 dark:hover:bg-neutral-600 rounded-lg transition-colors","aria-label":"View discoveries",children:m.has(b.id)?c.jsx(N1,{className:"w-5 h-5 text-heritage-700 dark:text-heritage-300"}):c.jsx(gp,{className:"w-5 h-5 text-heritage-700 dark:text-heritage-300"})})]})]}),m.has(b.id)&&c.jsxs("div",{className:"ml-14 mr-4 mb-3 mt-2 p-4 bg-heritage-50 dark:bg-neutral-700 rounded-lg border border-heritage-200 dark:border-neutral-600",children:[c.jsxs("h4",{className:"text-sm font-semibold text-heritage-900 dark:text-heritage-200 mb-3 flex items-center gap-2",children:[c.jsx(It,{className:"w-4 h-4"}),"Discovered Locations"]}),v[b.id]?v[b.id].length===0?c.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300 text-center py-2",children:P("profile.noDiscoveriesYet",r)}):c.jsx("div",{className:"space-y-2",children:v[b.id].map((N,R)=>c.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white dark:bg-neutral-800 rounded-lg border border-neutral-200 dark:border-neutral-600 hover:border-heritage-300 dark:hover:border-heritage-500 transition-colors",children:[N.imageUrl&&c.jsx("img",{src:N.imageUrl,alt:N.title,className:"w-12 h-12 rounded-lg object-cover"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-medium text-neutral-900 dark:text-white text-sm",children:N.title}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-neutral-600 dark:text-neutral-400 mt-1",children:[c.jsx(pp,{className:"w-3 h-3"}),c.jsx("span",{children:x(N.discoveredAt)}),N.category&&c.jsxs(c.Fragment,{children:[c.jsx("span",{children:""}),c.jsx("span",{children:N.category})]})]})]})]},R))}):c.jsx("div",{className:"flex items-center justify-center py-4",children:c.jsx("div",{className:"w-6 h-6 border-2 border-heritage-700 dark:border-heritage-400 border-t-transparent rounded-full animate-spin"})})]})]},b.id))})]}),c.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-xl shadow-md p-6",children:[c.jsx("h3",{className:"text-lg font-bold text-neutral-900 dark:text-white mb-4",children:P("leaderboard.howPointsWork",r)}),c.jsx("div",{className:"space-y-3",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"w-8 h-8 bg-heritage-100 rounded-full flex items-center justify-center flex-shrink-0",children:c.jsx(It,{className:"w-4 h-4 text-heritage-700"})}),c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-neutral-900 dark:text-white",children:P("leaderboard.discoverLocation",r)}),c.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:P("leaderboard.earnPoints",r)})]})]})})]})]})})}async function sB(t){try{const{data:e,error:n}=await ke.from("location_requests").insert([t]).select().single();return n?(console.error("Error submitting location request:",n),{success:!1,error:n.message}):{success:!0,data:e}}catch(e){return console.error("Unexpected error submitting location request:",e),{success:!1,error:e.message}}}async function oB(t,e,n){try{const r=t.name.split(".").pop(),i=`${e}/${n}/${Date.now()}.${r}`,{data:o,error:a}=await ke.storage.from("location-requests").upload(i,t,{cacheControl:"3600",upsert:!1});if(a)return console.error("Error uploading photo:",a),{success:!1,error:a.message};const{data:{publicUrl:u}}=ke.storage.from("location-requests").getPublicUrl(i);return{success:!0,url:u,path:i}}catch(r){return console.error("Unexpected error uploading photo:",r),{success:!1,error:r.message}}}async function aB(t,e,n){try{const r=t.name.split(".").pop(),i=`${e}/${n}/audio.${r}`,{data:o,error:a}=await ke.storage.from("location-requests").upload(i,t,{cacheControl:"3600",upsert:!0});if(a)return console.error("Error uploading audio:",a),{success:!1,error:a.message};const{data:{publicUrl:u}}=ke.storage.from("location-requests").getPublicUrl(i);return{success:!0,url:u,path:i}}catch(r){return console.error("Unexpected error uploading audio:",r),{success:!1,error:r.message}}}async function lB(t){try{const{error:e}=await ke.storage.from("location-requests").remove([t]);return e?(console.error("Error deleting photo:",e),{success:!1,error:e.message}):{success:!0}}catch(e){return console.error("Unexpected error deleting photo:",e),{success:!1,error:e.message}}}function cB(){const t=mn(),{user:e}=cn(),n=re(Q=>Q.currentLanguage),[r,i]=E.useState(!1),[o,a]=E.useState(!1),[u,d]=E.useState(!1),[f,m]=E.useState({title:"",description:"",latitude:"",longitude:"",category:"",historicalPeriod:"",submitterName:"",submitterEmail:(e==null?void 0:e.email)||"",submitterPhone:"",audioStoryDescription:""}),[g,v]=E.useState([]),[w,_]=E.useState(null),[k,j]=E.useState(""),[S,x]=E.useState(""),[b]=E.useState(`temp-${Date.now()}`),N=[{key:"architecture",value:"Architecture"},{key:"monument",value:"Monument"},{key:"museum",value:"Museum"},{key:"religiousSite",value:"Religious Site"},{key:"historicalBuilding",value:"Historical Building"},{key:"culturalCenter",value:"Cultural Center"},{key:"parkGarden",value:"Park & Garden"},{key:"other",value:"Other"}],R=Q=>{const{name:W,value:q}=Q.target;m(ue=>({...ue,[W]:q}))},B=async Q=>{const W=Array.from(Q.target.files);if(W.length!==0){if(g.length+W.length>10){await K.fire({title:"Too Many Photos",text:"You can upload a maximum of 10 photos.",icon:"warning",confirmButtonColor:"#6f4e35"});return}a(!0);try{const q=W.map(ee=>oB(ee,e.id,b)),M=(await Promise.all(q)).filter(ee=>ee.success).map(ee=>({url:ee.url,path:ee.path}));v(ee=>[...ee,...M]),M.length<W.length&&await K.fire({title:"Some Uploads Failed",text:`${M.length} of ${W.length} photos uploaded successfully.`,icon:"warning",confirmButtonColor:"#6f4e35"})}catch(q){console.error("Error uploading photos:",q),await K.fire({title:"Upload Error",text:"Failed to upload photos. Please try again.",icon:"error",confirmButtonColor:"#6f4e35"})}finally{a(!1)}}},I=async Q=>{const W=g[Q];(await lB(W.path)).success&&v(ue=>ue.filter((M,ee)=>ee!==Q))},F=async Q=>{const W=Q.target.files[0];if(W){if(!W.type.startsWith("audio/")){await K.fire({title:"Invalid File",text:"Please upload an audio file (MP3, WAV, etc.)",icon:"error",confirmButtonColor:"#6f4e35"});return}if(W.size>10*1024*1024){await K.fire({title:"File Too Large",text:"Audio file must be less than 10MB.",icon:"error",confirmButtonColor:"#6f4e35"});return}d(!0);try{const q=await aB(W,e.id,b);q.success?(_(W),j(q.url)):await K.fire({title:"Upload Failed",text:q.error||"Failed to upload audio file.",icon:"error",confirmButtonColor:"#6f4e35"})}catch(q){console.error("Error uploading audio:",q),await K.fire({title:"Upload Error",text:"Failed to upload audio. Please try again.",icon:"error",confirmButtonColor:"#6f4e35"})}finally{d(!1)}}},$=()=>{_(null),j("")},X=async Q=>{if(Q.preventDefault(),!f.title||!f.description||!f.latitude||!f.longitude||!f.submitterName||!f.submitterEmail||!f.submitterPhone){await K.fire({title:"Missing Information",text:"Please fill in all required fields.",icon:"warning",confirmButtonColor:"#6f4e35"});return}if(g.length===0){await K.fire({title:"No Photos",text:"Please upload at least one photo of the location.",icon:"warning",confirmButtonColor:"#6f4e35"});return}if(!S){await K.fire({title:"Audio Required",text:"Please choose an audio option: upload a file or provide a description.",icon:"warning",confirmButtonColor:"#6f4e35"});return}if(S==="upload"&&!w){await K.fire({title:"Audio Required",text:"Please upload an audio file.",icon:"warning",confirmButtonColor:"#6f4e35"});return}if(S==="generate"){const W=f.audioStoryDescription.split(/[.!?]+/).filter(q=>q.trim());if(W.length<8||W.length>10){await K.fire({title:"Invalid Description",text:"Please provide 8-10 sentences describing the location.",icon:"warning",confirmButtonColor:"#6f4e35"});return}}i(!0);try{const W={user_id:e.id,title:f.title,description:f.description,latitude:parseFloat(f.latitude),longitude:parseFloat(f.longitude),category:f.category,historical_period:f.historicalPeriod,submitter_name:f.submitterName,submitter_email:f.submitterEmail,submitter_phone:f.submitterPhone,photos:g.map(ue=>ue.url),audio_url:k||null,audio_description:S==="generate"?f.audioStoryDescription:null,status:"pending"},q=await sB(W);q.success?(await K.fire({title:"Request Submitted!",text:"Your location request has been submitted successfully. Our team will review it soon.",icon:"success",confirmButtonColor:"#6f4e35"}),t("/map")):await K.fire({title:"Submission Failed",text:q.error||"Failed to submit request. Please try again.",icon:"error",confirmButtonColor:"#6f4e35"})}catch(W){console.error("Error submitting request:",W),await K.fire({title:"Error",text:"An unexpected error occurred. Please try again.",icon:"error",confirmButtonColor:"#6f4e35"})}finally{i(!1)}},ne=()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(Q=>{m(W=>({...W,latitude:Q.coords.latitude.toFixed(6),longitude:Q.coords.longitude.toFixed(6)})),K.fire({title:"Location Found!",text:"Your current location has been set.",icon:"success",confirmButtonColor:"#6f4e35",timer:1500})},Q=>{K.fire({title:"Location Error",text:"Unable to get your location. Please enter it manually.",icon:"error",confirmButtonColor:"#6f4e35"})})};return c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-heritage-50 via-heritage-100 to-amber-50 dark:from-neutral-900 dark:via-neutral-800 dark:to-neutral-900 pt-16",children:c.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[c.jsxs("button",{onClick:()=>t("/profile"),className:"flex items-center gap-2 text-heritage-700 dark:text-heritage-300 hover:text-heritage-900 dark:hover:text-heritage-100 mb-6 transition-colors",children:[c.jsx(Mu,{className:"w-5 h-5"}),c.jsx("span",{children:P("requestLocation.backToProfile",n)})]}),c.jsxs("div",{className:"bg-white dark:bg-neutral-800 rounded-2xl shadow-lg overflow-hidden",children:[c.jsx("div",{className:"bg-gradient-to-r from-heritage-700 to-heritage-800 px-8 py-6",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(It,{className:"w-10 h-10 text-amber-400"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-white",children:P("requestLocation.title",n)}),c.jsx("p",{className:"text-heritage-200",children:P("requestLocation.subtitle",n)})]})]})}),c.jsxs("form",{onSubmit:X,className:"p-8 space-y-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-xl font-bold text-neutral-900 dark:text-white border-b border-neutral-200 dark:border-neutral-700 pb-2",children:P("requestLocation.locationDetails",n)}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-semibold text-neutral-700 dark:text-neutral-200 mb-2",children:[P("requestLocation.locationName",n)," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",name:"title",value:f.title,onChange:R,placeholder:P("requestLocation.locationNamePlaceholder",n),className:"w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-transparent",required:!0})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-semibold text-neutral-700 dark:text-neutral-200 mb-2",children:[P("requestLocation.description",n)," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("textarea",{name:"description",value:f.description,onChange:R,placeholder:P("requestLocation.descriptionPlaceholder",n),rows:6,className:"w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-transparent",required:!0})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-neutral-700 dark:text-neutral-200 mb-2",children:P("requestLocation.category",n)}),c.jsxs("select",{name:"category",value:f.category,onChange:R,className:"w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-transparent",children:[c.jsx("option",{value:"",children:P("requestLocation.selectCategory",n)}),N.map(Q=>c.jsx("option",{value:Q.value,children:P(`locationCategories.${Q.key}`,n)},Q.key))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-neutral-700 dark:text-neutral-200 mb-2",children:P("requestLocation.historicalPeriod",n)}),c.jsx("input",{type:"text",name:"historicalPeriod",value:f.historicalPeriod,onChange:R,placeholder:P("requestLocation.historicalPeriodPlaceholder",n),className:"w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-transparent"})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-semibold text-neutral-700 dark:text-neutral-200 mb-2",children:[P("requestLocation.gpsCoordinates",n)," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx("input",{type:"number",name:"latitude",value:f.latitude,onChange:R,placeholder:P("requestLocation.latitudePlaceholder",n),step:"0.000001",className:"px-4 py-3 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-transparent",required:!0}),c.jsx("input",{type:"number",name:"longitude",value:f.longitude,onChange:R,placeholder:P("requestLocation.longitudePlaceholder",n),step:"0.000001",className:"px-4 py-3 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-transparent",required:!0})]}),c.jsxs("button",{type:"button",onClick:ne,className:"mt-2 text-sm text-heritage-700 dark:text-heritage-400 hover:text-heritage-900 dark:hover:text-heritage-300 font-medium flex items-center gap-2",children:[c.jsx(It,{className:"w-4 h-4"}),P("requestLocation.useMyLocation",n)]})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("h2",{className:"text-xl font-bold text-neutral-900 dark:text-white border-b border-neutral-200 dark:border-neutral-700 pb-2",children:[P("requestLocation.photos",n)," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:P("requestLocation.photosDescription",n)}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[g.map((Q,W)=>c.jsxs("div",{className:"relative group",children:[c.jsx("img",{src:Q.url,alt:`Location photo ${W+1}`,className:"w-full h-32 object-cover rounded-lg border-2 border-neutral-200 dark:border-neutral-600"}),c.jsx("button",{type:"button",onClick:()=>I(W),className:"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(Oe,{className:"w-4 h-4"})})]},W)),g.length<10&&c.jsxs("label",{className:"w-full h-32 border-2 border-dashed border-neutral-300 dark:border-neutral-600 rounded-lg flex flex-col items-center justify-center cursor-pointer hover:border-heritage-500 hover:bg-heritage-50 dark:hover:bg-heritage-900/20 transition-colors",children:[c.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:B,className:"hidden",disabled:o}),o?c.jsx(vr,{className:"w-8 h-8 text-heritage-700 animate-spin"}):c.jsxs(c.Fragment,{children:[c.jsx(Uf,{className:"w-8 h-8 text-neutral-400 dark:text-neutral-500 mb-2"}),c.jsx("span",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:P("requestLocation.addPhotos",n)})]})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("h2",{className:"text-xl font-bold text-neutral-900 dark:text-white border-b border-neutral-200 dark:border-neutral-700 pb-2",children:[P("requestLocation.audioStory",n)," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:P("requestLocation.audioDescription",n)}),!S&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx("button",{type:"button",onClick:()=>x("upload"),className:"p-6 border-2 border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-800 rounded-lg hover:border-heritage-500 hover:bg-heritage-50 dark:hover:bg-heritage-900/20 transition-colors text-left",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(mw,{className:"w-6 h-6 text-heritage-700 dark:text-heritage-400 flex-shrink-0 mt-1"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-neutral-900 dark:text-white mb-1",children:P("requestLocation.uploadYourAudio",n)}),c.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:P("requestLocation.uploadAudioDescription",n)})]})]})}),c.jsx("button",{type:"button",onClick:()=>x("generate"),className:"p-6 border-2 border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-800 rounded-lg hover:border-heritage-500 hover:bg-heritage-50 dark:hover:bg-heritage-900/20 transition-colors text-left",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(uw,{className:"w-6 h-6 text-heritage-700 dark:text-heritage-400 flex-shrink-0 mt-1"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-neutral-900 dark:text-white mb-1",children:P("requestLocation.generateAudio",n)}),c.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300",children:P("requestLocation.generateAudioDescription",n)})]})]})})]}),S==="upload"&&c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"font-semibold text-neutral-900 dark:text-white",children:P("requestLocation.uploadAudioFile",n)}),c.jsx("button",{type:"button",onClick:()=>{x(""),_(null),j("")},className:"text-sm text-heritage-700 dark:text-heritage-400 hover:text-heritage-900 dark:hover:text-heritage-300 font-medium",children:P("requestLocation.changeOption",n)})]}),w?c.jsxs("div",{className:"flex items-center justify-between p-4 bg-heritage-50 dark:bg-heritage-900/20 border border-heritage-200 dark:border-heritage-700 rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(uw,{className:"w-8 h-8 text-heritage-700 dark:text-heritage-400"}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-neutral-900 dark:text-white",children:w.name}),c.jsxs("p",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:[(w.size/1024/1024).toFixed(2)," MB"]})]})]}),c.jsx("button",{type:"button",onClick:$,className:"text-red-500 hover:text-red-700",children:c.jsx(Oe,{className:"w-5 h-5"})})]}):c.jsxs("label",{className:"block w-full p-6 border-2 border-dashed border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-800 rounded-lg cursor-pointer hover:border-heritage-500 hover:bg-heritage-50 dark:hover:bg-heritage-900/20 transition-colors",children:[c.jsx("input",{type:"file",accept:"audio/*",onChange:F,className:"hidden",disabled:u}),c.jsxs("div",{className:"flex flex-col items-center",children:[u?c.jsx(vr,{className:"w-12 h-12 text-heritage-700 dark:text-heritage-400 animate-spin mb-3"}):c.jsx(mw,{className:"w-12 h-12 text-neutral-400 dark:text-neutral-500 mb-3"}),c.jsx("p",{className:"text-neutral-700 dark:text-neutral-200 font-medium",children:P(u?"requestLocation.uploading":"requestLocation.clickToUpload",n)}),c.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400 mt-1",children:P("requestLocation.audioFileTypes",n)})]})]})]}),S==="generate"&&c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"font-semibold text-neutral-900 dark:text-white",children:P("requestLocation.audioStoryDescription",n)}),c.jsx("button",{type:"button",onClick:()=>{x(""),m(Q=>({...Q,audioStoryDescription:""}))},className:"text-sm text-heritage-700 dark:text-heritage-400 hover:text-heritage-900 dark:hover:text-heritage-300 font-medium",children:P("requestLocation.changeOption",n)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-neutral-700 dark:text-neutral-200 mb-2",children:P("requestLocation.write8to10Sentences",n)}),c.jsx("textarea",{name:"audioStoryDescription",value:f.audioStoryDescription,onChange:R,placeholder:P("requestLocation.audioStoryPlaceholder",n),rows:8,className:"w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-transparent"}),c.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[c.jsxs("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:[" ",P("requestLocation.audioTip",n)]}),c.jsxs("p",{className:"text-xs text-neutral-600 dark:text-neutral-300",children:[f.audioStoryDescription.split(/[.!?]+/).filter(Q=>Q.trim()).length," ",P("requestLocation.sentences",n)]})]})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("h2",{className:"text-xl font-bold text-neutral-900 dark:text-white border-b border-neutral-200 dark:border-neutral-700 pb-2",children:[P("requestLocation.contactInformation",n)," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-semibold text-neutral-700 dark:text-neutral-200 mb-2",children:[P("requestLocation.fullName",n)," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",name:"submitterName",value:f.submitterName,onChange:R,placeholder:P("requestLocation.yourName",n),className:"w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-transparent",required:!0})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-semibold text-neutral-700 dark:text-neutral-200 mb-2",children:[P("requestLocation.email",n)," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"email",name:"submitterEmail",value:f.submitterEmail,onChange:R,placeholder:P("requestLocation.emailPlaceholder",n),readOnly:!0,className:"w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-transparent",required:!0})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-semibold text-neutral-700 dark:text-neutral-200 mb-2",children:[P("requestLocation.phoneNumber",n)," ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"tel",name:"submitterPhone",value:f.submitterPhone,onChange:R,placeholder:P("requestLocation.phonePlaceholder",n),className:"w-full px-4 py-3 border border-neutral-300 dark:border-neutral-600 bg-white dark:bg-neutral-700 text-neutral-900 dark:text-white rounded-lg focus:ring-2 focus:ring-heritage-500 focus:border-transparent",required:!0})]})]}),c.jsxs("div",{className:"flex gap-4 pt-4",children:[c.jsx("button",{type:"button",onClick:()=>t("/map"),className:"flex-1 px-6 py-3 border-2 border-heritage-700 dark:border-heritage-400 text-heritage-700 dark:text-heritage-400 rounded-lg font-semibold hover:bg-heritage-50 dark:hover:bg-heritage-900/20 transition-colors",children:P("requestLocation.cancel",n)}),c.jsx("button",{type:"submit",disabled:r||o||u,className:"flex-1 px-6 py-3 bg-heritage-700 text-white rounded-lg font-semibold hover:bg-heritage-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:r?c.jsxs(c.Fragment,{children:[c.jsx(vr,{className:"w-5 h-5 animate-spin"}),P("requestLocation.submitting",n)]}):c.jsxs(c.Fragment,{children:[c.jsx(pR,{className:"w-5 h-5"}),P("requestLocation.submitRequest",n)]})})]})]})]})]})})}const uB="https://trzcwccadrfgdzjljgmc.supabase.co",dB="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRyemN3Y2NhZHJmZ2R6amxqZ21jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQxNDcwOTQsImV4cCI6MjA3OTcyMzA5NH0.Hf6wj81fdLnCYzDfU89VRGL7EOOFqW4hxNWs1v1wRQE",yt=x1(uB,dB);async function hB(t){try{const{data:e,error:n}=await yt.from("profiles").select("id, username").ilike("username",`%${t}%`).limit(20);if(n)throw n;return{success:!0,users:await Promise.all((e||[]).map(async i=>{const{count:o}=await yt.from("user_discoveries").select("*",{count:"exact",head:!0}).eq("user_id",i.id);return{...i,total_discoveries:o||0}}))}}catch(e){return console.error("Error searching users:",e),{success:!1,error:e.message,users:[]}}}async function fB(t){try{const{data:{user:e}}=await yt.auth.getUser();if(!e)throw new Error("User not authenticated");const{data:n}=await yt.from("friendships").select("*").or(`and(user_id.eq.${e.id},friend_id.eq.${t}),and(user_id.eq.${t},friend_id.eq.${e.id})`).single();if(n)return{success:!1,error:"Friend request already exists"};const{data:r,error:i}=await yt.from("friendships").insert({user_id:e.id,friend_id:t,status:"pending"}).select().single();if(i)throw i;return{success:!0,friendship:r}}catch(e){return console.error("Error sending friend request:",e),{success:!1,error:e.message}}}async function mB(){try{const{data:{user:t}}=await yt.auth.getUser();if(!t)throw new Error("User not authenticated");const{data:e,error:n}=await yt.from("friend_requests").select("*").eq("recipient_id",t.id).eq("status","pending").order("created_at",{ascending:!1});if(n)throw n;return{success:!0,requests:e||[]}}catch(t){return console.error("Error getting pending requests:",t),{success:!1,error:t.message,requests:[]}}}async function pB(){try{const{data:{user:t}}=await yt.auth.getUser();if(!t)throw new Error("User not authenticated");const{data:e,error:n}=await yt.from("friend_requests").select("*").eq("requester_id",t.id).eq("status","pending").order("created_at",{ascending:!1});if(n)throw n;return{success:!0,requests:e||[]}}catch(t){return console.error("Error getting sent requests:",t),{success:!1,error:t.message,requests:[]}}}async function gB(t){try{const{data:e,error:n}=await yt.from("friendships").update({status:"accepted",updated_at:new Date().toISOString()}).eq("id",t).select().single();if(n)throw n;return{success:!0,friendship:e}}catch(e){return console.error("Error accepting friend request:",e),{success:!1,error:e.message}}}async function vB(t){try{const{data:e,error:n}=await yt.from("friendships").update({status:"rejected",updated_at:new Date().toISOString()}).eq("id",t).select().single();if(n)throw n;return{success:!0,friendship:e}}catch(e){return console.error("Error rejecting friend request:",e),{success:!1,error:e.message}}}async function wB(t){try{const{data:{user:e}}=await yt.auth.getUser();if(!e)throw new Error("User not authenticated");const{error:n}=await yt.from("friendships").delete().or(`and(user_id.eq.${e.id},friend_id.eq.${t}),and(user_id.eq.${t},friend_id.eq.${e.id})`);if(n)throw n;return{success:!0}}catch(e){return console.error("Error removing friend:",e),{success:!1,error:e.message}}}async function yB(){try{const{data:{user:t}}=await yt.auth.getUser();if(!t)throw new Error("User not authenticated");const{data:e,error:n}=await yt.from("friends_list").select("*").eq("user_id",t.id).order("friends_since",{ascending:!1});if(n)throw n;const{data:r,error:i}=await yt.from("friendships").select(`
        user_id,
        created_at,
        profiles:user_id (
          id,
          username
        )
      `).eq("friend_id",t.id).eq("status","accepted");if(i)throw i;const o=await Promise.all((r||[]).map(async d=>{var m;const{count:f}=await yt.from("user_discoveries").select("*",{count:"exact",head:!0}).eq("user_id",d.user_id);return{friend_id:d.user_id,friend_username:(m=d.profiles)==null?void 0:m.username,total_discoveries:f||0,friends_since:d.created_at}})),a=[...(e||[]).map(d=>({friend_id:d.friend_id,friend_username:d.friend_username,total_discoveries:d.total_discoveries||0,friends_since:d.friends_since})),...o];return{success:!0,friends:Array.from(new Map(a.map(d=>[d.friend_id,d])).values())}}catch(t){return console.error("Error getting friends list:",t),{success:!1,error:t.message,friends:[]}}}async function xB(t){try{const{data:e,error:n}=await yt.from("user_discoveries").select(`
        id,
        discovered_at,
        nodes:node_id (
          id,
          title,
          category
        )
      `).eq("user_id",t).order("discovered_at",{ascending:!1});if(n)throw n;return{success:!0,discoveries:e||[]}}catch(e){return console.error("Error fetching friend discoveries:",e),{success:!1,error:e.message,discoveries:[]}}}function _B(){const{user:t}=cn(),{isDark:e}=qn(),n=re(O=>O.currentLanguage),[r,i]=E.useState("friends"),[o,a]=E.useState([]),[u,d]=E.useState([]),[f,m]=E.useState([]),[g,v]=E.useState([]),[w,_]=E.useState(""),[k,j]=E.useState(!1),[S,x]=E.useState(!1),[b,N]=E.useState(null),[R,B]=E.useState([]),[I,F]=E.useState(!1);E.useEffect(()=>{t&&$()},[t]);const $=async()=>{x(!0),await Promise.all([X(),ne(),Q()]),x(!1)},X=async()=>{const O=await yB();O.success&&a(O.friends)},ne=async()=>{const O=await mB();O.success&&d(O.requests)},Q=async()=>{const O=await pB();O.success&&m(O.requests)},W=async()=>{if(!w.trim())return;j(!0);const O=await hB(w);if(O.success){const Y=O.users.filter(ce=>ce.id!==t.id&&!o.some(ge=>ge.friend_id===ce.id));v(Y)}j(!1)},q=async(O,Y)=>{const ce=await fB(O);ce.success?(await K.fire({title:P("friends.friendRequestSent",n),text:P("friends.requestSentTo",n).replace("{username}",Y),icon:"success",timer:2e3,showConfirmButton:!1,background:e?"#1f2937":"#ffffff",color:e?"#f3f4f6":"#000000"}),Q(),v(g.filter(ge=>ge.id!==O))):await K.fire({title:P("friends.errorSendingRequest",n),text:ce.error,icon:"error",confirmButtonColor:"#6f4e35",background:e?"#1f2937":"#ffffff",color:e?"#f3f4f6":"#000000"})},ue=async(O,Y)=>{(await gB(O)).success&&(await K.fire({title:P("friends.friendRequestAccepted",n),text:P("friends.nowFriendsWith",n).replace("{username}",Y),icon:"success",timer:2e3,showConfirmButton:!1,background:e?"#1f2937":"#ffffff",color:e?"#f3f4f6":"#000000"}),$())},M=async O=>{(await vB(O)).success&&ne()},ee=async(O,Y)=>{(await K.fire({title:P("friends.confirmRemove",n),text:P("friends.confirmRemoveText",n).replace("{username}",Y),icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280",confirmButtonText:P("friends.yesRemove",n),cancelButtonText:P("route.cancel",n),background:e?"#1f2937":"#ffffff",color:e?"#f3f4f6":"#000000"})).isConfirmed&&(await wB(O)).success&&($(),await K.fire({title:P("friends.removed",n),icon:"success",timer:2e3,showConfirmButton:!1,background:e?"#1f2937":"#ffffff",color:e?"#f3f4f6":"#000000"}))},D=async O=>{N(O),F(!0);const Y=await xB(O.friend_id);Y.success?B(Y.discoveries):await K.fire({title:"Error",text:Y.error,icon:"error",confirmButtonColor:"#6f4e35",background:e?"#1f2937":"#ffffff",color:e?"#f3f4f6":"#000000"}),F(!1)},H=()=>{N(null),B([])},U=[{id:"friends",label:P("friends.tabFriends",n),icon:Or},{id:"find",label:P("friends.tabFind",n),icon:dh},{id:"requests",label:P("friends.tabRequests",n),icon:sw,badge:u.length}];return c.jsxs("div",{className:`min-h-screen ${e?"bg-neutral-900":"bg-neutral-50"} py-8 px-4`,children:[c.jsxs("div",{className:"max-w-4xl mx-auto",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:`text-3xl font-bold ${e?"text-white":"text-neutral-900"} mb-2`,children:P("friends.title",n)}),c.jsx("p",{className:`${e?"text-neutral-400":"text-neutral-600"}`,children:P("friends.subtitle",n)})]}),c.jsx("div",{className:`flex gap-2 mb-6 border-b ${e?"border-neutral-700":"border-neutral-200"}`,children:U.map(O=>c.jsxs("button",{onClick:()=>i(O.id),className:`px-4 py-3 font-semibold transition-all relative flex items-center gap-2 ${r===O.id?`${e?"text-heritage-400 border-heritage-400":"text-heritage-700 border-heritage-700"} border-b-2`:`${e?"text-neutral-400":"text-neutral-600"} border-b-2 border-transparent hover:${e?"text-neutral-200":"text-neutral-900"}`}`,children:[c.jsx(O.icon,{className:"w-5 h-5"}),O.label,O.badge>0&&c.jsx("span",{className:"bg-red-500 text-white text-xs font-bold rounded-full px-2 py-0.5 ml-1",children:O.badge})]},O.id))}),r==="friends"&&c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h2",{className:`text-xl font-bold ${e?"text-white":"text-neutral-900"}`,children:[P("friends.tabFriends",n)," (",o.length,")"]}),c.jsx("button",{onClick:$,disabled:S,className:`p-2 rounded-lg transition-colors ${e?"hover:bg-neutral-800":"hover:bg-neutral-100"}`,children:c.jsx(vr,{className:`w-5 h-5 ${S?"animate-spin":""} ${e?"text-neutral-400":"text-neutral-600"}`})})]}),o.length===0?c.jsxs("div",{className:`text-center py-12 ${e?"bg-neutral-800":"bg-white"} rounded-xl`,children:[c.jsx(Or,{className:`w-16 h-16 mx-auto mb-4 ${e?"text-neutral-600":"text-neutral-300"}`}),c.jsx("p",{className:`text-lg font-semibold ${e?"text-neutral-300":"text-neutral-700"} mb-2`,children:P("friends.noFriends",n)}),c.jsx("p",{className:`${e?"text-neutral-400":"text-neutral-600"} mb-4`,children:P("friends.startConnecting",n)}),c.jsx("button",{onClick:()=>i("find"),className:"mt-4 px-6 py-2 bg-heritage-700 text-white rounded-lg hover:bg-heritage-800 transition-colors",children:P("friends.tabFind",n)})]}):c.jsx("div",{className:"grid gap-4",children:o.map(O=>c.jsx(Pt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`${e?"bg-neutral-800":"bg-white"} rounded-xl p-4 shadow-md`,children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:`w-12 h-12 rounded-full ${e?"bg-neutral-700":"bg-neutral-200"} flex items-center justify-center`,children:c.jsx(Or,{className:`w-6 h-6 ${e?"text-neutral-400":"text-neutral-600"}`})}),c.jsxs("div",{children:[c.jsx("h3",{className:`font-bold ${e?"text-white":"text-neutral-900"}`,children:O.friend_username}),c.jsxs("button",{onClick:()=>D(O),className:`text-sm ${e?"text-heritage-400 hover:text-heritage-300":"text-heritage-700 hover:text-heritage-800"} flex items-center gap-1 transition-colors`,children:[c.jsx(It,{className:"w-4 h-4"}),O.total_discoveries||0," ",P("friends.discoveries",n)]})]})]}),c.jsx("button",{onClick:()=>ee(O.friend_id,O.friend_username),className:"text-red-500 hover:text-red-600 p-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:c.jsx(SR,{className:"w-5 h-5"})})]})},O.friend_id))})]}),r==="find"&&c.jsxs("div",{children:[c.jsx("div",{className:"mb-6",children:c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",value:w,onChange:O=>_(O.target.value),onKeyPress:O=>O.key==="Enter"&&W(),placeholder:P("friends.searchPlaceholder",n),className:`flex-1 px-4 py-3 rounded-lg ${e?"bg-neutral-800 text-white border-neutral-700":"bg-white text-neutral-900 border-neutral-300"} border focus:ring-2 focus:ring-heritage-500 focus:outline-none`}),c.jsxs("button",{onClick:W,disabled:k||!w.trim(),className:"bg-heritage-700 hover:bg-heritage-800 text-white px-4 md:px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[k?c.jsx(vr,{className:"w-5 h-5 animate-spin"}):c.jsx(dh,{className:"w-5 h-5"}),c.jsx("span",{className:"hidden md:inline",children:P("friends.tabFind",n)})]})]})}),g.length>0&&c.jsx("div",{className:"grid gap-4",children:g.map(O=>c.jsxs(Pt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`${e?"bg-neutral-800":"bg-white"} rounded-xl p-4 shadow-md flex items-center justify-between`,children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:`w-12 h-12 rounded-full ${e?"bg-neutral-700":"bg-neutral-200"} flex items-center justify-center`,children:c.jsx(Or,{className:`w-6 h-6 ${e?"text-neutral-400":"text-neutral-600"}`})}),c.jsxs("div",{children:[c.jsx("h3",{className:`font-bold ${e?"text-white":"text-neutral-900"}`,children:O.username}),c.jsxs("p",{className:`text-sm ${e?"text-neutral-400":"text-neutral-600"}`,children:[O.total_discoveries||0," ",P("friends.discoveries",n)]})]})]}),c.jsxs("button",{onClick:()=>q(O.id,O.username),className:"bg-heritage-700 hover:bg-heritage-800 text-white px-4 py-2 rounded-lg font-semibold transition-colors flex items-center gap-2",children:[c.jsx(I1,{className:"w-4 h-4"}),P("friends.addFriend",n)]})]},O.id))}),w&&g.length===0&&!k&&c.jsxs("div",{className:`text-center py-12 ${e?"bg-neutral-800":"bg-white"} rounded-xl`,children:[c.jsx(dh,{className:`w-16 h-16 mx-auto mb-4 ${e?"text-neutral-600":"text-neutral-300"}`}),c.jsx("p",{className:`text-lg font-semibold ${e?"text-neutral-300":"text-neutral-700"}`,children:P("friends.noResults",n)}),c.jsx("p",{className:`text-sm ${e?"text-neutral-400":"text-neutral-600"} mt-2`,children:P("friends.tryDifferentSearch",n)})]})]}),r==="requests"&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:`text-xl font-bold ${e?"text-white":"text-neutral-900"} mb-4`,children:[P("friends.incomingRequests",n)," (",u.length,")"]}),u.length===0?c.jsxs("div",{className:`text-center py-8 ${e?"bg-neutral-800":"bg-white"} rounded-xl`,children:[c.jsx("p",{className:`${e?"text-neutral-400":"text-neutral-600"}`,children:P("friends.noPendingRequests",n)}),c.jsx("p",{className:"text-sm text-neutral-500 mt-2",children:P("friends.noOneWaiting",n)})]}):c.jsx("div",{className:"grid gap-4",children:u.map(O=>c.jsxs(Pt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`${e?"bg-neutral-800":"bg-white"} rounded-xl p-4 shadow-md flex items-center justify-between`,children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:`w-12 h-12 rounded-full ${e?"bg-neutral-700":"bg-neutral-200"} flex items-center justify-center`,children:c.jsx(Or,{className:`w-6 h-6 ${e?"text-neutral-400":"text-neutral-600"}`})}),c.jsxs("div",{children:[c.jsx("h3",{className:`font-bold ${e?"text-white":"text-neutral-900"}`,children:O.requester_username}),c.jsx("p",{className:`text-sm ${e?"text-neutral-400":"text-neutral-600"}`,children:new Date(O.created_at).toLocaleDateString()})]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>ue(O.id,O.requester_username),className:"bg-green-600 hover:bg-green-700 text-white p-2 rounded-lg transition-colors",children:c.jsx(ot,{className:"w-5 h-5"})}),c.jsx("button",{onClick:()=>M(O.id),className:"bg-red-600 hover:bg-red-700 text-white p-2 rounded-lg transition-colors",children:c.jsx(Oe,{className:"w-5 h-5"})})]})]},O.id))})]}),c.jsxs("div",{children:[c.jsxs("h2",{className:`text-xl font-bold ${e?"text-white":"text-neutral-900"} mb-4`,children:[P("friends.sentRequests",n)," (",f.length,")"]}),f.length===0?c.jsxs("div",{className:`text-center py-8 ${e?"bg-neutral-800":"bg-white"} rounded-xl`,children:[c.jsx("p",{className:`${e?"text-neutral-400":"text-neutral-600"}`,children:P("friends.noSentRequests",n)}),c.jsx("p",{className:"text-sm text-neutral-500 mt-2",children:P("friends.notWaitingForAnyone",n)})]}):c.jsx("div",{className:"grid gap-4",children:f.map(O=>c.jsxs(Pt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`${e?"bg-neutral-800":"bg-white"} rounded-xl p-4 shadow-md flex items-center justify-between`,children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:`w-12 h-12 rounded-full ${e?"bg-neutral-700":"bg-neutral-200"} flex items-center justify-center`,children:c.jsx(Or,{className:`w-6 h-6 ${e?"text-neutral-400":"text-neutral-600"}`})}),c.jsxs("div",{children:[c.jsx("h3",{className:`font-bold ${e?"text-white":"text-neutral-900"}`,children:O.recipient_username}),c.jsx("p",{className:`text-sm ${e?"text-neutral-400":"text-neutral-600"}`,children:n==="ro"?"n ateptare":n==="hu"?"Vrakozs":"Pending"})]})]}),c.jsx(sw,{className:`w-5 h-5 ${e?"text-neutral-500":"text-neutral-400"}`})]},O.id))})]})]})]}),c.jsx(ns,{children:b&&c.jsx(Pt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",onClick:H,children:c.jsxs(Pt.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:O=>O.stopPropagation(),className:`${e?"bg-neutral-800":"bg-white"} rounded-2xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-hidden`,children:[c.jsxs("div",{className:`${e?"bg-neutral-900":"bg-heritage-100"} px-6 py-4 flex items-center justify-between border-b ${e?"border-neutral-700":"border-heritage-200"}`,children:[c.jsxs("div",{children:[c.jsxs("h2",{className:`text-2xl font-bold ${e?"text-white":"text-neutral-900"}`,children:[b.friend_username," - ",P("friends.discoveries",n)]}),c.jsxs("p",{className:`text-sm ${e?"text-neutral-400":"text-neutral-600"}`,children:[R.length," ",R.length===1?P("friends.discovery",n):P("friends.discoveries",n)]})]}),c.jsx("button",{onClick:H,className:`p-2 rounded-lg ${e?"hover:bg-neutral-700":"hover:bg-heritage-200"} transition-colors`,children:c.jsx(Oe,{className:`w-6 h-6 ${e?"text-neutral-400":"text-neutral-600"}`})})]}),c.jsx("div",{className:"overflow-y-auto max-h-[calc(80vh-5rem)] p-6",children:I?c.jsx("div",{className:"flex justify-center items-center py-12",children:c.jsx(vr,{className:`w-8 h-8 animate-spin ${e?"text-heritage-400":"text-heritage-700"}`})}):R.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx(It,{className:`w-16 h-16 mx-auto mb-4 ${e?"text-neutral-600":"text-neutral-400"}`}),c.jsx("p",{className:`${e?"text-neutral-400":"text-neutral-600"}`,children:P("friends.noDiscoveriesYet",n)})]}):c.jsx("div",{className:"grid gap-3",children:R.map(O=>{var Y,ce;return c.jsx(Pt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:`${e?"bg-neutral-700":"bg-heritage-50"} rounded-lg p-4 border ${e?"border-neutral-600":"border-heritage-200"}`,children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:`p-2 rounded-lg ${e?"bg-heritage-900/50":"bg-heritage-200"}`,children:c.jsx(It,{className:`w-5 h-5 ${e?"text-heritage-400":"text-heritage-700"}`})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:`font-semibold ${e?"text-white":"text-neutral-900"}`,children:((Y=O.nodes)==null?void 0:Y.title)||"Unknown Location"}),c.jsx("p",{className:`text-sm ${e?"text-neutral-400":"text-neutral-600"}`,children:((ce=O.nodes)==null?void 0:ce.category)||"Uncategorized"}),c.jsx("p",{className:"text-xs mt-1 text-neutral-500",children:new Date(O.discovered_at).toLocaleDateString()})]})]})},O.id)})})})]})})})]})}function Go({children:t}){const e=mn(),{user:n,loading:r}=cn(),{isDark:i}=qn();return E.useState(!1),E.useEffect(()=>{!r&&!n&&K.fire({title:"Authentication Required",text:"You need to be logged in to access the map.",icon:"info",showCancelButton:!1,confirmButtonColor:"#6f4e35",cancelButtonColor:"#6b7280",confirmButtonText:"Go to Login",cancelButtonText:"Cancel",background:i?"#1f2937":"#ffffff",color:i?"#ffffff":"#000000"}).then(o=>{o.isConfirmed?e("/login"):e("/")})},[n,r,i]),r?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-neutral-50",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-16 h-16 border-4 border-heritage-700 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),c.jsx("p",{className:"text-neutral-600",children:"Loading..."})]})}):n?t:null}function bB(){return c.jsx(dR,{children:c.jsx(uR,{children:c.jsx(mN,{children:c.jsxs("div",{className:"min-h-screen bg-neutral-50 dark:bg-neutral-900",children:[c.jsx(uD,{}),c.jsxs(aN,{children:[c.jsx(On,{path:"/",element:c.jsx(iA,{})}),c.jsx(On,{path:"/map",element:c.jsx(Go,{children:c.jsx(KD,{})})}),c.jsx(On,{path:"/signup",element:c.jsx(JD,{})}),c.jsx(On,{path:"/login",element:c.jsx(XD,{})}),c.jsx(On,{path:"/reset-password",element:c.jsx(eB,{})}),c.jsx(On,{path:"/leaderboard",element:c.jsx(iB,{})}),c.jsx(On,{path:"/friends",element:c.jsx(Go,{children:c.jsx(_B,{})})}),c.jsx(On,{path:"/request-location",element:c.jsx(Go,{children:c.jsx(cB,{})})}),c.jsx(On,{path:"/profile",element:c.jsx(Go,{children:c.jsx(rB,{})})}),c.jsx(On,{path:"/admin",element:c.jsx(Go,{children:c.jsx(YD,{})})})]})]})})})})}Th.createRoot(document.getElementById("root")).render(c.jsx(nr.StrictMode,{children:c.jsx(bB,{})}));
